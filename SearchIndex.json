[{"id":0,"date":1664891090631,"url":"/posts/github/github-actions-prettier","title":"è®“ GitHub Actions ä¾†å¹«ä½  Prettier","summary":"\næˆ‘çš„å°ˆæ¡ˆåªè¦æœ‰é—œ js çš„ï¼Œæˆ‘éƒ½æœƒç”¨ prettier ä¾†è‡ªå‹•æ’ç‰ˆï¼Œå› ç‚º prettier èƒ½ç¢ºä¿å¤§å®¶çš„ç¨‹å¼ç¢¼é¢¨æ ¼ä¸€è‡´ã€‚ä½†æ˜¯ï¼Œæˆ‘å¸¸å¸¸æœƒæœ‰å¿˜è¨˜ prettier ä¸€ä¸‹å°±ç›´æ¥ push åˆ° GitHub ä¸Šï¼Œæˆ‘å°±æƒ³åˆ°èªªå¦‚æœ GitHub Actions å¯ä»¥å¹«å¿™æª¢æŸ¥ prettier æ‡‰è©²ä¹Ÿå¯ä»¥å°±ç›´æ¥å¹«å¿™ prettier å¾Œ push ä¸Šä¾†å§ã€‚ä»Šå¤©æˆ‘å°±æŠŠæˆ‘å¯«å¥½çš„ GitHub Actions è…³æœ¬è¨˜éŒ„ä¸€ä¸‹ã€‚\n\n","content":" æˆ‘çš„å°ˆæ¡ˆåªè¦æœ‰é—œ js çš„ï¼Œæˆ‘éƒ½æœƒç”¨ prettier ä¾†è‡ªå‹•æ’ç‰ˆï¼Œå› ç‚º prettier èƒ½ç¢ºä¿å¤§å®¶çš„ç¨‹å¼ç¢¼é¢¨æ ¼ä¸€è‡´ã€‚ä½†æ˜¯ï¼Œæˆ‘å¸¸å¸¸æœƒæœ‰å¿˜è¨˜ prettier ä¸€ä¸‹å°±ç›´æ¥ push åˆ° GitHub ä¸Šï¼Œæˆ‘å°±æƒ³åˆ°èªªå¦‚æœ GitHub Actions å¯ä»¥å¹«å¿™æª¢æŸ¥ prettier æ‡‰è©²ä¹Ÿå¯ä»¥å°±ç›´æ¥å¹«å¿™ prettier å¾Œ push ä¸Šä¾†å§ã€‚ä»Šå¤©æˆ‘å°±æŠŠæˆ‘å¯«å¥½çš„ GitHub Actions è…³æœ¬è¨˜éŒ„ä¸€ä¸‹ã€‚\n\n<!--more-->\n\n## æ€è·¯\n\næˆ‘æŠŠä»–åˆ†ç‚ºå…©å€‹ job ä¾†åšï¼š\n\n1. åŸ·è¡Œ prettier check\n2. å¦‚æœæ­¥é©Ÿ 1 å¤±æ•—ï¼ŒåŸ·è¡Œ prettier write ä¸¦ push\n\nå®Œæ•´çš„ yml æª”æˆ‘æ”¾åœ¨æœ€å¾Œé¢äº†ï¼Œæœ‰éœ€è¦çš„äººå¯ä»¥ç›´æ¥æ‹¿å»ç”¨ã€‚\n\n## Prettier Check\n\nåŸ·è¡Œ prettier check æ‡‰è©²æ˜¯å¾ˆç°¡å–®çš„æ­¥é©Ÿï¼Œè¨±å¤š GitHub ä¸Šçš„é–‹æºå°ˆæ¡ˆæ‡‰è©²éƒ½å¯«çš„å·®ä¸å¤šã€‚ç°¡å–®ä¾†èªªï¼Œå°±æ˜¯è¨­å®šå¥½ node å¾Œï¼Œç›´æ¥ run `npx prettier --check .`ï¼š\n\n```yml\njobs:\n  prettier-check:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n\n      - name: Setup Node\n        uses: actions/setup-node@v2\n        with:\n          node-version: \"14\"\n\n      - name: Run Prettier Check\n        run: |\n          npx prettier --check .\n```\n\n## Prettier Write\n\né€™æ­¥é©Ÿæ¯”è¼ƒæœƒé‡åˆ°å•é¡Œçš„éƒ¨åˆ†å°±æ˜¯è¦å¦‚ä½•åˆ¤æ–·ä¸Šä¸€æ­¥é©Ÿ prettier check åŸ·è¡Œå¤±æ•—ï¼Œæˆ‘ç¿»äº†ä¸€ä¸‹ GitHub Actions çš„æ–‡ä»¶ï¼Œç™¼ç¾å¯ä»¥ç”¨ if ä¾†æ±ºå®šä¸€å€‹ job è¦ä¸è¦åŸ·è¡Œï¼Œæ‰€ä»¥æˆ‘å€‘æœƒéœ€è¦ prettier check çš„åŸ·è¡Œçµæœï¼Œæ‰æ±ºå®šè¦ä¸è¦ prettie writeã€‚Actions æœ‰ä¸€å€‹ `needs` çš„é‚è¼¯ï¼Œå¯ä»¥ç”¨ä¾†ç­‰å¾…å¦ä¸€å€‹ job å®Œæˆï¼Œç„¶å¾Œä½¿ç”¨ä»–çš„åŸ·è¡Œçµæœã€‚æ‰€ä»¥ç›®å‰ç‚ºæ­¢ï¼Œå¯ä»¥å…ˆå¯«æˆä¸‹é¢é€™æ¨£ï¼š\n\n```yml\njobs:\n  prettier-write:\n    runs-on: ubuntu-latest\n    needs:\n      - prettier-check\n    if: always() && (needs.prettier-check.result == 'failure')\n```\n\næ¥ä¸‹ä¾†ä¾†å¯« prettier write å’Œ git pushï¼Œæˆ‘åœ¨é€™é‚Šé‡åˆ°çš„å•é¡Œæ˜¯ï¼Œå¦‚æœ git checkout çš„æ™‚å€™æ²’æœ‰çµ¦ Tokenï¼ŒGitHub é è¨­æœƒè®“ç”± Actions push çš„ Commit ä¸æœƒè§¸ç™¼ä»»çš„ Actionsï¼Œé€™ä¹Ÿä¸é›£ç†è§£ï¼Œæ€• Actions å½¼æ­¤å‘¼ç›¸ Callï¼Œç„¶å¾Œé€²åˆ°ç„¡é™å›åœˆåœä¸ä¸‹ä¾†ã€‚ä½†æˆ‘ä»Šå¤©é‚„æ˜¯å¸Œæœ›ä»– prettier å®Œå¾Œå¯ä»¥è§¸ç™¼ Build çš„ Actionsï¼Œæ‰€ä»¥æˆ‘å€‘å°±è¦åœ¨ git checkout çš„æ™‚å€™çµ¦ä»–è‡ªè¨‚çš„ Tokenï¼Œé€™æ¨£ç­‰ç­‰åœ¨ push çš„æ™‚å€™ï¼Œä¹Ÿæœƒå¹«æˆ‘å€‘ç”¨é€™å€‹ Token Pushã€‚\n\nå°±ä¸åœ¨å¦å¤–ä¸Šç¨‹å¼ç¢¼ï¼Œç›´æ¥å»ä¸‹æ–¹çœ‹å®Œæ•´é‚è¼¯å§ã€‚\n\n## å®Œæ•´çš„ GitHub Actions æª”\n\nçµåˆä¸Šé¢å…©å€‹æ­¥é©Ÿï¼š\n\n```yml\nname: prettier\n\non:\n  push:\n\njobs:\n  prettier-check:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          token: ${{ secrets.MY_GITHUB_TOKEN }}\n\n      - name: Setup Node\n        uses: actions/setup-node@v2\n        with:\n          node-version: \"14\"\n\n      - name: Run Prettier Check\n        run: |\n          npx prettier --check .\n  prettier-write:\n    runs-on: ubuntu-latest\n    needs:\n      - prettier-check\n    if: always() && (needs.prettier-check.result == 'failure')\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n        with:\n          token: ${{ secrets.MY_GITHUB_TOKEN }}\n\n      - name: Setup Node\n        uses: actions/setup-node@v2\n        with:\n          node-version: \"14\"\n\n      - name: Write Prettier\n        run: |\n          npx prettier --write .\n      - name: Commit and Push\n        uses: EndBug/add-and-commit@v9\n        with:\n          add: \".\"\n          message: \"Prettier\"\n          committer_name: TonyPepeBear\n          committer_email: tonybear55665566@gmail.com\n```\n\n## Reference\n\n- [GitHub Actions](https://docs.github.com/en/actions)\n","tags":["prettier","github","github-actions"]},{"id":1,"date":1661521490631,"url":"/posts/others/wikiwand-on safari","title":"Wikiwand on Safari","summary":"\nç¶­åŸºç™¾ç§‘æ˜¯å¤§å®¶çš„å¥½æœ‹å‹ï¼Œä½†ä»–çš„ç¶²é æ’ç‰ˆæ„Ÿè¦ºå·²ç¶“å¹¾åå¹´æ²’æœ‰æ›´æ–°éï¼Œé–±è®€èµ·ä¾†æœ‰é»ä¸æ–¹ä¾¿ï¼Œè€Œ Wikiwand å°±æ˜¯ä¾†å¹«åŠ©ç¶­åŸºç™¾ç§‘æ’ç‰ˆæˆæ›´å®¹æ˜“é–±è®€çš„å½¢å¼ï¼Œåœ¨ Google Chrome ä¸Šæœ‰å®˜æ–¹çš„æ“´å……åŠŸèƒ½å¯ä»¥å°‡ Wiki çš„ç¶²å€ç›´æ¥é‡æ–°å°å‘åˆ° Wikiwandï¼Œè€Œ Safari å¥½åƒæ˜¯å› ç‚º Apple åš´æ ¼çš„æ¢ä»¶æ‰€ä»¥æ²’æœ‰æ“´å……åŠŸèƒ½ï¼Œä½†æˆ‘ä»Šå¤©ç™¼ç¾çš„ä¸€å€‹æŠ€å·§å¯ä»¥å”åŠ©å°‡ç¶²é ç›´æ¥é‡æ–°å°å‘åˆ° Wikiwandã€‚\n\n","content":" ç¶­åŸºç™¾ç§‘æ˜¯å¤§å®¶çš„å¥½æœ‹å‹ï¼Œä½†ä»–çš„ç¶²é æ’ç‰ˆæ„Ÿè¦ºå·²ç¶“å¹¾åå¹´æ²’æœ‰æ›´æ–°éï¼Œé–±è®€èµ·ä¾†æœ‰é»ä¸æ–¹ä¾¿ï¼Œè€Œ Wikiwand å°±æ˜¯ä¾†å¹«åŠ©ç¶­åŸºç™¾ç§‘æ’ç‰ˆæˆæ›´å®¹æ˜“é–±è®€çš„å½¢å¼ï¼Œåœ¨ Google Chrome ä¸Šæœ‰å®˜æ–¹çš„æ“´å……åŠŸèƒ½å¯ä»¥å°‡ Wiki çš„ç¶²å€ç›´æ¥é‡æ–°å°å‘åˆ° Wikiwandï¼Œè€Œ Safari å¥½åƒæ˜¯å› ç‚º Apple åš´æ ¼çš„æ¢ä»¶æ‰€ä»¥æ²’æœ‰æ“´å……åŠŸèƒ½ï¼Œä½†æˆ‘ä»Šå¤©ç™¼ç¾çš„ä¸€å€‹æŠ€å·§å¯ä»¥å”åŠ©å°‡ç¶²é ç›´æ¥é‡æ–°å°å‘åˆ° Wikiwandã€‚\n\n<!--more-->\n\n## Wikiwand æ¯”è¼ƒ\n\nåŸç‰ˆç¶­åŸºï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0a6c340c-becb-4748-a9d3-949a48241600/public)\n\nWikiwand:\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6023546f-67b9-4524-df91-33bc53f34f00/public)\n\n## åˆ©ç”¨ AdGuard\n\né€™å€‹æŠ€å·§æ˜¯åˆ©ç”¨å»£å‘Šéæ¿¾å™¨ä¾†å”åŠ©ç¶²é é‡æ–°å°å‘ï¼Œè€Œæˆ‘æ˜¯ç”¨ AdGuard ä¾†å¹«åŠ©æˆ‘å€‘å®Œæˆï¼Œæˆ‘ä¹Ÿåªåœ¨ AdGuard ä¸Šç”¨éï¼Œå…¶ä»–å»£å‘Šéæ¿¾å™¨æˆ‘å°±ä¸çŸ¥é“å¯ä¸å¯ä»¥åˆ©ç”¨é€™å€‹æŠ€å·§äº†ã€‚å¦‚éæ²’æœ‰ AdGuard çš„è©±ï¼Œä¹Ÿå¯ä»¥å»ä¸‹è¼‰è©¦ç”¨çœ‹çœ‹ï¼Œè‡ªå·±ç”¨äº†å¾ˆä¹…è¦ºå¾—é‚„ä¸éŒ¯ã€‚\n\næ•´å€‹éç¨‹åªéœ€è¦ä¸€æ­¥\n\nåœ¨ AdGuard çš„è¨­å®šä¸­ï¼Œåœ¨éæ¿¾å™¨é¸é …ä¸­æ–°å¢ä½¿ç”¨è€…è‡ªè¨‚çš„éæ¿¾å™¨ï¼š\n\n```js\n@@||wikipedia.org^$generichide,badfilter\nwikipedia.org#%#if (window.location.search === \"\") { var lang = window.location.hostname.split('.')[0]; var article = window.location.pathname.split('/')[2]; window.location.href = \"http://www.wikiwand.com/\" + lang + \"/\" + article; }\n```\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/4296f199-0bb2-4c34-922f-b45a5c280100/public)\n\nå¤§åŠŸå‘Šæˆ\n\n## Reference\n\n- [Wikiwand on Safari](http://sebastiangrans.github.io/Wikiwand-on-Safari-13/)\n","tags":["wiki","wikiwand","adguard"]},{"id":2,"date":1660225452703,"url":"/posts/git/amend","title":"Git Amend Commit","summary":"\nAmend Commit å°±æ˜¯ç”¨ä¾†ä¿®æ”¹æœ€æ–° Commit çš„æŒ‡ä»¤ï¼Œå¦‚æœè¦ä¿®æ”¹æ›´ä¹‹å‰çš„ Commitï¼Œå°±è¦ç”¨ Rebase æˆ–æ˜¯ Reset äº†ã€‚\n\n","content":" Amend Commit å°±æ˜¯ç”¨ä¾†ä¿®æ”¹æœ€æ–° Commit çš„æŒ‡ä»¤ï¼Œå¦‚æœè¦ä¿®æ”¹æ›´ä¹‹å‰çš„ Commitï¼Œå°±è¦ç”¨ Rebase æˆ–æ˜¯ Reset äº†ã€‚\n\n<!--more-->\n\n## ä¿®æ”¹ Commit Message\n\nå¦‚æœæœ€æ–°çš„ Commit Message äº‚å¯«æˆ–æ˜¯å¯«çš„ä»€éº¼ä¸è©²å¯«çš„ï¼Œå°±å¯ä»¥ç”¨ Amend Commit ä¾†ä¿®æ”¹ã€‚\n\n```bash\ngit commit --amend -m \"æ–°çš„ Commit Message\"\n```\n\n## å£“é€²å‰ä¸€æ¬¡ Commit\n\næˆ‘å¸¸å¸¸æœƒå…ˆå°‡ç›®å‰çš„ä¿®æ”¹çµ¦ Commit ä¸€ä¸‹ç•¶ä½œå­˜æª”ï¼Œä½†å¦‚æœæ¯æ¬¡éƒ½åªæœ‰å°ä¿®æ”¹å°± Commit ä¸€æ¬¡ä¹Ÿæœƒé€ æˆ Commit éå¸¸å¤šï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥åœ¨ Commit çš„æ™‚å€™ç”¨ Amend Commit å£“é€²å‰ä¸€æ¬¡ Commitï¼Œæˆ–æ˜¯æƒ³åƒæˆä¿®æ”¹ä¸Šä¸€æ¬¡çš„ Commit æŠŠé€™æ¬¡çš„ä¿®æ”¹çµ¦åŠ é€²å»ã€‚\n\n```bash\ngit add .\ngit commit --amend\n```\n","tags":["git","amend","commit"]},{"id":3,"date":1658065179000,"url":"/posts/android/s7-poekmon root","title":"S7 åˆ· Android 11 + Pokemon Go é£›äººç°¡å–®ç´€éŒ„","summary":"\nä»Šå¤©æŠŠä¸€å°å¤è€çš„ Samsung Galaxy S7 å¾ Android 6M åˆ·ä¸Š Android 11Rï¼Œä½¿ç”¨ Pixle Experience ROMï¼Œä¸¦å®‰è£ Magisk å’Œ GPS JoyStick ä¾†ç© Pokemon Goã€‚éç¨‹ä¸é›£ï¼Œä¸€æ­¥æ­¥åšå°±ä¸æœƒå‡ºéŒ¯ï¼Œå¾ Andoird 6 å‡åˆ° 11 ä¹Ÿæ²’æœ‰æ—©æˆæ‰‹æ©Ÿæœ‰æ˜é¡¯å¡é “ï¼Œä½©æœä½œè€…ã€‚\n\n","content":" ä»Šå¤©æŠŠä¸€å°å¤è€çš„ Samsung Galaxy S7 å¾ Android 6M åˆ·ä¸Š Android 11Rï¼Œä½¿ç”¨ Pixle Experience ROMï¼Œä¸¦å®‰è£ Magisk å’Œ GPS JoyStick ä¾†ç© Pokemon Goã€‚éç¨‹ä¸é›£ï¼Œä¸€æ­¥æ­¥åšå°±ä¸æœƒå‡ºéŒ¯ï¼Œå¾ Andoird 6 å‡åˆ° 11 ä¹Ÿæ²’æœ‰æ—©æˆæ‰‹æ©Ÿæœ‰æ˜é¡¯å¡é “ï¼Œä½©æœä½œè€…ã€‚\n\n<!--more-->\n\né€™æ¬¡çš„å‹•æ©Ÿä¸»è¦æ˜¯ Pokemon Go æœ€è¿‘é–‹å§‹ä¸æ”¯æ´ Android 6 ä»¥ä¸‹çš„è£ç½®éŠç©ï¼Œåªå¥½å‡ç´šåŸæœ¬çš„è£ç½®ã€‚\n\n## æ­¥é©Ÿæ¦‚è¦½\n\n1. åˆ·å…¥ TWRP\n2. åˆ·å…¥ Pixle Experience\n3. å®‰è£ Magisk\n4. å®‰è£ SmaliPatcher\n5. å®‰è£ SafetyNet Fix\n6. å®‰è£ä¸¦è¨­å®š GPS JoyStick\n7. ç©\n\næ‰‹æ©Ÿæ‡‰è©²ä¸ä¸€å®šè¦æ˜¯ S7 ä¹Ÿå¯ä»¥ç…§è‘—é€™äº›æ€è·¯å®Œæˆã€‚\n\n## æ‰‹æ©Ÿäº‹å‰æº–å‚™\n\né–‹å•Ÿ USB åµéŒ¯å’Œ OEM è§£é–ã€‚\n\nçœ‹å®Œæœ¬æ–‡ï¼Œä¸¦å¯ä»¥å…ˆæŠŠæœƒç”¨åˆ°çš„æ±è¥¿éƒ½ä¸‹è¼‰ä¸‹ä¾†ã€‚\n\n## åˆ·å…¥ TWRP\n\n1. é€²å…¥ Download Mode\n2. ç”¨ Odin å¯«å…¥ TWRP Recovery\n3. é€²å…¥ TWRP\n\nä¸‹è¼‰æœ€æ–°çš„ Odin ç‰ˆæœ¬ (ç›®å‰æ˜¯ 3.13.1)ï¼Œ[Odin å®˜ç¶²](https://odindownload.com/)\n\nä¸‹è¼‰ [TWRP for Samsung Galaxy S7](https://twrp.me/samsung/samsunggalaxys7.html) (ç›®å‰æ˜¯ 3.6.2)ã€‚\n\nå°‡æ‰‹æ©Ÿé€£ä¸Šé›»è…¦ï¼Œä¸¦é—œæ©Ÿå¾Œé€²å…¥ Download Mode (POWER + VOL DOWN + HOME)ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/4d367c79-5c09-4118-6b49-f09f918b8600/public)\n\né–‹å•Ÿ Odin ä¸¦é» AP é¸æ“‡åˆ·å…¥ TWRP æª”æ¡ˆï¼Œé—œé–‰ Auto Reboot å¾Œ Startï¼Œæ‡‰è©²åªè¦å¹¾ç§’å°±æœƒå®Œæˆã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/dacd3ce6-e43e-490d-0a1f-4f6b430e7800/public)\n\nå¼·åˆ¶é—œæ©Ÿ (POWER + VOL DOWN + HOME) è¢å¹•é»‘æ‰å¾Œé¦¬ä¸ŠæŠŠéŸ³é‡éµä¸‹æ›æˆéŸ³é‡éµä¸Š (POWER + VOL UP + HOME) é€²å…¥ Recovery Modeï¼Œå¦‚æœåˆ°ç›®å‰ç‚ºæ­¢éƒ½æˆåŠŸçš„è©±æ‡‰è©²å°±æœƒçœ‹åˆ° TWRP çš„ä»‹é¢ã€‚\n\n## åˆ·å…¥ Pixle Experience ROM\n\nä¸‹è¼‰ [Galaxy S7 Pixle Experience](https://download.pixelexperience.org/herolte)ï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ (20210923-1530)ã€‚\n\né€²å…¥ TWRP å…ˆ Wipe å››å€‹åˆ†å€ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/eed93d6e-153c-43d5-eac0-7eceeee50b00/public)\n\nå¦‚æœ Wipe å¤±æ•—ä¸”æ˜¯å› ç‚ºæ²’è¾¦æ³• mount dataï¼Œå¯ä»¥åƒè€ƒ[é€™ç¯‡æ–‡ç« ](https://forum.xda-developers.com/t/how-to-fix-unable-to-mount-data-internal-storage-0mb-in-twrp-permanently.3830897/)ã€‚\n\næ¥ä¸‹ä¾†å¯ä»¥é¸æ“‡å…ˆå°‡ ROM æ”¾å…¥ SD å¡ï¼Œæˆ–æ˜¯ç›´æ¥ç”¨ adb å‘½ä»¤åˆ· (é›»è…¦ç•¶ç„¶è¦è£å¥½ adbï¼Œæœ€å¿«çš„æ–¹æ³•é‚„æ˜¯ç”¨ Chocolatey)ï¼Œæˆ‘è‡ªå·±æ˜¯ç›´æ¥ç”¨ adb çš„å‘½ä»¤åˆ·ã€‚åœ¨ TWRP ä¸»ç•«é¢é¸ Advancedï¼Œç„¶å¾Œä½¿ç”¨ ADB Sideloadã€‚\n\né–‹å•Ÿé›»è…¦ Terminalï¼Œcd åˆ°æ”¾å‰›å‰›ä¸‹è¼‰çš„ ROM çš„ç›®éŒ„ï¼Œä¸¦è¼¸å…¥ä»¥ä¸‹å‘½ä»¤ (æª”åè¨˜å¾—æ›¿æ›è‡ªå·±çš„)ï¼š\n\n```sh\nadb sideload .\\PixelExperience_herolte-11.0-20210923-1530-OFFICIAL.zip\n```\n\né€™å€‹æœƒæ˜¯å…¨éƒ¨è€—è²»æœ€ä¹…çš„æ­¥é©Ÿï¼Œè¦æœ‰è€å¿ƒåœ°ç­‰ä¹…ä¸€é»ã€‚\n\nå®Œæˆå¾Œ Reboot æ²’å•é¡Œçš„è©±ï¼Œç­‰ä¸€å…©åˆ†é˜ (å®˜æ–¹å¥½åƒæ˜¯èªª 15 åˆ†é˜å…§ï¼Œä½†æˆ‘æ²’é‡åˆ°é‚£éº¼ä¹…) æ‡‰è©²å°±å¯ä»¥é€²å…¥åˆ°ç³»çµ±ã€‚é€²å…¥åˆ°ç³»çµ±å¾Œå¯ä»¥å…ˆåšä¸€äº›æ‰‹æ©Ÿçš„åˆå§‹åŒ–ï¼Œç¢ºå®šæ‰‹æ©Ÿä½¿ç”¨ä¸Šæ²’ç”šéº¼å¤§å•é¡Œå¾Œï¼Œå¯ä»¥å…ˆåˆ° Google Play ä¸‹è¼‰ Pokemon Go å†ç¹¼çºŒã€‚\n\n## å®‰è£ Magisk\n\n[Magisk](https://magiskmanager.com/) æ˜¯æ‰€æœ‰ Root ç©å®¶æ‡‰è©²éƒ½æœƒç”¨åˆ°çš„å¥½æ±è¥¿ï¼Œæ‡‰è©²ä¹Ÿæ˜¯ä¸‹è¼‰æœ€æ–°ç‰ˆå°±å¯ä»¥(ç›®å‰æ˜¯ 25.1)ã€‚ä¸‹è¼‰å¾Œè¦å°‡å‰¯æª”åæ”¹æˆ zipã€‚å¯ä»¥ç”¨æ‰‹æ©Ÿç›´æ¥ä¸‹è¼‰ï¼Œæˆ–æ˜¯ç”¨é›»è…¦ä¸‹è¼‰å¾Œç”¨ adb å‘½ä»¤ push åˆ°æ‰‹æ©Ÿä¸­ï¼Œæˆ‘é‚„æ˜¯é¸æ“‡ç”¨ adbï¼ŒæŒ‡ä»¤å¦‚ä¸‹ã€‚ï¼š\n\n```sh\nadb push magisk.zip /sdcard/Download\n```\n\né—œæ©Ÿå¾Œå†æ¬¡é€²å…¥ TWRPï¼Œé€™æ¬¡é¸æ“‡ Installï¼Œä¸¦å®‰è£å‰›å‰› push åˆ°æ‰‹æ©Ÿä¸­çš„ Magisk.zipã€‚å®‰è£å¾Œé‡é–‹æ©Ÿï¼Œå†é–‹å•Ÿ Magisk App å®Œæˆå®‰è£ã€‚\n\nå®‰è£å®Œæˆ Magisk å¾Œï¼Œé€²å…¥ Magisk å³ä¸Šè§’çš„è¨­å®šï¼Œé¸æ“‡éš±è— Magiskï¼Œå–ä¸€å€‹è‡ªå·±å–œæ­¡çš„åå­—ï¼Œé¿å…è¢« Pokemon Go åµæ¸¬åˆ° Magisk çš„å­˜åœ¨ã€‚\n\næœ€å¾Œé–‹å•Ÿå…©å€‹é¸é …ï¼šZygiskã€å¼·åˆ¶é»‘åå–®ï¼Œé–‹å•Ÿé€™å…©å€‹é¸é …å¾Œï¼Œéœ€è¦å†æ¬¡é‡é–‹æ©Ÿï¼Œä¸¦åœ¨**è¨­å®šé»‘åå–®é¸é …**ä¸­æŠŠ Pokemon Go (Pokemon Go App å¥½åƒæœ‰å…©å€‹ Package name è¨˜å¾—éƒ½è¦å‹¾) é¸æ“‡èµ·ä¾†ã€‚\n\n## å®‰è£ SmaliPatcher å’Œ SafetyNet Fix\n\nSmaliPatcher æ˜¯ç‚ºäº†è®“ Pokemon Go åµæ¸¬ä¸åˆ°æ‰‹æ©Ÿæ˜¯ç”¨æ¨¡æ“¬çš„ä½ç½®ï¼ŒSafetyNet å¥½åƒæ˜¯è®“ Pokemon Go åµæ¸¬ä¸åˆ°æœ‰ Root (é€™æˆ‘ä¸æ˜¯å¾ˆç¢ºå®šï¼Œæˆ‘åªçŸ¥é“ä¸è£é€²ä¸äº†éŠæˆ²)\n\nç¹¼çºŒå°‡æ‰‹æ©Ÿé€£æ©Ÿåˆ°é›»è…¦ï¼Œç”¨é»è…¦ä¸‹è¼‰ [SamliPatcher](https://forum.xda-developers.com/t/module-smali-patcher-7-4.3680053/)(ç›®å‰æœ€æ–°æ˜¯ 0.0.7.4)ï¼Œè§£å£“ç¸®å¾Œæ˜¯å€‹åŸ·è¡Œæª”ï¼Œç”¨ç³»çµ±ç®¡ç†å“¡çš„èº«åˆ†åŸ·è¡Œï¼Œä¸¦å‹¾å¦‚åœ–çš„é¸é … (æˆ‘æ˜¯å‹¾äº†é€™ä¸‰å€‹ï¼Œä½†è½èªªå¥½åƒåªå‹¾ç¬¬ä¸€å€‹ä¹Ÿå¯ä»¥)ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/5678afd4-b35f-4d1b-94ec-f12496862700/public)\n\nç¢ºå®šæ‰‹æ©Ÿé€£æ¥åˆ°é›»è…¦å¾ŒæŒ‰ä¸‹ ADD PATCHï¼Œé€™æœƒéœ€è¦è·‘ä¸€é™£å­ï¼Œä¹Ÿéœ€è¦æœ‰é»å…§å¿ƒçš„ç­‰å€™ï¼Œå®Œæˆæœƒåœ¨åŸ·è¡Œæª”çš„ç›®éŒ„æ‹¿åˆ°ä¸€å€‹æª”åé¡ä¼¼ SmaliPatcherModule çš„å£“ç¸®æª”ï¼Œä¸€æ¨£å¯ä»¥ç”¨å‰›å‰›çš„ adb å‘½ä»¤ push åˆ°æ‰‹æ©Ÿä¸­ï¼Œæœ€å¾Œç”¨ Magisk å®‰è£é€™å€‹æ¨¡çµ„å¾Œé‡é–‹æ©Ÿå³å¯ã€‚\n\n> SmaliPatcher æˆªè‡³ç›®å‰æ˜¯ä¸æ”¯æ´ Android 12 çš„ï¼Œæˆ‘å› ç‚ºé€™å€‹å‘å¡äº†æ•´å€‹ä¸‹åˆï¼ŒPokemon Go éƒ½æœƒåµæ¸¬åˆ°æ¨¡æ“¬ä½ç½®\n\næœ€å¾Œä¸€å€‹è¦å®‰è£çš„æ±è¥¿ï¼Œ[SafetyNet Fix](https://github.com/kdrag0n/safetynet-fix/releases) (ç›®å‰ç‰ˆæœ¬æ˜¯ 2.3.1)ï¼Œå¯ç”¨å‰›å‰›çš„æ–¹å¼åœ¨é›»è…¦ä¸‹è¼‰ zip å¾Œ push åˆ°æ‰‹æ©Ÿï¼Œæˆ–æ˜¯ç›´æ¥åœ¨æ‰‹æ©Ÿä¸‹è¼‰ï¼Œç„¶å¾Œé‚„æ˜¯ç”¨ Magisk å®‰è£æ¨¡çµ„é‡é–‹æ©Ÿå³å¯ã€‚\n\n## è¨­å®š GPS JoyStick\n\nä¸è¦å¾ Google Play ä¸‹è¼‰ GPS JoyStickï¼Œåˆ°ä»–çš„[å®˜ç¶²](http://gpsjoystick.theappninjas.com/)ä¸‹è¼‰ Unlock Version (æœ€æ–°ç‰ˆæœ¬æ˜¯ 4.3.2)ã€‚\n\né–‹å•Ÿ GPS JoyStick æœƒçœ‹åˆ°ä¸€å€‹éš±ç§æ¨¡å¼ï¼Œé€™ä¹Ÿæ˜¯ç‚ºäº†é¿å…è¢« Pokemon Go åµæ¸¬åˆ°é€™å€‹ App çš„å­˜åœ¨ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯è‡ªå·±é–‹å¿ƒå–å€‹åå­—é‡æ–°å®‰è£ã€‚\n\nåˆ°è¨­å®šä¸­é—œé–‰ `å•Ÿç”¨é–“æ¥æ¨¡æ“¬`ï¼Œé€™é¸é …é è¨­æ˜¯é–‹å•Ÿçš„ï¼Œä¸€å®šè¦æŠŠå®ƒé—œé–‰ã€‚ç„¶å¾Œåˆ°é–‹ç™¼äººå“¡é¸é …ä¸­æŠŠæ¨¡æ“¬ä½ç½®çš„é¸é …è¨­å®šæˆè‡ªå·±çš„ JoyStick åå­—ã€‚\n\n## é–‹å•Ÿ Pokemon Go\n\nç„¡é ˆè¨­å®šï¼Œå¤§åŠŸå‘Šæˆ\n\n## Reference\n\n- [Galaxy S7 Pixle Experience](https://download.pixelexperience.org/herolte)\n- [Odin](https://odindownload.com/)\n- [TWRP for Samsung Galaxy S7](https://twrp.me/samsung/samsunggalaxys7.html)\n- [Magisk](https://magiskmanager.com/)\n- [SamliPatcher](https://forum.xda-developers.com/t/module-smali-patcher-7-4.3680053/)\n- [GPS JoyStick](http://gpsjoystick.theappninjas.com/)\n","tags":["android","samsung","s7","twrp","pokemon","joystick","gps","pixle","magisk","odin"]},{"id":4,"date":1657257880177,"url":"/posts/blog/20220708-review","title":"æœ¬ç«™ 2022/7/8 æˆæ•ˆç´€éŒ„","summary":"\nç´€éŒ„ä¸€ä¸‹ç¶²ç«™æˆæ•ˆ\n\n","content":" ç´€éŒ„ä¸€ä¸‹ç¶²ç«™æˆæ•ˆ\n\n<!--more-->\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/7e18d41e-67cc-45cb-92fc-2e1373ba2a00/public)\n\nå…©ç¯‡æˆæ•ˆæ„å¤–å¥½çš„å‘\n\n> å»¢æ–‡æ²’éŒ¯\n\n## Reference\n\n- [Google Search Console](https://search.google.com/)\n","tags":["blog","gatsby","google","search"]},{"id":5,"date":1655802949000,"url":"/posts/web/cf-workers-short-url","title":"ç”¨ Cloudflare Workers æ¶è¨­ Serverless çŸ­ç¶²å€æœå‹™","summary":"\nCloudflare Workers ä¹Ÿæ˜¯ Cloudflare çš„ä½›å¿ƒæœå‹™ä¹‹ä¸€ï¼Œå¯ä»¥æŠŠ node ç¨‹å¼éƒ¨ç½²åˆ° Cloudflare ä¸Šçš„çœ¾å¤šç¯€é»ï¼Œæ•ˆèƒ½ä¹Ÿä¸ä¿—ï¼Œæ¯å¤©é‚„æœ‰ 100,000 æ¬¡çš„å…è²»å‘¼å«ï¼Œä¹Ÿæ²’æœ‰å†·å•Ÿå‹•çš„å•é¡Œï¼Œå°æµé‡ä¸é«˜çš„ç¶²é ä¾†èªªå®Œå…¨å¤ ç”¨ã€‚å¦å¤–ï¼Œé‚„æœ‰ Workers KV å¯ä»¥ç”¨ä¾†å„²å­˜è³‡æ–™ï¼Œé€™å°±å¯ä»¥å¯«å‡ºç°¡å–®çš„å‹•æ…‹ç¶²é ï¼Œç”šè‡³æ˜¯ä¸€äº›æ›´è¤‡é›œçš„æ‡‰ç”¨ã€‚ä»Šå¤©å°±ä¾†å¯«ä¸€å€‹ Serverless çš„çŸ­ç¶²å€æœå‹™ï¼Œä¸¦æŠŠè³‡æ–™å­˜åœ¨ KV ä¸­ï¼Œå°±æˆ‘ç›®å‰è‡ªå·±æ¸¬è©¦ä¸‹ä¾†ï¼ŒWorkers çš„æ•ˆç‡çœŸçš„æ²’è©±èªªã€‚\n\n","content":" Cloudflare Workers ä¹Ÿæ˜¯ Cloudflare çš„ä½›å¿ƒæœå‹™ä¹‹ä¸€ï¼Œå¯ä»¥æŠŠ node ç¨‹å¼éƒ¨ç½²åˆ° Cloudflare ä¸Šçš„çœ¾å¤šç¯€é»ï¼Œæ•ˆèƒ½ä¹Ÿä¸ä¿—ï¼Œæ¯å¤©é‚„æœ‰ 100,000 æ¬¡çš„å…è²»å‘¼å«ï¼Œä¹Ÿæ²’æœ‰å†·å•Ÿå‹•çš„å•é¡Œï¼Œå°æµé‡ä¸é«˜çš„ç¶²é ä¾†èªªå®Œå…¨å¤ ç”¨ã€‚å¦å¤–ï¼Œé‚„æœ‰ Workers KV å¯ä»¥ç”¨ä¾†å„²å­˜è³‡æ–™ï¼Œé€™å°±å¯ä»¥å¯«å‡ºç°¡å–®çš„å‹•æ…‹ç¶²é ï¼Œç”šè‡³æ˜¯ä¸€äº›æ›´è¤‡é›œçš„æ‡‰ç”¨ã€‚ä»Šå¤©å°±ä¾†å¯«ä¸€å€‹ Serverless çš„çŸ­ç¶²å€æœå‹™ï¼Œä¸¦æŠŠè³‡æ–™å­˜åœ¨ KV ä¸­ï¼Œå°±æˆ‘ç›®å‰è‡ªå·±æ¸¬è©¦ä¸‹ä¾†ï¼ŒWorkers çš„æ•ˆç‡çœŸçš„æ²’è©±èªªã€‚\n\n<!--more-->\n\n## Workers Playground\n\nå¦‚æœæƒ³è¦åœ¨ç¶²é ä¸­å…ˆè©¦è©¦çœ‹ Workersï¼Œå¯ä»¥åˆ° [Cloudflare Workers](https://cloudflareworkers.com/) é€™å€‹ç¶²ç«™ã€‚\n\næœƒæœ‰ä¸€å€‹é è¨­çš„æ¨¡æ¿é•·é€™æ¨£ï¼š\n\n```js\naddEventListener(\"fetch\", (event) => {\n  event.respondWith(handleRequest(event.request));\n});\n\n/**\n * Fetch and log a given request object\n * @param {Request} request\n */\nasync function handleRequest(request) {\n  console.log(\"Got request\", request);\n  const response = await fetch(request);\n  console.log(\"Got response\", response);\n  return response;\n}\n```\n\nè®“æˆ‘å€‘å…ˆä¾†ç†è§£ä¸€ä¸‹ç¨‹å¼ç¢¼ã€‚\n\nå¯ä»¥çœ‹åˆ°ç¨‹å¼æœ‰å…©å€‹ functionï¼Œå…¶ä¸­ `addEventListener(...)` å°±æ˜¯ç¨‹å¼çš„å…¥å£ï¼Œç•¶ Workers æ”¶åˆ° Request ä¹‹å¾Œï¼Œå°±æœƒå‚³å…¥ä½ çµ¦ä»–çš„ functionï¼Œç„¶å¾Œå†æ±ºå®šè¦ç”¨ä»€éº¼ Response å›å‚³åˆ° Clientï¼Œé€™è£¡ä»–å¯«äº†ä¸€å€‹ `handleRequest` çš„ function ä¾†è™•ç†ã€‚æ‰€ä»¥é€™å€‹ç¨‹å¼ç¢¼å¯¦éš›ä¸Šåšçš„äº‹ï¼Œå°±åªæœ‰æŠŠ Request å’Œ Response çµ¦ log å‡ºä¾†ï¼Œå›å‚³åŸæœ¬çš„ç¶²é çš„æ¨£å­ä¸åšä»»ä½•æ›´å‹•ã€‚\n\nä¸‹åœ–æ˜¯ Workers åœ¨ Cloudflare ä¸Šçš„é‹è¡Œé †åºï¼Œå¯ä»¥çœ‹åˆ° Workers è¢«æ”¾åœ¨æœ€å¾Œä¸€å€‹ï¼Œä¹Ÿå°±æ˜¯æœ€å¾Œä¸€å€‹æ±ºå®šè¦å›å‚³ä»€éº¼å…§å®¹çµ¦ User çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥ç†è§£ç‚ºå¯ä»¥åœ¨é€™è£¡å°åŸæœ¬çš„ Response åšæœ€å¾Œçš„æ›´å‹•ï¼Œå†å›å‚³çµ¦ Clientã€‚\n\næ‰€ä»¥é€™å€‹ Playground ä¸Šå¯ä»¥è¼¸å…¥ä»»æ„çš„ URLï¼Œä¾†é è¦½ä½ çš„ Workers åœ¨ä»»ä½•ä¸€å€‹ç¶²ç«™ä¸Šï¼Œæœƒå° Response åšçš„æ›´å‹•ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/32bd1508-ba78-4e94-76a0-adec503fe000/public)\n\nä¹Ÿå°±æ˜¯èªªå¦‚æœæŠŠç¨‹å¼æ”¹æˆä¸‹é¢é€™æ¨£ï¼Œå°±å¯ä»¥ç™¼ç¾ä»»æ„ç¶²ç«™éƒ½æœƒè®Šæˆ Google çš„æ¨¡æ¨£ã€‚\n\n```js\naddEventListener(\"fetch\", (event) => {\n  event.respondWith(handleRequest(event.request));\n});\n\nasync function handleRequest(request) {\n  const response = await fetch(\"https://google.com\");\n  return response;\n}\n```\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d7409a8b-8203-4e23-6491-309a4cc5b500/public)\n\nç†è§£å¾Œå°±æœƒç™¼ç¾ï¼Œå…¶å¯¦ Workers å¯ä»¥å°ç¶²é æœ‰å³æ™‚æ€§çš„æ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯èªªå¯ä»¥å°ç¾æœ‰çš„ç¶²é åŠ ä¸Šæ–°åŠŸèƒ½ï¼Œæˆ–æ˜¯åœ¨ä¸æ›´å‹•åŸæœ¬ç¶²é çš„æƒ…æ³ä¸‹å»ä¿® bugã€‚\n\n## Wrangler\n\nWrangler æ˜¯ç®¡ç† Workers æœƒç”¨åˆ°çš„ cli å·¥å…·ï¼Œé›–ç„¶ä¸å®‰è£ä¹Ÿæ˜¯å¯ä»¥åœ¨ç¶²é ä¸­æ’°å¯« Workers ï¼Œä½†æ˜¯åŠŸèƒ½å°±æœƒå°‘å¾ˆå¤šï¼Œæ‰€ä»¥é‚„æ˜¯å»ºè­°å®‰è£ä¸€ä¸‹ã€‚é€™è£¡æ˜¯å®˜æ–¹çš„ Repo [cloudflare/wrangler2](https://github.com/cloudflare/wrangler2)ã€‚\n\nç”¨ npm å®‰è£åˆ° Globalï¼š\n\n```bash\nnpm i @cloudflare/wrangler -g\n```\n\né‚„æ˜¯å»ºè­°å»å®˜æ–¹ Repo çœ‹ä¸‹æœ‰æ²’æœ‰å…¶ä»–æ³¨æ„äº‹é …\n\nå®‰è£å®Œæˆå¾Œè¦ç™»å…¥ Cloudflare å¸³è™Ÿï¼Œ`wrangler login`ï¼Œå†ç”¨ç€è¦½å™¨ç™»å…¥å³å¯ã€‚\n\n## Init Project\n\n`wrangler init <project-name>` å‰µå»ºæ–°çš„å°ˆæ¡ˆï¼Œé€™ç•¶ä¸­ Wrangler æœƒå•ä¸€äº›å•é¡Œï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚æ±ºå®šã€‚\n\ninit å®Œæˆå¾Œï¼Œå¯ä»¥çœ‹åˆ°è‡ªå‹•ç”¢ç”Ÿäº†ä¸€äº›æª”æ¡ˆï¼ŒåŸºæœ¬ä¸Šæœƒç”¨åˆ°çš„åªæœ‰ `wrangler.toml` å’Œ `index.js` å…©å€‹æª”æ¡ˆã€‚\n\nç¾åœ¨å¯ä»¥å…ˆåœ¨ Terminal ä¸­è¼¸å…¥ `wrangler dev`ï¼Œå°±å¯ä»¥è®“ Workers è·‘åœ¨æœ¬åœ°ã€‚\n\n### Bug\n\nå› ç‚ºæˆ‘çš„ Cloudflare ä¸€æ¬¡ç™»å…¥å¤šå€‹ Userï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ wrangler çš„ **2.0.14** æ™‚å€™æœƒå‡º bug ç›´æ¥é–ƒé€€ï¼Œæˆ‘è§£æ±ºçš„æ–¹å¼æ˜¯ç›´æ¥åœ¨ `wrangler.toml` ä¸­è¼¸å…¥ `account_id` ä¾†é¿å… wrangler æœƒéœ€è¦é¸æ“‡å¸³è™Ÿçš„å•é¡Œã€‚\n\n```toml\naccount_id = \"xxxxxxxxxxxxxxx\"\n```\n\n## Cloudflare Workers KV\n\nçœ‹åˆ°åå­—å–ä½œ KVï¼Œç›´è§€çš„å°±æ˜¯è¡¨ç¤º `key-value` éµå€¼å°ï¼Œç¼ºé»æ˜¯ Key åªèƒ½å°ä¸Šä¸€å€‹ Valueï¼Œä¸èƒ½è¦å·¢ç‹€çš„ Value (åƒæ˜¯ Json é‚£æ¨£)ï¼Œè§£æ±ºçš„æ–¹å¼å…¶å¯¦ä¹Ÿæ˜¯ä¸é›£ï¼Œå¯ä»¥ç›´æ¥åœ¨ Value ä¸­å­˜ä¸Šæ•´çš„ Json æª”æ¡ˆï¼Œä½†åœ¨æœ¬æ–‡ä¸æœƒå¤šåšèªªæ˜ï¼Œå¯ä»¥è‡ªå·±ç ”ç©¶çœ‹çœ‹ã€‚\n\nå¦å¤– Cloudflare ä¹Ÿæœ‰æåˆ°ï¼ŒKV å­˜å–åœ¨å…¨çƒå¯èƒ½ä¸æ˜¯å³æ™‚æ€§çš„ï¼Œå¥½åƒæ˜¯åªä¿è­‰ 60 ç§’å¾ŒæœƒåŒæ­¥åˆ°æ‰€æœ‰ Serverï¼Œé›–ç„¶æˆ‘è¦ºå¾—æœ€æ…¢æ‡‰è©²ä¹Ÿæ˜¯ 5 å…§ç§’å•¦ï¼Œæˆ‘å¾ä¾†æ²’æœ‰æ„Ÿå—åˆ°å»¶é²éï¼Œä½†å¦‚æœå°å³æ™‚æ€§æœ‰ç–‘æ…®çš„å°ˆæ¡ˆå¯èƒ½ä¹Ÿè¦æ³¨æ„ä¸€ä¸‹ã€‚\n\nä¸‹é¢å°±ä¾†å‰µå»ºä¸€å€‹ KV namespaceï¼Œé€™å°±æ˜¯ä¸€å€‹ Database çš„åŸºæœ¬å–®ä½ï¼Œç›®å‰ Cloudflare æ˜¯å…è¨±ä¸€å€‹å¸³è™Ÿæœ‰ 100 å€‹ KV namespaceï¼Œæ‰€ä»¥æ­£å¸¸ä¾†èªªæ‡‰è©²ä¹Ÿä¸ç”¨æ“”å¿ƒæœƒç”¨å®Œã€‚ä¸‹é¢ç”¨ `URLS` ç•¶ä½œ namespace çš„åç¨±ï¼Œå› ç‚ºæˆ‘å€‘æ˜¯è¦å­˜çŸ­ç¶²å€çš„è³‡æ–™ã€‚\n\n```bash\n$ wrangler kv:namespace create \"URLS\"\n\nğŸŒ€  Creating namespace with title \"my-site-MY_KV\"\nâœ¨  Success!\nAdd the following to your configuration file:\nkv_namespaces = [\n  { binding = \"URLS\", id = \"xxxxxxxxxxxxxxxxxxxxxxx\" }\n]\n```\n\nç„¶å¾Œ wrangler æœƒæœ‰å€‹çµ¦ä½ ä¸€å€‹ binding å’Œ idï¼Œå°±ç›´æ¥è¤‡è£½è²¼ä¸Šåˆ° `wrangler.tmol` ä¸­å³å¯ï¼š\n\n```toml\nkv_namespaces = [\n  { binding = \"URLS\", id = \"xxxxxxxxxxxxxxxxxxxxxxx\" }\n]\n```\n\nå¦‚æœè¦åœ¨ wrangler çš„ dev æ¨¡å¼ä¸­æ¸¬è©¦ KVï¼Œå°±å¤šç”³è«‹ä¸€å€‹ Preview KVï¼Œä¾†é¿å…å°å·²ç¶“ä¸Šç·šçš„æœå‹™é€ æˆå½±éŸ¿ï¼š\n\n```bash\n$ wrangler kv:namespace create \"URLS\" --preview\n\nâ›…ï¸ wrangler 2.0.14\n--------------------\nğŸŒ€ Creating namespace with title \"URLS\"\nâœ¨ Success!\nAdd the following to your configuration file in your kv_namespaces array:\n{ binding = \"URLS\", preview_id = \"xxxxxxxxxxxxxxxxxxxx2\" }\n```\n\né€™æ¬¡æŠŠ `preview_id` åŠ åœ¨åŸæœ¬çš„ id å¾Œæ–¹å³å¯ï¼š\n\n```toml\nkv_namespaces = [\n    { binding = \"URLS\", id = \"xxxxxxxxxxxxxxxxxxxx\", preview_id = \"xxxxxxxxxxxxxxxxxxxx2\" }\n]\n```\n\nè¨­å®šå¥½å¾Œï¼Œwrangler æœƒç›´æ¥æŠŠä½ å‰›å‰›å–çš„åå­—ç›´æ¥ç”¨ç’°å¢ƒè®Šæ•¸ (ENV) å‚³å…¥ï¼Œå…·é«”çš„ä½¿ç”¨æ–¹å¼å¯ä»¥ç¹¼çºŒå¾€ä¸‹çœ‹ã€‚\n\n## Routing\n\nç‚ºäº†æ–¹ä¾¿ç­‰ç­‰æˆ‘å€‘è™•ç†å‚³å…¥çš„ Routingï¼Œæˆ‘å€‘å…ˆä¾†å®‰è£ä¸€å€‹ npm å¥—ä»¶ã€‚å°ä½ æ²’çœ‹éŒ¯ï¼ŒWorkers ä¹Ÿæ˜¯æ”¯æ´ npm å¥—ä»¶çš„ï¼š\n\n```bash\nyarn add itty-router\n\nnpm i itty-router\n```\n\né€™æ¨£ç­‰ç­‰å°±å¯ä»¥ç”¨ itty-router ä¾†è™•ç†å‚³å…¥çš„ requestã€‚\n\næˆ‘å€‘å…ˆå°‡ Handle Request å®Œå…¨ä¸Ÿçµ¦çš„ itty-router ä¾†è™•ç†ï¼Œå°‡ index.js æ”¹æˆä¸‹æ–¹é€™æ¨£ï¼š\n\n```js\nimport { Router } from \"itty-router\";\n\nconst router = Router();\n\nexport default {\n  fetch: router.handle,\n};\n```\n\nå¯ä»¥çœ‹åˆ°ç›´æ¥ export router çš„ handle æ–¹æ³•ï¼Œé€™æ¨£å°±å®Œå…¨æŠŠ Requse äº¤çµ¦ Router ä¾†è™•ç†ã€‚æˆ‘å€‘å…ˆå°‡ root å›å‚³ Hello æ¸¬è©¦çœ‹çœ‹ï¼š\n\n```js\nimport { Router } from \"itty-router\";\n\nconst router = Router();\n\nrouter.get(\"/\", async (req, env) => {\n  return new Response(\"Hello Workers\", {\n    status: 200,\n  });\n});\n\nexport default {\n  fetch: router.handle,\n};\n```\n\nç¾åœ¨å¯ä»¥ `wrangler dev` ä¸€ä¸‹ï¼Œç„¶å¾Œåˆ° `loclahost:8787/` çœ‹çœ‹æœƒä¸æœƒå›å‚³ Hello Workersã€‚\n\n> ä¹‹å¾Œçš„ç¨‹å¼ç¢¼å°±ä¸å†å®Œæ•´çš„å¯«å‡ºä¾†äº†ï¼Œä½†å°±æ˜¯åœ¨é€™å€‹å¤§æ¡†æ¶ä¸‹æ’°å¯«\n\n### New çŸ­ç¶²å€\n\næˆ‘å€‘å¯«ä¸€å€‹ post æ–¹æ³•ä¾†æ¥æ”¶æ–°çš„ç¶²å€ï¼Œä¸¦å›å‚³ä»–çš„æ–°çŸ­ç¶²å€çµ¦ä»–ã€‚\n\n```js\nrouter.post(\"/new\", async (req, env) => {\n  const body = await req.json();        // å–å¾— POST JSON BODY ä¸¦è½‰æˆ JS ç‰©ä»¶\n  console.log(JSON.stringify(body));\n  var { url, len } = body;\n  if (url == undefined) return f00(\"\"); // JSON æœ‰èª¤ï¼Œå›å‚³ 400 éŒ¯èª¤\n  if (!isValidHttpUrl(url)) return f00(\"URL is not valid\");  // ç¢ºèªæ˜¯å¦ç‚º Http ç¶²å€\n  if (len == undefined) len = 5;\n  if (len < 4) return f00(\"Lenght must be at least 4\"); // ç¢ºèªè‡³å°‘å¤§æ–¼ç­‰æ–¼ 4\n  var s = getRandomString(len); // ç”¢ç”Ÿè‹±æ–‡äº‚ç¢¼\n  while ((await env.URLS.get(s)) != undefined) { // å¾ kv ç¢ºèªæ²’æœ‰é‡è¤‡\n    len++; æœ‰é‡è¤‡å°‡ len +1 å¾Œå†ç”¢ç”Ÿæ–°çš„\n    s = getRandomString(len);\n  }\n  await env.URLS.put(s, url); // å­˜å…¥ kv\n  return new Response(s);\n});\n\nconst f00 = (msg) => new Response(msg ? msg : \"BAD REQUEST\", { status: 400 });\n\nfunction isValidHttpUrl(string) {\n  let url;\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\nfunction getRandomString(len) {\n  var s = \"\";\n  for (let i = 0; i < len; i++) {\n    s += String.fromCharCode(getRandomInt(26) + 97);\n  }\n  return s;\n}\n```\n\né€™å€‹ POST è¦åƒä¸€å€‹åƒæ˜¯ä¸‹é¢çš„ json bodyï¼Œåˆ†åˆ¥æœ‰è¦ç¸®çš„ç¶²å€ï¼Œå’Œè¦ç”¢å‡ºçš„çŸ­ç¶²å€é•·åº¦ï¼š\n\n```json\n{\n  \"url\": \"https://tonypepe.com\",\n  \"len\": 3\n}\n```\n\nå¯ä»¥ç™¼ç¾æˆ‘å€‘æ˜¯æ²’æœ‰åšæ¬Šé™æª¢æŸ¥çš„ï¼Œæ‰€ä»¥ä»»ä½•äººåªè¦å° POST `/new`ï¼Œéƒ½å¯ä»¥ç”¢ç”Ÿæ–°çš„çŸ­ç¶²å€ï¼Œä½†æˆ‘è‡ªå·±æ˜¯è¦ºå¾—å•é¡Œä¹Ÿä¸å¤§ï¼Œç•¢ç«Ÿ Cloudflare å°±æ˜¯ä¸€å®¶ ddos é˜²è­·å•†ï¼Œæ‰€ä»¥è¦è¢«æ”»æ“Šåˆ°ä¸€å¤©çš„ä½¿ç”¨é‡éƒ½ç”¨å®Œæ‡‰è©²ä¹Ÿå¾ˆé›£ã€‚æˆ–æ˜¯ä½ æƒ³è¦åšæ¬Šé™æª¢æŸ¥ï¼Œä¹Ÿå¯ä»¥è©¦è‘—å¯¦ä½œçœ‹çœ‹ã€‚\n\n## Redirect é‡æ–°å°å‘\n\næœ€å¾Œä¸€æ­¥å°±æ˜¯æŠŠçŸ­ç¶²å€é‡æ–°å°å‘åˆ°åŸæœ¬çš„ç¶²å€ï¼Œé€™éƒ¨ä»½å¾ˆç°¡å–®ï¼Œå°±æ˜¯å¾ kv å–å¾—åŸæœ¬çš„ç¶²å€ï¼Œç„¶å¾Œ Response HTTP 303 ä¾†åšé‡æ–°å°å‘ï¼Œå–ä¸åˆ° value å°±çµ¦ 404ã€‚\n\n```js\nrouter.get(\"/:path\", async (req, env) => {\n  const { params } = req;\n  const url = await env.URLS.get(params.path.toLowerCase());\n  if (url == undefined) return new Response(\"NOT FOUND\", { status: 404 });\n  const response = new Response(\"\", { status: 303 });\n  response.headers.append(\"Location\", url);\n  return response;\n});\n```\n\n## Publish\n\n`wrangler publish` å°±å¯ä»¥æŠŠç¨‹å¼ç¢¼éƒ¨ç½²åˆ°å…¨çƒçš„ Cloudflare ç¯€é»ï¼Œå¦‚æœæ²’æœ‰è‡ªå·±ç¶²åŸŸï¼ŒCloudflare ä¹Ÿæœƒçµ¦ä½ ä¸€å€‹ `xxx.workers.dev` çš„ç¶²åŸŸå…è²»ä½¿ç”¨ï¼Œå¯ä»¥ç¾åœ¨é€™è£¡æ¸¬è©¦çœ‹çœ‹ï¼Œå†æ±ºå®šè¦ä¸è¦æŠŠè‡ªå·±çš„ç¶²åŸŸç¶å®šä¸Šå»ã€‚\n\n## å¾Œè¨˜\n\né€™ç¯‡ç”¨ä¸åˆ° 100 è¡Œç¨‹å¼ç¢¼ç†Ÿç·´äº† Cloudflare çš„ Serverless æœå‹™ï¼Œå’Œå¯«å‡ºäº†çŸ­ç¶²å€æ‡‰ç”¨ï¼Œè®“æˆ‘å€‘ä¸ç”¨è‡ªå·±æ¶è¨­è‡ªå·±çš„ Server å°±å¯ä»¥æœ‰å‹•æ…‹ç¶²é çš„åŠŸèƒ½ã€‚æˆ‘é‚„çœ‹åˆ°å®˜æ–¹çš„æ–‡ä»¶ä¸­å¯ä»¥æŠŠ Response åŠ ä¸Š Cors çš„æ¨™é ­ï¼Œè®“åŸæœ¬ä¸å…è¨±è·¨ç«™å­˜å–çš„ api å¯ä»¥è·¨ç«™å­˜å–ï¼Œé›–ç„¶å¾ˆä¸é“å¾·ï¼Œä½†æ˜¯æˆ‘å–œæ­¡ã€‚æˆ‘è‡ªå·±é‚„æƒ³åˆ°å¯ä»¥å°åŸæœ¬çš„éœæ…‹ç¶²é åŠ ä¸Šé™åˆ¶å­˜å–çš„åŠŸèƒ½ï¼Œæˆ–æ˜¯ç¶²é æœ‰èª¤ç›´æ¥æŠŠç¶²é å…ˆå°å‘ 404ï¼Œé€™éƒ½æ˜¯å¾ˆæœ‰è¶£çš„æ‡‰ç”¨ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±ç™¼æ®çœ‹çœ‹ã€‚\n\nå¦‚æœè¦å®Œæ•´ç¨‹å¼ç¢¼ï¼š[Gist](https://gist.github.com/TonyPepeBear/f435dae11b83fc2626a49a6b3cc9848b)\n\n## Reference\n\n- [Cloudflare Workers documentation](https://developers.cloudflare.com/workers/)\n","tags":["cloudflare","workers","worker","web","short","url"]},{"id":6,"date":1654096648142,"url":"/posts/web/hugo-to-gatsby","title":"å¾ Hugo é·åˆ° Gatsby çš„ç´€éŒ„","summary":"\næœ€è¿‘æŠŠç¶²ç«™å¾ Hugo é·ç§»åˆ° Gatsbyï¼Œé‡åˆ°äº†ä¸€äº›å•é¡Œï¼Œæˆ‘å°±ä¾†ç°¡å–®è¨˜éŒ„ä¸€ä¸‹è§£æ±ºå•é¡Œçš„éç¨‹ï¼Œè€Œä¸”å› ç‚ºæˆ‘å° Node ä¹Ÿä¸æ˜¯å¾ˆç†Ÿï¼Œæ‰€ä»¥ä¸»è¦æ˜¯åœ¨ç•¶ä½œæˆ‘ç·´ç¿’ Node å’Œ Reactã€‚\n\n","content":" æœ€è¿‘æŠŠç¶²ç«™å¾ Hugo é·ç§»åˆ° Gatsbyï¼Œé‡åˆ°äº†ä¸€äº›å•é¡Œï¼Œæˆ‘å°±ä¾†ç°¡å–®è¨˜éŒ„ä¸€ä¸‹è§£æ±ºå•é¡Œçš„éç¨‹ï¼Œè€Œä¸”å› ç‚ºæˆ‘å° Node ä¹Ÿä¸æ˜¯å¾ˆç†Ÿï¼Œæ‰€ä»¥ä¸»è¦æ˜¯åœ¨ç•¶ä½œæˆ‘ç·´ç¿’ Node å’Œ Reactã€‚\n\n<!--more-->\n\n## Whyï¼Ÿ\n\n1. Hugo å¯¦åœ¨å¾ˆé›£ä½¿ç”¨ Node å¥—ä»¶\n2. å–®ç´”æƒ³çµ¦è‡ªå·±ä¸€å€‹æ¥è§¸ Node çš„æ©Ÿæœƒ\n\nè¨±å¤šç¶²é çš„å¥—ä»¶åº«éƒ½æ˜¯ä½¿ç”¨ node é–‹ç™¼çš„ï¼Œä½†å› ç‚º Hugo æ˜¯ç”¨ go é–‹ç™¼ï¼Œé›–ç„¶æœ‰æä¾›å° npm å¥—ä»¶çš„æ”¯æ´ï¼Œä½†æ˜¯é‚„æ˜¯æ²’æœ‰åŸç”Ÿçš„æ–¹ä¾¿ï¼Œåœ¨ç”¨å¥—ä»¶çš„æ™‚å€™å¸¸å¸¸æœƒé‡åˆ°å•é¡Œã€‚æ‰€ä»¥æˆ‘é‚„æ˜¯ä¸‹å®šæ±ºå¿ƒæ›åˆ° Gatsbyï¼Œä¹Ÿå¯ä»¥é †ä¾¿ç†Ÿæ‚‰ä¸€ä¸‹ Reactã€‚å¦å¤–ï¼Œæˆ‘æ˜¯ä½¿ç”¨ TypeScript ä¾†é–‹ç™¼ï¼Œé€™ä¹Ÿæ˜¯æœ‰é»è™å¾…è‡ªå·±ï¼Œä¸éé‚„å¥½é‚„æ˜¯é †åˆ©å®Œæˆï¼Œä¹Ÿå° TS æœ‰å¤šé»èªè­˜ã€‚\n\nç›®å‰é‡åˆ°çš„ä¸€å€‹æœ€å¤§çš„ç¼ºé»ï¼Œå¤§æ¦‚å°±æ˜¯ Hugo ç”¢ç”Ÿç¶²é çš„é€Ÿåº¦çœŸçš„è¶…ç´šå¿«ï¼ŒGatsby å› ç‚ºä¾è³´ä¸€å¤§å † npm å¥—ä»¶ï¼Œæ‰€ä»¥æˆ‘åœ¨ Cloudflare Pages ä¸Šçš„å¹³å‡éœ€è¦å¤§ç´„ 5 åˆ†é˜ç¶²é æ‰èƒ½å»ºç½®å¥½ã€‚\n\n## é‡åˆ°çš„å•é¡Œ\n\nç›®å‰é‡åˆ°çš„ä¸»è¦å•é¡Œå¤§æ¦‚å°±æ˜¯ä¸‹é¢ä¸‰é»ï¼š\n\n1. npm build ä¸æˆåŠŸ\n2. è§€çœ‹æ›´å¤šçš„åŠŸèƒ½\n3. meilisearch\n\n## npm to yarn\n\nä¸€é–‹å§‹æˆ‘æ˜¯ä½¿ç”¨ npm ä½œç‚ºå¥—ä»¶ç®¡ç†ï¼Œæˆ‘åœ¨æœ¬æ©Ÿé–‹ç™¼æ™‚éƒ½æ²’æœ‰é‡åˆ°ä»€éº¼å•é¡Œï¼Œç›´åˆ°æˆ‘å¹¾ä¹éƒ½é–‹ç™¼å®Œæˆå¾Œï¼Œæˆ‘å°±å°‡ç¶²é  push åˆ° GitHub ä¸Šï¼ŒGitHub Actions åœ¨ Build æ™‚ä¹Ÿæ²’æœ‰é‡åˆ°å•é¡Œï¼Œç›´åˆ° Cloudflare Pages åœ¨å»ºç½®æ™‚ï¼Œå°±æ˜¯æœƒä¸€ç›´å¤±æ•—ï¼Œæˆ‘ä¹Ÿä¸€ç›´ç¢ºå®š node å’Œ npm ç‰ˆæœ¬è·Ÿæˆ‘æœ¬åœ°çš„ä¸€æ¨£ï¼Œä½†ç„¡è«–å¦‚ä½•å°±æ˜¯å¤±æ•—ï¼Œç›´åˆ°æˆ‘ä¸Šç¶²æŸ¥å¾Œï¼Œæ‰ç™¼ç¾ Gatsby å®˜æ–¹ä¹Ÿæ˜¯å»ºè­°ä½¿ç”¨ yarnï¼Œnpm å¥½åƒæœƒé‡åˆ°å•é¡Œã€‚æˆ‘å°±è©¦è‘— `yarn` ä¸€ä¸‹ï¼Œè®“å°ˆæ¡ˆè‡ªå‹•é·ç§»åˆ° yarnï¼Œå°±æ²’åˆå†å‡ºç¾å•é¡Œäº†ï¼Œå¯¦åœ¨è«åå…¶å¦™ã€‚æ‰€ä»¥ä¹Ÿæ˜¯å»ºè­°å¤§å®¶ä»¥å¾Œè‹¥æœ‰ä½¿ç”¨åˆ° Gatsbyï¼Œé‚„æ˜¯ä½¿ç”¨ yarn æ¯”è¼ƒå¥½ä¸€é»ã€‚\n\n## è§€çœ‹æ›´å¤š\n\nåœ¨ Hugo æ™‚ï¼ŒHugo æ”¯æ´åœ¨ Markdown ä¸­ä½¿ç”¨ `<!--more-->` çš„æ¨™ç±¤ä¾†æå–æ¨™ç±¤å‰çš„éƒ¨åˆ†ç•¶ä½œæ–‡ç« æ‘˜è¦ï¼Œç”¨ä¾†é¡¯ç¤ºåœ¨ ListTemplateï¼Œè€Œ Gatsby åªæœ‰æä¾›æå–å‰ n å­—çš„åŠŸèƒ½ã€‚è€Œé€™å°æˆ‘ç¶²é çš„ç¾è§€ç¨‹åº¦å°±æœ‰ä¸€é»ä¸æ–¹ä¾¿ï¼Œå› ç‚ºæˆ‘ Hugo å·²ç¶“ç´¯è¨ˆäº†ä¸å°‘æ–‡ç« ï¼Œè‹¥è¦ç¾åœ¨å†å»ä¸€ç¯‡ç¯‡ä¿®æ”¹ï¼Œä¹Ÿæ˜¯æœƒæœ‰é»éº»ç…©ï¼Œæ‰€ä»¥åªå¥½è‡ªå·±ç¨å¾®ç ”ç©¶ä¸€ä¸‹è¦æ€éº¼è™•ç†ã€‚\n\n```md\nHello\n\næ‘˜è¦\n\n<!--more-->\n\næ­£æ–‡\n\næ­£æ–‡\n```\n\næˆ‘è™•ç†çš„æ–¹å¼ç°¡å–®æš´åŠ›ï¼Œæˆ‘ç™¼ç¾ Gatsby åœ¨ GraphQL çš„æ™‚å€™ï¼Œå¯ä»¥æ‹¿åˆ° RawMarkdownï¼Œè€Œä¸”é€™å€‹ä¹Ÿæœƒä¿ç•™è¨»è§£ï¼Œæ‰€ä»¥æˆ‘éˆæ©Ÿä¸€å‹•ï¼Œæˆ‘å°±è‡ªå·±ä½¿ç”¨ Node å¥—ä»¶ï¼Œè‡ªå·±è§£æ Markdown ä¸å°±å¥½äº†ï¼Ÿæ‰€ä»¥æˆ‘å°±ç”¨ `marked` å¥—ä»¶ï¼Œå¹«æˆ‘æŠŠ md è½‰æˆ htmlã€‚ç¯„ä¾‹å¤§è‡´å¦‚ä¸‹ï¼š\n\n```typescript\nimport { marked } from \"marked\";\n\nexport default function Summary({ node }: Props) {\n  const summary = node.rawMarkdownBody.spllit(\"<!--more-->\")[0];\n  return <div dangerouslaSetSetInnerHTML={{ __html: marked.parse(summary) }} />;\n}\n```\n\n## MeiliSearch\n\næˆ‘åŸæœ¬çš„ Hugo ç¶²é ï¼Œå°±æ˜¯ä½¿ç”¨ MeiliSearch ä¾†ç•¶æˆ‘çš„æœå°‹åŠŸèƒ½ï¼Œå¯ä»¥åƒè€ƒé€™å€‹ [tag](/search/tag?tag=meilisearch) ã€‚æ‰€ä»¥ä¸€æ¨£æ˜¯æœƒéœ€è¦ç”¢ç”Ÿä¸€å€‹ `SearchIndex.json`ï¼Œæˆ‘ç›´æ¥åœ¨ `gatsby-node.ts` è£¡çš„ `noPostBuild` æ‰‹å‹•ç”¢ç”Ÿ jsonï¼Œå†ç”¨ `fs` å¯«å…¥æª”æ¡ˆï¼Œç›´æ¥çµ¦å¤§å®¶ç¨‹å¼ç¢¼åƒè€ƒã€‚\n\n```typescript\nexport const onPostBuild: GatsbyNode[\"onPostBuild\"] = async ({\n  graphql,\n  actions,\n}) => {\n  const { errors, data } = await graphql<ArticleListData>(articleGraphql);\n  // SearchIndex.json\n  const searchArr: SearchIndex[] = [];\n  data!!.allMarkdownRemark.edges.forEach(({ node }, index) => {\n    const summary = node.rawMarkdownBody.split(\"<!--more-->\")[0];\n    const url =\n      \"/posts/\" +\n      node.fileAbsolutePath\n        .split(\"/posts/\")[1]\n        .split(\".md\")[0]\n        .replace(\" \", \"-\")\n        .toLowerCase();\n    const miliseconds = new Date(node.frontmatter.date).getTime();\n    searchArr.push({\n      id: index,\n      date: miliseconds,\n      url: url,\n      title: node.frontmatter.title,\n      summary: summary,\n      content: node.internal.content.replace(\"\\n\", \" \"),\n      tags: node.frontmatter.tags,\n    });\n  });\n  fs.writeFileSync(\"./public/SearchIndex.json\", JSON.stringify(searchArr));\n};\n```\n\nç”¢ç”Ÿ Json å¾Œï¼Œæˆ‘ä¸€æ¨£æ˜¯ä½¿ç”¨ GitHub Actions ä¾†è‡ªå‹•æŠŠ Index æ¨åˆ° MeiliSearch Serverã€‚\n\n## Tag Page\n\nå…¶å¯¦ Gatsby æ‡‰è©²ä¹Ÿæ˜¯æœ‰æ–¹æ³•å¯ä»¥ç”¢ç”Ÿ Tag Pageï¼Œä½†æ˜¯å› ç‚ºæˆ‘æƒ³åˆ°è¦ç”¨ Tag Page æ™‚ï¼Œæˆ‘å·²ç¶“å¼„å¥½ MeiliSearch äº†ï¼Œæ‰€ä»¥æˆ‘å°±éˆæ©Ÿä¸€å‹•ï¼Œæƒ³æƒ³æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç›´æ¥ç°¡å–®çš„ä½¿ç”¨ MeiliSearch ä¾†å‹•æ…‹çš„ç”¢ç”Ÿ Tag Page å°±å¥½ï¼Œçµæœé‚„çœŸçš„è¢«æˆ‘å¼„æˆåŠŸäº†ï¼Œå°±ä¾†ç´€éŒ„ä¸€ä¸‹æˆ‘å¤§æ¦‚çš„æ€è·¯ã€‚é›–ç„¶æˆ‘çŸ¥é“é€™å…«æˆä¸æ˜¯ä»€éº¼å¥½æ–¹æ³•ï¼Œä½†æ˜¯ç°¡å–®æš´åŠ›ã€‚\n\nMeiliSearch å¯ä»¥è¨­å®š `filterableAttributes` çš„å±¬æ€§ï¼Œæ‰€ä»¥æˆ‘æŠŠæˆ‘çš„ Index ä¸­çš„ Tag å±¬æ€§è¨­å®šæˆå¯ä»¥ Filterableï¼Œç„¶å¾Œå†å–å¾—ç¶²å€çš„ Paramsï¼Œæœ€å¾Œå‘ MeiliSearch æœå°‹å¾Œå‹•æ…‹çš„æŠŠçµæœé¡¯ç¤ºåœ¨ç¶²é ä¸Šã€‚ä¹Ÿå¯ä»¥åƒè€ƒ[å®˜æ–¹æ–‡ä»¶](https://docs.meilisearch.com/learn/advanced/filtering_and_faceted_search.html#configuring-filters)ã€‚\n\né€™æ™‚é‡åˆ°çš„å•é¡Œå°±æ˜¯ Gatsby æ˜¯ Server Side Renderingï¼Œæ‰€ä»¥å–çš„ Params è¦ä½¿ç”¨é¡å¤–çš„ pluginï¼Œæˆ‘æ˜¯ä½¿ç”¨ `gatsby-plugin-use-query-params`ï¼Œå°±å¯ä»¥åƒæ˜¯ React çš„ useState çš„æ–¹å¼ä¾†å–çš„ç¶²å€çš„ Parmã€‚\n\nä¹Ÿæ˜¯æä¾›éƒ¨åˆ†çš„ç¨‹å¼ç¢¼çµ¦å¤§å®¶åƒè€ƒï¼š\n\n```typescript\nexport default function SearchTags() {\n  const [{ tag }, _] = useQueryParams({ tag: StringParam }); // å–çš„ Params\n  const [result, setResult] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(true);\n  React.useEffect(() => {\n    // åŸ·è¡Œæœå°‹\n    client\n      .index(\"gatsby-blog\")\n      .search(\"\", {\n        filter: [\"tags=\" + (tag ? tag : \"\")],\n        limit: Number.MAX_SAFE_INTEGER,\n      })\n      .then((res: any) => {\n        setResult(res.hits);\n        setIsLoading(false);\n      });\n  }, []);\n  return (\n    <MainLayout title={\"tag: \" + tag + \" - TonyPepe\"}>\n      <div>\n        <h1 className=\"my-4 bg-white rounded-md py-4 px-6 text-2xl\">\n          {\"Tag: \" + tag}\n        </h1>\n        {isLoading ? <LoadingChild /> : <ResultClild hits={result} />}\n      </div>\n    </MainLayout>\n  );\n}\n\nconst client = new MeiliSearch({\n  host: \"https://search.tonypepe.com\",\n  apiKey: \"\",\n});\n```\n\n## å¾Œç´€\n\nNode åœ¨å»ºç½®ä¸Šå¯¦åœ¨æ˜¯å¤ªæ…¢ï¼ŒçœŸçš„æœƒæœ‰ä¸€é»å—ä¸äº†ï¼Œæ¯æ¬¡å…‰æ˜¯è¦ Run èµ· Dev Serverï¼Œå°±è‡³å°‘éœ€è¦ 30 ç§’ï¼Œç›¸æ¯” Hugo å°±ç®—æ˜¯æœ‰è£ä¸€é»é»çš„ npm å¥—ä»¶ï¼Œé‚„æ˜¯åªè¦ 10 ç§’å·¦å³å°±å¯ä»¥é–‹å§‹å¯«ç¶²é äº†ã€‚\n\nç•¶ç„¶ï¼Œä½¿ç”¨ Gatsby é–‹ç™¼çš„å¥½è™•ä¹Ÿæ˜¯å¾ˆå¤šï¼Œå¯ä»¥æœ€å¤§åŒ–çš„è‡ªè¨‚ç¶²é çš„é•·ç›¸å’ŒåŠŸèƒ½ï¼Œä¸æœƒè¢« Hugo çš„åŠŸèƒ½é™åˆ¶ä½ï¼Œå¦‚æœç¼ºå°‘äº†ä»€éº¼åŠŸèƒ½ï¼Œéƒ½å¯ä»¥è‡ªå·±ç”¨ js é–‹ç™¼å‡ºä¾†ï¼Œè€Œä¸”åœ¨ä½¿ç”¨ä¸€äº› Web Library å’Œ React çœŸçš„å¤ªæ–¹ä¾¿äº†ã€‚\n\n## Reference\n\n- [Gatsby](https://gatsbyjs.org/)\n- [MeiliSearch - Filtering and faceted search](https://docs.meilisearch.com/learn/advanced/filtering_and_faceted_search.html#configuring-filters)\n","tags":["hugo","gatsby","blog","web","node","npm","meilisearch","search"]},{"id":7,"date":1653492450000,"url":"/posts/linux/command-tips","title":"ä¸€äº› Command Line æŠ€å·§","summary":"\nè¨˜éŒ„ä¸€äº›æˆ‘æ€•å¿˜çš„ Command Line æŠ€å·§ï¼Œç•¶ä½œå­—å…¸ç”¨ã€‚\n\n","content":" è¨˜éŒ„ä¸€äº›æˆ‘æ€•å¿˜çš„ Command Line æŠ€å·§ï¼Œç•¶ä½œå­—å…¸ç”¨ã€‚\n\n<!--more-->\n\n## æ¸…è¢å¹•\n\n`clear` æˆ–æ˜¯ `ctrl + L`\n\n## å®¶ç›®éŒ„\n\n`~` æ³¢æµªç¬¦å°±æ˜¯ä»£è¡¨å®¶ç›®éŒ„\n\n```bash\n/etc$ cd ~\n\n~$\n```\n\n## é è¨­æ–‡å­—ç·¨è¼¯å™¨\n\næœ‰æ™‚é è¨­çš„æ–‡å­—ç·¨è¼¯å™¨ä¸æ˜¯ vimï¼Œè€Œæ˜¯ `nano` æˆ–æ˜¯ `emacs`ï¼Œåœ¨æ‰“ git æŒ‡ä»¤æ™‚ï¼Œæœƒé€²éŒ¯ç·¨è¼¯å™¨ã€‚åªè¦åœ¨ `.bashrc` ä¸­åŠ å…¥ä»¥ä¸‹å…©è¡Œï¼š\n\n```bash\nexport EDITOR=vim\nexport VISUAL=vim\n```\n\n## è®Šæ›´ rc file å¾Œé¦¬ä¸Šç”Ÿæ•ˆ\n\n`source ~/.bashrc`\n\n## è¿”å›ä¸Šä¸€å€‹è·¯å¾‘\n\n`cd -`\n\n```bash\n~$ cd /etc\n\n/etc$ cd /var\n\n/var$ cd -\n\n/etc$ cd ~\n\n~$\n```\n\n## æŠŠè·¯å¾‘æ”¾é€² Stack\n\n`pushd` æŠŠç¾åœ¨çš„è·¯å¾‘æ¨é€² Stackï¼Œä¸¦ cd åˆ°å¾Œé¢çš„åƒæ•¸\n\n`popd` æ‹¿å‡ºä¾†\n\n```bash\n/etc$ pushd /var\n/var /etc\n\n/var$ pushd /home\n/home /var /etc\n\n/home$ cd ~\n\n~$ cd /var/\n\n~$ cd /var/lib/\n\n/var/lib$ popd\n/var /etc\n\n/var$ popd\n/etc\n\n/etc$\n```\n\n## æŠŠå·¥ä½œæ”¾åˆ°èƒŒæ™¯\n\n`ctrl + z`\n\næ³¨æ„ï¼Œé€™æœƒæš«åœæ•´å€‹ processï¼Œä¸¦ä¸æ˜¯æ”¾åˆ°èƒŒæ™¯åŸ·è¡Œ\n\n```bash\n~$ vim /proc/cpuinfo\n\n[1]+  Stopped                 vim /proc/cpuinfo\n\n~$\n```\n\n`fg` (foreground) æŠŠæ”¾åˆ°èƒŒæ™¯çš„ process å–å›å‰æ™¯ç¹¼çºŒåŸ·è¡Œ\n\nShell çµæŸæ™‚ï¼Œæ‰€æœ‰è¢«æš«åœçš„ process ä¹Ÿæœƒä¸€èµ·è¢«æ®ºæ‰\n\n## é‡è¤‡ä¸Šä¸€å€‹ Command\n\n`!!` å°±æ˜¯ä»£è¡¨ä¸Šä¸€å€‹ Command\n\n```bash\n~$ echo HI\nHI\n\n~$ !!\necho HI\nHI\n\n~$\n```\n\né€™æ˜¯å¯ä»¥çµ„åˆæŠ€çš„ï¼šå¿˜è¨˜æ‰“ sudo å°± `sudo !!`\n\n```bash\n~$ apt update\nReading package lists... Done\nE: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)\nE: Unable to lock directory /var/lib/apt/lists/\n\n~$ sudo !!\nsudo apt update\nHit:1 http://archive.ubuntu.com/ubuntu jammy InRelease\nGet:2 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]\nGet:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [109 kB]\nGet:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [99.8 kB]\nGet:5 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [230 kB]\nGet:6 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [143 kB]\nFetched 693 kB in 2s (328 kB/s)\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\n1 package can be upgraded. Run 'apt list --upgradable' to see it.\n~$\n```\n\n## sudo ä¸è¼¸å…¥å¯†ç¢¼\n\nåªè¦è®“ä¸‹é¢é‚£ä¸€è¡Œå‡ºç¾åœ¨ `/etc/sudoers` ä¸­å°±å¯ä»¥ï¼š\n\n```text\n%sudo ALL=(ALL) NOPASSWD:ALL\n```\n\næˆ–æ˜¯ç›´æ¥è¼¸å…¥ (with root)ï¼š\n\n```bash\n(root) ~$ echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\n```\n\n## æœå°‹æ‰“éçš„æŒ‡ä»¤\n\n`ctrl + r`ï¼Œç„¶å¾Œæ‰“ä¸Šéƒ¨åˆ†è¨˜å¾—çš„æŒ‡ä»¤ï¼Œå°±æœƒè‡ªå‹•è£œå®Œ\n\n## è¼¸å‡ºå°é€² less\n\næœ‰æ™‚æŒ‡ä»¤è¼¸å‡ºå¾ˆé•·ï¼Œéœ€è¦ç¿»é é¡¯ç¤ºæ™‚ï¼Œå¯ä»¥ç”¨ `|` å°å…¥ `less`\n\n```bash\n~$ cat /proc/cpuinfo | less\n```\n\n## æ¸…æ‰ä¸€æ•´è¡Œ\n\n`ctrl + u` æŠŠé‚„æ²’ enter çš„æŒ‡ä»¤æ¸…æ‰\n\n## å…‰æ¨™åˆ°æœ€å‰æˆ–æœ€å¾Œ\n\n`ctrl + a` ç§»å‹•å…‰æ¨™åˆ°æœ€å‰\n\n`ctrl + e` ç§»å‹•å…‰æ¨™åˆ°æœ€å¾Œ\n\n## é€£çºŒåŸ·è¡ŒæŒ‡ä»¤\n\n`;` ä¸ç®¡å‰é¢æœ‰æ²’æœ‰æˆåŠŸï¼Œéƒ½åŸ·è¡Œå¾Œé¢çš„å‘½ä»¤\n\n`&&` è¦å‰é¢å¾—åŸ·è¡ŒæˆåŠŸï¼Œæ‰åŸ·è¡Œå¾Œé¢çš„å‘½ä»¤\n\n```bash\n~$ ls / ; echo hi\nbin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\nhi\n\n~$ ls / && echo hi\nbin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\nhi\n\n~$ ls /no_such_dir ; echo hi\nls: cannot access '/no_such_dir': No such file or directory\nhi\n\n~$ ls /no_such_dir && echo hi\nls: cannot access '/no_such_dir': No such file or directory\n```\n\n## Reference\n\n- [18 Commands That Will Change The Way You Use Linux Forever](https://youtube.com/watch?v=AVXYq8aL47Q)\n","tags":["linux","ubuntu","mac","command","max"]},{"id":8,"date":1653142036000,"url":"/posts/vscode/ssh-dev container","title":"VSCode SSH é€£å…¥ Docker Container","summary":"\nç‚ºä»€éº¼è¦åœ¨ Container ä¸­ Codingï¼Ÿå› çˆ²é–‹ç™¼ä¸­æœ€å¤§çš„é›£é¡Œç¸½æ˜¯åœ¨ç’°å¢ƒå»ºç½®ï¼Œå¥½ä¸å®¹æ˜“å»ºç½®å¥½ç’°å¢ƒï¼Œè¦å¯«ä¸‹å€‹å°ˆæ¡ˆæ™‚ï¼Œå› ç‚ºé›»è…¦å·²ç¶“é«’å…®å…®ï¼Œå®‰è£ç’°å¢ƒæ™‚å°±æœƒå®¹æ˜“è¡åˆ°ç‰ˆæœ¬ï¼Œè€Œé€ æˆæƒ¡æ€§å¾ªç’°ï¼Œç’°å¢ƒå»ºç½®ä¸€æ¬¡æ¯”ä¸€æ¬¡å›°é›£ï¼Œæœ€å¾Œç™¼ç¾é‡çŒé›»è…¦æœ€å¿«ã€‚åœ¨ Container ä¸­ Coding å°±å¯ä»¥ç°¡å–®ç”¨å®Œå³ä¸Ÿï¼Œæ¯æ¬¡éƒ½å¯ä»¥åœ¨ä¹¾æ·¨çš„é›»è…¦å®‰è£ç’°å¢ƒï¼Œè£ä»»ä½•æ±è¥¿ä¹Ÿä¸æ€•æŠŠæœ¬æ©Ÿå¼„é«’ï¼Œåœ¨ Windows ä¸Šæ›´å¯ä»¥ç°¡å–®çš„åœ¨ Linux ä¸­é–‹ç™¼ã€‚\n\n","content":" ç‚ºä»€éº¼è¦åœ¨ Container ä¸­ Codingï¼Ÿå› çˆ²é–‹ç™¼ä¸­æœ€å¤§çš„é›£é¡Œç¸½æ˜¯åœ¨ç’°å¢ƒå»ºç½®ï¼Œå¥½ä¸å®¹æ˜“å»ºç½®å¥½ç’°å¢ƒï¼Œè¦å¯«ä¸‹å€‹å°ˆæ¡ˆæ™‚ï¼Œå› ç‚ºé›»è…¦å·²ç¶“é«’å…®å…®ï¼Œå®‰è£ç’°å¢ƒæ™‚å°±æœƒå®¹æ˜“è¡åˆ°ç‰ˆæœ¬ï¼Œè€Œé€ æˆæƒ¡æ€§å¾ªç’°ï¼Œç’°å¢ƒå»ºç½®ä¸€æ¬¡æ¯”ä¸€æ¬¡å›°é›£ï¼Œæœ€å¾Œç™¼ç¾é‡çŒé›»è…¦æœ€å¿«ã€‚åœ¨ Container ä¸­ Coding å°±å¯ä»¥ç°¡å–®ç”¨å®Œå³ä¸Ÿï¼Œæ¯æ¬¡éƒ½å¯ä»¥åœ¨ä¹¾æ·¨çš„é›»è…¦å®‰è£ç’°å¢ƒï¼Œè£ä»»ä½•æ±è¥¿ä¹Ÿä¸æ€•æŠŠæœ¬æ©Ÿå¼„é«’ï¼Œåœ¨ Windows ä¸Šæ›´å¯ä»¥ç°¡å–®çš„åœ¨ Linux ä¸­é–‹ç™¼ã€‚\n\n<!--more-->\n\nåœ¨ Container è£¡ Coding å·²ç¶“ä¸æ˜¯ä»€éº¼æ–°é®®äº‹ï¼ŒVSCode çš„å®˜æ–¹å°±æœ‰æä¾› [Developing inside a Container](https://code.visualstudio.com/docs/remote/containers) çš„å®˜æ–¹æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æœ¬æ©Ÿçš„ Docker å¿«é€Ÿçš„ç”¢ç”Ÿ Container ä¸¦ä¸”åœ¨è£¡é¢é–‹ç™¼ã€‚å£è™•å°±æ˜¯åªèƒ½åœ¨æœ¬æ©Ÿé€£ç·šï¼Œå¦‚æœæœ‰å¤šå°é›»è…¦æƒ³è¦å…±åŒé–‹ç™¼çš„éœ€æ±‚ï¼Œå°±åªå¥½ç”¨ä»Šå¤©è¦ä»‹ç´¹çš„æ–¹å¼ï¼Œç”¨ SSH é€£å…¥ Containerï¼Œåªè¦é€£å¾—ä¸Š SSH å°±å¯ä»¥é–‹ç™¼ï¼Œé–‹ç™¼æ™‚ä¹Ÿä¸ç”¨è¢«ä¾·é™åœ¨ä¸€å°é›»è…¦çš„ Docker ä¸Šã€‚ç•¶ç„¶ï¼Œæœ€å¤§çš„ç¼ºé»å°±æ˜¯è¦æœ‰ä¸€å°ä¸€ç›´é‹ä½œè‘— Docker çš„ Server å¯ä»¥è®“ä½ éš¨æ™‚é€£ç·šã€‚GitHub æœ‰ä¸€å€‹ [Codespace](https://github.com/features/codespaces) çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¾ˆé¡ä¼¼çš„æƒ³æ³•ï¼ŒCode in Cloudï¼Œä½†ç•¢ç«Ÿæ˜¯ä¼æ¥­çš„æ”¶è²»æœå‹™ï¼Œæˆ‘ä¹‹å‰æœ‰æŠ½åˆ°é è¦½ç‰ˆï¼Œåˆ°ç¾åœ¨éƒ½å¯ä»¥å…è²»ä½¿ç”¨ï¼Œæ˜¯çœŸçš„å¾ˆæ–¹ä¾¿çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ä»–çš„æ–¹ä¾¿ï¼Œè®“æˆ‘æƒ³ç ”ç©¶å¦‚ä½•è‡ªå·±æ¶é¡ä¼¼çš„æœå‹™ã€‚\n\n## Dockerfile\n\nç°¡å–®ä¾†èªªå°±æ˜¯å‰µå»ºä¸€å€‹å·²ç¶“è¢«é è£ SSH Server çš„ Linuxï¼Œæˆ‘å€‘ä»Šå¤©å°±ç”¨ Ubuntuï¼Œç„¶å¾Œé †ä¾¿é è£ä¸€äº›é–‹ç™¼ä¸­å¸¸æœƒç”¨åˆ°å¥—ä»¶ï¼Œåƒæ˜¯ `git`, `vim` ç­‰ç­‰ã€‚\n\n> å¦‚æœæƒ³è·³éé€™æ­¥é©Ÿï¼Œç”¨æˆ‘å‰µå»ºå¥½çš„ Image å¯ä»¥æ‹‰åˆ°ä¸‹ä¸€å€‹ç« ç¯€å»çœ‹\n\n```Dockerfile\nARG UBUNTU_VERSION=latest\n\nFROM ubuntu:${UBUNTU_VERSION}\n\nENV DEBIAN_FRONTEND noninteractive\n\nRUN apt update \\\n    && apt install -y openssh-server ssh sudo git vim \\\n    && useradd -rm -d /home/ubuntu -s /bin/bash -g root -G sudo -u 1000 ubuntu \\\n    && echo \"ubuntu:ubuntu\" | chpasswd \\\n    && echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers \\\n    && service ssh start\n\nEXPOSE 22\n\nCMD [\"/usr/sbin/sshd\", \"-D\"]\n```\n\nå¯ä»¥çœ‹åˆ°æˆ‘æŠŠå¸³è™Ÿå¯†ç¢¼éƒ½è¨­ç½®ç‚º `ubuntu`ï¼Œç„¶å¾Œè®“ `sudo` æ™‚å¯ä»¥ä¸ç”¨å¯†ç¢¼ã€‚ç„¶å¾Œå®‰è£å•Ÿå‹• ssh serviceï¼Œæœ€å¾Œé–‹å•Ÿ 22 portã€‚ç”¨ä¸‹é¢çš„ Docker æŒ‡ä»¤å°±å¯ä»¥å‰µå»ºè‡ªå·±çš„ Imageï¼š\n\n```shell\ndocker build -t ssh-ubuntu .\n```\n\n### æˆ‘æ§‹å»ºå¥½çš„ Image\n\næˆ‘æœ‰å‰µä¸€å€‹ GitHub Repo æ”¾æˆ‘çš„ Dockerfileï¼Œä¸¦ç”¨ GitHub Actions + Packages ä¾†ç™¼å¸ƒ Imageï¼ŒImage åç¨±ç‚º `ghcr.io/tonypepebear/ssh-dev-ubuntu`ã€‚\n\n[Package ç¶²å€](https://github.com/TonyPepeBear/ssh-dev-container/pkgs/container/ssh-dev-ubuntu)\n\n## å•Ÿå‹• Container ä¸¦ SSH é€£å…¥\n\nå•Ÿå‹• Container ä¸¦æŠŠ 22 Port å¼„å‡ºä¾†ï¼Œæˆ‘æ˜¯æ˜ å°„åˆ° 8222ï¼š\n\n```shell\ndocker run -dp 8222:22 ssh-ubuntu\n\nå¦‚æœè¦ç”¨æˆ‘çš„ Imageï¼š\ndocker run -dp 8222:22 ghcr.io/tonypepebear/ssh-dev-ubuntu\n```\n\nSSH é€£å…¥ï¼Œè©¢å•å¯†ç¢¼å°±æ˜¯ `ubuntu`ï¼š\n\n```shell\nssh -p 8222 ubuntu@localhost\n```\n\nå¦‚æœæ²’ç™¼ç”Ÿå•é¡Œï¼Œåˆ°ç¾åœ¨æ‡‰è©²å°±å¯ä»¥é †åˆ©çš„é€£åˆ° Container ä¸­ã€‚\n\n## VSCode SSH é€£ç·š\n\néœ€è¦å…ˆåœ¨ VSCode ä¸­å®‰è£ Remote - SSH å¥—ä»¶ï¼Œå¦‚åœ–ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be8ec8dc-8900-4cbe-1587-45fa6f3f6500/public)\n\nå®‰è£å®Œæˆå¾Œï¼Œé»æ“Šæœ€å·¦ä¸‹è§’çš„ Remote åŠŸèƒ½ï¼Œå†é¸æ“‡ Connect to SSH Hostï¼Œè¼¸å…¥ SSH æŒ‡ä»¤ `ssh -p 8222 ubuntu@localhost`ï¼Œå°±å¯ä»¥é †åˆ©é€£åˆ° Container ä¸­ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/960ea18c-82c7-4ce1-73d3-8ff092f2b000/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/814b9dac-f39d-4d07-1095-2d280cd5e300/public)\n\n## å¾Œè¨˜\n\nå…¶å¯¦æˆ‘ä¹Ÿä¸æœƒæ¯å€‹å°ˆæ¡ˆéƒ½æ–°å¢ä¸€å€‹æ–°çš„ Containerï¼Œè€Œæ˜¯ç”¨åˆ°æˆ‘å—ä¸äº†æˆ–è¡çªåˆ°å¾Œï¼Œæ‰å‰µå»ºä¸€å€‹æ–°çš„ï¼Œç•¢ç«Ÿæ¯æ¬¡å‰µæ–°çš„ Container ä¹Ÿæ˜¯æœ‰é»éº»ç…©ï¼Œä½†æ˜¯èƒ½è®“æˆ‘åœ¨å®‰è£ä¸€äº›äº‚ä¸ƒå…«ç³Ÿçš„ç’°å¢ƒ (å°±æ˜¯åœ¨èªªä½ å€‘ npm, pip) æ™‚ï¼Œå¯ä»¥å¤§è†½åœ°æŒ‰ä¸‹å»ï¼Œä¸ç”¨æ“”å¿ƒæŠŠé›»è…¦æåˆ°å—ä¸äº†æ‰æ˜¯é‡é»ã€‚å¸Œæœ›å¤§å®¶åœ¨é–‹ç™¼çš„è·¯ä¸Šå¯ä»¥æ›´åŠ é †åˆ©ã€‚\n\nå¦å¤–ï¼ŒVSCode çš„ SSH é€£ç·šåŠŸèƒ½çœŸçš„åšçš„ä¸éŒ¯ï¼Œç”šè‡³å¯ä»¥ Port Forwardingï¼Œåœ¨é–‹ç™¼ç¶²é çš„æ™‚å€™ä¸ç”¨åœ¨ Docker ä¸­å¤š Forwarding ä¸€å€‹ Portï¼Œå¯ä»¥éš¨æ™‚ç”¨ VSCode Forwarding åˆ°æœ¬æ©Ÿä¸Šã€‚\n\n## Reference\n\n- [Remote Development using SSH](https://code.visualstudio.com/docs/remote/ssh)\n","tags":["vscode","ssh","docker"]},{"id":9,"date":1650204013000,"url":"/posts/kotlin/kotlin-flow","title":"Kotlin Flow","summary":"\nKotlin åœ¨å¤šå·¥è™•ç†ä¸Šæä¾›éå¸¸å¥½ç”¨çš„ Coroutineã€‚ç•¶ä¸åŒ Job ä¹‹é–“éœ€è¦å‚³éè³‡æ–™æ™‚ï¼Œç¸½æœƒé‡åˆ°è¨±å¤šå•é¡Œï¼Œä»¥å‰æœ€ç°¡å–®çš„æ–¹å¼å°±æ˜¯ Callbackï¼Œä½† Callback æ¨¡å¼å·²ç¶“åœ¨å„å€‹ç¨‹å¼èªè¨€ä¸­ç”¢ç”Ÿè¨±å¤šå•é¡Œï¼Œé€™é‚Šå°±ä¸å¤šè¨è«–ã€‚Kotlin Coroutine å¦‚æœåªæ˜¯è¦å›å‚³ä¸€å€‹å€¼ï¼Œå¯ä»¥ç›´æ¥ç”¨ Suspend çš„ Return å€¼ï¼Œä½†å¦‚æœæ˜¯è¦å›å‚³å¾ˆå¤šè³‡æ–™å‘¢ï¼Ÿç°¡å–®çš„æ–¹å¼æ˜¯ç›´æ¥å›å‚³ Listï¼Œå¯æ˜¯å¦‚æœè³‡æ–™éå¸¸å¤§ï¼Œä¹Ÿæœƒç”¢ç”Ÿå‡ºå•é¡Œã€‚æ‰€ä»¥ Kotlin æä¾› Flow ä¾†å¹«åŠ©è§£æ±ºå¤§é‡è³‡æ–™å‚³éçš„å•é¡Œã€‚\n\n","content":" Kotlin åœ¨å¤šå·¥è™•ç†ä¸Šæä¾›éå¸¸å¥½ç”¨çš„ Coroutineã€‚ç•¶ä¸åŒ Job ä¹‹é–“éœ€è¦å‚³éè³‡æ–™æ™‚ï¼Œç¸½æœƒé‡åˆ°è¨±å¤šå•é¡Œï¼Œä»¥å‰æœ€ç°¡å–®çš„æ–¹å¼å°±æ˜¯ Callbackï¼Œä½† Callback æ¨¡å¼å·²ç¶“åœ¨å„å€‹ç¨‹å¼èªè¨€ä¸­ç”¢ç”Ÿè¨±å¤šå•é¡Œï¼Œé€™é‚Šå°±ä¸å¤šè¨è«–ã€‚Kotlin Coroutine å¦‚æœåªæ˜¯è¦å›å‚³ä¸€å€‹å€¼ï¼Œå¯ä»¥ç›´æ¥ç”¨ Suspend çš„ Return å€¼ï¼Œä½†å¦‚æœæ˜¯è¦å›å‚³å¾ˆå¤šè³‡æ–™å‘¢ï¼Ÿç°¡å–®çš„æ–¹å¼æ˜¯ç›´æ¥å›å‚³ Listï¼Œå¯æ˜¯å¦‚æœè³‡æ–™éå¸¸å¤§ï¼Œä¹Ÿæœƒç”¢ç”Ÿå‡ºå•é¡Œã€‚æ‰€ä»¥ Kotlin æä¾› Flow ä¾†å¹«åŠ©è§£æ±ºå¤§é‡è³‡æ–™å‚³éçš„å•é¡Œã€‚\n\n<!--more-->\n\n## Kotline Coroutine\n\nå¦‚æœé‚„ä¸çŸ¥é“ä»€éº¼æ˜¯ Coroutine çš„ï¼Œæˆ‘ä»¥å‰ä¹Ÿæœ‰å¯«é[Kotlin Coroutine](/posts/kotlin/kotlin-coroutine/)ã€‚\n\n## List OF Numbers\n\nè®“æˆ‘å€‘å…ˆä¾†çœ‹ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼Œç”¢ç”Ÿä¸€å€‹æœƒå›å‚³ 1 åˆ° 100 çš„ Int Functionï¼š\n\n```kotlin\nfun nums(): List<Int> {\n    val ans = mutableListOf<Int>()\n    for (i in 1..100) {\n        ans.add(i)\n    }\n    return ans\n}\n\nfun main() {\n    nums().forEach { value ->\n        println(value)\n    }\n}\n```\n\nä¹çœ‹ä¹‹ä¸‹æ²’ä»€éº¼å•é¡Œï¼Œä½†æ˜¯å¦‚æœé€™æ˜¯ä¸€å€‹éœ€è¦å¤§é‡ CPU æˆ– IO è™•ç†çš„å·¥ä½œè€Œä¸”å›å‚³å€¼éå¸¸å¤§ï¼Œå°±æœƒå°è¨˜æ†¶é«”ç”¢ç”Ÿè² æ“”ã€‚ä¸‹é¢å‡è¨­æˆ‘å€‘éœ€è¦ 1 åˆ° 100,000ï¼Œä¸¦ç”¨ `delay()` æ¨¡æ“¬ CPU å·¥ä½œï¼Œç„¶å¾Œæ”¹æˆ Suspend Functionã€‚ä¸‹é¢ä¹ŸæŠŠ main æ”¹æˆ `runBlocking`ï¼Œæ–¹ä¾¿åŸ·è¡Œ Suspend Functionï¼š\n\n```kotlin\nsuspend fun nums(): List<Int> {\n    val ans = mutableListOf<Int>()\n    for (i in 1..100_000) {\n        delay(100)\n        ans.add(i)\n    }\n    return ans\n}\n\nfun main() = runBlocking {\n    nums().forEach { value ->\n        println(value)\n    }\n}\n```\n\nä¸Šé¢çš„ç¯„ä¾‹å°±æœƒå°è¨˜æ†¶é«”ç”¢ç”Ÿä¸€å®šçš„è² æ“”ï¼Œé€™æ™‚å°±æ˜¯æ”¹æˆ Flow çš„å¥½æ™‚æ©Ÿï¼š\n\n```kotlin\nsuspend fun nums(): Flow<Int> = flow {\n    for (i in 1..100_000) {\n        delay(100)\n        emit(i)\n    }\n}\n\nfun main() = runBlocking {\n    nums().collect {\n        println(it)\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ç¯„ä¾‹æ²’æœ‰ä¸€æ¬¡ç”¢ç”Ÿä¸€å€‹å¾ˆå¤§çš„ Listï¼Œå†ä¸€æ¬¡æŠŠè³‡æ–™å›å‚³ï¼Œå¯«çš„ä¹Ÿå¯ä»¥æ›´ç°¡æ½”ã€‚\n\n## Flow is Cold\n\né€™å¥è©±çš„æ„æ€æ˜¯ï¼Œå¦‚æœ Flow æ²’æœ‰è¢« Collectï¼Œé‚£éº¼ Flow å°±æ°¸é ä¸æœƒè¢«åŸ·è¡Œã€‚\n\nä¸‹é¢çš„ä¾‹å­æˆ‘å€‘åœ¨ Emit å‰åŠ ä¸Šä¸€å€‹ `println` ï¼Œä¸¦ç”¨ä¸€å€‹è®Šæ•¸æ¥ä½ä¸€å€‹ Flowï¼Œä½†ä¸å»å‘¼å« Collectï¼Œæ‰€ä»¥æœƒå…ˆè¼¸å‡º `Hello World` æ‰æœƒè¼¸å‡º `Start Flow`ã€‚\n\n```kotlin\nsuspend fun nums(): Flow<Int> = flow {\n    println(\"Start Flow\")\n    for (i in 1..5) {\n        delay(100)\n        emit(i)\n    }\n}\n\nfun main() = runBlocking {\n    var n: Flow<Int> = nums()\n    println(\"Hello World\")\n    n.collect {\n        println(it)\n    }\n}\n```\n\nè¼¸å‡ºï¼š\n\n```text\nHello World\nStart Flow\n1\n2\n3\n4\n5\n```\n\n## Emit æ™‚ æ‰æœƒå‘¼å« Collect\n\næŠŠä¸Šé¢çš„ä¾‹å­å† emit å‰åŠ ä¸Šä¸€å€‹ `println()`ï¼š\n\n```kotlin\nsuspend fun nums(): Flow<Int> = flow {\n    println(\"Start Flow\")\n    for (i in 1..5) {\n        delay(100)\n        println(\"emit $i\")\n        emit(i)\n    }\n}\n\nfun main() = runBlocking {\n    var n: Flow<Int> = nums()\n    println(\"Hello World\")\n    n.collect {\n        println(it)\n    }\n}\n```\n\nçœ‹åˆ°è¼¸å‡ºå¯ä»¥ç™¼ç¾ï¼Œæœƒå…ˆçœ‹åˆ° emit() ä¸Šé¢çš„ print è¢«åŸ·è¡Œï¼Œæ‰æœƒåŸ·è¡Œåˆ°å‘¼å« collect æ™‚å‚³é€²å»çš„ functionã€‚\n\n```text\nHello World\nStart Flow\nemit 1\n1\nemit 2\n2\nemit 3\n3\nemit 4\n4\nemit 5\n5\n```\n\n## Flow çš„è³‡æ–™é‡æ˜¯å›ºå®šçš„\n\né€™å¥è©±çš„æ„æ€ä¸¦ä¸æ˜¯èªª flow åªèƒ½å®šç¾©å¥½æ•¸é‡å†å›å‚³ï¼Œè€Œæ˜¯èªªå¦‚æœ flow è£¡çš„æ‰€æœ‰ emit æ²’æœ‰è¢« collectï¼Œå°±æœƒå‡ºéŒ¯ã€‚\n\nä¸‹é¢çš„ flow å°±ä¸€å®šè¦è¢« collect äº”æ¬¡ï¼Œå¦‚æœå› ç‚ºå‘¼å«ä»–çš„ function è¢«æ„å¤–ä¸­æ–·ï¼Œé€™å€‹ flow ä¹Ÿæœƒæ‹‹å‡ºéŒ¯èª¤ã€‚\n\n```kotlin\nsuspend fun nums(): Flow<Int> = flow {\n    for (i in 1..5) {\n        emit(i)\n    }\n}\n```\n\né‚£éº¼å¦‚æœæˆ‘åªè¦ä¸€å®šæ•¸é‡çš„è³‡æ–™æ€éº¼è¾¦ï¼Ÿä¸‹é¢ç¯„ä¾‹å–è‡ªå®˜æ–¹æ–‡ä»¶ï¼š\n\n```kotlin\nfun numbers(): Flow<Int> = flow {\n    try {\n        emit(1)\n        emit(2)\n        println(\"This line will not execute\")\n        emit(3)\n    } finally {\n        println(\"Finally in numbers\")\n    }\n}\n\nfun main() = runBlocking<Unit> {\n    numbers()\n        .take(2) // take only the first two\n        .collect { value -> println(value) }\n}\n\n/* output:\n1\n2\nFinally in numbers\n*/\n```\n\n## Flow mapping\n\nFlow å¯ä»¥ç”¨ map çš„æ–¹å¼ï¼Œè½‰æ›æˆå¦ä¸€å€‹ Flowã€‚\n\né€™å€‹ä¾‹å­ç”¢ç”Ÿå¹³æ–¹æ•¸ï¼š\n\n```kotlin\nsuspend fun allNumbers(n: Int): Flow<Int> = flow {\n    for (i in 1..n) {\n        emit(i)\n    }\n}\n\nsuspend fun square(n: Int): Flow<Int> = allNumbers(n).map { it * it }\n\nfun main() = runBlocking {\n    square(10).collect {\n        print(\"$it \")\n    }\n}\n\n// output: 1 4 9 16 25 36 49 64 81 100\n```\n\n## Flow Filter\n\né€™å€‹ä¾‹å­è¼¸å‡º 1 åˆ° 100 ä¹‹é–“çš„æ‰€æœ‰è³ªæ•¸(å‹¿æ¨¡ä»¿ï¼Œæ•ˆç‡å ªæ†‚)ï¼š\n\n```kotlin\nsuspend fun allNumbers(n: Int): Flow<Int> = flow {\n    for (i in 1..n) {\n        emit(i)\n    }\n}\n\nsuspend fun primeNumbers(n: Int): Flow<Int> = allNumbers(n).filter { it.isPrime() }\n\nfun Int.isPrime(): Boolean {\n    if (this <= 1) return false\n    for (i in 2..this / 2) {\n        if (this % i == 0) {\n            return false\n        }\n    }\n    return true\n}\n\nfun main() = runBlocking {\n    primeNumbers(100).collect {\n        print(\"$it \")\n    }\n}\n\n// output: 2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97\n```\n\n> ç¢å¿µï¼šé€™æ®µç¨‹å¼çœŸçš„å……åˆ†å±•ç¾ Kotlin çš„å¨åŠ›..\n\n## å¾Œè¨˜\n\nFlow é‚„æœ‰å¾ˆå¤šè¤‡é›œçš„ç”¨æ³•ï¼Œåƒæ˜¯åˆä½µå…©å€‹ flow ä¹‹é¡çš„ï¼Œå»ºè­°æœ‰èˆˆè¶£çš„äººå¯ä»¥è‡ªå·±å»çœ‹å®˜æ–¹æ–‡ä»¶ã€‚\n\nå¦å¤–ï¼ŒKotlin å…¶å¯¦é‚„æœ‰ä¸€å€‹å«åš Sequence çš„ Interfaceï¼Œè·Ÿ Flow éå¸¸åƒï¼Œåœ¨ä¸æ˜¯éœ€è¦å¤šç·šç¨‹çš„æ™‚å€™å°±å·²ç¶“å¾ˆå¤ ç”¨ï¼ŒFlow ä¸»è¦åœ¨å¤šç·šç¨‹ä¸­ä½¿ç”¨ï¼ŒSequence å–®ç·šç¨‹ä¸­ä½¿ç”¨ã€‚\n\n## Reference\n\n- [Asynchronous Flow](https://kotlinlang.org/docs/flow.html)\n","tags":["kotlin","coroutines","flow","android"]},{"id":10,"date":1648132339000,"url":"/posts/git/github-gpg","title":"GitHub GPG - Verified Commit","summary":"\næœ€è¿‘å¸¸å¸¸æœƒçœ‹åˆ°åˆ¥å…¥ GitHub ä¸Šçš„ Commit æœƒæœ‰ Verified çš„å­—æ¨£ï¼ŒæŸ¥äº†æ‰çŸ¥é“é€™æ˜¯ç‚ºäº†é˜²æ­¢æœ‰äººç›œç”¨ä½ çš„ email ç°½ commitï¼Œç•¢ç«Ÿ git çš„ user.email æ˜¯å¯ä»¥è‡ªå·±éš¨ä¾¿è¨­çš„ï¼Œæ‰€ä»¥ GitHub å°±æä¾›ä¸€å€‹å¯ä»¥ç”¨å…¬ç§é‘°çš„æ–¹å¼ä¾†ç¢ºèªèº«ä»½ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6e429f76-94c1-46ff-77da-7d50a886d100/public)\n\n","content":" æœ€è¿‘å¸¸å¸¸æœƒçœ‹åˆ°åˆ¥å…¥ GitHub ä¸Šçš„ Commit æœƒæœ‰ Verified çš„å­—æ¨£ï¼ŒæŸ¥äº†æ‰çŸ¥é“é€™æ˜¯ç‚ºäº†é˜²æ­¢æœ‰äººç›œç”¨ä½ çš„ email ç°½ commitï¼Œç•¢ç«Ÿ git çš„ user.email æ˜¯å¯ä»¥è‡ªå·±éš¨ä¾¿è¨­çš„ï¼Œæ‰€ä»¥ GitHub å°±æä¾›ä¸€å€‹å¯ä»¥ç”¨å…¬ç§é‘°çš„æ–¹å¼ä¾†ç¢ºèªèº«ä»½ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6e429f76-94c1-46ff-77da-7d50a886d100/public)\n\n<!--more-->\n\n## GnuPG\n\næˆ‘å€‘è¦åˆ©ç”¨ GnuPG ä¾†ç”¢ç”Ÿé‡‘é‘°å’Œç°½ç½² Commitï¼Œç•¶ç„¶è¦å…ˆå®‰è£ä»–ï¼Œå¯ä»¥è‡ªå·±æŸ¥ä¸€ä¸‹è‡ªå·±çš„ OS è¦æ€éº¼è£ï¼š\n\n[Download GnuPG](https://www.gnupg.org/download)\n\n```text\nbrew install gnupg     # macOS\nchoco install gnupg    # Windows\napt install gnupg      # Ubuntu\n```\n\n## ç”¢ç”Ÿ GPG Key\n\nç”¨ä¸‹é¢çš„ä¸€è¡ŒæŒ‡ä»¤å°±æœƒé€²åˆ°äº’å‹•å¼çš„ç•«é¢ï¼Œæ¥ä¸‹ä¾†éœ€è¦è¼¸å…¥ä¸€äº›è³‡æ–™ï¼š\n\n```shell\ngpg --full-generate-key\n```\n\n1. ç”¢ç”Ÿ Rsa and Rsa\n2. GitHub å»ºè­°ä½¿ç”¨ 4096ï¼Œæœ€è¤‡é›œçš„å°±å°äº†\n3. é‡‘é‘°è¦ä¸è¦éæœŸå¯ä»¥è‡ªå·±è©•ä¼°ï¼Œæˆ‘æ˜¯é¸ä¸éæœŸ\n4. ç¢ºèªè³‡æ–™è¼¸å…¥æ­£ç¢º\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d6411985-0b33-4ab2-e883-f95ce0da3c00/public)\n\n1. è¼¸å…¥è¦ç°½ç½²çš„åå­—\n2. è¼¸å…¥è¦ç°½ç½²çš„ emailï¼Œæ³¨æ„å¿…é ˆèˆ‡ GitHub Email å’Œ `git config user.email` çš„ä¸€æ¨£ã€‚\n3. è¨»é‡‹éš¨ä¾¿è¼¸å…¥å³å¯\n4. ç¢ºèªè³‡æ–™è¼¸å…¥æ­£ç¢º\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/594a269c-ab4f-4484-fa9a-c74307454600/public)\n\næ¥ä¸‹ä¾†æœƒè·³å‡ºä¸€å€‹è¦è¼¸å…¥å¯†ç¢¼çš„ç•«é¢ï¼Œä¸€æ¨£ä¾è‡ªå·±éœ€æ±‚è¨­å®šå³å¯\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6b11a19b-c7fa-4697-0861-5fb4c66ff800/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/56a8fc50-5a1e-4a0e-e9ef-30b9fe74fc00/public)\n\né€™æ¨£å°±ç”¢ç”ŸæˆåŠŸäº†ï¼Œå¯ä»¥è¨˜ä¸€ä¸‹é€™å€‹ç•«é¢å‡ºç¾çš„è³‡æ–™\n\nå¦‚æœè¦é¡¯ç¤ºæ‰€æœ‰çš„ Keyï¼š\n\n```shell\ngpg --list-secret-keys\n```\n\n## è¤‡è£½ GPG Key åˆ° GitHub\n\nç”¨å„å€‹æŒ‡ä»¤ä¾†é¡¯ç¤ºå…¬é‘°ï¼Œä¸¦ä¸”è¤‡è£½åˆ° GitHub ä¸Šï¼ŒåŒ…å« Begin å’Œ End å…©è¡Œï¼š\n\n```shell\ngpg --armor --export <Your Key>\n```\n\né€²åˆ°è¨­å®šè£¡ï¼Œæ–°å¢ GPG Keyï¼Œè²¼ä¸Šå‰›å‰›è¤‡è£½ä¸‹çš„é‡‘é‘°\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/8a75edb9-4a08-4060-608a-d63353a77c00/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9c5ad211-0bcc-4058-a304-6903e69c8700/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0ef8e55b-7f1b-43ab-cd40-43303b98bc00/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/32e1e3a5-2fdc-4e6d-aef3-08122d448d00/public)\n\n## ç°½ç½² Commit\n\nè¦ç°½ç½² Commit æˆ‘å€‘éœ€è¦å…ˆå‘Šè¨´ git æˆ‘å€‘è¦ç”¨å“ªæ”¯é‘°åŒ™ï¼Œä¹Ÿæ˜¯ç”¨ git config è¨­å®šï¼Œå¦‚æœè¦æ¯å€‹å€‰åº«éƒ½ç”¨é€™æ”¯é‘°åŒ™ï¼Œå¯ä»¥ç›´æ¥è¨­å®š globalï¼š\n\n```shell\ngit config user.signingkey <Your Key>\ngit config --global user.signingkey <Your Key>\n```\n\nè¨­å®šå¥½å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥é–‹å§‹ç°½ Commitï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯åœ¨ Commit æ™‚åŠ ä¸Š `-S`ï¼š\n\n```shell\ngit commit -S -m \"Commit Message\"\n```\n\nå¦‚æœè¦ºå¾—æ¯æ¬¡éƒ½è¦åŠ ä¸Šåƒæ•¸å¾ˆéº»ç…©ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åŠ åˆ° config ä¸­ï¼Œè®“æ¯æ¬¡ Commit éƒ½é è¨­ç°½ç½²ï¼š\n\n```shell\ngit config commit.gpgsign true\ngit config --global commit.gpgsign true\n```\n\næ¥ä¸‹ä¾†ï¼Œåªè¦ push åˆ° GitHub ä¸Šï¼Œå°±æœƒçœ‹åˆ°æœ‰ Verified çš„æ¨™ç±¤ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6e429f76-94c1-46ff-77da-7d50a886d100/public)\n\n## Reference\n\n- [Generating a new GPG key](https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key)\n- [Adding a new GPG key to your GitHub account](https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account)\n- [GnuPG](https://www.gnupg.org/)\n","tags":["git","github","gpg","verified","commit"]},{"id":11,"date":1642441209000,"url":"/posts/web/meilisearch-hugo","title":"MeiliSearch with Hugo","summary":"\nèªªåˆ°æœå°‹çš„è§£æ±ºæ–¹æ¡ˆï¼Œæœ€æœ‰åçš„å¤§æ¦‚å°±æ˜¯ [Algolia](https://www.algolia.com/)ï¼Œå¯ä»¥æ–¹ä¾¿çš„å‰µå»ºç´¢å¼•ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¯«å¥½çš„å‰ç«¯ç¶²é å…ƒä»¶å¯ä»¥ä½¿ç”¨ï¼Œå”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ”¶è²»ã€‚é›–ç„¶ Algolia è¦æ”¶è²»ï¼Œä½†å…¶å¯¦å°æ–¼æˆ‘é€™å€‹å°ç¶²é éƒ½ç´¢å¼•é‡æ˜¯å®Œå…¨ä¸ç”¨éŒ¢çš„ï¼Œä½†æ˜¯å°±é‚„æ˜¯è¦ºå¾—è‡ªå·±æ¶ä¸€å€‹ç´¢å¼•ç³»çµ±æ¯”è¼ƒæœ‰æ„Ÿè¦ºï¼Œç„¶å¾Œæˆ‘å°±åœ¨ GitHub ä¸Šç™¼ç¾äº†é–‹æºçš„ [MeiliSearch](https://meilisearch.com)ï¼ŒåŠŸèƒ½åŸºæœ¬ä¸Šè·Ÿ Algolia å¾ˆåƒï¼Œä¹Ÿæ”¯æ´ä¸­æ–‡ï¼Œç”šè‡³æœ‰äº›å‰ç«¯å…ƒä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ Algolia çš„ï¼Œç¼ºé»å°±æ˜¯è¦è‡ªå·±æ¶è¨­ Serverã€‚\n\n","content":" èªªåˆ°æœå°‹çš„è§£æ±ºæ–¹æ¡ˆï¼Œæœ€æœ‰åçš„å¤§æ¦‚å°±æ˜¯ [Algolia](https://www.algolia.com/)ï¼Œå¯ä»¥æ–¹ä¾¿çš„å‰µå»ºç´¢å¼•ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¯«å¥½çš„å‰ç«¯ç¶²é å…ƒä»¶å¯ä»¥ä½¿ç”¨ï¼Œå”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ”¶è²»ã€‚é›–ç„¶ Algolia è¦æ”¶è²»ï¼Œä½†å…¶å¯¦å°æ–¼æˆ‘é€™å€‹å°ç¶²é éƒ½ç´¢å¼•é‡æ˜¯å®Œå…¨ä¸ç”¨éŒ¢çš„ï¼Œä½†æ˜¯å°±é‚„æ˜¯è¦ºå¾—è‡ªå·±æ¶ä¸€å€‹ç´¢å¼•ç³»çµ±æ¯”è¼ƒæœ‰æ„Ÿè¦ºï¼Œç„¶å¾Œæˆ‘å°±åœ¨ GitHub ä¸Šç™¼ç¾äº†é–‹æºçš„ [MeiliSearch](https://meilisearch.com)ï¼ŒåŠŸèƒ½åŸºæœ¬ä¸Šè·Ÿ Algolia å¾ˆåƒï¼Œä¹Ÿæ”¯æ´ä¸­æ–‡ï¼Œç”šè‡³æœ‰äº›å‰ç«¯å…ƒä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ Algolia çš„ï¼Œç¼ºé»å°±æ˜¯è¦è‡ªå·±æ¶è¨­ Serverã€‚\n\n<!--more-->\n\næœ¬æ–‡ä»¥æœå°‹æœ¬ç«™ç‚ºç›®çš„æ’°å¯«ï¼Œæ‰€ä»¥å¾Œé¢çš„ç¯„ä¾‹å¤§å¤šèˆ‡ Hugo ç›¸é—œï¼Œå¦‚æœæƒ³è¦çœ‹å®Œæ•´çš„ç¨‹å¼ç¢¼ï¼Œå¯ä»¥ç›´æ¥åˆ°æœ¬ç«™çš„ GitHubã€‚\n\n## ç°¡ä»‹ MeiliSearch Server\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f93885e8-f670-44ec-ea24-264a97c9a500/public)\n\nåŸºæœ¬ä¸Š MeiliSearch å°±æ˜¯ä¸€å€‹ RESTful APIï¼Œç›®æ¨™æ˜¯è¦æä¾›ç¾æˆçš„æœå°‹è§£æ±ºæ–¹æ¡ˆï¼Œå®Œå…¨é–‹æºï¼Œæä¾›å³æ™‚æœå°‹ã€æ‹¼å¯«éŒ¯èª¤ã€åŒç¾©è©ã€æ¨¡ç³Šæœå°‹ã€è‡ªè¨‚æ’åã€æ’åºå’Œå¤šèªè¨€æœå°‹çš„æ”¯æ´ï¼Œé€£ä¸­æ–‡ä¹Ÿä¸ä¾‹å¤–ã€‚æ ¹æ“šå®˜æ–¹æ–‡ä»¶çš„ä»‹ç´¹ï¼ŒMeiliSearch ä»¥æ˜“ç”¨æ€§ç‚ºé¦–è¦ç›®æ¨™ï¼Œå°æ–¼é–‹ç™¼è€…ï¼Œåªéœ€è¦å°‘å°‘å¹¾è¡Œ code å°±å¯ä»¥ä½¿ç”¨ï¼›å°æ–¼ä½¿ç”¨è€…ï¼Œæä¾›ç›´è§€çš„å³æ™‚è¼¸å…¥å³æ™‚åæ‡‰çš„æœå°‹çµæœã€‚\n\nå®˜æ–¹ä¹Ÿæœ‰å¾ˆå¤šçš„ SDKï¼Œ.NET, Dart, Go, Java, JS, Python, Swiftï¼Œè€Œä¸”ä¸Šé¢é€™äº›é‚„ä¸æ˜¯å…¨éƒ¨ï¼Œæ‰€ä»¥åœ¨é–‹ç™¼å„èªè¨€çš„æ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œéƒ½å¯ä»¥è€ƒæ…®ç”¨ MeiliSearch åšç‚ºå¾Œç«¯æœå°‹å¼•æ“ã€‚\n\nMeiliSearch ä¹Ÿä¸æ˜¯å®Œå…¨æ²’æœ‰ç¼ºé»ï¼Œç¼ºé»å°±æ˜¯è¦è‡ªå·±æœ‰ä¼ºæœå™¨ï¼Œåƒæ˜¯æœ¬æ–‡ä»Šå¤©çš„æ¡ˆä¾‹å°±æ˜¯è¦å¹« Static Site åšæœå°‹çš„åŠŸèƒ½ï¼Œé€šå¸¸ Static Site å¤§å®¶æ‡‰è©²éƒ½æ˜¯ç”¨ GitHub Pages ç­‰ Statice Site Hosting æœå‹™ï¼Œæ‰€ä»¥ç¶²é æœ¬èº«æ˜¯æ²’æœ‰è‡ªå·±æ¶ Server çš„ï¼Œç‚ºäº†åŠ å€‹æœå°‹åŠŸèƒ½æœƒè¦å¤šä¸€å€‹ Server å°±æ˜¯å¾ˆå¤§çš„ç¼ºé»ã€‚\n\n## SearchIndex.json\n\nåœ¨é–‹å§‹ä½¿ç”¨ MeiliSearch ä¹‹å‰ï¼Œæˆ‘å€‘å…ˆä¾†æŠŠè¦ç´¢å¼•çš„è³‡æ–™æº–å‚™å¥½ï¼ŒMeiliSearch æœƒéœ€è¦ä½¿ç”¨ json ç•¶ä½œç´¢å¼•ï¼Œæ‰€ä»¥æˆ‘å€‘è¦ç”¢ç”Ÿä¸€å€‹ json çš„ç¯„æœ¬ã€‚å‰µå»º `/layouts/list.searchindex.json`ï¼Œå…§å®¹å¦‚ä¸‹ï¼š\n\n```text\n[ {{- $i := 0 -}}\n    {{- range where .Site.RegularPages \"Section\" \"ne\" \"\" -}}\n       {{- if not .Params.noSearch -}}\n          {{- if gt $i 0 }},{{ end -}}\n          {\"id\":{{ $i }}, \"date\":\"{{ .Date.Unix }}\", \"url\":\"{{ .Permalink }}\", \"title\":{{ .Title | jsonify  }}, \"summary\":{{ with .Description}}{{ . | plainify | jsonify }}{{ else }}{{ .Summary | plainify | jsonify }}{{ end }}, \"content\":{{ .Content | plainify | jsonify }},\"tags\":[ {{- $t := 0 }}{{- range .Param \"tags\" -}}{{ if gt $t 0 }},{{ end }}{{ . | jsonify }}{{ $t = add $t 1 }}{{ end -}} ], \"section\": {{ .Section | jsonify -}} }\n        {{- $i = add $i 1 -}}\n    {{- end -}}\n{{- end -}} ]\n```\n\nç„¶å¾Œåœ¨ `config.yaml` ä¸­åŠ å…¥ä¸‹é¢çš„è¨­å®šå€¼ï¼š\n\n```yaml\noutputFormats:\n  SearchIndex:\n    mediaType: \"application/json\"\n    baseName: \"searchindex\"\n    isPlainText: true\n    notAlternative: true\noutputs:\n  home: [\"HTML\", \"RSS\", \"SearchIndex\"]\n```\n\nå®Œæˆä¸Šé¢å…©æ¨£è¨­å®šå¾Œï¼Œå¯ä»¥ `hugo` ä¸€ä¸‹è©¦è©¦çœ‹ï¼Œæœ‰æ²’æœ‰åœ¨ `/public/searchindex.json` ä¸­çœ‹åˆ°ç´¢å¼•æª”æ¡ˆï¼Œæ‡‰è©²æœƒé¡ä¼¼å¦‚ä¸‹ï¼š\n\n```json\n[\n  {\n    \"id\": 0,\n    \"date\": \"1622891718\",\n    \"url\": \"https://tonypepe.com/posts/others/hello-world/\",\n    \"title\": \"Hello World\",\n    \"summary\": \"Hello World. This is a test post.\",\n    \"content\": \"This is my first post in hugo\\ncontent\",\n    \"tags\": [\"hugo\", \"test\"],\n    \"section\": \"posts\"\n  }\n]\n```\n\n## æ¶è¨­ MeiliSearch Server\n\næº–å‚™å¥½ç´¢å¼•æª”æ¡ˆå¾Œï¼Œæˆ‘å€‘å°±ä¾†æ¶è¨­ MeiliSearch çš„ Serverï¼ŒMeiliSearch æ˜¯ç”¨ Rust ç·¨å¯«ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯è·¨å¹³å°é€šç”¨ã€‚å®˜æ–¹æä¾›å¾ˆå¤šç¨®å®‰è£æ–¹å¼ï¼Œé‚„æœ‰ä¸€éµå•Ÿå‹•è…³æœ¬ï¼Œç•¶ç„¶ï¼Œç‚ºäº†é¿å…å¼„é«’ç’°å¢ƒï¼Œæœ€æ¨è–¦çš„ç•¶ç„¶é‚„æ˜¯ Dockerï¼Œä¸‹é¢å°±å…ˆä»¥ Docker ç‚ºç¯„ä¾‹ï¼š\n\n```bash\ndocker run -it --rm \\\n    -p 7700:7700 \\\n    -v $(pwd)/data.ms:/data.ms \\\n    getmeili/meilisearch:latest\n```\n\næ³¨æ„ä¸€ä¸‹ï¼Œä¸Šé¢æ›è¼‰äº†ä¸€å€‹ `data.ms` çš„è³‡æ–™å¤¾ï¼Œæ‰€ä»¥åœ¨åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å‰ï¼Œè¨˜å¾—å…ˆå‰µå»ºå¥½ã€‚`data.ms` é€™å€‹è³‡æ–™å¤¾æ˜¯ç‚ºäº†å­˜æ”¾ç´¢å¼•è³‡æ–™ï¼Œé¿å…å› ç‚º Docker å®¹å™¨é‡å•Ÿå°±æå¤±è³‡æ–™ï¼Œæ‰€ä»¥å¾ˆé‡è¦ã€‚\n\nç¾åœ¨å¯ä»¥åˆ° [http://localhost:7700](http://localhost:7700)ï¼Œæœƒçœ‹åˆ°æœ‰ä¸€å€‹ç°¡æ˜“çš„ WEB UIã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/5664dc51-5d55-415a-3633-ac45e17d7a00/public)\n\nå¦‚æœä¸æƒ³ç”¨ Dockerï¼Œé‚„æ˜¯å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶çš„å…¶ä»–å®‰è£æ–¹å¼å®‰è£ã€‚\n\n## æäº¤ç´¢å¼•è³‡æ–™\n\nå‰é¢æœ‰æåˆ° MeiliSearch æ˜¯ RESTful APIï¼Œæ‰€ä»¥è¦å‘ä»–æœå°‹æˆ–æ˜¯æä¾›è³‡æ–™ï¼Œéƒ½æ˜¯ç”¨ HTTP Methodã€‚å®˜æ–¹æ–‡ä»¶å¯«çš„éƒ½æ˜¯ curlï¼Œæˆ‘å€‘é‚„æ˜¯ä½¿ç”¨ GUI çš„æ–¹å¼ä»‹ç´¹ã€‚HTTP çš„ GUI å¤§å®¶æ‡‰è©²éƒ½æœƒæƒ³åˆ° Postmanï¼Œä½†ä»Šå¤©æˆ‘å€‘è¦ä½¿ç”¨ä»–çš„é–‹æºæ›¿ä»£ [Hoppsotch](https://hoppspot.io)ï¼Œä»–æ˜¯ä¸€å€‹ç¶²é å·¥å…·ï¼Œæ‰€ä»¥ä¸éœ€è¦å®‰è£ã€‚\n\nå¯ä»¥å…ˆå° `/health` åš `GET` è©¦è©¦çœ‹æœ‰æ²’æœ‰é€£ä¸Šï¼Œå¦‚æœæ²’æœ‰é€£ä¸Šï¼Œå¯èƒ½è¦æª¢æŸ¥ä¸€ä¸‹æœ‰æ²’æœ‰æˆåŠŸå•Ÿå‹• MeiliSearch Serverã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/cf86e106-a1f6-472e-d2c1-a6b186944f00/public)\n\nç¢ºå®šé€£ä¸Šå¾Œï¼Œæˆ‘å€‘å°±ä¾†æäº¤ç´¢å¼•è³‡æ–™ï¼Œå¦‚æœé‚„æ²’æœ‰ Hugo ç”¢ç”Ÿçš„ç´¢å¼•è³‡æ–™ï¼Œå¯ä»¥å…ˆåˆ°æœ¬ç«™çš„ GitHubï¼Œæ‹¿æœ¬ç«™çš„ [searchindex.json](https://github.com/TonyPepeBear/HugoBlog/blob/1bfae9859a44338d24a9f6676be37f72cc983505/searchindex.json) åšæ¸¬è©¦ã€‚\n\nå› ç‚º MeiliSearch ä¹Ÿå¯ä»¥åŒæ™‚æœ‰å¤šå€‹ Indexes åšæœå°‹ï¼Œæˆ‘å€‘ä¸‹é¢çš„ç¯„ä¾‹ä»¥ `hugo_blog` ä½œç‚ºç¯„ä¾‹åç¨±ï¼Œå¤§å®¶å¯ä»¥æ ¹æ“šéœ€æ±‚è‡ªå·±æ±ºå®šä½¿ç”¨çš„åç¨±ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/71797a57-6f97-44cd-f4dc-675ec42ffd00/public)\n\nå¯ä»¥çœ‹åˆ°ä¸Šåœ–å° `/indexes/<<IndexName>>/documents` åš `POST` æ–¹æ³•ï¼Œå°±å¯ä»¥æŠŠç´¢å¼•è³‡æ–™æäº¤åˆ° MeiliSearch Serverã€‚è¨˜å¾—å…§å®¹é¡å‹æ˜¯ `application/json`ï¼Œç„¶å¾ŒæŠŠç´¢å¼•è³‡æ–™æ”¾åˆ° bodyã€‚\n\nç¾åœ¨å›åˆ° [localhost:7700](http://localhost:7700)ï¼Œæ‡‰è©²å°±å¯ä»¥çœ‹åˆ°åŸæœ¬ç©ºç©ºå¦‚ä¹Ÿçš„ WEB UI ç¾åœ¨å¯ä»¥åšæœå°‹äº†ï¼Œå¯ä»¥å…ˆåœ¨é€™è£¡åšä¸€äº›ç°¡å–®çš„æœå°‹ï¼Œè©¦è©¦çœ‹è‡ªå·±çš„ç´¢å¼•è³‡æ–™æœ‰æ²’æœ‰è¢«æˆåŠŸçš„ä½¿ç”¨ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c58970b0-53b5-4a16-50bb-ff40fa6fde00/public)\n\n## MeiliSearch in Production\n\nMeiliSearch é è¨­çš„å•Ÿå‹•æ–¹å¼å…¶å¯¦æ˜¯ `development`ï¼Œé€™æ¨¡å¼åªæ˜¯æ–¹ä¾¿æœ¬åœ°åšæ¸¬è©¦ä½¿ç”¨çš„ï¼Œå¦‚æœè¦ä½¿ç”¨åœ¨ç”Ÿç”¢ç’°å¢ƒï¼Œæ‡‰è©²è¦ä»¥ `production` æ¨¡å¼å•Ÿå‹•ã€‚åœ¨ Production æ¨¡å¼ä¸‹ï¼Œæœƒæœ‰å…©å€‹ä¸ä¸€æ¨£çš„åœ°æ–¹ï¼Œç¬¬ä¸€é …æ˜¯ Web UI æœƒè¢«åœç”¨ï¼Œç¬¬äºŒé …æ˜¯æœƒå¿…é ˆè¦è¨­å®š `Master Key`ï¼Œä¸‹é¢é‚„æ˜¯ç”¨ Docker ä½œç‚ºç¯„ä¾‹ï¼š\n\n```bash\ndocker run -it --rm \\\n    -p 7700:7700 \\\n    -v $(pwd)/data.ms:/data.ms \\\n    -e MEILI_ENV=production \\\n    -e MEILI_MASTER_KEY=<Your Master Key> \\\n    getmeili/meilisearch:latest\n```\n\nä¸Šé¢è¨­å®šçš„ Master Keyï¼Œå°±æ˜¯ç®¡ç†æ¬Šé™æœ€å¤§çš„ API Keyï¼Œæ‰€ä»¥è¦è¨˜å¾—å¦¥å–„ä¿å­˜ã€‚\n\nä¸‹é¢ç”¨å‰›å‰›çš„ Master Key å»å° `/keys` åš `GET`ï¼Œç„¶å¾Œåœ¨ Headers ä¸­ï¼ŒåŠ ä¸Šå‰›å‰›çš„ Master Keyï¼Œå°±å¯ä»¥æ‹¿åˆ°é è¨­çš„æœå°‹ KEYï¼Œå’Œé è¨­çš„ ADMIN KEYã€‚å¦‚æœè¦å†å¦å¤–æ–°å¢ API KEYï¼Œå¯ä»¥åƒè€ƒå®˜æ–¹çš„æ–‡ä»¶ï¼Œé€™è£¡å°±ä¸å¤šè‘—å¢¨ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/91af11f7-29fc-446b-7ae1-dcb47f82b900/public)\n\n## ç‚ºç¶²é åŠ ä¸Šæœå°‹åŠŸèƒ½\n\næˆ‘å€‘æœƒç”¨åˆ° MeiliSearch æä¾›çš„ [Instant MeiliSearch](https://github.com/meilisearch/instant-meilisearch)ï¼Œé€™å€‹ JS åº«å°±æ˜¯ä½¿ç”¨ Algolia çš„ Instant Search æ”¹çš„ï¼Œæ‰€ä»¥æœ‰äº›æ–‡ä»¶å¯ä»¥ç›´æ¥å»çœ‹ Algolia çš„å®˜æ–¹æ–‡ä»¶ã€‚Instant MeiliSearch æœ€ç°¡å–®çš„ä½¿ç”¨æ–¹å¼ä¹Ÿæ˜¯ç›´æ¥ç”¨ CDN çš„æ–¹å¼ï¼Œä¸‹é¢æ˜¯ä¸€å€‹æœ€ç°¡å–®çš„æ¨¡æ¿ï¼Œçœ‹æ‡‚å¾Œç”¨é¡ä¼¼çš„é‚è¼¯åŠ åˆ°è‡ªå·±çš„ç¶²é ä¸­å°±å¥½ã€‚\n\nhtml:\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n  </head>\n\n  <body>\n    <div>\n      <div id=\"searchbox\"></div>\n      <div id=\"hits\"></div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/@meilisearch/instant-meilisearch/dist/instant-meilisearch.umd.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/instantsearch.js@4\"></script>\n    <script src=\"./app.js\"></script>\n  </body>\n</html>\n```\n\nä¸‹é¢æ˜¯å‰›å‰›çš„ html æœƒç”¨åˆ°çš„ `app.js`ï¼Œç”¨ä¾†ä½œç‚º Search çš„è¨­å®šå€¼ï¼Œåªè¦æŠŠä¸‹é¢çš„ç¶²å€è¨­å®šæˆè‡ªå·±çš„ç¶²å€ï¼Œå’Œè‡ªå·±åœ¨å‰å¹¾æ­¥é©Ÿæ‹¿åˆ°çš„æœå°‹ API KEY å°±å¯ä»¥ä½¿ç”¨äº†ï¼š\n\n```js\nconst search = instantsearch({\n  indexName: \"steam-video-games\",\n  searchClient: instantMeiliSearch(\n    \"https://integration-demos.meilisearch.com\",\n    \"q7QHwGiX841a509c8b05ef29e55f2d94c02c00635f729ccf097a734cbdf7961530f47c47\"\n  ),\n});\n\nsearch.addWidgets([\n  instantsearch.widgets.searchBox({\n    container: \"#searchbox\",\n  }),\n  instantsearch.widgets.hits({\n    container: \"#hits\",\n    templates: {\n      item: `\n        <div>\n          <div class=\"hit-name\">\n            {{#helpers.highlight}}{ \"attribute\": \"name\" }{{/helpers.highlight}}\n          </div>\n        </div>\n      `,\n    },\n  }),\n]);\n\nsearch.start();\n```\n\nå¦‚æœè¦ºå¾—ä»–é è¨­æä¾›çš„ UI å¾ˆé†œï¼Œå¯ä»¥ç”¨ CSS çš„æ–¹å¼å»æ”¹ä»–ã€‚\n\n## GitHub Actions è‡ªå‹•æäº¤ç´¢å¼•\n\nä¸å»¢è©±ï¼Œç›´æ¥ä¸Šæœ¬ç«™çš„ yml:\n\n```yml\nname: MeiliSearch Index\n\non:\n  push:\n    branches:\n      - master # Set a branch to deploy\n\njobs:\n  deploy:\n    runs-on: ubuntu-20.04\n    steps:\n      - uses: actions/checkout@v2\n        with:\n          submodules: true # Fetch Hugo themes (true OR recursive)\n          fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod\n\n      - name: Setup Node\n        uses: actions/setup-node@v2\n        with:\n          node-version: \"14\"\n\n      - name: Setup Hugo\n        uses: peaceiris/actions-hugo@v2\n        with:\n          hugo-version: \"latest\"\n          extended: true\n\n      - name: Build\n        run: |\n          npm i\n          hugo --minify\n\n      - name: Post Index\n        run: |\n          curl \\\n            -X POST \"https://search.tonypepe.com/indexes/hugo_blog/documents\" \\\n            -H 'Authorization: Bearer ${{ secrets.MEILISEARCH_KEY }}' \\\n            -H 'Content-Type: application/json' \\\n            --data-binary \"@public/searchindex.json\"\n```\n\nå…¶å¯¦é‡é»å°±æ˜¯åœ¨æœ€å¾Œä¸€æ­¥ï¼ŒæŠŠç´¢å¼•æª”æ¡ˆ POST åˆ° MeiliSearch å°±å¯ä»¥äº†ã€‚\n\n## Referenc\n\n- [MeiliSearch](https://meilisearch.com)\n- [A simple javascript based full text search function](https://discourse.gohugo.io/t/a-simple-javascript-based-full-text-search-function/29119)\n- [Hoppsotch](https://hoppspot.io)\n- [Instant MeiliSearch](https://github.com/meilisearch/instant-meilisearch)\n","tags":["meilisearch","search","web","hugo","github","actions"]},{"id":12,"date":1642168105000,"url":"/posts/web/iconify","title":"Iconify -- icon å¤§ç¦®åŒ…","summary":"\nGitHub ä¸Šæœ‰è¨±è¨±å¤šå¤šé–‹æºçš„ iconï¼Œä½†æ˜¯æ¯å€‹ç”¨æ³•ä¸ç›¡ç›¸åŒï¼Œç”šè‡³å¤§éƒ¨åˆ†çš„ä½¿ç”¨æ–¹å¼ï¼Œéƒ½æ˜¯ç›´æ¥ä¸‹è¼‰ SVG ä½¿ç”¨ã€‚é›–ç„¶ä½¿ç”¨ SVG ä¹Ÿä¸æ˜¯ä¸å¥½ï¼Œä½†æ˜¯å°±æœƒéœ€è¦è‡ªå·±å¤šä¸€æ­¥é©Ÿçš„ä½¿ç”¨ã€‚Iconify æŠŠè¨±å¤š icon æ•´åˆåœ¨ä¸€èµ·ï¼Œä¸¦ä¸”æä¾›éå¸¸ç°¡å–®çš„è¾¦æ³•ï¼Œå°±å¯ä»¥è®“ç¶²é æœ‰å¾ˆç²¾ç¾çš„ iconã€‚\n\n","content":" GitHub ä¸Šæœ‰è¨±è¨±å¤šå¤šé–‹æºçš„ iconï¼Œä½†æ˜¯æ¯å€‹ç”¨æ³•ä¸ç›¡ç›¸åŒï¼Œç”šè‡³å¤§éƒ¨åˆ†çš„ä½¿ç”¨æ–¹å¼ï¼Œéƒ½æ˜¯ç›´æ¥ä¸‹è¼‰ SVG ä½¿ç”¨ã€‚é›–ç„¶ä½¿ç”¨ SVG ä¹Ÿä¸æ˜¯ä¸å¥½ï¼Œä½†æ˜¯å°±æœƒéœ€è¦è‡ªå·±å¤šä¸€æ­¥é©Ÿçš„ä½¿ç”¨ã€‚Iconify æŠŠè¨±å¤š icon æ•´åˆåœ¨ä¸€èµ·ï¼Œä¸¦ä¸”æä¾›éå¸¸ç°¡å–®çš„è¾¦æ³•ï¼Œå°±å¯ä»¥è®“ç¶²é æœ‰å¾ˆç²¾ç¾çš„ iconã€‚\n\n<!--more-->\n\n## ä½¿ç”¨ Iconify\n\nä½¿ç”¨ Iconify åªéœ€è¦å…ˆåœ¨ HTML ä¸­å¼•å…¥ Iconify çš„ Scriptï¼š\n\n```html\n<script src=\"https://code.iconify.design/2/2.1.0/iconify.min.js\"></script>\n```\n\næ¥ä¸‹ä¾†åªéœ€è¦åœ¨è¦ä½¿ç”¨ icon çš„åœ°æ–¹ï¼Œæ–°å¢ä¸€å€‹ spanï¼Œå…¶ä¸­è¦æœ‰åŒ…å« `class=\"iconify\"` å’Œ `data-icon`ï¼š\n\n```html\n<span class=\"iconify\" data-icon=\"fa:home\"></span>\n```\n\næ­£ç¢ºä½¿ç”¨å¾Œï¼Œæ‡‰è©²å°±å¯ä»¥åœ¨ç¶²é ä¸­æ­£ç¢ºçš„é¡¯ç¤ºä¸‹é¢çš„ iconï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f0141e02-3e26-415d-1ee2-438dc4d43600/public)\n\n## æœå°‹ Icon\n\nå°±åƒå‰é¢èªªçš„ï¼ŒIconify æä¾›éå¸¸å¤šçš„ iconï¼Œæ‰€ä»¥ä½œè€…ä¹Ÿæœ‰å¯«ä¸€å€‹å¯ä»¥æœå°‹åœ–æ¨™çš„åœ°æ–¹ï¼Œè€Œä¸”æœå°‹åˆ°åœ–æ¨™å¾Œï¼Œé‚„æä¾›è¨±å¤šå¯ä»¥å”åŠ©å®¢è£½åŒ–åœ–æ¨™çš„æ–¹æ³•ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/44c38b28-baa8-4faa-6d06-8e2615f19500/public)\n\n![](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c330c161-f8b4-41d2-db15-b02079185b00/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f0141e02-3e26-415d-1ee2-438dc4d43600/public)\n\nå¦‚æœçœŸçš„ä¸æƒ³ä½¿ç”¨ Iconify çš„æ–¹å¼é¡¯ç¤ºåœ–æ¨™ï¼Œä¹Ÿå¯ä»¥å–®ç´”çš„ç•¶ä½œåœ–æ¨™è’å°‹å™¨ï¼Œæœå°‹åˆ°ä¹‹å¾Œç›´æ¥ä¸‹è¼‰ SVG ä½¿ç”¨å³å¯ã€‚\n\n## Reference\n\n- [Iconify](https://iconify.design/)\n","tags":["icon","web","ios","android","design"]},{"id":13,"date":1639233015000,"url":"/posts/telegram/go-tg-bot","title":"ç”¨ Go å¯« Telegram Bot","summary":"\nTelegram Bot æ²’æœ‰ä»»ä½•ä½¿ç”¨é™åˆ¶ï¼Œå¯ä»¥å¯«å‡ºè¨±å¤šå±¬æ–¼è‡ªå·±çš„å¹«æ‰‹ã€‚æœ¬ç¯‡ç°¡å–®çš„ç”¨ Go å¯«ä¸€å€‹é¸šéµ¡æ©Ÿå™¨äººï¼Œç”¨æˆ¶èªªä»€éº¼ï¼Œæ©Ÿå™¨äººå°±å›ä»€éº¼ã€‚\n\n","content":" Telegram Bot æ²’æœ‰ä»»ä½•ä½¿ç”¨é™åˆ¶ï¼Œå¯ä»¥å¯«å‡ºè¨±å¤šå±¬æ–¼è‡ªå·±çš„å¹«æ‰‹ã€‚æœ¬ç¯‡ç°¡å–®çš„ç”¨ Go å¯«ä¸€å€‹é¸šéµ¡æ©Ÿå™¨äººï¼Œç”¨æˆ¶èªªä»€éº¼ï¼Œæ©Ÿå™¨äººå°±å›ä»€éº¼ã€‚\n\n<!--more-->\n\n## æ–°å¢è‡ªå·±çš„ Bot\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/fbf36cb0-84f4-4f7a-2553-04ecccf44800/public)\n\nTelegram éå¸¸æœ‰è¶£ï¼Œè¦æ–°å¢è‡ªå·±çš„ Botï¼Œåªè¦è·Ÿ Telegram ä¸Šçš„ [BotFather](https://telegram.me/BotFather) `èªªä¸€ä¸‹`ï¼Œä»–å°±æœƒçµ¦ä½ ä¸€å€‹ Botã€‚\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9200bc38-828c-4ad4-a022-d34c3a692d00/public)\n\næŒ‰ BotFather çµ¦ä½ çš„æ­¥é©Ÿåšï¼Œæœ€å¾Œå¯ä»¥çœ‹åˆ°ä»–æœƒæä¾›ä¸€å€‹ API Token çµ¦ä½ ï¼Œåªè¦æœ‰é€™å€‹ Token å°±å¯ä»¥è·Ÿ Bot æºé€šï¼Œè¦ä¿å­˜å¥½ï¼Œç­‰ç­‰æœƒç”¨åˆ°ï¼Œä¹Ÿä¸è¦çµ¦åˆ¥äººçœ‹åˆ°ï¼Œä»¥å…è‡ªå·±çš„ Bot è®Šæˆåˆ¥äººçš„ç©å…·ã€‚\n\n## go-telegram-bot-api\n\nGo å·²ç¶“æœ‰ç¤¾å€é–‹ç™¼çš„å‡½å¼åº«å¯ä»¥ç”¨ [telegram-bot-api](https://github.com/go-telegram-bot-api/telegram-bot-api)ã€‚\n\n```shell\ngo get -u github.com/go-telegram-bot-api/telegram-bot-api/v5\n\n```\n\nä¹‹å¾Œåªè¦ import å°±å¯ä»¥ä½¿ç”¨ï¼š\n\n```go\nimport (\n    tgbotapi \"github.com/go-telegram-bot-api/telegram-bot-api/v5\"\n)\n```\n\n## é€£ç·šåˆ° Telegram Bot\n\nåˆ©ç”¨å‰›å‰› import çš„å‡½å¼åº«ï¼Œåªéœ€è¦å‰›å‰›å‰µå»ºå¥½çš„ Bot çš„ API Token å°±å¯ä»¥é€£ç·šåˆ° Telegramã€‚\n\n```go\nbot, err := tgbotapi.NewBotAPI(os.Getenv(\"TELEGRAM_API_TOKEN\"))\nif err != nil {\n    panic(err)\n}\n```\n\nä¸Šé¢ç”¨ç’°å¢ƒè®Šæ•¸çš„æ–¹å¼ä¾†å–å¾— TOKENï¼Œé¿å…éœ€è¦ç›´æ¥å¯«åœ¨ç¨‹å¼ç¢¼è£¡ï¼Œå¦‚æœè¦ºå¾—åœ¨æ¸¬è©¦æ™‚è¨­å®šç’°å¢ƒè®Šæ•¸å¾ˆéº»ç…©ï¼Œå¯ä»¥ç”¨ JetBrains çš„ [GoLand](https://www.jetbrains.com/go/)ï¼Œè¨­å®š Runtime çš„ç’°å¢ƒè®Šæ•¸ï¼š\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9af5d8a5-3504-479d-ab04-f8b0adf93500/public)\n\n## è™•ç† Update\n\nè¦æ¥æ”¶ä½¿ç”¨è€…å‚³éä¾†çš„è¨Šæ¯ï¼ŒTelegram API ç¨±ç‚º Updateï¼Œæˆ‘å€‘ä½¿ç”¨çš„å‡½ç¤ºåº«åŸºæœ¬ä¸Šéƒ½è‡ªå‹•è™•ç†å¥½äº†ï¼Œåªéœ€è¦æ¥æ”¶ä¸€å€‹ Channel å°±å¥½ã€‚ä½¿ç”¨ `bot.GetUpdatesChan(config)` æœƒéœ€è¦çµ¦ä¸€å€‹ Configï¼Œé€™å¯ä»¥ç”¨ `tgbotapi.NewUpdate(0)` ä¾†ç”Ÿï¼Œç„¶å¾Œé€™é‚Šè¨­å®š Timeout ç‚º 60ï¼Œå¦‚æœå°é€™å€‹è¨­å®šå€¼æœ‰èˆˆè¶£ï¼Œå¯ä»¥å»çœ‹ Telegram çš„æ–‡ä»¶ã€‚\n\n```go\nupdateConfig := tgbotapi.NewUpdate(0)\nupdateConfig.Timeout = 60\nupdates := bot.GetUpdatesChan(updateConfig)\n```\n\n## å›å¾©\n\næˆ‘å€‘å…ˆç°¡å–®å¯«ä¸€éš»é¸šéµ¡ï¼ŒæŠŠç”¨æˆ¶å‚³éä¾†çš„ Textï¼Œç›´æ¥å‚³å›å»ã€‚\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/19bbc73e-3090-4a0d-0eec-d65671c01900/public)\n\nç”¨ for æŠŠ Channel ä¸­çš„ Update ä¸€å€‹ä¸€å€‹æ‹¿å‡ºä¾†ï¼Œç„¶å¾Œç”¨ `tgbotapi` ç”¢ç”Ÿä¸€å€‹ Message ç‰©ä»¶ï¼Œè£¡é¢æ”¾åœ¨èŠå¤©å®¤çš„ ID å’Œè¦å›å‚³çš„ Textï¼Œæœ€å¾Œç”¨ bot æŠŠ Message å‚³å›å»ã€‚\n\n```go\nfor update := range updates {\n    text := update.Message.Text\n    chatID := update.Message.Chat.ID\n    replyMsg := tgbotapi.NewMessage(chatID, text)\n    _, _ = bot.Send(replyMsg)\n}\n```\n\n## ç°¡å–®é¸šéµ¡çš„å®Œæ•´ç¨‹å¼ç¢¼\n\n```go\npackage main\n\nimport (\n    tgbotapi \"github.com/go-telegram-bot-api/telegram-bot-api/v5\"\n    \"os\"\n)\n\nfunc main() {\n    bot, err := tgbotapi.NewBotAPI(os.Getenv(\"TELEGRAM_API_TOKEN\"))\n    if err != nil {\n        panic(err)\n    }\n    bot.Debug = true\n    updateConfig := tgbotapi.NewUpdate(0)\n    updateConfig.Timeout = 60\n    updates := bot.GetUpdatesChan(updateConfig)\n    for update := range updates {\n        text := update.Message.Text\n        chatID := update.Message.Chat.ID\n        replyMsg := tgbotapi.NewMessage(chatID, text)\n        _, _ = bot.Send(replyMsg)\n    }\n}\n```\n\n## æ”¹å¯«æˆéé˜»å¡çš„ Goroutine\n\nå› ç‚ºæ¯æ¬¡è™•ç†å’Œå›å¾©éƒ½æœƒéœ€è¦ä¸€é»æ™‚é–“ï¼Œç”šè‡³æ˜¯è¦å» DB æ‰¾è³‡æ–™ï¼Œå¦‚æœç”¨ä¸Šé¢çš„å¯«æ³•ï¼Œåœ¨è™•ç†å¤šäººæˆ–é«˜é€Ÿå‚³è¨Šæ¯çš„æ™‚å€™æœƒè¢«å¡ä½ï¼Œä¸€æ¬¡åªèƒ½è™•ç†çš„ä¸€å€‹è¨Šæ¯ã€‚é‚„å¥½ Go çš„ä½µç™¼å¯«æ³•éå¸¸ç°¡å–®ï¼Œåªè¦æ”¾ä¸€å€‹ go åœ¨å‰é¢ï¼Œå°±å¯ä»¥éé˜»å¡çš„åŸ·è¡Œ function ä¸­çš„å…§å®¹ã€‚\n\næˆ‘å€‘å…ˆæŠŠ `handleUpdate` æå–æˆä¸€å€‹ functionï¼Œç„¶å¾Œå†ç”¨ go å»åŸ·è¡Œä»–ï¼š\n\n```go\nfunc main() {\n    bot, err := tgbotapi.NewBotAPI(os.Getenv(\"TELEGRAM_API_TOKEN\"))\n    if err != nil {\n        panic(err)\n    }\n    bot.Debug = true\n    updateConfig := tgbotapi.NewUpdate(0)\n    updateConfig.Timeout = 60\n    updates := bot.GetUpdatesChan(updateConfig)\n    for update := range updates {\n        go handleUpdate(bot, update)\n    }\n}\n\nfunc handleUpdate(bot *tgbotapi.BotAPI, update tgbotapi.Update) {\n    text := update.Message.Text\n    chatID := update.Message.Chat.ID\n    replyMsg := tgbotapi.NewMessage(chatID, text)\n    _, _ = bot.Send(replyMsg)\n}\n```\n\n## å›å¾©ç‰¹å®šè¨Šæ¯\n\nè¦å›å¾© `å›å¾©è¨Šæ¯` ï¼Œåƒæ˜¯ä¸‹é¢çš„æ•ˆæœä¹Ÿå¾ˆç°¡å–®ï¼š\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/22010000-e325-45e6-52f9-64eec6b28500/public)\n\nåªéœ€è¦è¨­å®š `replyMsg.ReplyToMessageID` å°±å¯ä»¥å›å¾©ç‰¹å®šçš„è¨Šæ¯ï¼Œä¸‹é¢å°±æ˜¯ç›´æ¥å›è¦†æ¥æ”¶åˆ°çš„è¨Šæ¯ï¼š\n\n```go\nfunc handleUpdate(bot *tgbotapi.BotAPI, update tgbotapi.Update) {\n    text := update.Message.Text\n    chatID := update.Message.Chat.ID\n    replyMsg := tgbotapi.NewMessage(chatID, text)\n    replyMsg.ReplyToMessageID = update.Message.MessageID\n    _, _ = bot.Send(replyMsg)\n}\n```\n\n## è™•ç† Command\n\nTelegram ä¸­ï¼Œç”¨ `/` é–‹é ­çš„æ–‡å­—å°±æ˜¯ Commandï¼Œé€™å€‹å‡½ç¤ºåº«ä¹Ÿæœ‰å¯«å¥½è™•ç† Command çš„æ–¹æ³•ï¼Œåªéœ€è¦ç”¨ `isCommand()`ï¼Œç¢ºèªä¸€ä¸‹æ˜¯ä¸æ˜¯ Command å°±å¯ä»¥ï¼š\n\n```go\nfunc handleUpdate(bot *tgbotapi.BotAPI, update tgbotapi.Update) {\n    text := update.Message.Text\n    chatID := update.Message.Chat.ID\n    replyMsg := tgbotapi.NewMessage(chatID, text)\n    if update.Message.IsCommand() {\n        switch update.Message.Command() {\n        case \"start\":\n            replyMsg.Text = \"Hello \" + update.Message.From.FirstName\n        case \"help\":\n            replyMsg.Text = \"What can I help you?\"\n        default:\n            replyMsg.Text = \"No such command!!!\"\n        }\n    }\n    _, _ = bot.Send(replyMsg)\n}\n```\n\nä¸Šé¢çš„ç¨‹å¼ç¢¼å…¶å¯¦ä¹Ÿå¯ä»¥çœ‹åˆ°å¦‚ä½•æ‹¿åˆ°å‚³é€è€…çš„ä¸€äº›åŸºæœ¬è³‡æ–™ã€‚\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0fd54240-5c18-4b75-c7be-981cdb144e00/public)\n\n## Reference\n\n- [Telegram APIs](https://core.telegram.org/)\n- [Golang bindings for the Telegram Bot API - GitHub](https://github.com/go-telegram-bot-api/telegram-bot-api)\n","tags":["go","golang","telegram","bot","telegram-bot"]},{"id":14,"date":1636005164000,"url":"/posts/flutter/dart-function lambda diff","title":"Flutter/Dart (){} å’Œ () => çš„å·®åˆ¥","summary":"\nFlutter å› ç‚ºå¤§é‡ä½¿ç”¨ä¾è³´æ³¨å…¥ï¼Œæ‰€ä»¥å¸¸å¸¸æœƒéœ€è¦å‚³å…¥ Functionã€‚å‚³å…¥ Function æ™‚ï¼Œå¸¸å¸¸æœƒçœ‹åˆ°å…©ç¨®å¯«æ³•ï¼Œä¸€ä¸‹æ˜¯ `() {}` å¯«æ³•ï¼Œå¦ä¸€å€‹æ˜¯ `() =>` å¯«æ³•ã€‚æˆ‘å‰›é–‹å§‹å¯«çš„æ™‚å€™è¢«æå¾—é ­æ˜è…¦è„¹ï¼ŒæŸ¥äº†ä¸€ä¸‹æ‰ç™¼ç¾é€™å…©å€‹æœ¬èº«æ²’ä»€éº¼ä¸åŒã€‚\n\n","content":" Flutter å› ç‚ºå¤§é‡ä½¿ç”¨ä¾è³´æ³¨å…¥ï¼Œæ‰€ä»¥å¸¸å¸¸æœƒéœ€è¦å‚³å…¥ Functionã€‚å‚³å…¥ Function æ™‚ï¼Œå¸¸å¸¸æœƒçœ‹åˆ°å…©ç¨®å¯«æ³•ï¼Œä¸€ä¸‹æ˜¯ `() {}` å¯«æ³•ï¼Œå¦ä¸€å€‹æ˜¯ `() =>` å¯«æ³•ã€‚æˆ‘å‰›é–‹å§‹å¯«çš„æ™‚å€™è¢«æå¾—é ­æ˜è…¦è„¹ï¼ŒæŸ¥äº†ä¸€ä¸‹æ‰ç™¼ç¾é€™å…©å€‹æœ¬èº«æ²’ä»€éº¼ä¸åŒã€‚\n\n<!--more-->\n\n## ä¸åŒåœ¨å“ª\n\nä¸‹é¢æˆ‘ç”¨åœ¨å¯« Flutter ä¸­å¸¸è¦‹çš„å‰µå»ºä¸€å€‹æœ‰ 10 å€‹ Text çš„ List èˆ‰ä¾‹ã€‚\n\nå‰µå»ºä¸€å€‹æœ‰ 10 é …å…ƒç´ çš„ Listï¼š\n\n```dart\nList<Text> list = List.generate(10, (index) => Text(index.toString()));\n```\n\nä¸Šé¢å°±æ˜¯è¼¸å‡ºä¸€å€‹å¸¶æœ‰ 0-9 çš„ Listï¼Œé‚£ç¾åœ¨å‡è¨­æˆ‘æœƒéœ€è¦å†å‰µå»º Text å‰ï¼Œæ ¹æ“š index ä¾†åšä¸€äº›æ”¹è®Šï¼Œä¸‹é¢å°±åšæœ€ç°¡å–®çš„å¹³æ–¹ã€‚\n\n```dart\nList<Text> list = List.generate(10, (index) {\n    // do some work\n    var text = (index * index).toString();\n    return Text(text);\n});\n```\n\nè§€å¯Ÿä¸Šé¢å…©å€‹ä¾‹å­ï¼Œä¸é›£ç™¼ç¾å…©å€‹çš„å·®åˆ¥ï¼Œç¬¬ä¸€å€‹å¯«æ³• `() =>` å¾Œé¢ç›´æ¥æ¥ä¸Šä¸€å€‹è¡¨é”å¼(Expression)ï¼Œç•¶ä½œå›å‚³å€¼ã€‚è€Œ `() {}` å‰‡æ˜¯åœ¨å¤§æ‹¬è™Ÿä¸­å¯«ä¸€å€‹å®Œæ•´çš„ Functionï¼Œæ‰€ä»¥è¦å¯«ä¸€å€‹ returnã€‚\n\n## Reference\n\n- [Flutter/Dart - Difference between () {} and () => {}](https://stackoverflow.com/questions/51868395/flutter-dart-difference-between-and)\n","tags":["dart","flutter","function"]},{"id":15,"date":1633450258000,"url":"/posts/web/cloudflare-speed week","title":"Cloudflare Speed Week","summary":"\nä¸Šå€‹æœˆçœ‹åˆ° Cloudflare ç™¼å¸ƒäº†ä¸€é—œæ–¼é€Ÿåº¦é€±çš„æ–‡ç« ï¼Œé›–ç„¶çœ‹èµ·ä¾†åƒæ˜¯ Cloudflare å»£å‘Šè‡ªå·±çš„ç”¢å“ç”¨çš„ï¼Œæˆ‘ç´°è®€å¾Œæ‰ç™¼ç¾ï¼Œä»–è©³ç´°äº†èªªæ˜äº†ç¾åœ¨åœ¨ä¸Šç¶²æ™‚ç‚ºä½•æœƒæœ‰çš„ç¶²é å¯ä»¥å¾ˆå¿«ï¼Œæœ‰çš„ç¶²é å»æ…¢çš„è·Ÿçƒé¾œä¸€æ¨£ï¼Œè©³ç´°èªªæ˜ç¶²è·¯æœƒé‡åˆ°çš„ä¸€äº›å›°å¢ƒå’ŒåŸç† (å–®ç„¶è§£æ³•å°±æ˜¯ç”¨ä»–å€‘å®¶çš„ç”¢å“)ï¼Œåœ¨æŠ€è¡“æ–¹é¢å€¼å¾—ä¸€è®€ï¼Œæˆ‘å°±ç¨å¾®çµ±æ•´ä¸€ä¸‹ã€‚\n\n","content":" ä¸Šå€‹æœˆçœ‹åˆ° Cloudflare ç™¼å¸ƒäº†ä¸€é—œæ–¼é€Ÿåº¦é€±çš„æ–‡ç« ï¼Œé›–ç„¶çœ‹èµ·ä¾†åƒæ˜¯ Cloudflare å»£å‘Šè‡ªå·±çš„ç”¢å“ç”¨çš„ï¼Œæˆ‘ç´°è®€å¾Œæ‰ç™¼ç¾ï¼Œä»–è©³ç´°äº†èªªæ˜äº†ç¾åœ¨åœ¨ä¸Šç¶²æ™‚ç‚ºä½•æœƒæœ‰çš„ç¶²é å¯ä»¥å¾ˆå¿«ï¼Œæœ‰çš„ç¶²é å»æ…¢çš„è·Ÿçƒé¾œä¸€æ¨£ï¼Œè©³ç´°èªªæ˜ç¶²è·¯æœƒé‡åˆ°çš„ä¸€äº›å›°å¢ƒå’ŒåŸç† (å–®ç„¶è§£æ³•å°±æ˜¯ç”¨ä»–å€‘å®¶çš„ç”¢å“)ï¼Œåœ¨æŠ€è¡“æ–¹é¢å€¼å¾—ä¸€è®€ï¼Œæˆ‘å°±ç¨å¾®çµ±æ•´ä¸€ä¸‹ã€‚\n\n<!--more-->\n\n> No one likes to wait. Internet impatience is something we all suffer from.\n\næ–‡ç« ä¸€é–‹é ­å°±ç”¨ä¸€å¥é»å‡ºå¤§å®¶åœ¨ä¸Šç¶²æ™‚æœƒé‡åˆ°çš„ç‹€æ³ï¼Œæ²’æœ‰äººå–œæ­¡ç­‰å¾…ï¼Œå¯æ˜¯æ‰€æœ‰äººéƒ½åœ¨ä¸Šç¶²æ™‚èº«å—å…¶å®³ï¼Œç›¸ä¿¡å¤§å®¶éƒ½é‡éä¸‹é¢çš„æƒ…æ³ï¼š\n\n1. ç­‰å¾… App å®Œæˆå…§å®¹æ›´æ–°\n2. ç­‰å¾…ç¶²é å‡ºç¾\n3. ç­‰å¾…é›»å½±é–‹å§‹æ’­æ”¾\n\nä½†æœ‰å¯«éç¨‹å¼æˆ–æœå‹™çš„éƒ½çŸ¥é“ï¼Œäººä¸€å¤šï¼Œå°±ä¸€å®šæ…¢ï¼Œéå¸¸çš„é›£é¿å…ï¼Œ~~æ‰€ä»¥é€™æ™‚å€™å°±è¦ç”¨ Cloudflare~~ï¼Œé€™æ™‚åˆå®£å‚³äº†ä¸€ä¸‹ Cloudflareã€‚\n\nè¨±å¤šä½¿ç”¨è€…å®¶è£¡éƒ½æœƒè¦ºå¾—ç¶²è·¯å¾ˆæ…¢ï¼Œç„¶å¾Œè²·äº†å¾ˆå¿«å¾ˆå¿«çš„ç¶²é€Ÿï¼Œåƒæ˜¯ 100Mbpa, 1Gbps ç”šè‡³ 2Gbpsï¼Œä½†å…¶å¯¦å°±ç®—å®¶è£¡çš„ç¶²è·¯å†æ€éº¼å¿«ï¼Œä½ é€£ç·šçš„ Server å°±æ˜¯å¾ˆæ…¢ï¼Œä½ çš„ä¸Šç¶²é«”é©—é‚„æ˜¯å¤§æ‰“æŠ˜æ‰£ã€‚\n\nå¦‚æœè¦è®“è‡ªå·±çš„æœå‹™ä¸å¡ï¼Œåªéœ€è¦å®Œæˆä¸‹é¢ä¸‰æ¨£è¦æ±‚ï¼š\n\n1. Server æœ‰å……è¶³çš„å¸¶å¯¬\n2. è®“ Server ç›¡é‡æ¥è¿‘ User\n3. è®“ä½ çš„ Web æˆ– App ç›¡é‡å¾—å¿«\n\nçœ‹èµ·ä¾†å¾ˆç°¡å–®ï¼Œä½†å¦‚æœè¦å®Œæˆé€™ä¸‰å€‹è¦æ±‚ï¼Œéƒ½æœƒè€—è²»æ¥µå¤§çš„æˆæœ¬ã€‚\n\n## DNS\n\nç¾ä»Šçš„ç¶²è·¯ä¸–ç•Œä¸»è¦æ˜¯ç”± ipv4 çµ„æˆï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå¦‚æœæ²’æœ‰ ipv4 åœ°å€ï¼Œæ‰€æœ‰çš„ç¶²è·¯é€£ç·šéƒ½ä¸æœƒç™¼ç”Ÿï¼Œå¦‚æœæˆ‘åªçŸ¥é“ [www.fcu.edu.tw](www.fcu.edu.tw)ï¼Œæ˜¯å®Œå…¨æ²’æœ‰è¾¦æ³•ä¸Šç¶²çš„ï¼Œå› ç‚ºæˆ‘ä¸¦ä¸çŸ¥é“é€™å€‹ç¶²å€å°æ‡‰çš„ ip æ˜¯å¤šå°‘ (åƒæ˜¯ 140.134.xxx.xxx)ï¼Œå°±å®Œå…¨æ²’æœ‰è¾¦æ³•å’Œä¼ºæœå™¨ç”¢ç”Ÿé€£ç·šã€‚DNS å‡ºç¾å‰ï¼Œå¤§å®¶éƒ½æ˜¯ç›´æ¥ç”¨ ip æºé€šï¼Œå¿«é€Ÿæ–¹ä¾¿ï¼Œæœ€å¤§çš„ç¼ºé»å°±æ˜¯éå¸¸é›£è¨˜ã€‚æ‰€ä»¥ DNS å°±å‡ºç¾äº†ï¼ŒDNS å°±åƒä½ æ‰“é›»è©±æœƒéœ€è¦é›»è©±ç°¿ä¸€æ¨£ï¼Œæˆ‘åªæˆ‘éœ€è¦ä¸€å€‹ç°¡å–®å¥½è¨˜çš„åå­—ï¼Œå†å»é›»è©±ç°¿æœå°‹çœŸæ­£çš„é›»è©±è™Ÿç¢¼å°±å¥½ã€‚\n\nåœ¨çŸ¥é“é›»è©±è™Ÿç¢¼å‰ï¼Œæ‰€æœ‰ç¶²è·¯é€£ç·šéƒ½ä¸æœƒç™¼ç”Ÿï¼Œæ‰€ä»¥ç”¨æœ€å¿«é€Ÿçš„æ–¹å¼æŸ¥æ‰¾é›»è©±ç°¿çµ•å°æ˜¯ä¸Šç¶²é€Ÿåº¦æœ€é‡è¦çš„ä¸€ç’°ï¼Œå¦‚æœå…‰æ˜¯è¦çŸ¥é“ ip ä½ç½®å°±èŠ±æ‰ 50ms(ç”šè‡³æ›´å¤š)ï¼Œä¸Šç¶²æ•ˆç‡å°±æœƒå¤§å¤§é™ä½ã€‚å¦‚ä»Šç¶²è·¯ä¸Šæœ‰è¨±å¤šçš„ DNS æä¾›å•†ï¼Œç‚ºå¤§å®¶è¨˜ä¸‹é€™é¾å¤§çš„ DNS é›»è©±ç°¿ï¼Œæœ€è‘—åçš„å°±æ˜¯ Google çš„ [8.8.8.8](8.8.8.8)ï¼Œå’Œ Cloudflare çš„ [1.1.1.1](1.1.1.1)ï¼ŒCloudflare å®£ç¨±ä»–æ˜¯å…¨ä¸–ç•Œæœ€å¿«çš„ DNS æä¾›å•†ï¼Œ(é›–ç„¶åœ¨å°ç£å¥½åƒæœªå¿…)ï¼Œä½† Cloudflare æ‰¿è«¾ä»–ä¸æœƒ**ç´€éŒ„**ä½¿ç”¨è€…æŸ¥éçš„ DNS ç´€éŒ„ï¼Œæˆ–ä¸Šéä»€éº¼ç¶²é  (å¥½åƒæ˜¯åœ¨æš—ç¤ºç«¶çˆ­å°æ‰‹æœƒé€™éº¼åš)ã€‚\n\nå¦å¤–ï¼Œå°±ç®— DNS ä¼ºæœå™¨å®Œå…¨ä¸å‡æ€ç´¢ (æ²’æœ‰åæ‡‰æ™‚é–“) å°±å›å‚³ DNS çš„æŸ¥è©¢çµæœï¼Œé€™ä¹Ÿä»˜å‡ºäº†è‡³å°‘ä¸€å€‹[**å…‰é€Ÿçš„ä»£åƒ¹**](#å…‰é€Ÿæè€—)ï¼Œè½èµ·ä¾†å¥½åƒæ²’ä»€éº¼å½±éŸ¿ï¼Œä½†å¯ä»¥çœ‹çœ‹ä¸‹é¢ç°¡å–®çš„è¨ˆç®—ã€‚\n\n### å…‰é€Ÿæè€—\n\nå‡è¨­æˆ‘å®¶å’Œ DNS ä¼ºæœå™¨ä¹‹é–“çš„ç›´ç·šè·é›¢æ˜¯ 100 å…¬é‡Œï¼Œè€Œä¸”ä¸­è¯é›»ä¿¡ç­†ç›´çš„é€£æ¥äº†ä¸€æ¢ç­†ç›´å…‰çº–åˆ° DNS ä¼ºæœå™¨ï¼Œè€Œå…‰åœ¨å…‰çº–ä¸­çš„é€Ÿåº¦æ˜¯ 200,000,000 å…¬å°º/ç§’ï¼Œå¾€è¿”éœ€è¦ 200,000 å…¬å°ºã€‚ç¶“éé€™æ¨£ç°¡å–®çš„è¨ˆç®—ï¼Œå…‰æ˜¯å…‰é€Ÿå°±å·²ç¶“è€—è²»æ•´æ•´ 1 æ¯«ç§’(ms)ï¼Œå¯ä»¥è©¦è‘—æƒ³æƒ³çœ‹æ›´ç³Ÿçš„æƒ…æ³ï¼Œå…‰é€Ÿå·²ç¶“é–‹å§‹åœ¨åš´é‡æ‹–ç´¯ç¶²é€Ÿã€‚\n\n## Hello Hello OK\n\nçŸ¥é“äº† ip å¾Œï¼Œç€è¦½å™¨çµ‚æ–¼å¯ä»¥é€£ä¸Šç›®æ¨™ä¼ºæœå™¨å–å¾—ç¶²é ï¼Œä¸ä¹…å¾Œå°±å¯ä»¥çœ‹åˆ°ç¶²é å‡ºç¾åœ¨çœ¼å‰ã€‚\n\nä¸Šé¢çš„æ­¥é©Ÿï¼Œå¹¾ä¹éƒ½æ˜¯ç”± TCP å”å®šå®Œæˆï¼Œå”å®šçš„ç¬¬ä¸€æ­¥å°±æ˜¯ä½ çš„é›»è…¦å’Œä¼ºæœå™¨äº’ç›¸åŒæ„é€£ç·šï¼Œé€™å€‹éç¨‹ç¨±ä½œä¸‰å‘äº¤æ¡ (Three-Way Handshake)ï¼Œæ­¥é©Ÿå¦‚ä¸‹ï¼š\n\n1. Client å° Server èªªï¼šHello\n2. Server å° Client èªªï¼šæˆ‘è½åˆ°ä½ èªª Hello\n3. Client å° Server èªªï¼šæˆ‘è½åˆ° -- ä½ èªªä½ è½åˆ°æˆ‘èªª Helloï¼Œæˆ‘å€‘ç¾åœ¨å¯ä»¥æºé€šäº†ã€‚\n\nå¾ä¸Šé¢çš„æ­¥é©Ÿå°±å¯ä»¥ç™¼ç¾ï¼Œå·²ç¶“è‡³å°‘è€—è²»äº†[ä¸€å€‹å…‰é€Ÿçš„æ™‚é–“](#å…‰é€Ÿæè€—)ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œä¼ºæœå™¨æ„ˆé è¿‘ç”¨æˆ¶ï¼Œç¶²é€Ÿå°±æ„ˆå¿«ã€‚é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼ Cloudflare åœ¨ä¸–ç•Œå„åœ°å»£è¨­ä¼ºæœå™¨ã€‚\n\n### TLS/SSL\n\næœ‰äº† TCP æˆ‘å€‘å°±å¯ä»¥å®‰å…¨çš„é€£ç·šäº†å—ï¼Ÿç•¶ç„¶ä¸æ˜¯ï¼ŒTCP ä¸€é»ä¹Ÿä¸å®‰å…¨ï¼Œç¾åœ¨çš„ç¶²è·¯é€£ç·šå¹¾ä¹éƒ½æ˜¯é€é TLS (æˆ–ç¨±ä½œ SSL) åŠ å¯†é€£ç·šï¼Œæ‰€ä»¥ TCP é€£ç·šå¾Œï¼Œä¸‹ä¸€æ­¥æ˜¯å»ºç«‹å®‰å…¨çš„åŠ å¯†é€£ç·šã€‚\n\nTLS æ˜¯ä¸€å€‹éå¸¸è¤‡é›œçš„åŠ å¯†å”å®šï¼Œæœƒç‰½æ¶‰åˆ°ä¸‹é¢çš„è¨­å‚™ï¼šç¶²è·¯ç€è¦½å™¨ã€å»ºç«‹é‘°åŒ™çš„ä¼ºæœå™¨ï¼Œè€Œä¸”é‚„è¦æœ‰ä¸€å€‹å¯ä»¥è­‰æ˜ä»–çš„èº«åˆ†çš„ä¼ºæœå™¨ï¼Œå› ç‚ºä¸æœƒæƒ³è¦å’ŒéŠ€è¡Œå»ºç«‹å®‰å…¨é€£ç·šï¼Œä½†ä½ æ ¹æœ¬ä¸ç¢ºå®šä»–æ˜¯ä¸æ˜¯ä½ çš„éŠ€è¡Œã€‚\n\nä¸Šé¢çš„æ­¥é©Ÿä¹Ÿæœƒéœ€è¦å¥½å¹¾æ¬¡[å…‰é€Ÿæè€—](#å…‰é€Ÿæè€—)ï¼Œæ‰€ä»¥è®“ä¼ºæœå™¨æ„ˆé è¿‘ç”¨æˆ¶ç«¯æ„ˆå¥½ã€‚å¦å¤–ï¼Œä¹Ÿè¦ç›¡é‡ä½¿ç”¨æœ€æ–°çš„ TLS æ¨™æº– (ç¾åœ¨æ˜¯ TLS 1.3)ã€‚\n\n## å¾Œè¨˜\n\næˆ‘è¦ºå¾—é€™ç¯‡æ–‡ç« æœ€æœ‰è¶£çš„çš„éƒ¨åˆ†å°±æ˜¯ä¸€ç›´åœ¨è¨è«–å…‰é€Ÿå°ç¶²è·¯é€£ç·šçš„å½±éŸ¿ï¼Œä»¥å¾€æˆ‘éƒ½è¦ºå¾—å…‰é€Ÿå¾ˆå¿«ï¼Œä½†å…‰å°±ç®—å¾ˆå¿«ï¼Œå…‰ä¹Ÿæ˜¯è¦è·‘å¾ˆé•·ä¸€æ®µè·é›¢ï¼Œé€™æ¨£è€—æä¾†å›å€‹å¹¾æ¬¡å°±å·²ç¶“å°ç¶²è·¯é€£ç·šç”¢ç”Ÿæ¥µå¤§çš„å½±éŸ¿äº†ï¼Œè€Œä¸”æ›´ä½•æ³ä¸€å€‹é€£ç·šå°±ä¸€å®šæœƒéœ€è¦ä¾†å›æºé€šå¥½å¹¾æ¬¡ã€‚é€™ç¯‡æ–‡ç« å¾Œé¢é‚„æœ‰è »å¤šå…§å®¹ï¼Œä½†æˆ‘è¦ºå¾—æ²’æœ‰é‚£éº¼é‡è¦å°±æ‡¶å¾—å¯«äº†ï¼Œæœ‰èˆˆè¶£çš„è©±å¯ä»¥è‡ªå·±ç¹¼çºŒå¾€ä¸‹çœ‹ã€‚\n\n## Reference\n\n- [Welcome to Speed Week and a Waitless Internet](https://blog.cloudflare.com/fastest-internet/)\n","tags":["cloudflare","web","internet","tcp"]},{"id":16,"date":1632036416000,"url":"/posts/kotlin/kotlin-coroutine","title":"Kotlin Coroutine","summary":"\nKotlin åœ¨éåŒæ­¥è™•ç†ä¸Šæœ‰æ–°çš„æ–¹æ³•ï¼Œå”ç¨‹ `Coroutine`ã€‚`Coroutine` ä¸æœƒåƒ `Thread` æœƒè€—è²»å¤§é‡çš„è³‡æºï¼Œèƒ½åœ¨åŸæœ¬çš„`ç·šç¨‹`ä¸Šå‰µå»ºæ¥µç‚ºè¼•é‡çš„`å”ç¨‹`ï¼Œä¸”è¼ƒä¸æœƒç™¼ç”Ÿè¨˜æ†¶é«”æ´©æ¼çš„æƒ…æ³ã€‚\n\n","content":" Kotlin åœ¨éåŒæ­¥è™•ç†ä¸Šæœ‰æ–°çš„æ–¹æ³•ï¼Œå”ç¨‹ `Coroutine`ã€‚`Coroutine` ä¸æœƒåƒ `Thread` æœƒè€—è²»å¤§é‡çš„è³‡æºï¼Œèƒ½åœ¨åŸæœ¬çš„`ç·šç¨‹`ä¸Šå‰µå»ºæ¥µç‚ºè¼•é‡çš„`å”ç¨‹`ï¼Œä¸”è¼ƒä¸æœƒç™¼ç”Ÿè¨˜æ†¶é«”æ´©æ¼çš„æƒ…æ³ã€‚\n\n<!--more-->\n\n## å°å…¥ Coroutine\n\nåœ¨ `build.gradle` ä¸­æ·»åŠ ä¾è³´é …\n\n```groovy\ndependencies {\n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.2'\n}\n```\n\nè‹¥è¦åœ¨ `Android` ä¸­ä½¿ç”¨éœ€è¦å†æ·»åŠ  `Android` ä¾è³´\n\n```groovy\nimplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.2'\n```\n\n## ç¬¬ä¸€å€‹ Coroutine\n\n```kotlin\nimport kotlinx.coroutines.*\n\nfun main() {\n    GlobalScope.launch { //åœ¨å¾Œå°å•Ÿå‹•ä¸€å€‹æ–°çš„ç¸£å”ç¨‹\n        delay(1000L) //éé˜»å¡å¼çš„ç­‰å¾… 1 ç§’é˜\n        println(\"World!\")\n    }\n    println(\"Hello,\")\n    Thread.sleep(2000L) // é˜»å¡ä¸»ç·šç¨‹å…©ç§’ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»\n}\n```\n\nä¸Šé¢çš„ç¨‹å¼ç¢¼è¼¸å‡ºçµæœï¼š\n\n```kotlin\nHellow,\nWorld\n```\n\nåŸºæœ¬ä¸Š `Coroutine` å°±æ˜¯è¼•é‡çš„å”ç¨‹\n\nä¹Ÿå¯ä»¥åˆ†åˆ¥å°‡ `GlobalScope.launch{...}` å’Œ `delay(...)` æ›¿æ›æˆ`thread { ... }` å’Œ `Thread.Sleap(...)`ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„çµæœï¼Œå¯ä»¥å˜—è©¦ä¸€ä¸‹ã€‚\n\nå¦‚æœåªå°‡ `GlobalScope.launch{...}` æ›¿æ›æˆ `thread{...}` ä½ æœƒå¾—åˆ°ä»¥ä¸‹éŒ¯èª¤ï¼š\n\n```shell\nError: Kotlin: Suspend functions are only allowed to be called from a coroutine or another suspend function\n```\n\nå› ç‚º `delay()` æ˜¯ä¸€å€‹ç‰¹æ®Šçš„ `suspend function` (æœ‰äººè­¯ä½œ `æ›èµ·å‡½æ•¸`)ï¼Œä»–ä¸æœƒé˜»å¡ç·šç¨‹ï¼Œä½†æ˜¯æœƒ `suspend` å”ç¨‹ï¼Œè€Œä¸”åªèƒ½åœ¨å”ç¨‹ä¸­ä½¿ç”¨ã€‚\n\n## æ©‹æ¥é˜»å¡å’Œéé˜»å¡çš„ä¸–ç•Œ\n\nä¸Šé¢çš„ç¯„ä¾‹ä¸­åŒæ™‚ä½¿ç”¨äº†éé˜»å¡å¼çš„ `delay()` å’Œé˜»å¡å¼çš„ `Thread.sleap()`ï¼Œé€™æ¨£å¾ˆå®¹æ˜“è®“æˆ‘å€‘æ··æ·†å“ªå€‹æœƒé˜»å¡ç·šç¨‹ã€‚ä¸‹é¢æˆ‘å€‘ä½¿ç”¨ `runblocking{...}` ä¾†é˜»å¡ç·šç¨‹\n\n```kotlin\nimport kotlinx.coroutines.*\n\nfun main() {\n    GlobalScope.launch { // åœ¨å¾Œå°å•Ÿå‹•ä¸€å€‹æ–°çš„å”ç¨‹\n        delay(1000L)\n        println(\"World!\")\n    }\n    println(\"Hello,\")\n    runBlocking {     // é€™å€‹è¡¨é”å¼æœƒé˜»å¡ä¸»ç·šç¨‹\n        delay(2000L)  // å»¶é²å…©ç§’ä¾†ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»\n    }\n}\n```\n\nçµæœåŸºæœ¬ä¸Šæ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯éƒ½æ˜¯ä½¿ç”¨äº†éçµ„å¡å¼çš„ `delay()`ã€‚èª¿ç”¨äº† `runblocking{...}` çš„ä¸»ç·šç¨‹æœƒè¢«é˜»å¡ç›´åˆ° `runblocking{...}` å…§çš„å”ç¨‹åŸ·è¡Œå®Œç•¢ã€‚\n\nä¸‹é¢ç”¨ä¸€å€‹æ›´åˆä¹æ…£ç”¨æ³•çš„æ–¹æ³•åœ¨å¯«ä¸€æ¬¡ï¼Œç”¨ `runblocking{...}` ä¾†åŒ…è£ `main` æ–¹æ³•ï¼š\n\n```kotlin\nimport kotlinx.coroutines.*\n\nfun main() = runBlocking<Unit> { // é–‹å§‹åŸ·è¡Œä¸»å”ç¨‹\n    GlobalScope.launch { // åœ¨å¾Œå°å•“å‹•ä¸€å€‹å”ç¨‹ä¸¦ç¹¼çºŒåŸ·è¡Œ\n        delay(1000L)\n        println(\"World!\")\n    }\n    println(\"Hello,\")\n    delay(2000L)  // å»¶é² 2 ç§’ä¾†ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»\n}\n```\n\né€™è£¡çš„ `runBlocking {...}` ç”¨ä¾†å•Ÿå‹•ä¸»ç·šç¨‹ã€‚æˆ‘å€‘é¡¯å¼æŒ‡å®šäº†å…¶è¿”å›é¡å‹ `Unit`ï¼Œå› ç‚ºåœ¨ Kotlin ä¸­ `main` æ–¹æ³•å¿…é ˆå›å‚³ `Unit`ã€‚\n\n## ç­‰å¾…ä¸€å€‹ä½œæ¥­å®Œæˆ\n\nå»¶é²ä¸€æ®µæ™‚é–“ä¾†ç¢ºä¿å”ç¨‹çš„é‹è¡Œä¸¦ä¸æ˜¯ä¸€å€‹å¥½è¾¦æ³•åˆ©ç”¨ `job.join()` ä¾†ç¢ºä¿å·¥ä½œåŸ·è¡ŒçµæŸã€‚\n\n```kotlin\nval job: Job = GlobalScope.launch {\n    delay(1000L)\n    println(\"World!\")\n}\nprintln(\"Hello,\")\njob.join()\n```\n\n`launch` æœƒå›å‚³ä¸€å€‹ `Job` ç‰©ä»¶ï¼Œè€Œ `job.join()` å…¶å¯¦å°±æ˜¯æœƒç­‰å¾… `job` çš„å·¥ä½œå®Œæˆå†ç¹¼çºŒæŒè¡Œã€‚\n\næˆ‘å€‘ä¹Ÿå¯ä»¥åˆ©ç”¨ `job.cancel()` å–æ¶ˆå”ç¨‹ï¼š\n\n```kotlin\nval job: Job = GlobalScope.launch {\n    delay(1000L)\n    println(\"World!\")\n}\nprintln(\"Hello,\")\njob.cancel()\n```\n\nä½†æ˜¯å¦‚æœ `job` å·²ç¶“å®Œæˆå·¥ä½œï¼Œ`cancel` æ˜¯ä¸æœƒç™¼ç”Ÿä»»ä½•äº‹ã€‚\n\n## åƒè€ƒè³‡æ–™\n\n- [Coroutine Basics](https://kotlinlang.org/docs/reference/coroutines/basics.html)\n","tags":["kotlin","coroutine"]},{"id":17,"date":1631596287000,"url":"/posts/git/git-submodule","title":"Git Submodule","summary":"\nè¦åœ¨ä¸€å€‹ Git å°ˆæ¡ˆä¸­æœ‰å­å°ˆæ¡ˆ (æˆ‘éƒ½å«ä»– git in git)ï¼Œæœ‰å…©å€‹è¾¦æ³•ï¼Œä¸€å€‹æ˜¯ç›´æ¥ clone åˆ°ç›®éŒ„ä¸‹ï¼Œå¦ä¸€å€‹å°±æ˜¯ä½¿ç”¨ submoduleã€‚å…©è€…çš„ä¸åŒæ˜¯å‰è€…çš„å­å°ˆæ¡ˆæœƒåœ¨æ¯å°ˆæ¡ˆä¸­ä½”æ‰æ‰€æœ‰çš„ç©ºé–“ï¼Œè€Œå¾Œè€…åªæœƒç´€éŒ„ submodule çš„è·¯å¾‘å’Œ commit ç‰ˆæœ¬ã€‚\n\n","content":" è¦åœ¨ä¸€å€‹ Git å°ˆæ¡ˆä¸­æœ‰å­å°ˆæ¡ˆ (æˆ‘éƒ½å«ä»– git in git)ï¼Œæœ‰å…©å€‹è¾¦æ³•ï¼Œä¸€å€‹æ˜¯ç›´æ¥ clone åˆ°ç›®éŒ„ä¸‹ï¼Œå¦ä¸€å€‹å°±æ˜¯ä½¿ç”¨ submoduleã€‚å…©è€…çš„ä¸åŒæ˜¯å‰è€…çš„å­å°ˆæ¡ˆæœƒåœ¨æ¯å°ˆæ¡ˆä¸­ä½”æ‰æ‰€æœ‰çš„ç©ºé–“ï¼Œè€Œå¾Œè€…åªæœƒç´€éŒ„ submodule çš„è·¯å¾‘å’Œ commit ç‰ˆæœ¬ã€‚\n\n<!--more-->\n\n## Add Submodule\n\nè¦å°‡å°ˆæ¡ˆæ–°å¢åˆ°ç¾æœ‰çš„ç›®éŒ„ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `git submodule add`ï¼š\n\n```shell\ngit submodule add <repo_url> <folder>\n```\n\nåŸ·è¡Œå¾Œï¼Œå¯ä»¥çœ‹åˆ° git æœƒè‡ªå‹•å¹«ä½ æŠŠ submodule clone åˆ°æŒ‡å®šçš„ç›®éŒ„ä¸­ï¼Œä¸¦å¤šäº†ä¸€å€‹æª”æ¡ˆ `.gitmodules`ï¼Œé€™å€‹æª”æ¡ˆå°±æ˜¯ä¸Šé¢èªªåˆ°çš„ Submodule åªç´€éŒ„ commit ç‰ˆæœ¬ï¼Œå’Œ Submodule URL çš„æª”æ¡ˆã€‚\n\nadd submodule å¾Œï¼Œé‚„æ˜¯è¦ commitï¼Œå› ç‚º Submodule ä¹Ÿå°±åªæ˜¯ç´€éŒ„è¦ç”¨å­å°ˆæ¡ˆçš„å“ªä¸€å€‹ commit ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç¢ºä¿å¤§å®¶éƒ½æ˜¯ä½¿ç”¨åˆ°åŒä¸€å€‹ Submodule çš„ç‰ˆæœ¬ã€‚å¯ä»¥è©¦è‘—å°‡å°ˆæ¡ˆ commit and push åˆ° GitHub ä¸Šï¼Œæ‡‰è©²å¯ä»¥çœ‹åˆ° Submodule å°±æ˜¯é€£çµåˆ°å¦å¤–ä¸€å€‹å°ˆæ¡ˆçš„æŸä¸€å€‹ commitï¼Œä¸‹é¢æ˜¯æœ¬ç«™çš„ Hugo ä¸»é¡Œçš„ submoduleï¼š\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c4ba8819-787e-4726-fb58-db317f9ed400/public)\n\n## Clone Submodule\n\nåœ¨ Clone å«æœ‰ Submodule çš„å°ˆæ¡ˆæ™‚ï¼ŒGit é è¨­æ˜¯ä¸æœƒè‡ªå‹• clone å­å°ˆæ¡ˆçš„ï¼Œéœ€è¦åŠ ä¸Š `--recursive` é€™å€‹åƒæ•¸ï¼Œæ‰æœƒè‡ªå‹•æŠŠ Submodule ä¹Ÿ Clone ä¸‹ä¾†ã€‚\n\n```shell\ngit clone --recursive <repo_url>\n```\n\nå¦‚æœ Clone ä¸‹ä¾†å¾Œæ‰ç™¼ç¾æœ‰ Submoduleï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼è£œæ•‘ï¼ŒæŠŠå­å°ˆæ¡ˆéƒ½ Clone ä¸‹ä¾†ï¼š\n\n```shell\ngit submodule init\ngit submodule update --recursive\n```\n","tags":["git","submodule","linux"]},{"id":18,"date":1631457139000,"url":"/posts/git/github-ssh","title":"GitHub SSH","summary":"\nåœ¨æœ¬æ©Ÿèˆ‡ GitHub æºé€šæœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯é€é sshï¼Œæœ€å¤§çš„å¥½è™•å°±æ˜¯ä¸éœ€è¦è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ä¾†ç¢ºèªèº«åˆ†ï¼Œä¹Ÿå¯ä»¥äº«å—åˆ° ssh åŠ å¯†æ‰€æä¾›çš„å®‰å…¨æ€§ã€‚\n\n","content":" åœ¨æœ¬æ©Ÿèˆ‡ GitHub æºé€šæœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯é€é sshï¼Œæœ€å¤§çš„å¥½è™•å°±æ˜¯ä¸éœ€è¦è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ä¾†ç¢ºèªèº«åˆ†ï¼Œä¹Ÿå¯ä»¥äº«å—åˆ° ssh åŠ å¯†æ‰€æä¾›çš„å®‰å…¨æ€§ã€‚\n\n<!--more-->\n\n## ssh-keygen\n\nè¦ä½¿ç”¨ ssh éå°ç¨±åŠ å¯†ï¼Œå°±æœƒéœ€è¦å…¬é‘°èˆ‡ç§é‘°ï¼Œå‰µå»º ssh key çš„æ–¹æ³•å°±æ˜¯ `ssh-keygen`ï¼š\n\n```shell\nuser@66c0bf85e710:~$ ssh-keygen\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/user/.ssh/id_rsa):\nCreated directory '/home/user/.ssh'.\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/user/.ssh/id_rsa\nYour public key has been saved in /home/user/.ssh/id_rsa.pub\nThe key fingerprint is:\nSHA256:+UUuTN0YLUi2eh7HJoJvuy0whUuLvXIQejjPPTZ9gw4 user@66c0bf85e710\nThe key's randomart image is:\n+---[RSA 3072]----+\n|         .o...   |\n|         ..o.+.  |\n|       .  o +..  |\n|    . o..= +     |\n|   o =.+S * *    |\n|  + + *. = B     |\n|   = oE=o.o      |\n|    + Bo+oo      |\n|     + +++..     |\n+----[SHA256]-----+\n```\n\n`ssh-keygen` æœƒå•ä¸€äº›å•é¡Œï¼Œæœ€å¿«çš„æ–¹å¼å°±æ˜¯ç›´æ¥ç•™ç™½(ä¿æŒé è¨­)ï¼Œä¸€ç›´æŒ‰ enter å°±å¯ä»¥çœ‹åˆ°å·²ç¶“åœ¨ `~/.ssh` ç”¢ç”Ÿäº†å…©å€‹æª”æ¡ˆï¼š\n\n```shell\nuser@66c0bf85e710:~$ ls -l ~/.ssh\ntotal 8\n-rw------- 1 user user 2602 Sep 12 22:42 id_rsa\n-rw-r--r-- 1 user user  571 Sep 12 22:42 id_rsa.pub\nuser@66c0bf85e710:~$\n```\n\n`id_rsa` å°±æ˜¯ç§é‘°ï¼Œè€Œå¤šå€‹ pub çµå°¾çš„ `id_rsa.pub` å°±æ˜¯å…¬é‘°ã€‚ç§é‘°è«‹ä¸è¦å‚³çµ¦ä»»ä½•äººï¼Œå…¬é‘°å‰‡æä¾›çµ¦ GitHubã€‚å¯ä»¥ç”¨ cat å°‡å…¬é‘°é¡¯ç¤ºå‡ºä¾†ä¸¦è¤‡è£½ä»–ï¼š\n\n![image](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.714d829xbug0.png)\n\n## æŠŠå…¬é‘°äº¤çµ¦ GitHub\n\nåˆ° GitHub çš„ Settings -> SSH and GPG keys -> New SSH keyï¼š\n\n![image](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.5frveu05dt00.png)\n\næŠŠå‰›å‰›è¤‡è£½ä¸‹ä¾†çš„å…¬é‘°è²¼ä¸Šï¼ŒTitle å¯ä»¥è‡ªå·±éš¨ä¾¿è¼¸å…¥æˆ–æ‰“é€™å°é›»è…¦çš„åå­—ï¼š\n\n![image](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.56vkhmb55ps0.png)\n\n## æ¸¬è©¦é€£ç·š\n\nè¼¸å…¥ä¸‹é¢å‘½ä»¤å°±å¯ä»¥çŸ¥é“æœ‰æ²’æœ‰é€£ç·šæˆåŠŸï¼Œå¦‚æœæœ‰çœ‹åˆ°è‡ªå·±çš„ä½¿ç”¨è€…åç¨±ï¼Œå°±ä»£è¡¨å·²ç¶“å®Œæˆ ssh çš„èªè­‰ï¼š\n\n```shell\nssh -T git@github.com\n```\n\n![image](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.5f99gnzo3ps0.png)\n\nç¬¬ä¸€æ¬¡é€£ç·šå¯èƒ½æœƒå•è¦ä¸è¦ä¿¡ä»»ï¼Œè¼¸å…¥ `yes` å³å¯ã€‚\n\n> å¦‚æœè¦ºå¾—ä¸Šé¢çš„æ–¹æ³•éº»ç…©ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å‰µå»ºä¸€å€‹ç§æœ‰ repoï¼Œç„¶å¾Œè©¦è‘— clone å’Œ pushï¼Œå°±çŸ¥é“æœ‰æ²’æœ‰èªè­‰æˆåŠŸäº†ã€‚\n\n## Reference\n\n- [Testing your SSH connection](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/testing-your-ssh-connection)\n","tags":["git","github","ssh"]},{"id":19,"date":1630311227000,"url":"/posts/dev/cloud-ide docker","title":"Cloud IDE Docker","summary":"\nç´€éŒ„ä¸€ä¸‹æˆ‘çš„ [Cloud IDE Docker](https://github.com/TonyPepeBear/cloud-ide-docker) ä½¿ç”¨æ–¹æ³•ã€‚\n\n","content":" ç´€éŒ„ä¸€ä¸‹æˆ‘çš„ [Cloud IDE Docker](https://github.com/TonyPepeBear/cloud-ide-docker) ä½¿ç”¨æ–¹æ³•ã€‚\n\n<!--more-->\n\n## Pycharm Community\n\n[Docker Hub](https://hub.docker.com/r/tonypepe/pycharmc)\n\n```bash\ndocker run -dp 8887:8887 tonypepe/pycharmc\n```\n","tags":["ide","docker","jetbrains"]},{"id":20,"date":1629916317000,"url":"/posts/docker/docker","title":"Docker","summary":"\nDocker æ˜¯ä¸€å€‹è™›æ“¬åŒ–æŠ€è¡“ï¼Œå¯ä»¥å°‡æˆ‘å€‘ç·¨å¯«å¥½çš„ç¨‹å¼åŒ…è£¹æˆä¸€å€‹å°çš„ã€Œå®¹å™¨ã€ï¼Œå†ç™¼ä½ˆåˆ°ä¼ºæœå™¨ä¸Šã€‚Docker è§£æ±ºäº†å›°æ“¾ç¨‹å¼ç•Œå¤šå¹´ä¾†çš„ç’°å¢ƒå•é¡Œï¼Œåªè¦ä¼ºæœå™¨å®‰è£äº† Docker å°±å¯ä»¥ç¢ºä¿ä¸€å®šå¯ä»¥åŸ·è¡Œæœå‹™ã€‚\n\n","content":" Docker æ˜¯ä¸€å€‹è™›æ“¬åŒ–æŠ€è¡“ï¼Œå¯ä»¥å°‡æˆ‘å€‘ç·¨å¯«å¥½çš„ç¨‹å¼åŒ…è£¹æˆä¸€å€‹å°çš„ã€Œå®¹å™¨ã€ï¼Œå†ç™¼ä½ˆåˆ°ä¼ºæœå™¨ä¸Šã€‚Docker è§£æ±ºäº†å›°æ“¾ç¨‹å¼ç•Œå¤šå¹´ä¾†çš„ç’°å¢ƒå•é¡Œï¼Œåªè¦ä¼ºæœå™¨å®‰è£äº† Docker å°±å¯ä»¥ç¢ºä¿ä¸€å®šå¯ä»¥åŸ·è¡Œæœå‹™ã€‚\n\n<!--more-->\n\n## Docker v.s. VM\n\nå…¥é–€ Docker æœ€å¸¸è¦‹çš„å•é¡Œå°±æ˜¯ï¼ŒDocker å’Œ VM å·®åœ¨å“ªè£¡ï¼Ÿé€™å€‹å•é¡Œä¸é›£ç†è§£ï¼ŒVM ã€Œè™›æ“¬æ©Ÿã€ï¼Œé¡§åæ€ç¾©æ˜¯è™›æ“¬åŒ–ã€Œç¡¬é«”ã€ã€‚è€Œ Docker å‰‡æ˜¯åªè™›æ“¬åŒ–ä½œæ¥­ç³»çµ±ï¼Œæˆ–æ˜¯ç¨±ä½œã€Œè»Ÿé«”ã€ã€‚\n\nå¤§å®¶éƒ½æ‡‰è©²çŸ¥é“æ¯å‰µå»ºä¸€å€‹è™›æ“¬æ©Ÿï¼Œéƒ½æœƒè€—è²»æ‰æ•¸åˆ†é˜çš„æ™‚é–“ï¼Œè‹¥é‚„è¦å®‰è£ç’°å¢ƒï¼Œé‚£è€—è²»çš„æ™‚é–“å‰‡æœƒç›¸ç•¶å¯è§€ï¼Œä¹Ÿæœƒè€—è²»æ‰ç›¸ç•¶å¤§çš„ç¡¬é«”è³‡æºã€‚Docker åªè™›æ“¬åŒ–è»Ÿé«”çš„å„ªå‹¢ï¼Œå°±æ˜¯å¯ä»¥åœ¨å¹¾ç§’å…§å°±å•Ÿå‹•æœå‹™ï¼Œè€—è²»è³‡æºä¹Ÿç›¸ç•¶å°‘ï¼Œé‚„çœå»äº†å»ºç«‹ç’°å¢ƒçš„æ™‚é–“ã€‚\n\n## Docker Hub\n\n> Git æœ‰ GitHubï¼ŒDocker æœ‰ Docker Hub\n\nDocker Hub æ˜¯ Docker å®˜æ–¹ç”¨ä¾†å­˜æ”¾ Image çš„å€‰åº« (Registry)ï¼Œä½¿ç”¨è€…ä¹Ÿå¯ä»¥è‡ªæ¶ Registryï¼Œä½†æ˜¯å¦‚æœæœªæŒ‡å®š Registryï¼ŒDocker é è¨­æœƒå»æ‰¾ Docker Hub ä¸Šçš„ Imageã€‚\n\n## Image\n\nImage é€šå¸¸å¯ä»¥æ˜¯ä¸€å€‹ç³»çµ±ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å€‹å·²ç¶“å®‰è£å¥½ç‰¹å®šåŸ·è¡Œç’°å¢ƒ (åƒæ˜¯ JAVA) çš„ç³»çµ±ã€‚ç³»çµ±éƒ¨åˆ†æœ€å¸¸è¦‹çš„æœƒæ˜¯ç”¨ alpine linuxï¼Œé€™æ˜¯ä¸€å€‹éå¸¸å°çš„é …ç›®ï¼Œåªæœ‰ä¸€å€‹ç³»çµ±ï¼Œå¯ä»¥è®“ä½ åœ¨å¹¾ç§’å…§å°±å¯ä»¥å•Ÿå‹•æœå‹™ï¼Œè¨±å¤šåŸ·è¡Œç’°å¢ƒä¹Ÿæœƒå»ºæ§‹åœ¨é€™å€‹ç³»çµ±ä¸Šã€‚ç¾åœ¨å¯ä»¥å…ˆå» Docker Hub ä¸Šçœ‹çœ‹å¹¾å€‹å‰å¹¾åçš„ Imageï¼Œå¤§æ¦‚å°±æœƒæ¯”è¼ƒæ¸…æ¥š Image çš„åŠŸç”¨ã€‚\n\nDocker Image å¯ä»¥ç”±ä¸‹åˆ—å¹¾æ–¹å¼å–å¾—ï¼š\n\n- å¾ Docker Hub ä¸Šä¸‹è¼‰\n- ç”± Dockerfile æ§‹å»º\n- å¾å…¶ä»–é›»è…¦ import\n\n## Container\n\nDocker ç”¨ Image å‰µå»º Containerï¼Œä¹Ÿå°±æ˜¯èªªï¼ŒContainer æ˜¯ Image çš„å¯¦ä¾‹ï¼ŒContainer åŸºæœ¬ä¸Šå°±æ˜¯ä¸€å€‹å®Œæ•´çš„ä½œæ¥­ç³»çµ±ï¼Œå¯ä»¥åŸ·è¡Œä»»ä½•çš„ç¨‹å¼ã€‚\n\n## Docker Run\n\næˆ‘å€‘ç°¡å–®å‰µå»ºä¸€å€‹ Ubuntu çš„ Containerï¼Œä¸¦ä¸”å•Ÿå‹•å®ƒï¼š\n\n```bash\ndocker run ubuntu\n```\n\nåŸ·è¡Œå¾Œå¯ä»¥çœ‹åˆ° Docker è‡ªå‹•å¾ Docker Hub ä¸Šä¸‹è¼‰ Ubuntu çš„ Imageï¼Œä½†æ˜¯é–‹å§‹åŸ·è¡Œå¾Œå»ç”šéº¼éƒ½æ²’ç™¼ç”Ÿå°±çµæŸäº†ã€‚é€™æ˜¯å› ç‚º Ubuntu çš„ Image é è¨­æ˜¯å•Ÿå‹•ä¸€å€‹ Shellï¼Œå¦‚æœæ²’æœ‰ Attach åˆ° Sheel ä¸Šï¼ŒContainer é¦¬ä¸Šå°±çµæŸäº†ã€‚\n\næ‰€ä»¥å¦‚æœæˆ‘å€‘è¦ Attach åˆ° Ubuntu çš„ Shell ä¸Šï¼Œå¯ä»¥é€™æ¨£åŸ·è¡Œï¼š\n\n```bash\ndocker run -it ubuntu\n```\n\nåŸ·è¡Œæ‡‰è©²å°±æœƒçœ‹åˆ°æˆ‘å€‘åˆ° ubuntu çš„ Shell è£¡ã€‚\n\n## å•Ÿå‹•ä¸€å€‹ç¶²é æœå‹™\n\nNginx æœ‰å®˜æ–¹çš„ Hello Imageï¼Œå¯ä»¥æ›´æ¸…æ¥šçš„çœ‹åˆ° Container æœ‰åœ¨åŸ·è¡Œ Nginx æœå‹™ã€‚\n\n```bash\ndocker run -p 8080:80 -d nginxdemos/hello\n```\n\nä¸Šé¢å¤šäº†ä¸€å€‹ `-p` çš„åƒæ•¸ï¼Œå¾Œé¢è·Ÿä¸Š `8080:80`ï¼Œæ„æ€æ˜¯æœ¬æ©Ÿçš„ 8080 Port å°åˆ°å®¹å™¨çš„ 80 Portï¼Œé€™æ¨£å°±å¯ä»¥è®“æˆ‘å€‘åœ¨æœ¬æ©Ÿçš„ 8080 Port ä¸Šçœ‹åˆ° Nginx çš„ç¶²é äº†ã€‚\n\n## åˆ—å‡ºã€åˆªé™¤å®¹å™¨\n\nåˆ—å‡ºæ­£åœ¨åŸ·è¡Œçš„å®¹å™¨ï¼š\n\n```bash\ndocker ps\n```\n\nåˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…å«å·²ç¶“åœæ­¢çš„å®¹å™¨ï¼š\n\n```bash\ndocker ps -a\n```\n\nåˆªé™¤å®¹å™¨ï¼Œè‹¥æ˜¯å°šæœªåœæ­¢çš„å®¹å™¨å‰‡ç„¡æ³•åˆªé™¤ï¼š\n\n```bash\ndocker rm <container_id>\n```\n\nåŠ ä¸Š `-f` åƒæ•¸ï¼Œå¯å¼·åˆ¶åˆªé™¤åŸ·è¡Œä¸­çš„å®¹å™¨ï¼š\n\n```bash\ndocker rm -f <container_id>\n```\n\nå¼·åˆ¶åˆªé™¤æ‰€æœ‰å®¹å™¨ï¼š\n\n```bash\ndocker rm $(docker ps -aq)\n```\n\n## å‰µå»ºè‡ªå·±çš„ Image\n\nè¦æ•™ Docker æ€éº¼å‰µå»º Imageï¼Œéœ€è¦å…ˆå»ºç«‹ä¸€å€‹ `Dockerfile`ï¼š\n\n```dockerfile\nFROM ubuntu:latest\n\nRUN apt update \\\n    && apt install vim git -y \\\n    && rm -rf /var/lib/apt/lists/*\n\nCMD [\"/bin/bash\"]\n```\n\nBuild Image:\n\n```bash\ndocker build -t my-ubuntu .\n```\n\næ³¨æ„ä¸Šé¢çš„æŒ‡ä»¤çš„æœ€å¾Œé¢æœ‰ä¸€å€‹ `.`ï¼Œä»£è¡¨ Build é€™å€‹ç›®éŒ„ã€‚`-t` çš„åƒæ•¸å‰‡æ˜¯ Image çš„åç¨±ï¼Œæˆ–æ˜¯ç¨±ä½œ Tagã€‚\n","tags":["docker"]},{"id":21,"date":1628839059000,"url":"/posts/web/cloudflare-tunnel","title":"Cloudflare Tunnel","summary":"\nCloudflare çœŸçš„æ˜¯ä½›å¿ƒå…¬å¸ï¼Œæä¾›å…è²»çš„ DNSã€DDoS é˜²è­·ï¼Œé‚„å¯ä»¥æ‹¿ä¾†è¨—ç®¡éœæ…‹ç¶²é ï¼Œè€Œä»Šå¤©æ˜¯ä»‹ç´¹ä»–å€‘å…¬å¸çš„ Tunnelï¼Œé€™å€‹æœå‹™å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ç‰¹å®š port é–‹æ”¾åˆ°ç¶²è·¯ä¸Šï¼Œè€Œä¸”å®Œå…¨å…è²»ï¼Œåœ¨å°ç£çš„é€Ÿåº¦ä¹Ÿä¸æ…¢ï¼ŒçœŸçš„å¾ˆä½›ï¼Œå¹¾ä¹ç­‰æ–¼æ‹¿åˆ°å…è²»çš„ IPv4ã€‚\n\næˆ‘è¦ºå¾—ç›®å‰çš„ç¼ºé»å°±æ˜¯ç¶²è·¯ä¸Šç›¸é—œçš„è³‡æ–™æ¯”è¼ƒå°‘ï¼Œé‡åˆ°å•é¡Œå¾ˆé›£æ‰¾åˆ°è³‡æ–™åƒè€ƒï¼Œå› ç‚ºä»–å…¶å¯¦ä¸»è¦æ˜¯ Cloudflare çš„ä¸€é …é›¶ä¿¡ä»»æœå‹™ï¼Œç›®æ¨™å®¢ç¾¤éƒ½æ˜¯ä¸€äº›å²å®³çš„ç¶²ç®¡ï¼Œæ‰€ä»¥å®˜æ–¹å¯«çš„æ–‡ä»¶ä¹Ÿéƒ½å¾ˆæ·±å¥§ï¼Œå¦‚æœæ˜¯æ–°æ‰‹å¯èƒ½æœƒé ­æ˜çœ¼èŠ±ã€‚\n\n","content":" Cloudflare çœŸçš„æ˜¯ä½›å¿ƒå…¬å¸ï¼Œæä¾›å…è²»çš„ DNSã€DDoS é˜²è­·ï¼Œé‚„å¯ä»¥æ‹¿ä¾†è¨—ç®¡éœæ…‹ç¶²é ï¼Œè€Œä»Šå¤©æ˜¯ä»‹ç´¹ä»–å€‘å…¬å¸çš„ Tunnelï¼Œé€™å€‹æœå‹™å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ç‰¹å®š port é–‹æ”¾åˆ°ç¶²è·¯ä¸Šï¼Œè€Œä¸”å®Œå…¨å…è²»ï¼Œåœ¨å°ç£çš„é€Ÿåº¦ä¹Ÿä¸æ…¢ï¼ŒçœŸçš„å¾ˆä½›ï¼Œå¹¾ä¹ç­‰æ–¼æ‹¿åˆ°å…è²»çš„ IPv4ã€‚\n\næˆ‘è¦ºå¾—ç›®å‰çš„ç¼ºé»å°±æ˜¯ç¶²è·¯ä¸Šç›¸é—œçš„è³‡æ–™æ¯”è¼ƒå°‘ï¼Œé‡åˆ°å•é¡Œå¾ˆé›£æ‰¾åˆ°è³‡æ–™åƒè€ƒï¼Œå› ç‚ºä»–å…¶å¯¦ä¸»è¦æ˜¯ Cloudflare çš„ä¸€é …é›¶ä¿¡ä»»æœå‹™ï¼Œç›®æ¨™å®¢ç¾¤éƒ½æ˜¯ä¸€äº›å²å®³çš„ç¶²ç®¡ï¼Œæ‰€ä»¥å®˜æ–¹å¯«çš„æ–‡ä»¶ä¹Ÿéƒ½å¾ˆæ·±å¥§ï¼Œå¦‚æœæ˜¯æ–°æ‰‹å¯èƒ½æœƒé ­æ˜çœ¼èŠ±ã€‚\n\n<!--more-->\n\né€™ä¸€é …æœå‹™å¯ä»¥å…ˆä¸ç”¨å¸³è™Ÿå°±èƒ½è©¦ç”¨ï¼Œä¸éå°±ä¸èƒ½è‡ªè¨‚ Domainï¼Œæˆ‘æœƒå…ˆä»‹ç´¹å…ç™»å…¥çš„ï¼Œå†ä»‹ç´¹è¦ç™»å…¥çš„ã€‚ç¬¬ä¸€æ­¥é‚„æ˜¯è¦åœ¨æœ¬åœ°å…ˆå®‰è£ç’°å¢ƒã€‚\n\n## å®‰è£ cloudflared\n\n### å…¨ç³»çµ±é©ç”¨\n\næ³¨æ„ Cloudflare å¾Œé¢å¤šäº†ä¸€å€‹ `d`ï¼Œé€™æ˜¯ä»–é€£ä¸Š Tunnel çš„å¿…è¦ç¨‹å¼ï¼Œæ˜¯ç”¨ Go ç·¨å¯«ï¼Œå®‰è£æ–¹å¼å°±æ˜¯åˆ°[å®˜æ–¹ Github](https://github.com/cloudflare/cloudflared/releases)ä¸‹è¼‰ç¬¦åˆè‡ªå·±ç’°å¢ƒçš„åŸ·è¡Œæª”ã€‚\n\n### macOS\n\nmac å¯ä»¥ç”¨ Homebrew å®‰è£ï¼š\n\n```sh\nbrew install cloudflare/cloudflare/cloudflared\n```\n\n### Windows\n\nWindows æ°¸é æ˜¯æœ€éº»ç…©çš„ï¼Œä¸‹è¼‰å®ŒåŸ·è¡Œæª”å¾Œï¼Œéš¨ä¾¿ä¸Ÿåˆ°ä¸€å€‹è³‡æ–™å¤¾ï¼Œç„¶å¾ŒåŠ åˆ° PATH è£¡ã€‚\n\n### Update\n\nè¦æ›´æ–°é€™å€‹åŸ·è¡Œæª”ï¼Œåªè¦ Run ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå¦å¤–ï¼ŒWindows ä¸æ”¯æ´è‡ªå‹•æ›´æ–°ï¼Œè¦æ›´æ–°å°±åªèƒ½æ‰‹å‹•ä¸‹è¼‰è¦†è“‹ï¼š\n\n```sh\ncloudflared update\n```\n\n## å…ç™»å…¥æ¸¬è©¦ Tunnel\n\n```sh\ncloudflared tunnel --url http://localhost:8080\n```\n\nåŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤ï¼Œå°±å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ 8080 port ç”¨ http å…¬é–‹åˆ°ç¶²è·¯ä¸Šï¼Œæ‡‰è©²æœƒçœ‹åˆ°è¼¸å‡ºä¸­æœƒçµ¦ä¸€ä¸²å€‹ `*-*-*.trycloudflare.com` çš„ç¶²å€ï¼Œç¾åœ¨åªè¦è¨ªå•é‚£å€‹ç¶²å€ï¼Œå°±å¯ä»¥ç™¼ç¾æœ¬åœ°çš„ç¶²é å·²ç¶“å¯ä»¥å¾å…¨ç¶²é€£åˆ°ï¼Œä¸éœ€è¨»å†Šï¼Œä¹Ÿä¸ç”¨è¨­å®šè¤‡é›œçš„ Domainï¼Œé‚„ä¸é™æµé‡ã€‚\n\n## ç™»å…¥ Cloudflare\n\nç¬¬ä¸€æ­¥å°±æ˜¯å…ˆç™»å…¥ Cloudflare çš„å¸³è™Ÿï¼Œä¹Ÿè¦æœ‰ä¸€å€‹å·²ç¶“è¨—ç®¡çµ¦ Cloudflare çš„ Domainï¼š\n\n```sh\ncloudflared tunnel login\n```\n\nåŸ·è¡Œé€™å€‹å‘½ä»¤å¾Œï¼Œæ‡‰è©²æœƒè·³å‡ºç€è¦½å™¨æˆæ¬Šï¼Œå¦‚æœæ²’æœ‰è·³å‡ºï¼Œå°±æ‰‹å‹•è¤‡è£½æä¾›çš„æˆæ¬Šç¶²å€ç™»å…¥ Cloudflare å¸³è™Ÿã€‚\n\n## å‰µå»ºä¸¦ä½¿ç”¨ Tunnel\n\nç™»å…¥å®Œæˆå¾Œå°±å¯ä»¥é–‹å§‹å‰µå»ºé€šé“ï¼Œå‰µå»ºåªæœƒåœ¨æœ¬åœ°ç”¢ç”Ÿä¸€äº›æ–‡ä»¶ï¼Œä¸¦ä¸æœƒæœ‰ä»»ä½•é€£ç·šçš„å‹•ä½œï¼Œå¯ä»¥æ”¾å¿ƒåŸ·è¡Œï¼š\n\n```sh\ncloudflared tunnel create <Name>\n```\n\nå‰µå»ºå®Œæˆå¾Œï¼ŒCloudflare æœƒçµ¦ä¸€çµ„ UUIDï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æœ‰æ²’æœ‰å‰µå»ºæˆåŠŸï¼š\n\n```sh\ncloudflared tunnel list\n```\n\nå¦‚æœè¦åˆªé™¤å°±æ˜¯ Deleteï¼š\n\n```sh\ncloudflared tunnel delete <Name or UUID>\n```\n\n## DNS è¨­å®š\n\nåœ¨å‰µå»º Tunnel å¾Œï¼ŒCloudflare æœƒå°‡å‰›å‰›å‰µå»ºéš§é“æ™‚ç”¢ç”Ÿçš„ UUID ç¶å®šåˆ° `<UUID>.cfargotunnel.com` é€™å€‹ Domainï¼Œä¸é Cloudflare æœƒæ“‹æ‰ç”¨é€™å€‹ Domain ç›´æ¥é€£ç·šçš„æµé‡ï¼Œæ‰€ä»¥æˆ‘å€‘è¦æŠŠæˆ‘å€‘çš„ Domain æ–°å¢ä¸€å€‹ CNAME ç´€éŒ„ï¼ŒæŠŠæµé‡å¾€é€™é‚Šå°ã€‚\n\næœ‰å…©å€‹æ–¹æ³•å¯ä»¥è¨­å®š CNAMEï¼Œä¸€å€‹æ˜¯è‡ªå·±å» Cloudflare çš„å®˜ç¶²è¨­å®šï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210813165733.png)\n\nå¦ä¸€å€‹æ˜¯ç›´æ¥ç”¨æŒ‡ä»¤è¨­å®šï¼Œå¿«åˆæ–¹ä¾¿ï¼ŒæŠŠå¾Œé¢çš„ domain æ”¹æˆè‡ªå·±æƒ³è¦ç¶å®šçš„ï¼š\n\n```sh\ncloudflared tunnel route dns <Name or UUID> test.example.com\n```\n\næ‰“å®Œå¾Œå¦‚æœä¸æ”¾å¿ƒï¼Œé‚„æ˜¯å¯ä»¥è‡ªå·±åˆ° Cloudflare çš„ Dns è¨­å®šçœ‹ä¸€ä¸‹æœ‰æ²’æœ‰è¨­å®šå®Œæˆï¼Œæ‡‰è©²æœƒçœ‹åˆ°è·Ÿä¸Šåœ–ä¸€æ¨£ç”¢ç”Ÿä¸€å€‹ CNAME Recordã€‚\n\n## Tunnel Config\n\nä¸‹é¢æ˜¯æœ€ç°¡å–®çš„ Config ç¯„ä¾‹ï¼Œé€™æ˜¯ä¸€å€‹ `yml` æª”æ¡ˆï¼š\n\n```yml\ntunnel: <Name>\n\ningress:\n  - hostname: test.example.com\n    service: http://localhost:8080\n  - service: http_status:404\n```\n\nä¸Šé¢æœƒæŠŠ 8080 çš„ HTTP æµé‡å°åˆ° `domain.example.com`ï¼Œä½¿ç”¨å‰›å‰›å‰µå»ºçš„ Tunnelã€‚\n\næœ€å¾Œä¸€è¡Œä¸€å®šè¦æœ‰ä¸€å€‹å¯ä»¥æ¥å—æ‰€æœ‰æµé‡çš„ Serviceï¼Œä¸ç„¶æœå‹™æœƒä¸èƒ½å•Ÿå‹•ï¼Œé€™è£¡å…¨éƒ¨å¾€ 404 å°ã€‚\n\n## Run Tunnel\n\næœ€å¾Œä¸€æ­¥ï¼ŒåŠ ä¸Š config çš„åƒæ•¸ï¼ŒæŠŠå‰›å‰›çš„ yml æª”å–‚çµ¦ Cloudflareï¼Œå°±å¯ä»¥å•Ÿå‹•é€šé“äº†ï¼š\n\n```sh\ncloudflared tunnel --config test.yml run\n```\n\n## å¾Œè¨˜\n\né€™ç¯‡åªä»‹ç´¹äº†å¦‚ä½•å‰µå»ºä¸€å€‹ Http çš„ Tunnelï¼Œå¦‚æœè¦é–‹å…¶ä»–çš„ TCP Portï¼Œé‚„éœ€è¦å…¶ä»–çš„è¨­å®šï¼Œè€Œä¸”åœ¨ Client ç«¯ä¹Ÿæœƒéœ€è¦å®‰è£ Cloudflaredï¼Œæ‰€ä»¥æˆ‘ç•™åˆ°ä¸‹ä¸€ç¯‡åœ¨ä»‹ç´¹ã€‚\n\n## Reference\n\n- [Cloudflare for Teams documentation](https://developers.cloudflare.com/cloudflare-one/)\n","tags":["cloudflare","tunnel","teams","cloudflare-tunnel"]},{"id":22,"date":1626876500000,"url":"/posts/flight/a320-note","title":"A320neo å†·è‰™åˆ°é£›è¡Œ","summary":"\nç°¡å–®è¨˜éŒ„æˆ‘æ‰€èªçŸ¥çš„ A320 çš„ä¸€äº›ç¨‹åºã€‚\n\n","content":" ç°¡å–®è¨˜éŒ„æˆ‘æ‰€èªçŸ¥çš„ A320 çš„ä¸€äº›ç¨‹åºã€‚\n\n<!--more-->\n\n> æ³¨æ„é€™äº›éƒ½ä¸æ˜¯æ¨™æº–ç¨‹åºï¼Œåªæ˜¯æˆ‘è‡ªå·±äº‚ç†è§£çš„ï¼Œä¹Ÿçœå»è »å¤šæ­¥é©Ÿï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯èƒ½èµ·è®“é£›æ©Ÿå‹•èµ·ä¾†ï¼Œæ¨™æº–ç¨‹åºè‚¯å®šæ˜¯æ›´è¤‡é›œçš„ã€‚\n\n## å•Ÿå‹•é£›æ©Ÿå‰æª¢æŸ¥\n\n~~æ¨¡æ“¬å™¨ä¸­è·³éé‚„æ˜¯å¯ä»¥é£›~~\n\n1. Engine Master 1 and 2 Switch -> OFF\n   - ä¸»å¼•æ“ 1, 2 éƒ½é—œé–‰\n2. Engine Mode Selector -> NORM\n   - å¼•æ“æ¨¡å¼åœ¨ Normal ä½ç½®\n3. Weather Radar -> OFF\n   - é—œé–‰æ°£è±¡é›·é”\n4. Landing Gear -> Down\n   - æ©Ÿè¼ªæ”¾ä¸‹\n5. Wipers -> Both OFF\n   - å…©å€‹é›¨åˆ·éƒ½é—œé–‰\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/7e29f7e1-bf0b-44d4-7589-29286ed81b00/large)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/ca5109ba-4baf-40e3-850e-ee4002882c00/large)\n\n## å•Ÿå‹•é£›æ©Ÿ\n\n1. Batt 1 and 2 -> ON\n2. EXT Power -> ON\n   - å•Ÿå‹•å¤–éƒ¨é›»æº\n   - é€™æ™‚æ‡‰è©²å¯ä»¥çœ‹åˆ°æ‰€æœ‰å„€è¡¨äº®èµ·\n3. APU Fire Test\n   - APU æ»…ç«æ¸¬è©¦\n4. APU Master and wait 3 sec -> ON\n   - æ‰“é–‹ APU ä¸»é–‹é—œï¼Œä¸¦ç­‰å¾… 3 ç§’\n5. APU START -> ON\n   - ç™¼å‹• APU\n6. Wait for APU START -> Green \"AVAIL\"\n   - ç­‰ APU ç™¼å‹•å®Œæˆ\n7. APU BLEED -> ON\n   - é–‹å•Ÿ APU ä¾›çµ¦æ°£å£“\n8. EXT Power -> OFF\n   - ç§»é™¤å¤–éƒ¨é›»æº\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/bcc428a6-c065-4bc3-0d19-ad204b860700/large)\n\n## Overhead Panel ä¸Šæ–¹å„€è¡¨\n\nåŸºæœ¬ä¸Šï¼Œç”±å·¦è‡³å³ï¼Œç”±ä¸‹è€Œä¸Šçš„æª¢æŸ¥\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/4aa17d2f-419c-40e6-09f8-e31ca2833a00/large)\n\n### å·¦é‚Šé‚£æ’\n\n1. CREW SUPPLY -> ON\n   - æ‰“é–‹çµ„å“¡æ°§æ°£ä¾›çµ¦\n2. ADIRS 1, 2, 3 -> NAV\n   - é–‹å•Ÿä¸‰å€‹æ…£æ€§å°èˆªï¼Œéœ€ç­‰å¾… 6-7 åˆ†é˜æ ¡æº–\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/b25f2e34-5ff9-4534-4fc2-927961a5ce00/large)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/16fb299e-1847-4767-8093-aa0d058cd400/large)\n\n### ä¸­é–“é‚£æ’\n\n1. NAV & LOGO Light -> ON\n2. OVHD INTEG LT -> AS REQ.\n3. DOME LT -> AS REQ.\n4. ANN LT TEST\n5. EMER EXIT LT -> ARM\n6. SEAT BELTS -> ON\n7. NO SMOKING -> ON\n8. ALL PUMP -> ON\n9. ENG 1 FIRE TEST\n10. ENG 2 FIRE TEST\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/e5f05a70-bc36-4bc3-fff2-61f413e6b900/large)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/613ca5d3-3519-4c5d-cb82-4f9371e1d500/large)\n\n### å³é‚Šé‚£æ’\n\nåŸºæœ¬ä¸Šä¸ç”¨å‹•\n\n## MCDU é£›è¡Œé›»è…¦\n\nåœ¨ç­‰å¾…å°èˆªæ ¡æº–æ™‚ï¼Œä¾†è¨­å®šé£›è¡Œé›»è…¦ã€‚è¨­å®šé£›è¡Œé›»è…¦æœ‰ä¸€å€‹å£è¨£ï¼š\n\n> D > I > F > S > R > I > P > P\n\n- DATA\n- INIT A\n- F-PLN\n- SEC PLAN\n- RAD NAV\n- INIT B\n- PREF\n- PROG\n\n> é£›è¡Œé›»è…¦è¨­å®šè »è¤‡é›œçš„ï¼Œæœ¬æ–‡å°±å…ˆè·³éè©³ç´°æ­¥é©Ÿï¼Œå°ˆæ³¨åœ¨å†·æ“åˆ°èµ·é£›ã€‚\n\n## å¾Œæ¨ and å•Ÿå‹•å¼•æ“å‰æª¢æŸ¥\n\nè¨˜å¾—ç­‰ IRS æ ¡æº–å®Œå¾Œå†å¾Œæ¨ã€‚\n\n1. ç”³è«‹å¾Œæ¨\n2. BECON Light -> ON\n   - å•Ÿå‹• BECAON ç‡ˆ\n3. Trust Levers -> IDLE\n   - ç¢ºå®šæ¨åŠ›æ¡¿åœ¨ IDLE\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f3d16c92-7e28-4b76-c106-458211015c00/public)\n\nåœ¨ MSFS çš„ FlyByWire ä¸­å¯ä»¥ç”¨æ—é‚Šçš„ FlyPad ç”³è«‹å¾Œæ¨ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/71f815a8-11e0-4d0b-38a5-2de486a4e000/public)\n\n## å•Ÿå‹•å¼•æ“\n\n1. ENG MODE selector -> IGN/START\n   - æŠŠ ENG MODE selector è½‰åˆ°å³é‚Šçš„å•Ÿå‹•å¼•æ“æ¨¡å¼\n2. ENGINE 2 START -> ON\n   - å•Ÿå‹•å³é‚Šçš„ 2 è™Ÿå¼•æ“\n   - æˆ‘ä¹Ÿä¸çŸ¥é“ç‚ºç”šéº¼éƒ½æ˜¯å…ˆå•Ÿå‹• 2 è™Ÿå¼•æ“\n   - ç­‰å¾…ç™¼å‹•å®Œæˆå¾Œå†ç™¼å‹• 1 è™Ÿå¼•æ“\n   - ç™¼å‹•æ™‚æ‡‰ç›£æ§å¼•æ“æ•¸æ“šï¼Œ19% N1, 68% N2, 520Â°C EGT, 290 kg/h FFï¼Œç­‰å¾… 2 è™Ÿå¼•æ“ AVAIL å­—æ¨£å‡ºç¾\n3. ENGINE 1 START -> ON\n   - å•Ÿå‹•å·¦é‚Šçš„ 1 è™Ÿå¼•æ“ï¼Œé‡è¤‡ç¬¬ 2 æ­¥ç›´åˆ° 1 è™Ÿå¼•æ“ AVAIL å­—æ¨£å‡ºç¾\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/1e82de0e-18d0-402e-b279-780fe5f6b800/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d164d67d-9afb-4bd6-2eb9-835d7fe24300/public)\n\n## å•Ÿå‹•å¼•æ“å¾Œ\n\n1. ENG MODE selectgor -> NORM\n   - å¼•æ“æ¨¡å¼è½‰å›ä¸­é–“ NORM\n2. APU Bleed -> OFF\n   - é—œé–‰ APU ä¾›æ°£\n3. APU MASTER -> OFF\n   - é—œé–‰ APU\n4. FLAPS lever -> SET TAKEOFF POSITION\n   - æ”¾å‡ºè¥Ÿç¿¼åˆ°èµ·é£›éœ€è¦çš„ä½ç½®\n\n## æ»‘è¡Œ Taxi\n\n1. NOSE Light -> Taxi\n   - é–‹å•Ÿæ»‘è¡Œç‡ˆ\n2. RWY TURN OFF -> ON\n   - é–‹å•Ÿè„«é›¢è·‘é“ç‡ˆ (è½‰å½ç‡ˆ)\n3. PARK BRK -> OFF\n   - é—œé–‰æ‰‹ç…è»Š\n4. AUTO BRK MAX -> ON\n   - é–‹å•Ÿæœ€å¤§è‡ªå‹•ç…è»Š\n\n## èµ·é£›\n\n## Reference\n\n- [æ•™å®˜æˆ‘æƒ³é£›](https://www.youtube.com/channel/UCDKKDx4mNVI7vONL1vqTx7g)\n- [æ©Ÿå¸«é˜¿æ¥·](https://www.youtube.com/channel/UCOHc8xzWD25Nn-snDBJUMGQ)\n- [FBW A32NX Checklist.pdf](https://github.com/flybywiresim/manuals/blob/master/pdf/A32NX%20Documentation/FBW%20A32NX%20Checklist.pdf)\n- [FBW A32NX SOP.pdf](https://github.com/flybywiresim/manuals/blob/master/pdf/A32NX%20Documentation/FBW%20A32NX%20SOP.pdf)\n","tags":["a320neo","airbus","msfs"]},{"id":23,"date":1626450187000,"url":"/posts/linux/beautiful-terminal","title":"Beautiful Terminal","summary":"\næ‰“ä¸è´åˆ¥äººï¼Œè‡³å°‘é•·å¾—æ¯”ä»–å¸¥ã€‚æœ€è¿‘çµ‚æ–¼æŠŠæˆ‘çš„ Terminal å¼„æˆè‡ªå·±å–œæ­¡çš„æ¨£å­ï¼Œæ‰€ä»¥åšä¸€ä¸‹ç°¡å–®çš„ç´€éŒ„ï¼Œå¸Œæœ›å¤§å®¶éƒ½å¯ä»¥æŠŠæ±è¥¿è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨£å­ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210716235146.png)\n\n","content":" æ‰“ä¸è´åˆ¥äººï¼Œè‡³å°‘é•·å¾—æ¯”ä»–å¸¥ã€‚æœ€è¿‘çµ‚æ–¼æŠŠæˆ‘çš„ Terminal å¼„æˆè‡ªå·±å–œæ­¡çš„æ¨£å­ï¼Œæ‰€ä»¥åšä¸€ä¸‹ç°¡å–®çš„ç´€éŒ„ï¼Œå¸Œæœ›å¤§å®¶éƒ½å¯ä»¥æŠŠæ±è¥¿è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨£å­ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210716235146.png)\n\n<!--more-->\n\næˆ‘å€‘ä»Šå¤©ä¸»è¦æœƒç”¨åˆ°ä¸‹é¢çš„å¹¾æ¨£æŠ€è¡“ï¼š\n\n1. [zsh](https://zsh.sourceforge.io/)\n2. [powerlevel10K](https://github.com/romkatv/powerlevel10k)\n3. [zim](https://zimfw.sh/#install)\n4. [Nerd Fonts](https://www.nerdfonts.com/)\n\nçœ‹åˆ°é€™å¹¾é …æŠ€è¡“å…¶å¯¦å¯ä»¥è‡ªå·±å…ˆå»ç ”ç©¶ä¸€ä¸‹ï¼Œçœ‹çœ‹é€™äº›æŠ€è¡“æ˜¯ä¸æ˜¯è‡ªå·±éœ€è¦çš„ï¼Œä»¥å…äº‚è£ä¸€å †æ±è¥¿ï¼Œæçš„è‡ªå·± Terminal äº‚ä¸ƒå…«ç³Ÿç„¡æ³•å¾©åŸã€‚å¦å¤–ï¼ŒWindows æ‡‰è©²æ˜¯ç„¡æ³•å®‰è£çš„ï¼Œè‡³å°‘æˆ‘è‡ªå·±æ˜¯æ²’è¾¦æ³•ï¼Œä¸é WSL å€’æ˜¯å¯ä»¥ç©æˆé€™æ¨£ï¼Œç•¢ç«Ÿå°±æ˜¯ Linux éº»ã€‚\n\nå¾ˆå¤šäººæœƒæ¨è–¦åœ¨ mac ä¸Šå®‰è£ iTermï¼Œæˆ‘è‡ªå·±æ˜¯æ²’è£ï¼Œæˆ‘è¦ºå¾— mac å…§å»ºçš„ Terminal è¶³å¤ å¥½ç”¨ï¼Œæ²’å¿…è¦å®‰è£å…¶ä»– Terminalã€‚\n\n## Font\n\nå¥½çœ‹çš„ç¬¬ä¸€æ­¥å°±æ˜¯æœ‰å¥½çœ‹çš„å­—é«”ï¼Œ[Nerd Fonts](https://www.nerdfonts.com/) é€™å€‹å°ˆæ¡ˆæŠŠä¸€äº›é–‹ç™¼è€…å¸¸ç”¨çš„å­—é«”ï¼ŒåŠ ä¸Šä¸€äº›åœ¨ Terminal ä¸­æœƒç”¨åˆ°çš„ä¸€äº› icon å’Œ symbolï¼Œå¸¸è¦‹çš„ `Hack`ã€`Jetbrains Mono` éƒ½æœ‰åœ¨é€™å€‹å°ˆæ¡ˆè£¡ã€‚åˆ° Nerd Fonts çš„å®˜ç¶²å¯ä»¥ä¸‹è¼‰åˆ°é€™äº›å­—é«”ï¼Œæ³¨æ„ä¸è¦åˆ°å­—é«”å€‘åŸæœ¬çš„ç®¡ç¶²ä¸‹è¼‰ï¼Œè¦åˆ° Nerd Fonts ä¸‹è¼‰åŒ…å«ç‰¹æ®Šç¬¦è™Ÿçš„å­—é«”ã€‚\n\n![img](https://www.nerdfonts.com/assets/img/sankey-glyphs-combined-diagram.png)\n\nä¸‹è¼‰å®‰è£å¥½å­—é«”å¾Œï¼Œè¨˜å¾—åˆ°è‡ªå·±çš„ Terminal ä¸­è®Šæ›´å­—é«”ï¼Œé¸æ“‡æœ‰åŒ…å« Nerd çš„å­—é«”ï¼Œä»¥å…ç­‰ç­‰å­—é«”éƒ½ç„¡æ³•é¡¯ç¤ºï¼Œé€™éƒ¨åˆ†æ•™å­¸æˆ‘æ‡¶å¾—å¯«ï¼Œæ‰€ä»¥é™„ä¸€å¼µåœ–ï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717112205.png)\n\n## zsh\n\nzsh å¯ä»¥èªªæ˜¯ bash çš„é€²éšç‰ˆï¼Œæä¾›å®¢è£½åŒ–è‡ªå·±åœ¨ Terminal ä¸­æƒ³è¦çš„ä¸»é¡Œå’ŒåŠŸèƒ½ã€‚è¦å®‰è£ zsh é€šå¸¸å„å€‹ç³»çµ±éƒ½ä¸ä¸€æ¨£ï¼Œè‡ªå·±ä¸Šç¶²æ ¹æ“šç³»çµ±å®‰è£å³å¯ã€‚å®‰è£å®Œæˆå¾Œä¹Ÿè¦å°‡é è¨­ shell æ”¹æˆ zshã€‚\n\nubuntu:\n\n```bash\nsudo apt install zsh\nchsh -s /bin/zsh $USRR\n```\n\n## powerlevel10k\n\npowerlevel10k æ˜¯ä¸€å€‹ zsh ä¸»é¡Œï¼Œæä¾›å¯é«˜å®¢è£½åŒ–çš„ä¸»é¡Œå’Œå®¢è£½åŒ–åš®å°ï¼Œå¯ä»¥ç°¡å–®åœ°å°±æŠŠ Terminal è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨¡æ¨£ï¼Œä¹Ÿæ˜¯æœ¬æ–‡æœ€é‡è¦çš„éƒ¨åˆ†ã€‚powerlevel10k æä¾›è¨±å¤šå®‰è£æ–¹æ³•ï¼Œå¯ä»¥é€é oh-my-zshï¼Œä¹Ÿå¯ä»¥ç”¨è…³æœ¬å®‰è£ï¼Œæˆ‘æ˜¯èªç‚ºç”¨è…³æœ¬å®‰è£å°±å¥½ï¼Œå¯ä»¥ä¸ç”¨ç”¨åˆ° oh-my-zshï¼Œå› æˆ‘å€‘ä¹‹å¾Œæœƒæåˆ° zim å°±æä¾›è¨±å¤šå¯ä»¥æ›¿ä»£ oh-my-zsh çš„åŠŸèƒ½ã€‚\n\nç”¨è…³æœ¬å®‰è£ powerlevel10kï¼š\n\n```bash\ngit clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k\necho 'source ~/powerlevel10k/powerlevel10k.zsh-theme' >>~/.zshrc\n```\n\nå®‰è£æ–¹å¼å¯èƒ½æœƒå› ç‰ˆæœ¬è®Šå‹•è€Œä¸ä¸€æ¨£ï¼Œå»ºè­°é‚„æ˜¯åˆ°å®˜æ–¹ Github ä¸Šçœ‹ä¸€ä¸‹å®‰è£æ–¹å¼ã€‚\n\nå®‰è£å®Œæˆå¾Œç¬¬ä¸€æ¬¡é€²åˆ° Terminal æœƒé‡åˆ°ä¸€å€‹å®‰è£åš®å°ï¼Œå¯ä»¥æ ¹æ“šè‡ªå·±å–œå¥½è¨­å®šä¸»é¡Œæ¨£å¼ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717214526.gif)\n\nå®Œæˆåˆ°é€™è£¡ï¼ŒTerminal æ‡‰è©²å·²ç¶“è®Šå¾—ç¾ç¾çš„ï¼Œå¦‚æœé‡åˆ°äº‚ç¢¼ï¼Œå¯èƒ½æ˜¯å­—å‹æ²’æœ‰èª¿æ•´å¥½ã€‚\n\npowerlevel10k æœƒæä¾›ä¸€å€‹ `p10k` çš„å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ–¼é‡æ–°å•Ÿå‹•åš®å°ï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717174430.png)\n\n## Zim\n\nå…¨å Zsh IMproved FrameWorkï¼Œä¸»è¦æ˜¯æä¾›ä¸€äº›æ–¹ä¾¿çš„ zsh pluginï¼Œåƒæ˜¯è‡ªå‹•è£œå…¨ã€èªæ³•é«˜äº®ç­‰ï¼Œå¦‚æœæ˜¯å¸Œæœ›å¥½çœ‹ï¼Œä¸ç”¨å¥½ç”¨ï¼ŒZim å°±å¯ä»¥ä¸ç”¨å®‰è£ã€‚\n\nå®‰è£ Zim ä¹Ÿå¾ˆç°¡å–®ï¼Œåªè¦ Run ä¸‹é¢çš„è…³æœ¬å°±å¯ä»¥ï¼š\n\n```bash\ncurl -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh | zsh\n```\n\nåˆ°é€™å°±ç®—æ˜¯å…¨éƒ¨å®Œæˆï¼Œå¦‚æœæœ‰ç™¼ç¾æ›´å¤šå¥½ç”¨çš„ Terminal å·¥å…·ï¼Œè¨˜å¾—åˆ†äº«çµ¦æˆ‘ã€‚\n\n## Reference\n\n- [zsh](https://zsh.sourceforge.io/)\n- [powerlevel10K](https://github.com/romkatv/powerlevel10k)\n- [zim](https://zimfw.sh/#install)\n- [Nerd Fonts](https://www.nerdfonts.com/)\n","tags":["terminl","zsh","zim","powerlevel","powerlevel10k","nerd-font","ubuntu","mac"]},{"id":24,"date":1625475938000,"url":"/posts/web/markdown","title":"Markdown","summary":"\nMarkdown å¯ä»¥æƒ³åƒæˆ Html çš„ç°¡åŒ–ç‰ˆæœ¬ï¼Œå»£æ³›ç”¨æ–¼ç·¨å¯«æ–‡ç« æˆ–æ˜¯æŠ€è¡“æ–‡ä»¶ï¼Œå› ç‚ºå…¶ç‰¹æ€§åŸºæœ¬ä¸Šç”± Html ç°¡åŒ–è€Œä¾†ï¼Œæ‰€ä»¥æ–¹ä¾¿çš„ç”±å¯«å¥½çš„ Markdown ç”¢ç”Ÿ Html ç¶²é ï¼Œåƒæ˜¯é€™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ç”± Markdown ç·¨å¯«ã€‚\n\n","content":" Markdown å¯ä»¥æƒ³åƒæˆ Html çš„ç°¡åŒ–ç‰ˆæœ¬ï¼Œå»£æ³›ç”¨æ–¼ç·¨å¯«æ–‡ç« æˆ–æ˜¯æŠ€è¡“æ–‡ä»¶ï¼Œå› ç‚ºå…¶ç‰¹æ€§åŸºæœ¬ä¸Šç”± Html ç°¡åŒ–è€Œä¾†ï¼Œæ‰€ä»¥æ–¹ä¾¿çš„ç”±å¯«å¥½çš„ Markdown ç”¢ç”Ÿ Html ç¶²é ï¼Œåƒæ˜¯é€™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ç”± Markdown ç·¨å¯«ã€‚\n\n<!--more-->\n\næˆ‘å€‘ä¾†çœ‹çœ‹ [Swift](https://github.com/apple/swift) çš„å®˜ç¶²ï¼Œå¯ä»¥ç™¼ç¾ `[README.md](http://readme.md)` é€™å€‹æª”æ¡ˆå°±æ˜¯ç”± Markdown ç·¨å¯«ï¼ŒGithub ä¹Ÿæœƒè‡ªå‹•å°‡é€™å€‹æª”æ¡ˆæ¸²æŸ“åœ¨ç¶²é ä¸‹æ–¹ã€‚åˆ°é€™è£¡å¯ä»¥ç™¼ç¾ï¼Œåœ¨ Github ä¸Šçš„æ‰€æœ‰é–‹æºå°ˆæ¡ˆçš„æ–‡ä»¶ï¼Œå¹¾ä¹éƒ½æ˜¯ç”± Markdown ç·¨å¯«ã€‚\n\n## å“²å­¸\n\nå¼•è¿°è‡ª [https://markdown.tw](https://markdown.tw)\n\n> Markdown çš„ç›®æ¨™æ˜¯å¯¦ç¾ã€Œæ˜“è®€æ˜“å¯«ã€ã€‚  \n> ä¸éæœ€éœ€è¦å¼·èª¿çš„ä¾¿æ˜¯å®ƒçš„å¯è®€æ€§ã€‚ä¸€ä»½ä½¿ç”¨ Markdown æ ¼å¼æ’°å¯«çš„æ–‡ä»¶æ‡‰è©²å¯ä»¥ç›´æ¥ä»¥ç´”æ–‡å­—ç™¼ä½ˆï¼Œä¸¦ä¸”çœ‹èµ·ä¾†ä¸æœƒåƒæ˜¯ç”±è¨±å¤šæ¨™ç±¤æˆ–æ˜¯æ ¼å¼æŒ‡ä»¤æ‰€æ§‹æˆã€‚Markdown èªæ³•å—åˆ°ä¸€äº›æ—¢æœ‰ text-to-HTML æ ¼å¼çš„å½±éŸ¿ï¼ŒåŒ…æ‹¬ Setextã€atxã€Textileã€reStructuredTextã€Grutatext å’Œ EtTextï¼Œç„¶è€Œæœ€å¤§éˆæ„Ÿä¾†æºå…¶å¯¦æ˜¯ç´”æ–‡å­—çš„é›»å­éƒµä»¶æ ¼å¼ã€‚  \n> å› æ­¤ Markdown çš„èªæ³•å…¨ç”±æ¨™é»ç¬¦è™Ÿæ‰€çµ„æˆï¼Œä¸¦ç¶“éåš´è¬¹æ…é¸ï¼Œæ˜¯ç‚ºäº†è®“å®ƒå€‘çœ‹èµ·ä¾†å°±åƒæ‰€è¦è¡¨é”çš„æ„æ€ã€‚åƒæ˜¯åœ¨æ–‡å­—å…©æ—åŠ ä¸Šæ˜Ÿè™Ÿï¼Œçœ‹èµ·ä¾†å°±åƒ*å¼·èª¿*ã€‚Markdown çš„æ¸…å–®çœ‹èµ·ä¾†ï¼Œå—¯ï¼Œå°±æ˜¯æ¸…å–®ã€‚å‡å¦‚ä½ æœ‰ä½¿ç”¨éé›»å­éƒµä»¶ï¼Œå€å¡Šå¼•è¨€çœ‹èµ·ä¾†å°±çœŸçš„åƒæ˜¯å¼•ç”¨ä¸€æ®µæ–‡å­—ã€‚\n\n## Tools\n\nQ: é‚£è¦ç”¨ä»€éº¼ä¾†å¯«å‘¢ï¼Ÿ\n\nå› ç‚º Markdown åŸºæœ¬ä¸Šä¹Ÿæ˜¯ç´”æ–‡å­—æª”æ¡ˆï¼Œæ‰€ä»¥åªè¦æ˜¯æ–‡å­—ç·¨è¼¯å™¨éƒ½å¯ä»¥ç·¨è¼¯ï¼Œä½ è¦ç”¨ txt ä¾†å¯«ä¹Ÿæ˜¯å€‹ä¸éŒ¯çš„æ–¹æ³• â¤ï¸ã€‚\n\n### VSCode\n\nç›®å‰æœ€æ¨è–¦çš„å°±æ˜¯å·¥ç¨‹å¸«çš„å¥½å¤¥ä¼´ `VSCode` ï¼ŒVSCode åœ¨å¯« Markdown æ™‚ï¼Œæœ‰æä¾›å³æ™‚æ¸²æŸ“ï¼Œå¯ä»¥å¿«é€Ÿçš„çœ‹åˆ°çµæœï¼Œè€Œä¸” VSCode æ‡‰è©²åœ¨å„ä½å·¥ç¨‹å¸«çš„é›»è…¦è£¡éƒ½æ‡‰è©²æœ‰å®‰è£æ‰å°ã€‚\n\n### HackMD\n\nHackMD æ˜¯ä¸€å€‹åœ¨ç¶²é ä¸­çš„ Markdown ç·¨è¼¯å™¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ç¶²é ä¸­ç·¨è¼¯å’Œçœ‹åˆ°ç·¨å¯«çš„çµæœï¼ŒHackMD æœ€å²å®³çš„åŠŸèƒ½æ˜¯å¯ä»¥å°‡ Markdown è½‰æ›æˆç°¡å ±ï¼Œç”¨ Markdown å–ä»£ PowerPointï¼Ÿé€™å¤ å¸¥å§ï¼\n\n### MarkText\n\né€™æ˜¯ä¸€å€‹åœ¨ [Github](https://github.com/marktext/marktext) ä¸Šçš„é–‹æºå°ˆæ¡ˆï¼Œå¯ä»¥æ‰€å¯«æ‰€å¾—ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œä½†æˆ‘é‚„æ˜¯æ¯”è¼ƒæ¨è–¦æ–°æ‰‹ä½¿ç”¨ä¸Šé¢å…©é …å·¥å…·ï¼Œå› ç‚ºé€™æ±è¥¿çœŸçš„å¤ªæ–¹ä¾¿äº†ï¼Œæœ‰é»æ²’æœ‰åœ¨å¯« Markdown çš„æ„Ÿè¦ºã€‚\n\n### Microsoft Word\n\næ¨è–¦æŒ‡æ•¸ï¼šâ­â­â­â­â­\n\n- [[YouTube] Why Microsoft Word is the best IDE for programming](https://www.youtube.com/watch?v=X34ZmkeZDos)\n\n## Markdown èªæ³•\n\n<!-- markdownlint-disable MD025 -->\n\n# å¤§æ¨™é¡Œ\n\n<!-- markdownlint-enable MD025 -->\n\n```md\n<h1>\n\n# å¤§æ¨™é¡Œ\n```\n\n---\n\n## æ¬¡æ¨™é¡Œ\n\n```md\n<h2>\n\n## æ¬¡æ¨™é¡Œ\n```\n\n---\n\n### æ¬¡æ¬¡æ¨™é¡Œ\n\n```md\n<h3>\n\n### æ¬¡æ¬¡æ¨™é¡Œ\n```\n\n---\n\n## å…§æ–‡\n\nå…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡\n\n```md\n<p>\n\nå…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡\n```\n\n---\n\n## æ–œé«” ç²—é«”\n\nå…§æ–‡å…§æ–‡å…§æ–‡*æ–œé«”*å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡  \nå…§æ–‡å…§æ–‡å…§æ–‡**ç²—é«”**å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡\n\n```md\nå…§æ–‡å…§æ–‡å…§æ–‡*æ–œé«”*å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡  \nå…§æ–‡å…§æ–‡å…§æ–‡**ç²—é«”**å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡\n```\n\n---\n\n## æœ‰åºæ¸…å–®\n\n1. æœ‰åºæ¸…å–® 1\n2. æœ‰åºæ¸…å–® 2\n3. æœ‰åºæ¸…å–® 3\n\n```md\n<ol>\n\n1. æœ‰åºæ¸…å–® 1\n2. æœ‰åºæ¸…å–® 2\n3. æœ‰åºæ¸…å–® 3\n```\n\n---\n\n## ç„¡åºæ¸…å–®\n\n- ç„¡åºæ¸…å–® 1\n- ç„¡åºæ¸…å–® 2\n- ç„¡åºæ¸…å–® 3\n\n```md\n<ul>\n\n- ç„¡åºæ¸…å–® 1\n- ç„¡åºæ¸…å–® 2\n- ç„¡åºæ¸…å–® 3\n\n* ç„¡åºæ¸…å–® 1\n* ç„¡åºæ¸…å–® 2\n* ç„¡åºæ¸…å–® 3\n\n- ç„¡åºæ¸…å–® 1\n- ç„¡åºæ¸…å–® 2\n- ç„¡åºæ¸…å–® 3\n```\n\n---\n\n## ç¨‹å¼ç¢¼å€å¡Š\n\n```c\nprintf(\"Hi ç¨‹å¼ç¢¼å€å¡Š\");\n```\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717220425.png)\n\n---\n\n## æ¨™è¨˜ç¨‹å¼ç¢¼\n\ninline `code`\n\n```md\ninline `code`\n```\n\n---\n\n## è¶…é€£çµ\n\n[Google é¦–é ](https://google.com)\n\n```md\n[Google é¦–é ](https://google.com)\n```\n\n---\n\n## åœ–ç‰‡é€£çµ\n\n![img](https://www.google.com.tw/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png)\n\n```md\n![](https://www.google.com.tw/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png)\n```\n\n## Reference\n\n- [Markdown æ–‡ä»¶](https://markdown.tw/)\n","tags":["markdown"]},{"id":25,"date":1624196913000,"url":"/posts/linux/frp","title":"Frp","summary":"\nfrp å…¨åæ˜¯ fast reverse proxyï¼Œå¯ä»¥å°‡åœ¨ NAT å¾Œæ–¹çš„æœå‹™å¿«é€Ÿçš„ç™¼å¸ƒåˆ°å…¬ç¶² ip ä¸Šï¼Œå¯ä»¥æ”¯æ´ TCP å’Œ UDP å”è­°ï¼Œæˆ‘è¦ºå¾—å”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ‰€æœ‰æµé‡éƒ½æœƒç¶“é Server ç«¯ï¼Œæ‰€ä»¥å¦‚æœ Server ç«¯çš„æµé‡æœ‰é™åˆ¶å°±éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚\n\n","content":" frp å…¨åæ˜¯ fast reverse proxyï¼Œå¯ä»¥å°‡åœ¨ NAT å¾Œæ–¹çš„æœå‹™å¿«é€Ÿçš„ç™¼å¸ƒåˆ°å…¬ç¶² ip ä¸Šï¼Œå¯ä»¥æ”¯æ´ TCP å’Œ UDP å”è­°ï¼Œæˆ‘è¦ºå¾—å”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ‰€æœ‰æµé‡éƒ½æœƒç¶“é Server ç«¯ï¼Œæ‰€ä»¥å¦‚æœ Server ç«¯çš„æµé‡æœ‰é™åˆ¶å°±éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚\n\n<!--more-->\n\nfrp æœƒéœ€è¦ä¸€å° Serverï¼ŒServer éœ€è¦å…¬ç¶² ipï¼Œå¦‚æœæ²’æœ‰å…¬ç¶² ipï¼Œå¯ä»¥ä½¿ç”¨ aws æˆ– gcp è²·ä¸€å€‹ç°¡å–®çš„ VPSã€‚\n\n## å®‰è£\n\nç¶²è·¯ä¸Šæœ‰è¨±å¤šä¸€éµå®‰è£çš„åˆ°è…³æœ¬ï¼Œä½†æˆ‘å€‘ä¸ä½¿ç”¨é‚£äº›ï¼Œæœ‰èˆˆè¶£çš„è‡ªå·±ä¸Šç¶²æœå°‹ã€‚\n\nåˆ°å®˜æ–¹ [Release](https://github.com/fatedier/frp/releases) ä¸‹è¼‰æœ€æ–°ç‰ˆï¼Œæ ¹æ“šç³»çµ±é¸æ“‡ï¼Œè§£å£“å¾Œæœƒçœ‹åˆ° `frps` ã€`frpc` å„æœ‰ä¸‰å€‹æª”æ¡ˆï¼Œè·Ÿ `frps` æœ‰é—œçš„å°±æ˜¯ Server ç«¯ç”¨çš„ï¼Œ`frpc` çš„å°±æ˜¯ Client ç«¯ç”¨çš„ã€‚å¦‚æœæ˜¯ Server ç«¯ï¼Œå°±å¯ä»¥å°‡ `frpc` çš„æª”æ¡ˆéƒ½åˆªé™¤ã€‚\n\n## Server ç«¯è¨­å®š\n\nåœ¨ Server ä¸Šæ‰“é–‹è¨­å®šæ–‡ä»¶ `frps.ini` å¯ä»¥çœ‹åˆ°é è¨­å°±æœ‰å¦‚ä¸‹çš„å…§å®¹ï¼š\n\n```ini\n[common]\nbind_port = 7000\n```\n\n`common` å…§ç¶å®šäº† 7000 portï¼Œé€™å€‹ port æ˜¯è®“ client ç«¯é€£æ¥ç”¨çš„ï¼ŒåŸºæœ¬ç¾åœ¨ä¸ç”¨æ”¹è¨­å®šå°±å¯ä»¥ç›´æ¥ç”¨ã€‚åŸ·è¡Œ `frps` è¦ç”¨ `-c` åƒæ•¸çµ¦å®šè¨­å®šæª”æ¡ˆï¼š\n\n```shell\n./frps -c ./frps.ini\n```\n\nå¦‚æœæ²’çœ‹åˆ°å•é¡Œï¼ŒåŸºæœ¬ä¸Š Server ç«¯å°±è¨­å®šå¥½äº†ï¼Œå…¶ä»–åŠŸèƒ½æ™šé»å†ä»‹ç´¹ï¼Œæˆ‘å€‘å…ˆè¨­å®šå¥½ Clientã€‚\n\n## Client ç«¯è¨­å®š\n\nClient å°±æ˜¯è¦ç™¼å¸ƒæœå‹™ä¼ºæœå™¨ï¼Œæ‰€ä»¥é›–ç„¶å«åš Client ä½†æœ¬èº«æ‡‰è©²ä¹Ÿæ˜¯ä¸€å°æä¾›æœå‹™çš„ Serverã€‚Client å°±å¯ä»¥åˆªé™¤æœ‰é—œ `frps` ç›¸é—œçš„æª”æ¡ˆã€‚\n\nä¸€æ¨£å…ˆæ‰“é–‹è¨­å®šæª” `frpc.ini`ï¼Œä¹Ÿæœƒæœ‰å¦‚ä¸‹é è¨­å…§å®¹ï¼š\n\n```ini\n[common]\nserver_addr = 127.0.0.1\nserver_port = 7000\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n```\n\nClient ç«¯çš„è¨­å®šæª”å°±ä¸èƒ½ç›´æ¥ç”¨ï¼Œéœ€è¦ä¿®æ”¹ Server ip æ‰è¡Œï¼Œæ›´æ”¹ `server_addr` ç‚ºå‰›å‰› Server ç«¯çš„ ip åœ°å€æˆ–æ˜¯ Domain éƒ½å¯ä»¥ã€‚\n\nä¸‹æ–¹æ–¹çš„ ssh å€å¡Šè¨­ä¸€å€‹å°‡ Client ç«¯çš„ ssh 22 port å…¬é–‹åˆ° Server ç«¯çš„ 6000 port çš„ç¯„æœ¬ï¼Œå¦‚æœæœ‰å…¶ä»–çš„ port è¦é–‹æ”¾ï¼Œç”¨ç›¸åŒçš„æ€ç¶­æ›´æ”¹å³å¯ã€‚åƒæ˜¯å¦‚éè¦åŠ  Minecraft 25565 port ä¹Ÿåˆ° Server ç«¯çš„ 25565 portï¼Œå°±å¯ä»¥æ–°å¢ä¸€å€‹å€å¡Šï¼š\n\n```ini\n[common]\nserver_addr = example.com\nserver_port = 7000\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n\n[minecraft]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 25565\nremote_port = 25565\n```\n\nåˆ°ç›®å‰ç‚ºæ­¢æ‡‰è©²å°±å¯ä»¥ç”¨ Server ç«¯çš„ ip é€£æ¥åˆ° Client ç«¯äº†ï¼Œå¦‚æœé€£ä¸ä¸Šï¼Œå¯èƒ½è¦æª¢æŸ¥ä¸€ä¸‹ Server ç«¯é˜²ç«ç‰†çš„è¨­å®šï¼Œé€™é‚Šå°±ä¸è´…è¿°ã€‚\n\n## Token èªè­‰\n\nä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰ç™¼ç¾ï¼ŒåŸºæœ¬ä¸Šåªè¦çŸ¥é“ä½  Server ip æˆ– domain çš„äººéƒ½å¯ä»¥æ–°å¢è‡ªå·±çš„ portï¼Œè¦é¿å…é€™æ¨£çš„ç‹€æ³ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ tokenã€‚ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç°¡å–®ï¼Œåªè¦åœ¨ Server å’Œ Client ç«¯çš„ `[common]` éƒ½åŠ ä¸Šç›¸åŒçš„ token åƒæ•¸ï¼Œå°±å¯ä»¥é€²è¡Œç°¡å–®çš„èªè­‰ã€‚\n\nServer ç«¯ç¯„ä¾‹ï¼š\n\n```ini\n[common]\nbind_port = 7000\ntoken = 7Jc2ZCvVzHu\n```\n\nClient ç«¯ç¯„ä¾‹ï¼š\n\n```ini\n[common]\nserver_addr = example.com\nserver_port = 7000\ntoken = 7Jc2ZCvVzHu\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n```\n\n## Refrence\n\n[GitHub](https://github.com/fatedier/frp)\n\n[ä¸­æ–‡æ–‡æª”](https://gofrp.org/docs/)\n","tags":["frp","linux"]},{"id":26,"date":1623782156000,"url":"/posts/kotlin/medium-api","title":"ç™¼å¸ƒ Markdown è‡³ Medium","summary":"\næˆ‘èªç‚ºç”¨ Markdown ç”¨ä¾†å¯«æŠ€è¡“æ–‡ç« é‚„æ˜¯æœ€é †æ‰‹çš„ï¼Œä½†æ˜¯ Medium çš„ç·¨è¼¯å™¨å»ä¸æ”¯æ´ Markdownã€‚å‰å¹¾å¤©ç”¨ import çš„æ–¹å¼ä¹Ÿå¤±æ•—ï¼Œå¦å°‹ä»–è™•å¾Œç™¼ç¾ Medium æ”¯æ´ç”¨ API ç™¼å¸ƒæ–‡ç« ï¼Œæ›´é‚„æ”¯æ´ç”¨ Markdown å’Œ Html ç™¼å¸ƒã€‚é›–ç„¶ä¸æ‡‚å®˜æ–¹ç‚ºä½•ä¸ç›´æ¥è®“ç”¨æˆ¶ç”¨ Markdown ç™¼å¸ƒï¼Œè€Œæ˜¯è¦ç”¨ APIï¼Œä½†æ˜¯ç«Ÿç„¶æ‰¾åˆ°äº†ä¸€çµ²å¸Œæœ›ï¼Œå°±ä¾†è©¦è©¦çœ‹ç”¨ API çš„æ–¹å¼ç™¼å¸ƒæ–‡ç« ã€‚\n\n","content":" æˆ‘èªç‚ºç”¨ Markdown ç”¨ä¾†å¯«æŠ€è¡“æ–‡ç« é‚„æ˜¯æœ€é †æ‰‹çš„ï¼Œä½†æ˜¯ Medium çš„ç·¨è¼¯å™¨å»ä¸æ”¯æ´ Markdownã€‚å‰å¹¾å¤©ç”¨ import çš„æ–¹å¼ä¹Ÿå¤±æ•—ï¼Œå¦å°‹ä»–è™•å¾Œç™¼ç¾ Medium æ”¯æ´ç”¨ API ç™¼å¸ƒæ–‡ç« ï¼Œæ›´é‚„æ”¯æ´ç”¨ Markdown å’Œ Html ç™¼å¸ƒã€‚é›–ç„¶ä¸æ‡‚å®˜æ–¹ç‚ºä½•ä¸ç›´æ¥è®“ç”¨æˆ¶ç”¨ Markdown ç™¼å¸ƒï¼Œè€Œæ˜¯è¦ç”¨ APIï¼Œä½†æ˜¯ç«Ÿç„¶æ‰¾åˆ°äº†ä¸€çµ²å¸Œæœ›ï¼Œå°±ä¾†è©¦è©¦çœ‹ç”¨ API çš„æ–¹å¼ç™¼å¸ƒæ–‡ç« ã€‚\n\n<!--more-->\n\næœ¬ç¯‡ä½¿ç”¨ Kotlin å’Œ OKHttpï¼Œä¾†å˜—è©¦æ’°å¯«ä¸€å€‹æ‡‰ç”¨ç¨‹å¼ï¼Œä¾†å”åŠ©ç™¼å¸ƒ Markdwon è‡³ Mediumï¼Œå°ˆæ¡ˆåŸå§‹ç¢¼åœ¨ [Github](https://github.com/TonyPepeBear/MediumMarkdownUploader) ä¸Šã€‚\n\n![æˆªåœ– 2021-02-10 ä¸‹åˆ9.47.40.png](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/2021/02/10-21-47-48-%E6%88%AA%E5%9C%96%202021-02-10%20%E4%B8%8B%E5%8D%889.47.40.png)\n\n## ç”³è«‹ token\n\nMedium API çš„ [å®˜æ–¹æ–‡ä»¶](https://github.com/Medium/medium-api-docs) åœ¨é€™ï¼Œå¯ä»¥ç”¨ `HTTP POST` çš„æ–¹å¼ä¾†ç™¼å¸ƒæ–‡ç« ã€‚è¦ä½¿ç”¨ API ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¦æœ‰ `token`ï¼Œè¦ç”³è«‹ `token` ä¸ç”¨éŒ¢ï¼Œå®˜æ–¹ç›®å‰å¥½åƒä¹Ÿæ²’æœ‰ä½¿ç”¨é™åˆ¶ï¼Œåˆ° [ç”¨æˆ¶è¨­å®š](https://medium.com/me/settings) çš„é é¢ï¼Œæ‰¾åˆ° `Integration tokens` çš„åœ°æ–¹ï¼Œç”³è«‹ä¸€å€‹ tokenï¼Œèªªæ˜éš¨ä¾¿è¼¸å…¥å°±å¥½ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/2021/02/10-01-42-07-%E6%88%AA%E5%9C%96%202021-02-10%20%E4%B8%8A%E5%8D%881.42.04.png)\n\n## UserID\n\næ ¹æ“šå®˜æ–¹æ–‡æª”ï¼Œæƒ³è¦ç™¼å¸ƒæ–‡ç« ï¼Œéœ€è¦ UserIDï¼Œæˆ‘æ‰¾äº†å¥½ä¹…æ‰ç™¼ç¾ UserID ä¸æ˜¯ Name ä¹Ÿä¸æ˜¯ UserNameï¼Œä¹Ÿæ˜¯è¦å…ˆç”¨ API çš„æ–¹å¼å–å¾—ã€‚\n\nç”¨ Http GET çš„æ–¹å¼å¯ä»¥å–å¾— token ä¸»äººè³‡æ–™ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š\n\n```http\nGET https://api.medium.com/v1/me\n```\n\n```http\nGET /v1/me HTTP/1.1\nHost: api.medium.com\nAuthorization: Bearer 181d415f34379af07b2c11d144dfbe35d\nContent-Type: application/json\nAccept: application/json\nAccept-Charset: utf-8\n```\n\n`token` æ˜¯æ”¾åœ¨ Post çš„ headerï¼Œçš„ `Authorization:Bearer` å¾Œæ–¹ï¼Œä¸‹æ–¹æ˜¯ç”¨ Kotlin å’Œ OKHttp å¯¦ä½œçš„æ–¹æ³•ï¼š\n\n```kotlin\nval request = Request.Builder()\n    .url(\"https://api.medium.com/v1/me\")\n    .get()\n    .addHeader(\"Authorization\", \"Bearer $token\")\n    .build()\nval response = client.newCall(request).execute()\n```\n\nç¯„ä¾‹çš„ Response å¦‚ä¸‹ï¼Œå¯ä»¥æ‹¿åˆ°ç”¨ UserIDã€UserName ç­‰è³‡æ–™ï¼š\n\n```json\n{\n  \"data\": {\n    \"id\": \"5303d74c64f66366f00cb9b2a94f3251bf5\",\n    \"username\": \"majelbstoat\",\n    \"name\": \"Jamie Talbot\",\n    \"url\": \"https://medium.com/@majelbstoat\",\n    \"imageUrl\": \"https://images.medium.com/0*fkfQiTzT7TlUGGyI.png\"\n  }\n}\n```\n\næ ¹æ“šä¸Šæ–¹çš„ Jsonï¼Œå¯ä»¥ç”¢ç”Ÿ `Kotlin Data Class` ä¾†æ”¾å–å›çš„è³‡æ–™ï¼š\n\n```kotlin\ndata class MediumApiMe(\n    val `data`: MediumMeData\n)\n\ndata class MediumMeData(\n    val id: String,\n    val imageUrl: String,\n    val name: String,\n    val url: String,\n    val username: String\n)\n```\n\nå–å›çš„ Response ç”¨ `gson` è½‰æ› json åˆ° Data Classï¼Œæœ€å¾Œå¯«æˆä¸€å€‹å®Œæ•´çš„æ–¹æ³•å¦‚ä¸‹ï¼š\n\n```kotlin\nfun getUserData(token: String): MediumApiMe {\n    val request = Request.Builder()\n        .url(\"https://api.medium.com/v1/me\")\n        .get()\n        .addHeader(\"Authorization\", \"Bearer $token\")\n        .build()\n    val response = client.newCall(request).execute()\n    if (response.code != 200 || response.body == null)\n        throw RuntimeException(\n            \"Can not get User info. Maybe token is wrong.\" +\n            {response.body?.byteStream()?.reader()?.readLines()}\n        )\n\n    val text = response.body!!.byteStream()\n        .reader()\n        .readText()\n    return gson.fromJson(text, MediumApiMe::class.java)\n}\n```\n\nä¸Šæ–¹çš„ç¨‹å¼ç¢¼æœ‰åˆ¤æ–· Response Code æ˜¯å¦ç‚º 200ï¼Œè‹¥ä¸æ˜¯ 200 ä»£è¡¨å–å¾—è³‡æ–™æ²’æœ‰æˆåŠŸï¼Œå°±æ‹‹å‡º Exceptionã€‚\n\n## Post æ–‡ç« \n\nå–å¾— UserID å¾Œå°±å¯ä»¥ç”¨ Http Post çš„æ–¹å¼å‘ Medium ç™¼å¸ƒæ–‡ç« ã€‚ä¸‹æ–¹çš„ authorId å°±æ˜¯å‰›å‰›ç”¨ Http Get çš„æ–¹å¼å–å¾—çš„ UserIDã€‚\n\n```http\nPOST https://api.medium.com/v1/users/{{authorId}}/posts\n```\n\nä¸‹é¢æ˜¯ Post çš„ç¯„ä¾‹ï¼Œ`token` ä¸€æ¨£æ˜¯æ”¾åœ¨ `header` è£¡ã€‚å®˜æ–¹çš„ç¯„ä¾‹æ˜¯ç”¨ html ä¾†ç™¼å¸ƒæ–‡ç« ï¼Œæˆ‘å€‘åªè¦å°‡ `contentFormat` æ”¹æˆ markdown å°±å¯ä»¥é”æˆç›®çš„ã€‚\n\n```http\nPOST /v1/users/5303d74c64f66366f00cb9b2a94f3251bf5/posts HTTP/1.1\nHost: api.medium.com\nAuthorization: Bearer 181d415f34379af07b2c11d144dfbe35d\nContent-Type: application/json\nAccept: application/json\nAccept-Charset: utf-8\n\n{\n  \"title\": \"Liverpool FC\",\n  \"contentFormat\": \"html\",\n  \"content\": \"<h1>Liverpool FC</h1><p>Youâ€™ll never walk alone.</p>\",\n  \"canonicalUrl\": \"http://jamietalbot.com/posts/liverpool-fc\",\n  \"tags\": [\"football\", \"sport\", \"Liverpool\"],\n  \"publishStatus\": \"public\"\n}\n```\n\næ ¹æ“šä¸Šé¢ Post çš„ Json ç¯„ä¾‹ï¼Œæˆ‘å€‘å¯ä»¥ç”¢ç”Ÿå‡ºå¦‚ä¸‹çš„ Kotlin Data Classï¼Œæˆ‘é †ä¾¿å¯«äº†ä¸€å€‹å¿«é€Ÿè½‰æˆ Json çš„æ–¹æ³•ï¼š\n\n```kotlin\ndata class MediumApiPost(\n    val title: String,\n    val content: String,\n    val contentFormat: String,\n    val tags: List<String> = listOf(),\n    val publishStatus: String = \"draft\", //é è¨­æ˜¯è‰ç¨¿\n    val canonicalUrl: String = \"\",\n) {\n    fun toJson(): String {\n        return gson.toJson(this)\n    }\n}\n```\n\nç”¢ç”Ÿå‡º Data Class å°±å¯ä»¥å˜—è©¦ Post çœ‹çœ‹ï¼Œæ˜¯å¦æœƒç™¼å¸ƒæ–‡ç« ï¼Œç›´æ¥åˆ©ç”¨å‰›å‰›å¯«å¥½çš„ `getUserData` æ‹¿åˆ° UserIDï¼Œä¹‹å¾Œåœ¨ Postï¼š\n\n```kotlin\nval userID = getUserData(token).data.id\nval medimuApiPost =\n    MdieumApiPost(\"Title\", \"# Title\\nHi\", \"markdown\")\nval request = Request.Builder()\n    .url(\"https://api.medium.com/v1/users/$userID/posts\")\n    .post(mediumApiPost.toJson().toRequestBody(contentType = \"application/json\".toMediaType()))\n    .addHeader(\"Authorization\", \"Bearer $token\")\n    .build()\nval response = client.newCall(request).execute()\n```\n\nå¦‚æœç™¼å¸ƒæˆåŠŸï¼Œå¯ä»¥æ‹¿åˆ° Response Code 201ï¼Œå…¶ä»–çš„éƒ½ä»£è¡¨ç™¼å¸ƒå¤±æ•—ã€‚\n\nå¯«æˆå®Œæ•´çš„ç™¼å¸ƒæ–¹æ³•å¦‚ä¸‹ï¼š\n\n```kotlin\nfun newPost(token: String, mediumApiPost: MediumApiPost): String {\n    val userID = getUserData(token).data.id\n\n    val request = Request.Builder()\n        .url(\"https://api.medium.com/v1/users/$userID/posts\")\n        .post(mediumApiPost.toJson().toRequestBody(contentType = \"application/json\".toMediaType()))\n        .addHeader(\"Authorization\", \"Bearer $token\")\n        .build()\n    val response = client.newCall(request).execute()\n\n    if (response.code != 201 || response.body == null)\n        throw RuntimeException(\"Something Wrong. ${response.body?.byteStream()?.reader()?.readText()}\")\n\n    val text = response.body!!.byteStream().reader().readText()\n    println(text)\n\n    var json = gson.fromJson(text, MediumNewPostResponse::class.java)\n\n    return json.data.url\n}\n```\n\nä¸Šé¢çš„æ–¹æ³•æœƒç›´æ¥å›å‚³ç™¼å¸ƒæˆåŠŸçš„ URLï¼Œå¤±æ•—å‰‡æœƒç›´æ¥æ‹‹å‡º Exceptionã€‚\n\n## GUI\n\nå¯«å¥½æ–¹æ³•å¾Œï¼Œæœ€å¾Œå†ç”¨ `TornadoFX` å¯« GUIï¼Œé€™é‚Šå°±ä¸è¬›è¿° GUI çš„éƒ¨åˆ†ï¼Œæœ‰èˆˆè¶£å¯ä»¥è‡ªå·±åˆ° GitHub ä¸Šçœ‹å°ˆæ¡ˆçš„åŸå§‹ç¢¼ã€‚\n\n## ç¨‹å¼ç¢¼å€å¡Š\n\nå› ç‚º Medium ç›®å‰ä¸¦ä¸æ”¯æ´ç¨‹å¼ç¢¼é«˜äº®ï¼Œå‚³ä¸Šå»çš„ç¨‹å¼ç¢¼å€å¡Šéƒ½æœƒè®Šæˆé»‘åº•çš„ï¼Œç›®å‰æˆ‘æœ‰æƒ³åˆ°çš„è§£æ³•æ˜¯åœ¨ Post ä¸Šå»ä¹‹å‰ï¼Œå°±å…ˆå°‡ç¨‹å¼ç¢¼å€å¡Šéƒ½æ›æˆ GitHub Gistï¼Œä½†é€™å°±éœ€è¦æ›´è¤‡é›œçš„æ–¹å¼è§£æ±ºå•é¡Œäº†ï¼Œæœ‰èˆˆè¶£çš„äººå¯ä»¥è‡ªå·±è©¦è©¦çœ‹ã€‚\n\n## Reference\n\n[Mediumâ€™s API Documentation](https://github.com/Medium/medium-api-docs)\n","tags":["medium","markdown","kotlin","tornadofx"]},{"id":27,"date":1623084919000,"url":"/posts/vscode/vscode-clang","title":"ç”¨ VSCode å¯« C/C++","summary":"\nå…¶å¯¦åœ¨ VSCode å¯« C æ ¹æœ¬ä¸æ˜¯ä¸€ä»¶é›£äº‹ï¼ŒVSCode æœ¬ä¾†å°±æ˜¯ä¸€å€‹å„ªç§€çš„æ–‡å­—ç·¨è¼¯å™¨ï¼Œæ‰€ä»¥è¦è¦å¯« C å®Œå…¨ä¸æ˜¯å•é¡Œï¼Œä½†å•é¡Œæ˜¯å‡ºåœ¨åŸ·è¡Œæˆ– Debug å¯«å¥½çš„ Code å¯¦åœ¨æ˜¯å¾ˆéº»ç…©ï¼Œè¦å…ˆç¶“éä¸å°‘è¨­å®šã€‚è€Œä¸”åœ¨å®˜æ–¹çš„æ–‡ä»¶ä¸­ï¼Œå…¶å¯¦æ˜¯æ•™ä½ æ€éº¼å»ºç½®å°ˆæ¡ˆï¼ŒåŸ·è¡Œ Debugï¼Œå¦‚æœåªæ˜¯å¯«ä¸€é»ç°¡å–®çš„å°ç¨‹å¼æ ¹æœ¬ç”¨ä¸åˆ°é‚£éº¼è¤‡é›œçš„è¨­å®šï¼Œæ‰€ä»¥æœ¬æ–‡æ˜¯æˆ‘ç›®å‰ç™¼ç¾æ¯”è¼ƒå®¹æ˜“åœ¨ VSCode ä¸­åŸ·è¡Œ C å’Œ C++ çš„æ–¹æ³•ã€‚\n\n","content":" å…¶å¯¦åœ¨ VSCode å¯« C æ ¹æœ¬ä¸æ˜¯ä¸€ä»¶é›£äº‹ï¼ŒVSCode æœ¬ä¾†å°±æ˜¯ä¸€å€‹å„ªç§€çš„æ–‡å­—ç·¨è¼¯å™¨ï¼Œæ‰€ä»¥è¦è¦å¯« C å®Œå…¨ä¸æ˜¯å•é¡Œï¼Œä½†å•é¡Œæ˜¯å‡ºåœ¨åŸ·è¡Œæˆ– Debug å¯«å¥½çš„ Code å¯¦åœ¨æ˜¯å¾ˆéº»ç…©ï¼Œè¦å…ˆç¶“éä¸å°‘è¨­å®šã€‚è€Œä¸”åœ¨å®˜æ–¹çš„æ–‡ä»¶ä¸­ï¼Œå…¶å¯¦æ˜¯æ•™ä½ æ€éº¼å»ºç½®å°ˆæ¡ˆï¼ŒåŸ·è¡Œ Debugï¼Œå¦‚æœåªæ˜¯å¯«ä¸€é»ç°¡å–®çš„å°ç¨‹å¼æ ¹æœ¬ç”¨ä¸åˆ°é‚£éº¼è¤‡é›œçš„è¨­å®šï¼Œæ‰€ä»¥æœ¬æ–‡æ˜¯æˆ‘ç›®å‰ç™¼ç¾æ¯”è¼ƒå®¹æ˜“åœ¨ VSCode ä¸­åŸ·è¡Œ C å’Œ C++ çš„æ–¹æ³•ã€‚\n\n<!--more-->\n\n## gcc g++\n\nåœ¨äº†è§£å¦‚ä½•è¨­å®š vscode å‰ï¼Œæˆ‘å€‘å…ˆä¾†äº†è§£ä¸€ä¸‹åŸºæœ¬çš„ gccã€g++ æŒ‡ä»¤ï¼Œé€™æ˜¯ä¸€å€‹ç”¨ä¾†ç·¨è­¯ C ç¨‹å¼ç¢¼æœ€å¿«çš„æ–¹æ³•ï¼Œgcc å°±æ˜¯ C çš„ç·¨è­¯å™¨ï¼Œg++ å‰‡æ˜¯ C++ çš„ã€‚é€™è£¡ä¸æœƒè§£èªªå¦‚ä½•å®‰è£ï¼Œåœ¨ Windows ä¸‹å¯ä»¥ä½¿ç”¨ MinGW (å¦‚æœè¦åœ¨ Windows å®‰è£ MinGWï¼Œç”¨ Chocolatey å®‰è£æ˜¯æœ€å¿«çš„æ–¹å¼)ï¼ŒmacOS å‰‡æ˜¯åªè¦åœ¨ Terminal ä¸‹ gcc æŒ‡ä»¤ï¼Œå°±æœƒè‡ªå‹•å•ä½ è¦ä¸è¦å®‰è£ã€‚\n\nä¸‹é¢çš„ç¯„ä¾‹æœƒç·¨è­¯ `main.cpp` çš„ C++ æª”æ¡ˆï¼š\n\n```bash\ng++ main.cpp\n```\n\nåŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å¾Œï¼Œæœƒç”¢ç”Ÿåç‚º `a.out` çš„æª”æ¡ˆï¼Œå› ç‚ºæˆ‘å€‘æ²’æœ‰æŒ‡å®šè¼¸å‡ºæª”åï¼Œæ‰€ä»¥é è¨­å°±æ˜¯ `a.out`ï¼Œåœ¨ Windows ä¸Šå‰‡ç‚º `a.exe` çš„åŸ·è¡Œæª”ã€‚å¦‚æœè¦åŸ·è¡Œç”¢ç”Ÿçš„åŸ·è¡Œæª”æ¡ˆï¼š\n\n```bash\n./a.out\n./a.exe # On Windows\n```\n\nè¦æŒ‡å®šè¼¸å‡ºæª”åä¹Ÿå¾ˆç°¡å–®ï¼ŒåŠ å€‹ `-o`ï¼š\n\n```bash\ng++ -o main.out main.cpp\n```\n\né€™æ¨£å°±å¯ä»¥å°‡ `main.cpp` ç·¨è­¯æˆ `main.out` çš„åŸ·è¡Œæª”ã€‚\n\nä¸Šé¢é€™äº›ä¸æœƒä¹Ÿæ²’é—œä¿‚ï¼Œä½†æˆ‘é‚„æ˜¯å»ºè­°äº†è§£ä¸€ä¸‹ï¼Œå› ç‚ºç­‰ä¸€ä¸‹è¦å®‰è£çš„æ¨¡çµ„ï¼Œåªæ˜¯å¹«ä½ å®Œæˆé€™äº›æ­¥é©Ÿï¼Œå¦‚æœå®Œå…¨ä¸äº†è§£æŒ‡ä»¤çš„åŠŸèƒ½ï¼Œç™¼ç”Ÿå•é¡Œå¯èƒ½è‡ªå·±æœƒæ²’è¾¦æ³•è§£æ±ºã€‚\n\n## è¨­å®š VSCode\n\nç¬¬ä¸€æ­¥å°±æ˜¯å…ˆåœ¨ VSCode ä¸­å®‰è£ **C/C++**ï¼Œå’Œ **Code Runner**ï¼Œå…©å€‹å»¶ä¼¸æ¨¡çµ„ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608014749.png)\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608021309.png)\n\nå®‰è£å®Œæˆå¾Œï¼Œæ‡‰è©²å°±æœƒçœ‹åˆ°å³ä¸Šè§’å‡ºç¾äº†ä¸€å€‹åŸ·è¡Œçš„æŒ‰éˆ•ï¼Œå¯ä»¥æŒ‰æŒ‰çœ‹ç¨‹å¼æœƒä¸æœƒåŸ·è¡Œã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608021808.png)\n\nå¦‚æœæ‰¾ä¸åˆ°æŒ‰éˆ•ï¼Œæˆ–æ˜¯æƒ³è¦åœä¸‹ç¨‹å¼ï¼Œä¹Ÿå¯ä»¥ç”¨æŒ‰ä¸‹ `f1` çš„æ–¹å¼å«å‡º VSCode çš„æŒ‡ä»¤è¼¸å…¥çª—ï¼Œè¼¸å…¥ `Run Code` æˆ–æ˜¯ `Stop Code Run`ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608022037.png)\n\n## Run In Terminal\n\nç¾åœ¨å¯èƒ½æœƒç™¼å…ˆä¸€å€‹å•é¡Œï¼Œé€™ç¨®åŸ·è¡Œæ¨¡å¼æ˜¯æ²’æœ‰è¾¦æ³•æ¥æ”¶éµç›¤è¼¸å…¥çš„ï¼Œå¦‚æœæƒ³è¦æ¥æ”¶éµç›¤è¼¸å…¥ï¼Œæˆ‘å€‘è¦æŠŠåŸ·è¡Œæ¨¡å¼æ”¹æˆåœ¨ Terminal ä¸­ã€‚æ‰€ä»¥æˆ‘å€‘è¦é–‹å•Ÿ VSCode çš„ `settings.json` è¨­å®šæª”ï¼Œä¾†æ›´æ”¹è¨­å®šï¼Œä¸€æ¨£æ˜¯ç”¨ `f1` å«å‡ºå‘½ä»¤è¼¸å…¥å€ï¼Œä¸¦å°‹æ‰¾ `open settings json`ï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608024052.png)\n\næ‰“é–‹å¾Œåœ¨è£¡é¢æ–°å¢ä¸€è¡Œï¼š\n\n```json\n\"code-runner.runInTerminal\": true\n```\n\nå¦‚æœå‰æ–¹æœ‰å…¶ä»–è¨­å®šå€¼ï¼Œè¨˜å¾—åœ¨å‰é¢çš„è¨­å®šå€¼çš„æœ€å¾Œé¢åŠ å€‹é€—è™Ÿ `,`ï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608024259.png)\n\nç¾åœ¨å°±å¯ä»¥æ–¹ä¾¿çš„åœ¨ VSCode ä¸­å¯« Cï¼Œå’Œæ–¹ä¾¿çš„åŸ·è¡Œä»–å€‘ã€‚\n","tags":["vscode","code","c","c++"]},{"id":28,"date":1623074453000,"url":"/posts/hugo/hugo-github-actions","title":"ç”¨ Github Actions ä¾†ç™¼å¸ƒ Hugo éœæ…‹ç¶²é ","summary":"\nGithub Actions æ˜¯ Github å®˜æ–¹æä¾›çš„ CI/CD æœå‹™ï¼Œç·¨å¯«ç°¡å–®çš„è…³æœ¬ï¼Œå°±å¯ä»¥åœ¨æ¯æ¬¡ Pushã€ PR æ™‚ï¼Œè‡ªå‹•çš„æª¢æŸ¥ç¨‹å¼ç¢¼å¯ä¸å¯ä»¥é€šé Testï¼Œæˆ–æ˜¯ç›´æ¥ç”¢ç”Ÿ Release ä¾†äº¤ä»˜å°ˆæ¡ˆæˆå“ã€‚å¦å¤–ä¸€å€‹é‡é»æ˜¯ï¼Œé€™å€‹æœå‹™å®Œå…¨å…è²»ï¼Œè€Œåœ¨ç§æœ‰ Repoï¼Œå‰‡æ˜¯æœ‰é™åˆ¶å®¹å™¨çš„åŸ·è¡Œæ™‚é–“ã€‚æœ¬æ–‡ä½¿ç”¨ Github Actions ä¾†è‡ªå‹•å°‡ Hugo å°ˆæ¡ˆè‡ªå‹•ç”¢ç”Ÿéœæ…‹ç¶²é ï¼Œä¸¦ä¸”å°‡ç¶²é ç™¼å¸ƒåˆ° `gh-pages` çš„ git åˆ†æ”¯ã€‚\n\n","content":" Github Actions æ˜¯ Github å®˜æ–¹æä¾›çš„ CI/CD æœå‹™ï¼Œç·¨å¯«ç°¡å–®çš„è…³æœ¬ï¼Œå°±å¯ä»¥åœ¨æ¯æ¬¡ Pushã€ PR æ™‚ï¼Œè‡ªå‹•çš„æª¢æŸ¥ç¨‹å¼ç¢¼å¯ä¸å¯ä»¥é€šé Testï¼Œæˆ–æ˜¯ç›´æ¥ç”¢ç”Ÿ Release ä¾†äº¤ä»˜å°ˆæ¡ˆæˆå“ã€‚å¦å¤–ä¸€å€‹é‡é»æ˜¯ï¼Œé€™å€‹æœå‹™å®Œå…¨å…è²»ï¼Œè€Œåœ¨ç§æœ‰ Repoï¼Œå‰‡æ˜¯æœ‰é™åˆ¶å®¹å™¨çš„åŸ·è¡Œæ™‚é–“ã€‚æœ¬æ–‡ä½¿ç”¨ Github Actions ä¾†è‡ªå‹•å°‡ Hugo å°ˆæ¡ˆè‡ªå‹•ç”¢ç”Ÿéœæ…‹ç¶²é ï¼Œä¸¦ä¸”å°‡ç¶²é ç™¼å¸ƒåˆ° `gh-pages` çš„ git åˆ†æ”¯ã€‚\n\n<!--more-->\n\nGithub Actions ä¹Ÿæ˜¯å®¹å™¨åŒ–æŠ€è¡“çš„ä¸€ç’°ï¼Œä¹Ÿæ˜¯é¡ä¼¼ Docker å®¹å™¨çš„ä¸€ç¨®ï¼Œå¦‚æœå° Docker é‚„ä¸ç†Ÿæ‚‰ï¼Œæ‡‰è©²æœƒå°æœ¬æ–‡æœ‰é»åƒåŠ›ï¼Œä½†ä¹Ÿå¯ä»¥å°å®Œå…¨ä¸äº†è§£ Docker çš„äººï¼Œå¤šä¸€é»å°å®¹å™¨åŒ–æŠ€è¡“çš„èªè­˜ã€‚\n\n## ç·¨å¯« Workflows æª”æ¡ˆ\n\nWorkflows å·¥ä½œæµæª”æ¡ˆï¼Œå°±æ˜¯åœ¨ CI/CD ä¸­æœ€é‡è¦çš„æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆå¯«ä¸‹é€™å€‹å°ˆæ¡ˆçš„å·¥ä½œæµç¨‹ï¼Œåƒæ˜¯å¦‚ä½• Testã€äº¤ä»˜æˆå“ï¼Œéƒ½æ˜¯å¯«åœ¨é€™çš„æª”æ¡ˆè£¡ï¼ŒGithub æœƒè‡ªå‹•è®€å–æ‰€æœ‰å·¥ä½œç•™æª”æ¡ˆå’Œè‡ªå‹•åŸ·è¡Œï¼Œæ‰€ä»¥åªè¦å¯«å¥½ä¸€æ¬¡ï¼ŒåŸºæœ¬ä¸Šå°±ä¸€å‹æ°¸é€¸ï¼Œæ¯æ¬¡åªéœ€è¦ Pushï¼ŒGihtub å°±æœƒæŒ‰ç…§è…³æœ¬å®ŒæˆæŒ‡å®šçš„å·¥ä½œã€‚\n\nGithub Actions çš„ Worksflows æª”æ¡ˆéƒ½æ˜¯æ”¾åœ¨å°ˆæ¡ˆè·Ÿç›®éŒ„çš„ `/.github/workflows` é€™å€‹è³‡æ–™å¤¾ä¸­ï¼ŒGithub æœƒè®€å–é€™å€‹è³‡æ–™å¤¾ä¸­çš„ `*.yml` æª”æ¡ˆï¼Œä¸¦ä¸”è‡ªå‹•åŸ·è¡Œä»–å€‘ã€‚æˆ‘å€‘ç¾åœ¨åœ¨é€™å€‹ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹å«åš `hugo-public.yml` çš„æª”æ¡ˆï¼Œæª”åå¯ä»¥è‡ªè¨‚æ²’é—œä¿‚ï¼ŒGithub ä¸æœƒé—œå¿ƒæª”åé•·æ€æ¨£ï¼Œå¦‚æœæœ‰å¤šå€‹æª”æ¡ˆä¹Ÿæ¯å€‹éƒ½æœƒåˆ†åˆ¥åŸ·è¡Œã€‚\n\næˆ‘å€‘åœ¨ç¾åœ¨ `/.github/workflows/hugo-public.yml` çš„æª”æ¡ˆä¸­æ–°å¢å¦‚ä¸‹çš„è…³æœ¬ï¼š\n\n```yml\nname: github pages\n\non:\n  push:\n    branches:\n      - master # Set a branch to deploy\n  pull_request:\n\njobs:\n  deploy:\n    runs-on: ubuntu-20.04\n    steps:\n      - uses: actions/checkout@v2\n        with:\n          submodules: true # Fetch Hugo themes (true OR recursive)\n          fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod\n\n      - name: Setup Hugo\n        uses: peaceiris/actions-hugo@v2\n        with:\n          hugo-version: \"latest\"\n          extended: true\n\n      - name: Build\n        run: hugo --minify\n\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        if: github.ref == 'refs/heads/master'\n        with:\n          github_token: ${{ secrets.ACCESS_TOKEN }}\n          publish_dir: ./public\n```\n\nä¸‹é¢æˆ‘å€‘åˆ†æ®µä¾†è§£é‡‹ä¸Šé¢è…³æœ¬æ¯è¡Œçš„æ„æ€ã€‚\n\n## Name\n\nåŸºæœ¬ä¸Šå°±æ˜¯é€™å€‹è…³æœ¬çš„åç¨±ï¼Œå¯ä»¥éš¨æ„è‡ªè¨‚ä¸æœƒå½±éŸ¿çµæœã€‚\n\n## On\n\n```yml\non:\n  push:\n    branches:\n      - master # Set a branch to deploy\n  pull_request:\n```\n\n`on` å€æ®µå®šç¾©äº†é€™å€‹è…³æœ¬ä»€éº¼æ™‚å€™æœƒè¢«åŸ·è¡Œï¼Œæˆ‘å€‘ç¾åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œå®šç¾©äº†é€™å€‹è…³æœ¬æœƒåœ¨ `master` é€™å€‹åˆ†æ”¯è¢« push çš„æ™‚å€™è‡ªå‹•åŸ·è¡Œã€‚Github ç¾åœ¨é è¨­çš„åˆ†æ”¯åç¨±æ˜¯ `main`ï¼Œå¦‚æœæ˜¯ `main` çš„äººåƒè¬è¦è¨˜å¾—æ”¹ï¼Œä»¥å…é€™å€‹è…³æœ¬æ°¸é ä¸æœƒåŸ·è¡Œã€‚\n\n## Jobs\n\n```yml\njobs:\n  deploy:\n    # ä»¥ä¸‹çœç•¥\n```\n\njobs æ˜¯æ•´å€‹æª”æ¡ˆä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¯ä»¥åˆ†æˆè¨±å¤šä¸åŒçš„ Jobï¼Œç›®å‰æˆ‘å€‘åªæœ‰ä¸€å€‹å«åš `deploy` çš„ Jobï¼Œé€™å€‹åç¨±ä¹Ÿæ˜¯å¯ä»¥è‡ªè¨‚çš„ï¼Œé€™è£¡åªæ˜¯å–å« `deploy` çœ‹ä¸é †çœ¼å¯ä»¥è‡ªå·±æ›ã€‚å¦‚æœé‚„éœ€è¦æœ‰å…¶ä»–å·¥ä½œï¼Œå¯ä»¥è‡ªå·±è¦–æƒ…æ³å¢åŠ ã€‚\n\n### Job\n\nçµ‚æ–¼ä¾†åˆ°æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œdeploy ä»»å‹™ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå°±å®šç¾©äº†é€™å€‹ä»»å‹™è¦ Run åœ¨å“ªå€‹å®¹å™¨å…§ï¼Œæˆ–æ˜¯ç¨±ä½œå“ªå€‹ç³»çµ±å…§ã€‚é€™é‚Šæ˜¯ç”¨ `ubuntu` çš„ 20.04ï¼Œå»ºè­°ä¸è¦äº‚æ”¹ï¼Œå› ç‚ºå…¶ä»–çš„ Linux ä¸ä¸€å®šå¯ä»¥å®Œä»»å‹™ã€‚\n\n```yml\ndeploy:\n  runs-on: ubuntu-20.04\n  ## ä»¥ä¸‹çœç•¥\n```\n\n### Steps\n\næ¥ä¸‹ä¾†å°±æ˜¯åˆ†æ­¥é©ŸåŸ·è¡Œå‘½ä»¤ï¼Œ`uses` æ˜¯åˆ©ç”¨ Github ä¸Šåˆ¥äººå·²ç¶“å¯«å¥½çš„ Actions è…³æœ¬ä¾†åŸ·è¡Œå‘½ä»¤ï¼Œåƒæ˜¯ç¬¬ä¸€å€‹ `uses: actions/checkout@v2` å°±æ˜¯æç”¨ Github ä¸Šåˆ¥äººå·²ç¶“å¯«å¥½çš„ `git checkout` å‘½ä»¤ä¾†æŠŠå°ˆæ¡ˆ checkout åˆ°å®¹å™¨ä¸­ã€‚\n\nç¬¬äºŒå€‹éƒ¨åˆ†ä¹Ÿæ˜¯ä½¿ç”¨åˆ¥äººå·²ç¶“å¯«å¥½çš„è…³æœ¬ï¼Œå¿«é€Ÿçš„å®‰è£ Hugo åˆ°å®¹å™¨å…§ï¼Œç”¨åˆ¥äººå¯«å¥½çš„æ±è¥¿ä¾†å®Œæˆå·¥ä½œï¼Œé¿å…ä¸å¿…è¦çš„é‡è¤‡é€ è¼ªå­ã€‚\n\n```yml\nsteps:\n    - uses: actions/checkout@v2\n    with:\n        submodules: true  # Fetch Hugo themes (true OR recursive)\n        fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod\n\n    - name: Setup Hugo\n    uses: peaceiris/actions-hugo@v2\n    with:\n        hugo-version: 'latest'\n        extended: true\n\n    - name: Build\n    run: hugo --minify\n\n    - name: Deploy\n    uses: peaceiris/actions-gh-pages@v3\n    if: github.ref == 'refs/heads/master'\n    with:\n        github_token: ${{ secrets.ACCESS_TOKEN }}\n        publish_dir: ./public\n```\n\nçœ‹åˆ°é€™è£¡ä¹Ÿå¯ä»¥ç™¼ç¾ä»»å‹™ä¹Ÿæ˜¯åˆ†å¾ˆå¤šæ­¥é©Ÿï¼Œç¬¬ä¸‰éƒ¨åˆ†çš„ Build å°±æ˜¯åƒæ˜¯æˆ‘å€‘åœ¨æœ¬æ©Ÿç›®éŒ„çš„ç”¢ç”Ÿæ–¹æ³•ä¸€æ¨£ï¼Œç›´æ¥è¼¸å…¥ `hugo` å‘½ä»¤ç”¢ç”Ÿéœæ…‹ç¶²é ã€‚\n\nç¬¬å››éƒ¨åˆ†çš„ Deploy å°±æœƒæ¯”è¼ƒè¤‡é›œï¼Œé€™é‚Šä¹Ÿæ˜¯åˆ©ç”¨åˆ¥äººå¯«å¥½ç”¨ä¾†ç™¼å¸ƒ Github Pages çš„ä»»å‹™ï¼Œä»–æœƒéœ€è¦ä¸€å€‹ Github Tokenï¼Œé€™å€‹ Token æ˜¯è¦ç”¨ä¾†å° Repository æœ‰ Push çš„æ¬Šé™ï¼Œé›–ç„¶å¯ä»¥ç›´æ¥å¯«åœ¨è…³æœ¬è£¡ï¼Œä½†æ˜¯å°±æ‰€æœ‰äººéƒ½çœ‹å¾—åˆ°ä½ çš„ Tokenï¼Œé‚£å°±æœƒç”¢ç”Ÿè³‡å®‰å•é¡Œã€‚æ‰€ä»¥ Github æä¾› Secrets çš„æ¨¡å¼ï¼Œå¯ä»¥æŠŠä¸æ–¹ä¾¿ç›´æ¥å¯«åœ¨å°ˆæ¡ˆè£¡çš„æ©Ÿæ•è³‡æ–™ï¼Œæ”¾åœ¨ Github ä¸Šã€‚\n\næ‰€ä»¥æˆ‘å€‘ç¾åœ¨æœƒæœ‰å…©ä»¶äº‹è¦åšï¼š\n\n1. ç”¢ç”Ÿ Token\n2. æŠŠ Token æ”¾åˆ°å°ˆæ¡ˆçš„ Secrets ä¸­\n\næˆ‘å€‘å…ˆä¾†ç”¢ç”Ÿ Tokenï¼Œå…ˆåˆ°å€‹äººçš„è¨­å®šé é¢æ‰¾åˆ° Developer settingsï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9cec1b4f-5bf6-4e41-9177-3cbe9ccfd400/large)\n\nå†åˆ° Token çš„é é¢ç”¢ç”Ÿæ–°çš„ Tokenï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/dfa652f6-b8b1-4df2-5b7f-ccdda2e8df00/large)\n\nåç¨±å¯ä»¥è‡ªå·±éš¨æ„è¨‚ï¼ŒRepo çš„æ¬Šé™å°±å…¨éƒ¨æ‰“é–‹ï¼Œé™¤äº† Repo ä»¥å¤–çš„æ¬Šé™å‰‡éƒ½ä¸éœ€è¦ã€‚éƒ½ç¢ºå®šå¾Œç›´æ¥æ‹‰åˆ°æœ€ä¸‹é¢ç”¢ç”Ÿ Tokenï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/94de0480-f57a-4bef-b1e1-9ce3f75d2c00/large)\n\næœƒå¾—åˆ°ä¸€çµ„æ–°çš„ Tokenï¼Œè«‹æ³¨æ„ä¸è¦åƒæˆ‘ä¸€æ¨£ Show å‡ºä¾†çµ¦åˆ¥äººçœ‹ï¼Œè«‹å¦¥å–„ä¿å­˜ï¼Œè€Œä¸” Github ä¹Ÿåªæœƒé¡¯ç¤ºé€™ä¸€æ¬¡ï¼Œä»¥å¾Œæƒ³è¦çœ‹éƒ½çœ‹ä¸åˆ°ï¼Œåªèƒ½ç”¢ç”Ÿæ–°çš„ Tokenã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/13bcbfe0-5bbc-4292-5679-cd5d1dba9f00/large)\n\nè¤‡è£½ä¸‹ Token å¾Œï¼Œæˆ‘å€‘åˆ°å°ˆæ¡ˆå±¤ç´šçš„è¨­å®šï¼Œæ³¨æ„æ˜¯**å°ˆæ¡ˆ**çš„è¨­å®šï¼Œä¸æ˜¯å€‹äººè¨­å®šï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d5b06f39-8b64-4f76-3f68-84d30fbc9a00/large)\n\næ‰¾åˆ° Secrets ä¸¦æ–°å¢ Secretsï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/409789e1-87f4-4469-fcf4-032a27e05700/large)\n\nåå­—å–å¥½å¾Œï¼Œå¡«å…¥å‰›å‰›æ‹¿åˆ°çš„ Tokenï¼Œæ³¨æ„åç¨±è¦å’Œå‰›å‰›åœ¨è…³æœ¬ä¸­å¯«çš„ä¸€æ¨£ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/8e7912d5-53fc-491a-a638-bee48f87be00/large)\n\néƒ½å¡«å®Œå¾Œå°±å¤§åŠŸå‘Šæˆï¼ŒåŸºæœ¬ä¸Šåªè¦ Push åˆ° Github ä¸Šï¼Œæ‡‰è©²å°±æœƒè‡ªå‹•è§¸ç™¼ä¸Šé¢å¯«çš„å·¥ä½œï¼Œä»¥å¾Œåªè¦æ–‡ç« æœ‰æ–°çš„è®Šå‹•ï¼ŒPush ä¸Šä¾†å°±æœƒè‡ªå‹•æ›´æ–°ç¶²é ç¶²é åˆ°å°ˆæ¡ˆçš„ `gh-pages` åˆ†ä¹‹ä¸Šã€‚æƒ³è¦é€²ä¸€æ­¥çœ‹åˆ° Pages çš„è¨­å®šï¼Œå¯ä»¥åˆ°å°ˆæ¡ˆä¸‹çš„ Pages çš„è¨­å®šä¸‹çœ‹çœ‹ï¼Œä¹Ÿå¯ä»¥åœ¨é€™è£¡è‡ªè¨‚ Domianã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/e1c327a2-2e73-45ff-7305-a8440010d600/large)\n","tags":["hugo","github","github-actions","web"]},{"id":29,"date":1623003046000,"url":"/posts/hugo/hugo","title":"ç”¨ Hugo ä¾†å¯«æ–‡ç« å§","summary":"\nHugo æ˜¯éœæ…‹ç¶²é çš„ç”¢ç”Ÿå™¨ï¼Œé¡ä¼¼ Hexo å’Œ Jekyllï¼ŒHugo ç”± go èªè¨€ç·¨å¯«ï¼Œæ•ˆç‡æ¥µé«˜ï¼Œæˆ‘åŸæœ¬æ˜¯ç”¨ Hexo åœ¨ç”¢ç”Ÿæ–‡ç« ï¼Œå¾Œä¾†ç™¼ç¾ Hugo é€™å€‹å¥½æ±è¥¿ï¼Œä¹Ÿè§€æœ›äº†ä¸€é™£å­~~å…¶å¯¦æ˜¯æ‡¶~~ï¼Œå°±æ±ºå®šæ›éä¾†äº†ï¼Œç›®å‰ä¹Ÿç”¨å¾—éå¸¸é †æ‰‹ã€‚\n\n","content":" Hugo æ˜¯éœæ…‹ç¶²é çš„ç”¢ç”Ÿå™¨ï¼Œé¡ä¼¼ Hexo å’Œ Jekyllï¼ŒHugo ç”± go èªè¨€ç·¨å¯«ï¼Œæ•ˆç‡æ¥µé«˜ï¼Œæˆ‘åŸæœ¬æ˜¯ç”¨ Hexo åœ¨ç”¢ç”Ÿæ–‡ç« ï¼Œå¾Œä¾†ç™¼ç¾ Hugo é€™å€‹å¥½æ±è¥¿ï¼Œä¹Ÿè§€æœ›äº†ä¸€é™£å­~~å…¶å¯¦æ˜¯æ‡¶~~ï¼Œå°±æ±ºå®šæ›éä¾†äº†ï¼Œç›®å‰ä¹Ÿç”¨å¾—éå¸¸é †æ‰‹ã€‚\n\n<!--more-->\n\n## å®‰è£ Hugo\n\né€™æ˜¯ Hugo çš„[å®˜ç¶²](https://gohugo.io/)ï¼Œé€²å»å¾Œå¯ä»¥çœ‹åˆ°ä¸€äº›ç°¡å–®çš„ä»‹ç´¹å’Œå®‰è£æ–¹æ³•ã€‚\n\næˆ‘è »æ¨è–¦åœ¨ vscode çš„ `code in container` çš„æ–¹å¼ç”¨ Hugoï¼Œå› ç‚ºæˆ‘è‡ªå·±ä¹Ÿæ˜¯é€™æ¨£ç”¨ï¼Œé€™æ¨£å°±ä¸ç”¨æ“”å¿ƒæœƒå¼„é«’ç’°å¢ƒï¼Œä½†å°±è®“æœ‰èˆˆè¶£çš„äººè‡ªå·±ç ”ç©¶å§ï¼Œé€™è£¡æˆ‘ä»‹ç´¹ä¸€èˆ¬é›»è…¦çš„å®‰è£æ–¹å¼ã€‚\n\n### Windows\n\nWindows æˆ‘å»ºè­°æ˜¯ç”¨ Chocolatey ä¾†å®‰è£æ˜¯æœ€æ–¹ä¾¿çš„ï¼š\n\n```ps1\nchoco install hugo\n```\n\nä½†æ˜¯å¦‚æœä¸æƒ³è¦ç”¨ Chocolatey å®‰è£ï¼Œå¯ä»¥å»å®˜æ–¹çš„ [Github Release](https://github.com/gohugoio/hugo/releases) ä¸‹è¼‰æœ€æ–°çš„ Windows ç‰ˆæœ¬ï¼Œä¸‹è¼‰å®Œå¾Œè¨˜å¾—åŠ å…¥ PATHã€‚\n\n### Mac\n\nmacOS å®‰è£æœ€ç°¡å–®ï¼Œç”¨ Homebrew å°±å¯ä»¥å¿«é€Ÿçš„å®‰è£ã€‚\n\n```bash\nbrew install hugo\n```\n\n### Linux\n\nLinux æˆ‘ä¸€å¾‹å»ºè­°å¾å®˜æ–¹çš„ [Github Release](https://github.com/gohugoio/hugo/releases) ä¸‹è¼‰æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¸¦è‡ªå·±åŠ åˆ° PATHã€‚\n\né›–ç„¶ apt ç­‰ç‰ˆæœ¬ç®¡ç†å™¨å¥½åƒæœ‰æä¾›ï¼Œä½†å®˜æ–¹çš„æ–‡ä»¶ä¸Šéƒ½èªªç‰ˆæœ¬å¹¾ä¹éƒ½ä¸æ˜¯æœ€æ–°ç‰ˆï¼Œæ‰€ä»¥ä¹Ÿä¸å»ºè­°ã€‚ç”¨ä¸‹è¼‰çš„æ–¹å¼é‚„æ˜¯æœ€æ–¹ä¾¿çš„ï¼Œæˆ–æ˜¯ç”¨ Docker ä¹Ÿæ˜¯å¥½è¾¦æ³•ã€‚\n\n## é–‹å§‹ä½¿ç”¨ Hugo\n\nå…ˆå‰µå»ºä¸€å€‹æ–°çš„ Hugo å°ˆæ¡ˆï¼Œä¸‹é¢çš„ `MyBlog` å¯ä»¥æ›æˆè‡ªå·±æƒ³è¦çš„å°ˆæ¡ˆåç¨±ï¼š\n\n```bash\nhugo new site MyBlog\n```\n\n### æ–°å¢ä¸»é¡Œ\n\nå‰µå»ºå¥½å°ˆæ¡ˆå¾Œï¼Œå°±å¯ä»¥ä¾†æ–°å¢ä¸»é¡Œï¼Œç›®å‰åœ¨ Hugo ä¸Šæä¾›éå¸¸å¤šçš„ä¸»é¡Œï¼Œæˆ‘å€‘å¯ä»¥åˆ°å®˜æ–¹çš„é€™å€‹[ç¶²ç«™](https://themes.gohugo.io/)æ‰¾æ‰¾çœ‹ï¼Œä½†ç›®å‰äº›ä¸è¦å¢åŠ é›£åº¦ï¼Œç”¨æœ€å®˜æˆ¿æä¾›çš„ç°¡å–®çš„ ananke ä¸»é¡Œå°±å¥½ï¼Œåæ­£ä¸»é¡Œæ˜¯éš¨æ™‚éƒ½å¯ä»¥æ›çš„ã€‚\n\n```bash\ncd MyBlog\ngit init\ngit submodule add https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke\necho theme = \\\"ananke\\\" >> config.toml\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹æ˜¯å»ºè­°ä½¿ç”¨ `git submodule` çš„æ–¹å¼æ–°å¢ä¸»é¡Œï¼Œé€™æ¨£ä¹‹å¾Œåœ¨æ›´æ–°ä¸»é¡Œçš„æ™‚å€™ä¹Ÿæ¯”è¼ƒæ–¹ä¾¿ã€‚\n\næœ€å¾Œä¸€è¡Œçš„ `echo` æŒ‡ä»¤æœƒåœ¨å°ˆæ¡ˆåº•ä¸‹ç”¢ç”Ÿä¸€å€‹ `config.toml` çš„æª”æ¡ˆï¼ŒåŸºæœ¬ä¸Šä¹‹å¾Œæ‰€æœ‰æœ‰é—œ Hugo ç¶²ç«™çš„è¨­å®šï¼Œéƒ½å¯ä»¥åœ¨é€™è£¡è®Šæ›´ã€‚é€™ä¸€è¡ŒæŒ‡ä»¤æ‡‰è©²æœƒå¹«ä½ åœ¨æª”æ¡ˆä¸­ç”¢ç”Ÿå¦‚ä¸‹çš„å…§å®¹ï¼š\n\n```toml\ntheme = \"ananke\"\n```\n\n### æ–°å¢æ–‡ç« \n\nåœ¨ Hugo ä¸­æ–°å¢æ–‡ç« çš„æŒ‡ä»¤å°±æ˜¯å¦‚ä¸‹ï¼Œå¯ä»¥è‡ªå·±ä¿®æ”¹æª”åã€‚\n\n```bash\nhugo new posts/my-first-post.md\n```\n\nç”¢ç”Ÿå®Œæˆå¾Œå¯ä»¥çœ‹åˆ° Hugo å¹«ä½ ç”¢ç”Ÿäº†ä¸€äº› Front Matterã€‚\n\n```md\n---\ntitle: \"My First Post\"\ndate: 2019-03-26T08:47:11+01:00\ndraft: true\n---\n```\n\nä¸Šé¢çš„ `draft` çš„æŒ‡ä»¤æ˜¯è‰ç¨¿çš„æ„æ€ï¼Œå¦‚æœæ²’æœ‰åœ¨ä¸Šç·šå‰æ”¹æˆ `false`ï¼Œæ˜¯ä¸æœƒåœ¨æ­£å¼ç¶²ç«™ä¸­æ¸²æŸ“çš„ã€‚\n\nç¾åœ¨å¯ä»¥è‡ªå·±ç”¢ç”Ÿçš„ Markdown æª”æ¡ˆä¸­åŠ ä¸€äº›å…§å®¹ï¼Œç­‰ç­‰å°±å¯ä»¥çœ‹çœ‹æ•ˆæœæ€éº¼æ¨£ã€‚\n\n## åŸ·è¡Œ Hugo Server\n\nè¦å•Ÿå‹• Hugo Server ä¹Ÿéå¸¸ç°¡å–®ï¼š\n\n```bash\nhugo server -D\n```\n\nä¸Šé¢çš„ `-D` åƒæ•¸çš„æ„æ€æ˜¯æŠŠ `draft` çš„è‰ç¨¿æ–‡ä»¶ä¹Ÿæ¸²æŸ“ï¼Œå¦‚æœæƒ³è¦çœ‹çœ‹ä¸Šç·šçš„ç¶²é æœƒé•·æ€æ¨£ï¼Œå¯ä»¥ä¸è¦åŠ ä¸Šé€™å€‹åƒæ•¸ã€‚\n\n## ç”¢ç”Ÿéœæ…‹ç¶²é \n\né€™å€‹æœ€ç°¡å–®äº†ï¼Œé€£çŒ´å­éƒ½æœƒï¼Œ`-D` çš„åƒæ•¸ä¸€æ¨£æ˜¯æ¸²æŸ“è‰ç¨¿æ–‡ä»¶ï¼Œå¯è¦–éœ€æ±‚åŠ ä¸Šã€‚\n\n```bash\nhugo\n```\n\nåˆ°é€™è£¡å°±ä»‹ç´¹å®Œæˆæ‰€æœ‰ Hugo åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•äº†ï¼Œä¹‹å¾Œæˆ‘æœƒä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Github Actio\bnï¼Œè®“æˆ‘å€‘æ¯æ¬¡åªéœ€è¦ Push å°ˆæ¡ˆï¼ŒGithub å°±æœƒå¹«æˆ‘å€‘é‡æ–°å»ºç½®ä¸¦éƒ¨ç½²ç¶²ç«™ã€‚\n\n## Reference\n\n- [Hugo Quick Start](https://gohugo.io/getting-started/quick-start/)\n","tags":["hugo","blog","mac","linux","windows"]},{"id":30,"date":1622913437000,"url":"/posts/linux/ubuntu-black-screen","title":"Ubuntu é–‹æ©Ÿé»‘å±","summary":"\næˆ‘ç›®å‰çš„å·¥ä½œç’°å¢ƒéƒ½æ˜¯ç”¨ Ubuntu ~~(è¢« Windows æ°£åˆ°)~~ï¼Œå‰å¹¾å¤©æˆ‘é‡æ–°å®‰è£ Ubuntu çš„æ™‚å€™ï¼Œä¸€ç›´å®‰è£å¤±æ•—ï¼Œé‡æ–°å®‰è£å››ã€äº”æ¬¡å¾Œéƒ½æ²’æœ‰ç•«é¢ï¼Œæœ€å¾Œæ‰ç™¼ç¾æ˜¯é¡¯å¡é©…å‹•å•é¡Œã€‚\n\n> è½èªª Ubuntu é–‹æ©Ÿæ²’æœ‰ç•«é¢æˆ–æ˜¯åªæœ‰ Logoï¼Œåæ¬¡æœ‰ä¹æ¬¡éƒ½æ˜¯é¡¯å¡é©…å‹•çš„å•é¡Œ\n\n","content":" æˆ‘ç›®å‰çš„å·¥ä½œç’°å¢ƒéƒ½æ˜¯ç”¨ Ubuntu ~~(è¢« Windows æ°£åˆ°)~~ï¼Œå‰å¹¾å¤©æˆ‘é‡æ–°å®‰è£ Ubuntu çš„æ™‚å€™ï¼Œä¸€ç›´å®‰è£å¤±æ•—ï¼Œé‡æ–°å®‰è£å››ã€äº”æ¬¡å¾Œéƒ½æ²’æœ‰ç•«é¢ï¼Œæœ€å¾Œæ‰ç™¼ç¾æ˜¯é¡¯å¡é©…å‹•å•é¡Œã€‚\n\n> è½èªª Ubuntu é–‹æ©Ÿæ²’æœ‰ç•«é¢æˆ–æ˜¯åªæœ‰ Logoï¼Œåæ¬¡æœ‰ä¹æ¬¡éƒ½æ˜¯é¡¯å¡é©…å‹•çš„å•é¡Œ\n\n<!--more-->\n\n## è§£æ±ºå•é¡Œ\n\nåœ¨é–‹æ©Ÿå¼•å°æ™‚æœƒçœ‹åˆ°é€™å€‹ç•«é¢ï¼Œç«‹é¦¬æŒ‰ä¸‹éµç›¤ä¸Šçš„ `c` éµã€‚\n\n![img](https://i.stack.imgur.com/8RYuZ.png)\n\næŒ‰ä¸‹ c å¾Œï¼Œæœƒä»¥ä¸‹ç•«é¢ï¼Œæ‰¾åˆ° `quite splash`ã€‚\n\n![img](https://i.stack.imgur.com/0Cfhc.png)\n\næŠŠ `quite splash` æ”¹æˆ `nomodeset`ï¼Œä¸è¦æ‡·ç–‘ï¼ŒæŠŠå…©å€‹å­—åˆªæ‰ï¼Œæ”¹æˆä¸€å€‹å­—ï¼Œæ”¹éŒ¯ä¹Ÿæ²’é—œä¿‚ï¼Œä¸‹æ¬¡é‡é–‹å°±æœƒå¾©åŸã€‚\n\næ”¹å®Œå¾Œï¼ŒæŒ‰ä¸‹ `f10` æ‡‰è©²å°±å¯ä»¥é †åˆ©é€²å…¥ç³»çµ±ï¼Œåªæ˜¯æ˜¯åœ¨æ²’æœ‰é¡¯å¡é©…å‹•çš„ç‹€æ…‹ï¼Œç•«é¢å¯èƒ½éå¸¸ä¸æµæš¢ï¼Œæ‰€ä»¥æˆ‘å€‘ç¾åœ¨ä¾†å®‰è£é¡¯å¡é©…å‹•ã€‚\n\n## é¡¯å¡é©…å‹•\n\né–‹å•Ÿ Terminalï¼Œè¼¸å…¥ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå¯ä»¥è‡ªå‹•æª¢æŸ¥é¡¯å¡çš„é©…å‹•\n\n```bash\nsudo ubuntu-drivers devices\n```\n\næ‡‰è©²å¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸€é …å¾Œé¢æœ‰ recommendedï¼ŒåŸºæœ¬ä¸Šå®‰è£é‚£å€‹ç‰ˆæœ¬å°±æ²’æœ‰å•é¡Œã€‚ä¸‹é¢æˆ‘å€‘ç›´æ¥ç”¨è‡ªå‹•å®‰è£çš„æ–¹å¼å®‰è£æ¨è–¦çš„é©…å‹•ã€‚\n\n```bash\nsudo ubuntu-drivers autoinstall\n```\n\nå¦‚æœä½ æ‡¶çš„é—œå¿ƒ `autoinstall` æœƒå¹«ä½ å®‰è£å“ªå€‹ç‰ˆæœ¬ï¼ŒåŸºæœ¬ä¸Šç›´æ¥åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å°±å¯ä»¥è§£æ±ºå•é¡Œäº†ã€‚\n\nå®‰è£å®Œæˆå¾Œé‡é–‹æ©Ÿï¼Œå¦‚æœæ²’æœ‰é‡åˆ°å…¶ä»–å•é¡Œï¼Œé€™æ¨£æ‡‰è©²å°±å¯ä»¥é †åˆ©é€²å…¥ç³»çµ±äº†ã€‚\n\n## Reference\n\n- [My computer boots to a black screen, what options do I have to fix it?](https://askubuntu.com/questions/162075/my-computer-boots-to-a-black-screen-what-options-do-i-have-to-fix-it)\n","tags":["ubuntu"]},{"id":31,"date":1622909309000,"url":"/posts/docker/pwd-hosting","title":"è‡ªæ¶ Play With Docker","summary":"\nå­¸é Docker çš„äººéƒ½æ‡‰è©²æœ‰ç”¨é Docker Playground ä¾†å­¸ç¿’æˆ–æ˜¯æ¸¬è©¦éè»Ÿé«”ï¼Œä¸æƒ³åœ¨æœ¬æ©Ÿè·‘ Docker å¯ä»¥å…ˆç”¨ Docker Playground è©¦è©¦çœ‹è»Ÿé«”å¯ä¸å¯ä»¥è·‘ã€‚\n\n","content":" å­¸é Docker çš„äººéƒ½æ‡‰è©²æœ‰ç”¨é Docker Playground ä¾†å­¸ç¿’æˆ–æ˜¯æ¸¬è©¦éè»Ÿé«”ï¼Œä¸æƒ³åœ¨æœ¬æ©Ÿè·‘ Docker å¯ä»¥å…ˆç”¨ Docker Playground è©¦è©¦çœ‹è»Ÿé«”å¯ä¸å¯ä»¥è·‘ã€‚\n\n<!--more-->\n\nå®˜æ–¹å·²ç¶“æœ‰æ¶è¨­ [Docker Playground](https://labs.play-with-docker.com/)ï¼Œå¯ä»¥è®“å¤§å®¶æ–¹ä¾¿ä½¿ç”¨ï¼Œä½†æˆ‘ä½¿ç”¨çš„æ™‚å¾Œå¸¸ç™¼ç¾ä»–æœƒ Lagï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ Docker Server çš„å•é¡Œï¼Œé‚„æ˜¯è‡ºç£ç¶²è·¯çš„å•é¡Œã€‚å‰›å¥½æœ€è¿‘æƒ³è¦æ•™ç¤¾åœ˜ Dockerï¼Œé€™æ¨£æˆ‘æ¶å¥½ä¸€å€‹ï¼Œå¤§å®¶å°±ä¸éœ€è¦æº–å‚™ç’°å¢ƒï¼Œç›´æ¥å°±å¯ä»¥é–‹å§‹å­¸äº†ã€‚\n\næœ¬å°ˆæ¡ˆçš„ [GitHub](https://github.com/play-with-docker/play-with-docker)\n\n## æº–å‚™ç’°å¢ƒ\n\n- Docker `18.06.0+`\n\n- Go æœ€æ–°ç‰ˆ\n\nä»¥ä¸Šçš„å®‰è£å…©å€‹åœ¨é€™é‚Šéƒ½ä¸è´…è¿°ï¼Œè«‹è‡ªè¡Œåƒé–±å®˜æ–¹æ–‡æª”ã€‚\n\n## é–‹å§‹éƒ¨ç½²\n\n### ç¬¬ä¸€æ­¥ï¼šä¸‹è¼‰å°ˆæ¡ˆ\n\n```bash\ngit clone https://github.com/play-with-docker/play-with-docker\ncd play-with-docker\n```\n\n### ç¬¬äºŒæ­¥ï¼šç¢ºèªé©…å‹•\n\nå…¶å¯¦æˆ‘ä¸æ˜¯å¾ˆç¢ºå®šé€™ä¸€æ­¥é©Ÿæ˜¯è¦å¹¹å˜›ï¼Œä½†æ˜¯å®˜æ–¹æ–‡æª”æœ‰å¯«åˆ°ï¼Œä½†æ˜¯æˆ‘åœ¨ Mac ä¸Šç„¡æ³•åŸ·è¡Œæ­¤å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥é †åˆ©éƒ¨ç½²ã€‚\n\n```bash\nsudo modprobe xt_ipvs\n```\n\n### ç¬¬ä¸‰æ­¥ï¼šDocker swarm\n\n```bash\ndocker swarm init\n```\n\n### ç¬¬å››æ­¥ï¼šä¸‹è¼‰ image\n\né€™å€‹ Image æ˜¯ä¹‹å¾Œåœ¨ PWD ä¸­å‰µå»ºå®¹å™¨æ™‚è¦ç”¨åˆ°çš„ Imageã€‚\n\n```bash\ndocker pull franela/dind\n```\n\n### ç¬¬äº”æ­¥ï¼šgo mod\n\né€™æ­¥ä¹Ÿæ˜¯éå¿…è¦çš„ï¼Œæˆ‘ä¹Ÿä¸æ‡‚ Golang æ‰€ä»¥ä¹Ÿä¸ç¢ºå®šæ˜¯è¦å¹¹å˜›ã€‚\n\n```bash\ngo mod vendor\n```\n\n### æœ€å¾Œï¼šå•Ÿå‹•\n\n```bash\ndocker-compose up\n```\n\nè‹¥æ²’æœ‰å…¶ä»–å•é¡Œï¼Œç†è«–ä¸Šç¾åœ¨é€£æ¥åˆ° `http://localhost:80` å°±å¯ä»¥çœ‹åˆ° PWD æ­£åœ¨åŸ·è¡Œï¼Œä¹Ÿå¯ä»¥é–‹å§‹å‰µå»ºå®¹å™¨ä½¿ç”¨ã€‚\n\n## localhost or 404\n\nä¸Šä¸€æ®µçš„æœ€å¾Œå¯«åˆ°å¯ä»¥é€£æ¥åˆ° localhostï¼Œä½†å¦‚æœä½ è©¦è‘—ç”¨ localhost ä»¥å¤–çš„æ–¹å¼é€£æ¥ï¼Œå°±æœƒå‡ºç¾å•é¡Œï¼Œä¸ç®¡æ˜¯ `127.0.0.1` æˆ–æ˜¯ç”¨ç¶²å€ `pwd.example.com` ä¹‹é¡çš„éƒ½æ²’æœ‰è¾¦æ³•é€£æ¥åˆ° PWDï¼Œæœƒä¸æ–·åœ°å‡ºç¾ 404ï¼Œå°±æ˜¯åªæœ‰ localhost å¯ä»¥ã€‚å®˜æ–¹çš„æ–‡ä»¶å°±å¯«åˆ°é€™è£¡ï¼Œä¹Ÿæ²’å¯«è§£æ³•ï¼Œä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±ç™¼ç¾çš„è§£æ±ºæ–¹æ³•ã€‚\n\nåŸºæœ¬ä¸Šé€™å€‹å•é¡Œæ˜¯ DNS è§£æç™¼ç”Ÿçš„å•é¡Œï¼ŒPWD ä¸€æ¬¡åªèƒ½è§£æä¸€ç¨®ç¶²å€ï¼Œé è¨­æ˜¯ `localhost`ï¼Œæˆ‘å€‘å¯ä»¥å»ä»–çš„è¨­å®šæª”ä¸­è®Šæ›´ä»–ã€‚\n\nè¨­å®šæª”æ¡ˆåœ¨ `play-with-docker/config/config.go` ä¹‹ä¸­ï¼Œå…¶ä¸­æœƒæœ‰ä¸€è¡Œé•·ä¸‹é¢çš„æ¨£å­ï¼š\n\n```go\nflag.StringVar(&PlaygroundDomain, \"playground-domain\", \"localhost\", \"Domain to use for the playground\")\n```\n\nå¯ä»¥çœ‹åˆ° PWD é€™è£¡å¯ä»¥è¨­å®šè¦è§£æçš„ç¶²å€å°±æ˜¯ `localhost`ï¼Œæ‰€ä»¥åªè¦å°‡æ­¤è®Šæ›´ç‚º `pwd.example.com`ï¼Œå°±å¯ä»¥ç”¨é€™å€‹ç¶²å€é€£ä¸Š PWDã€‚\n\n### é€£ä¸Šå®¹å™¨å…§çš„ Port\n\nå°±ç®—åšå®Œä¸Šé¢çš„è¨­å®šï¼Œä¹Ÿé †åˆ©äº†å•Ÿå‹• Docker å®¹å™¨ï¼Œä½†æœ€å¾Œæ‰ç™¼ç¾æƒ³è¦é€£ä¸Šç‰¹å®šçš„ Port é‚„æ˜¯æœƒå¤±æ•—ï¼Œå› ç‚ºä»–æ˜¯ç”¨å­ç¶²åŸŸçš„æ–¹å¼å»é€£ç·š `http://ip<hyphen-ip>-<session_jd>-<port>.direct.pwd.example.com`ï¼Œæ‰€ä»¥åˆæœƒé‡åˆ°ç„¡æ³•è§£æ DNS çš„æƒ…æ³ï¼Œæˆ‘çš„è§£æ³•æ˜¯åœ¨ DNS çš„è¨­å®šä¸­æŠŠ `pwd.example.com` å’Œ `*.pwd.example.com` éƒ½åŠ å…¥ A Recordï¼Œæ‰é †åˆ©é€£ä¸Šã€‚\n\n## Nginx Proxy Pass\n\né€™éƒ¨åˆ†æˆ‘ç ”ç©¶äº†è »ä¹…ï¼Œå¦‚æœè¦æŠŠ Server éš±è—åœ¨ Nginx å¾Œé¢ï¼Œè¦è¨­å®šçš„æ±è¥¿æ¯”è¼ƒè¤‡é›œï¼Œå› ç‚º PWD æœ‰ä½¿ç”¨åˆ° WebSocketï¼Œä½†æ˜¯é€™éƒ¨åˆ†æˆ‘æ²’æœ‰éå¤šçš„å¿ƒå¾—ï¼Œæ‰€ä»¥ç›´æ¥æŠŠæˆ‘çš„ `conf` æ”¾åœ¨ä¸‹é¢ï¼Œå®¹æˆ‘ä¸åšè§£é‡‹äº†ï¼š\n\n```nginx\nmap $http_upgrade $connection_upgrade {\n    default upgrade;\n    ''      close;\n}\n\nserver {\n    listen       80;\n    server_name  pwd.example.com *.pwd.example.com;\n\n    location / {\n        proxy_pass http://192.168.1.1:80;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\n```\n\nä¸Šé¢æ˜¯å‡è¨­ PWD Server è·‘åœ¨ `192.168.1.1:80` ä¸Šã€‚\n\n## Reference\n\n- [Play With Docker](https://github.com/play-with-docker/play-with-docker)\n","tags":["docker","play-with-docker","nginx"]},{"id":32,"date":1622891718000,"url":"/posts/others/hello-world","title":"Hello World","summary":"\nThis is my first `post` in hugo.\n\n[google](google.com)\n\n","content":" This is my first `post` in hugo.\n\n[google](google.com)\n\n<!--more-->\n\n## Kotlin\n\n```kotlin\nfun String.hi() = \"$this HI\"\n\nclass Test(var i: Int) {\n    var p = \"13 13\"\n    var p = \"--------------------------------------------------------------------------------------------------\"\n}\n```\n\nmeilisearch\n\n### å¼•ç”¨\n\n> å¼•å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨ç”¨å¼•ç”¨å¼•ç”¨\n\n### Test list\n\nol\n\n1. one\n2. two\n3. three\n4. [google](google.com)\n\nul\n\n- one\n- two\n- three\n\nul ul\n\n- one\n  - one\n- two\n  - two\n  - three\n- three\n  - four\n    -five\n\npreview\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be2106f3-0557-4e94-803a-9dda63550300/preview)\n\npublic\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be2106f3-0557-4e94-803a-9dda63550300/public)\n","tags":null}]