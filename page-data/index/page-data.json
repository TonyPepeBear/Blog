{"componentChunkName":"component---src-pages-index-tsx","path":"/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"4c2b84a4-ff67-5922-b2e9-703e3980c137","html":"<p>ä»Šå¤©æŠŠä¸€å°å¤è€çš„ Samsung Galaxy S7 å¾ Android 6M åˆ·ä¸Š Android 11Rï¼Œä½¿ç”¨ Pixle Experience ROMï¼Œä¸¦å®‰è£ Magisk å’Œ GPS JoyStick ä¾†ç© Pokemon Goã€‚éç¨‹ä¸é›£ï¼Œä¸€æ­¥æ­¥åšå°±ä¸æœƒå‡ºéŒ¯ï¼Œå¾ Andoird 6 å‡åˆ° 11 ä¹Ÿæ²’æœ‰æ—©æˆæ‰‹æ©Ÿæœ‰æ˜é¡¯å¡é “ï¼Œä½©æœä½œè€…ã€‚</p>\n<!--more-->\n<p>é€™æ¬¡çš„å‹•æ©Ÿä¸»è¦æ˜¯ Pokemon Go æœ€è¿‘é–‹å§‹ä¸æ”¯æ´ Android 6 ä»¥ä¸‹çš„è£ç½®éŠç©ï¼Œåªå¥½å‡ç´šåŸæœ¬çš„è£ç½®ã€‚</p>\n<h2>æ­¥é©Ÿæ¦‚è¦½</h2>\n<ol>\n<li>åˆ·å…¥ TWRP</li>\n<li>åˆ·å…¥ Pixle Experience</li>\n<li>å®‰è£ Magisk</li>\n<li>å®‰è£ SmaliPatcher</li>\n<li>å®‰è£ SafetyNet Fix</li>\n<li>å®‰è£ä¸¦è¨­å®š GPS JoyStick</li>\n<li>ç©</li>\n</ol>\n<p>æ‰‹æ©Ÿæ‡‰è©²ä¸ä¸€å®šè¦æ˜¯ S7 ä¹Ÿå¯ä»¥ç…§è‘—é€™äº›æ€è·¯å®Œæˆã€‚</p>\n<h2>æ‰‹æ©Ÿäº‹å‰æº–å‚™</h2>\n<p>é–‹å•Ÿ USB åµéŒ¯å’Œ OEM è§£é–ã€‚</p>\n<p>çœ‹å®Œæœ¬æ–‡ï¼Œä¸¦å¯ä»¥å…ˆæŠŠæœƒç”¨åˆ°çš„æ±è¥¿éƒ½ä¸‹è¼‰ä¸‹ä¾†ã€‚</p>\n<h2>åˆ·å…¥ TWRP</h2>\n<ol>\n<li>é€²å…¥ Download Mode</li>\n<li>ç”¨ Odin å¯«å…¥ TWRP Recovery</li>\n<li>é€²å…¥ TWRP</li>\n</ol>\n<p>ä¸‹è¼‰æœ€æ–°çš„ Odin ç‰ˆæœ¬ (ç›®å‰æ˜¯ 3.13.1)ï¼Œ<a href=\"https://odindownload.com/\">Odin å®˜ç¶²</a></p>\n<p>ä¸‹è¼‰ <a href=\"https://twrp.me/samsung/samsunggalaxys7.html\">TWRP for Samsung Galaxy S7</a> (ç›®å‰æ˜¯ 3.6.2)ã€‚</p>\n<p>å°‡æ‰‹æ©Ÿé€£ä¸Šé›»è…¦ï¼Œä¸¦é—œæ©Ÿå¾Œé€²å…¥ Download Mode (POWER + VOL DOWN + HOME)ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/4d367c79-5c09-4118-6b49-f09f918b8600/public\" alt=\"img\"></p>\n<p>é–‹å•Ÿ Odin ä¸¦é» AP é¸æ“‡åˆ·å…¥ TWRP æª”æ¡ˆï¼Œé—œé–‰ Auto Reboot å¾Œ Startï¼Œæ‡‰è©²åªè¦å¹¾ç§’å°±æœƒå®Œæˆã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/dacd3ce6-e43e-490d-0a1f-4f6b430e7800/public\" alt=\"img\"></p>\n<p>å¼·åˆ¶é—œæ©Ÿ (POWER + VOL DOWN + HOME) è¢å¹•é»‘æ‰å¾Œé¦¬ä¸ŠæŠŠéŸ³é‡éµä¸‹æ›æˆéŸ³é‡éµä¸Š (POWER + VOL UP + HOME) é€²å…¥ Recovery Modeï¼Œå¦‚æœåˆ°ç›®å‰ç‚ºæ­¢éƒ½æˆåŠŸçš„è©±æ‡‰è©²å°±æœƒçœ‹åˆ° TWRP çš„ä»‹é¢ã€‚</p>\n<h2>åˆ·å…¥ Pixle Experience ROM</h2>\n<p>ä¸‹è¼‰ <a href=\"https://download.pixelexperience.org/herolte\">Galaxy S7 Pixle Experience</a>ï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ (20210923-1530)ã€‚</p>\n<p>é€²å…¥ TWRP å…ˆ Wipe å››å€‹åˆ†å€ï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/eed93d6e-153c-43d5-eac0-7eceeee50b00/public\" alt=\"img\"></p>\n<p>å¦‚æœ Wipe å¤±æ•—ä¸”æ˜¯å› ç‚ºæ²’è¾¦æ³• mount dataï¼Œå¯ä»¥åƒè€ƒ<a href=\"https://forum.xda-developers.com/t/how-to-fix-unable-to-mount-data-internal-storage-0mb-in-twrp-permanently.3830897/\">é€™ç¯‡æ–‡ç« </a>ã€‚</p>\n<p>æ¥ä¸‹ä¾†å¯ä»¥é¸æ“‡å…ˆå°‡ ROM æ”¾å…¥ SD å¡ï¼Œæˆ–æ˜¯ç›´æ¥ç”¨ adb å‘½ä»¤åˆ· (é›»è…¦ç•¶ç„¶è¦è£å¥½ adbï¼Œæœ€å¿«çš„æ–¹æ³•é‚„æ˜¯ç”¨ Chocolatey)ï¼Œæˆ‘è‡ªå·±æ˜¯ç›´æ¥ç”¨ adb çš„å‘½ä»¤åˆ·ã€‚åœ¨ TWRP ä¸»ç•«é¢é¸ Advancedï¼Œç„¶å¾Œä½¿ç”¨ ADB Sideloadã€‚</p>\n<p>é–‹å•Ÿé›»è…¦ Terminalï¼Œcd åˆ°æ”¾å‰›å‰›ä¸‹è¼‰çš„ ROM çš„ç›®éŒ„ï¼Œä¸¦è¼¸å…¥ä»¥ä¸‹å‘½ä»¤ (æª”åè¨˜å¾—æ›¿æ›è‡ªå·±çš„)ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">adb sideload .\\PixelExperience_herolte-11.0-20210923-1530-OFFICIAL.zip</code></pre></div>\n<p>é€™å€‹æœƒæ˜¯å…¨éƒ¨è€—è²»æœ€ä¹…çš„æ­¥é©Ÿï¼Œè¦æœ‰è€å¿ƒåœ°ç­‰ä¹…ä¸€é»ã€‚</p>\n<p>å®Œæˆå¾Œ Reboot æ²’å•é¡Œçš„è©±ï¼Œç­‰ä¸€å…©åˆ†é˜ (å®˜æ–¹å¥½åƒæ˜¯èªª 15 åˆ†é˜å…§ï¼Œä½†æˆ‘æ²’é‡åˆ°é‚£éº¼ä¹…) æ‡‰è©²å°±å¯ä»¥é€²å…¥åˆ°ç³»çµ±ã€‚é€²å…¥åˆ°ç³»çµ±å¾Œå¯ä»¥å…ˆåšä¸€äº›æ‰‹æ©Ÿçš„åˆå§‹åŒ–ï¼Œç¢ºå®šæ‰‹æ©Ÿä½¿ç”¨ä¸Šæ²’ç”šéº¼å¤§å•é¡Œå¾Œï¼Œå¯ä»¥å…ˆåˆ° Google Play ä¸‹è¼‰ Pokemon Go å†ç¹¼çºŒã€‚</p>\n<h2>å®‰è£ Magisk</h2>\n<p><a href=\"https://magiskmanager.com/\">Magisk</a> æ˜¯æ‰€æœ‰ Root ç©å®¶æ‡‰è©²éƒ½æœƒç”¨åˆ°çš„å¥½æ±è¥¿ï¼Œæ‡‰è©²ä¹Ÿæ˜¯ä¸‹è¼‰æœ€æ–°ç‰ˆå°±å¯ä»¥(ç›®å‰æ˜¯ 25.1)ã€‚ä¸‹è¼‰å¾Œè¦å°‡å‰¯æª”åæ”¹æˆ zipã€‚å¯ä»¥ç”¨æ‰‹æ©Ÿç›´æ¥ä¸‹è¼‰ï¼Œæˆ–æ˜¯ç”¨é›»è…¦ä¸‹è¼‰å¾Œç”¨ adb å‘½ä»¤ push åˆ°æ‰‹æ©Ÿä¸­ï¼Œæˆ‘é‚„æ˜¯é¸æ“‡ç”¨ adbï¼ŒæŒ‡ä»¤å¦‚ä¸‹ã€‚ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">adb push magisk.zip /sdcard/Download</code></pre></div>\n<p>é—œæ©Ÿå¾Œå†æ¬¡é€²å…¥ TWRPï¼Œé€™æ¬¡é¸æ“‡ Installï¼Œä¸¦å®‰è£å‰›å‰› push åˆ°æ‰‹æ©Ÿä¸­çš„ Magisk.zipã€‚å®‰è£å¾Œé‡é–‹æ©Ÿï¼Œå†é–‹å•Ÿ Magisk App å®Œæˆå®‰è£ã€‚</p>\n<p>å®‰è£å®Œæˆ Magisk å¾Œï¼Œé€²å…¥ Magisk å³ä¸Šè§’çš„è¨­å®šï¼Œé¸æ“‡éš±è— Magiskï¼Œå–ä¸€å€‹è‡ªå·±å–œæ­¡çš„åå­—ï¼Œé¿å…è¢« Pokemon Go åµæ¸¬åˆ° Magisk çš„å­˜åœ¨ã€‚</p>\n<p>æœ€å¾Œé–‹å•Ÿå…©å€‹é¸é …ï¼šZygiskã€å¼·åˆ¶é»‘åå–®ï¼Œé–‹å•Ÿé€™å…©å€‹é¸é …å¾Œï¼Œéœ€è¦å†æ¬¡é‡é–‹æ©Ÿï¼Œä¸¦åœ¨<strong>è¨­å®šé»‘åå–®é¸é …</strong>ä¸­æŠŠ Pokemon Go (Pokemon Go App å¥½åƒæœ‰å…©å€‹ Package name è¨˜å¾—éƒ½è¦å‹¾) é¸æ“‡èµ·ä¾†ã€‚</p>\n<h2>å®‰è£ SmaliPatcher å’Œ SafetyNet Fix</h2>\n<p>SmaliPatcher æ˜¯ç‚ºäº†è®“ Pokemon Go åµæ¸¬ä¸åˆ°æ‰‹æ©Ÿæ˜¯ç”¨æ¨¡æ“¬çš„ä½ç½®ï¼ŒSafetyNet å¥½åƒæ˜¯è®“ Pokemon Go åµæ¸¬ä¸åˆ°æœ‰ Root (é€™æˆ‘ä¸æ˜¯å¾ˆç¢ºå®šï¼Œæˆ‘åªçŸ¥é“ä¸è£é€²ä¸äº†éŠæˆ²)</p>\n<p>ç¹¼çºŒå°‡æ‰‹æ©Ÿé€£æ©Ÿåˆ°é›»è…¦ï¼Œç”¨é»è…¦ä¸‹è¼‰ <a href=\"https://forum.xda-developers.com/t/module-smali-patcher-7-4.3680053/\">SamliPatcher</a>(ç›®å‰æœ€æ–°æ˜¯ 0.0.7.4)ï¼Œè§£å£“ç¸®å¾Œæ˜¯å€‹åŸ·è¡Œæª”ï¼Œç”¨ç³»çµ±ç®¡ç†å“¡çš„èº«åˆ†åŸ·è¡Œï¼Œä¸¦å‹¾å¦‚åœ–çš„é¸é … (æˆ‘æ˜¯å‹¾äº†é€™ä¸‰å€‹ï¼Œä½†è½èªªå¥½åƒåªå‹¾ç¬¬ä¸€å€‹ä¹Ÿå¯ä»¥)ï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/5678afd4-b35f-4d1b-94ec-f12496862700/public\" alt=\"img\"></p>\n<p>ç¢ºå®šæ‰‹æ©Ÿé€£æ¥åˆ°é›»è…¦å¾ŒæŒ‰ä¸‹ ADD PATCHï¼Œé€™æœƒéœ€è¦è·‘ä¸€é™£å­ï¼Œä¹Ÿéœ€è¦æœ‰é»å…§å¿ƒçš„ç­‰å€™ï¼Œå®Œæˆæœƒåœ¨åŸ·è¡Œæª”çš„ç›®éŒ„æ‹¿åˆ°ä¸€å€‹æª”åé¡ä¼¼ SmaliPatcherModule çš„å£“ç¸®æª”ï¼Œä¸€æ¨£å¯ä»¥ç”¨å‰›å‰›çš„ adb å‘½ä»¤ push åˆ°æ‰‹æ©Ÿä¸­ï¼Œæœ€å¾Œç”¨ Magisk å®‰è£é€™å€‹æ¨¡çµ„å¾Œé‡é–‹æ©Ÿå³å¯ã€‚</p>\n<blockquote>\n<p>SmaliPatcher æˆªè‡³ç›®å‰æ˜¯ä¸æ”¯æ´ Android 12 çš„ï¼Œæˆ‘å› ç‚ºé€™å€‹å‘å¡äº†æ•´å€‹ä¸‹åˆï¼ŒPokemon Go éƒ½æœƒåµæ¸¬åˆ°æ¨¡æ“¬ä½ç½®</p>\n</blockquote>\n<p>æœ€å¾Œä¸€å€‹è¦å®‰è£çš„æ±è¥¿ï¼Œ<a href=\"https://github.com/kdrag0n/safetynet-fix/releases\">SafetyNet Fix</a> (ç›®å‰ç‰ˆæœ¬æ˜¯ 2.3.1)ï¼Œå¯ç”¨å‰›å‰›çš„æ–¹å¼åœ¨é›»è…¦ä¸‹è¼‰ zip å¾Œ push åˆ°æ‰‹æ©Ÿï¼Œæˆ–æ˜¯ç›´æ¥åœ¨æ‰‹æ©Ÿä¸‹è¼‰ï¼Œç„¶å¾Œé‚„æ˜¯ç”¨ Magisk å®‰è£æ¨¡çµ„é‡é–‹æ©Ÿå³å¯ã€‚</p>\n<h2>è¨­å®š GPS JoyStick</h2>\n<p>ä¸è¦å¾ Google Play ä¸‹è¼‰ GPS JoyStickï¼Œåˆ°ä»–çš„<a href=\"http://gpsjoystick.theappninjas.com/\">å®˜ç¶²</a>ä¸‹è¼‰ Unlock Version (æœ€æ–°ç‰ˆæœ¬æ˜¯ 4.3.2)ã€‚</p>\n<p>é–‹å•Ÿ GPS JoyStick æœƒçœ‹åˆ°ä¸€å€‹éš±ç§æ¨¡å¼ï¼Œé€™ä¹Ÿæ˜¯ç‚ºäº†é¿å…è¢« Pokemon Go åµæ¸¬åˆ°é€™å€‹ App çš„å­˜åœ¨ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯è‡ªå·±é–‹å¿ƒå–å€‹åå­—é‡æ–°å®‰è£ã€‚</p>\n<p>åˆ°è¨­å®šä¸­é—œé–‰ <code class=\"language-text\">å•Ÿç”¨é–“æ¥æ¨¡æ“¬</code>ï¼Œé€™é¸é …é è¨­æ˜¯é–‹å•Ÿçš„ï¼Œä¸€å®šè¦æŠŠå®ƒé—œé–‰ã€‚ç„¶å¾Œåˆ°é–‹ç™¼äººå“¡é¸é …ä¸­æŠŠæ¨¡æ“¬ä½ç½®çš„é¸é …è¨­å®šæˆè‡ªå·±çš„ JoyStick åå­—ã€‚</p>\n<h2>é–‹å•Ÿ Pokemon Go</h2>\n<p>ç„¡é ˆè¨­å®šï¼Œå¤§åŠŸå‘Šæˆ</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://download.pixelexperience.org/herolte\">Galaxy S7 Pixle Experience</a></li>\n<li><a href=\"https://odindownload.com/\">Odin</a></li>\n<li><a href=\"https://twrp.me/samsung/samsunggalaxys7.html\">TWRP for Samsung Galaxy S7</a></li>\n<li><a href=\"https://magiskmanager.com/\">Magisk</a></li>\n<li><a href=\"https://forum.xda-developers.com/t/module-smali-patcher-7-4.3680053/\">SamliPatcher</a></li>\n<li><a href=\"http://gpsjoystick.theappninjas.com/\">GPS JoyStick</a></li>\n</ul>","rawMarkdownBody":"\nä»Šå¤©æŠŠä¸€å°å¤è€çš„ Samsung Galaxy S7 å¾ Android 6M åˆ·ä¸Š Android 11Rï¼Œä½¿ç”¨ Pixle Experience ROMï¼Œä¸¦å®‰è£ Magisk å’Œ GPS JoyStick ä¾†ç© Pokemon Goã€‚éç¨‹ä¸é›£ï¼Œä¸€æ­¥æ­¥åšå°±ä¸æœƒå‡ºéŒ¯ï¼Œå¾ Andoird 6 å‡åˆ° 11 ä¹Ÿæ²’æœ‰æ—©æˆæ‰‹æ©Ÿæœ‰æ˜é¡¯å¡é “ï¼Œä½©æœä½œè€…ã€‚\n\n<!--more-->\n\né€™æ¬¡çš„å‹•æ©Ÿä¸»è¦æ˜¯ Pokemon Go æœ€è¿‘é–‹å§‹ä¸æ”¯æ´ Android 6 ä»¥ä¸‹çš„è£ç½®éŠç©ï¼Œåªå¥½å‡ç´šåŸæœ¬çš„è£ç½®ã€‚\n\n## æ­¥é©Ÿæ¦‚è¦½\n\n1. åˆ·å…¥ TWRP\n2. åˆ·å…¥ Pixle Experience\n3. å®‰è£ Magisk\n4. å®‰è£ SmaliPatcher\n5. å®‰è£ SafetyNet Fix\n6. å®‰è£ä¸¦è¨­å®š GPS JoyStick\n7. ç©\n\næ‰‹æ©Ÿæ‡‰è©²ä¸ä¸€å®šè¦æ˜¯ S7 ä¹Ÿå¯ä»¥ç…§è‘—é€™äº›æ€è·¯å®Œæˆã€‚\n\n## æ‰‹æ©Ÿäº‹å‰æº–å‚™\n\né–‹å•Ÿ USB åµéŒ¯å’Œ OEM è§£é–ã€‚\n\nçœ‹å®Œæœ¬æ–‡ï¼Œä¸¦å¯ä»¥å…ˆæŠŠæœƒç”¨åˆ°çš„æ±è¥¿éƒ½ä¸‹è¼‰ä¸‹ä¾†ã€‚\n\n## åˆ·å…¥ TWRP\n\n1. é€²å…¥ Download Mode\n2. ç”¨ Odin å¯«å…¥ TWRP Recovery\n3. é€²å…¥ TWRP\n\nä¸‹è¼‰æœ€æ–°çš„ Odin ç‰ˆæœ¬ (ç›®å‰æ˜¯ 3.13.1)ï¼Œ[Odin å®˜ç¶²](https://odindownload.com/)\n\nä¸‹è¼‰ [TWRP for Samsung Galaxy S7](https://twrp.me/samsung/samsunggalaxys7.html) (ç›®å‰æ˜¯ 3.6.2)ã€‚\n\nå°‡æ‰‹æ©Ÿé€£ä¸Šé›»è…¦ï¼Œä¸¦é—œæ©Ÿå¾Œé€²å…¥ Download Mode (POWER + VOL DOWN + HOME)ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/4d367c79-5c09-4118-6b49-f09f918b8600/public)\n\né–‹å•Ÿ Odin ä¸¦é» AP é¸æ“‡åˆ·å…¥ TWRP æª”æ¡ˆï¼Œé—œé–‰ Auto Reboot å¾Œ Startï¼Œæ‡‰è©²åªè¦å¹¾ç§’å°±æœƒå®Œæˆã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/dacd3ce6-e43e-490d-0a1f-4f6b430e7800/public)\n\nå¼·åˆ¶é—œæ©Ÿ (POWER + VOL DOWN + HOME) è¢å¹•é»‘æ‰å¾Œé¦¬ä¸ŠæŠŠéŸ³é‡éµä¸‹æ›æˆéŸ³é‡éµä¸Š (POWER + VOL UP + HOME) é€²å…¥ Recovery Modeï¼Œå¦‚æœåˆ°ç›®å‰ç‚ºæ­¢éƒ½æˆåŠŸçš„è©±æ‡‰è©²å°±æœƒçœ‹åˆ° TWRP çš„ä»‹é¢ã€‚\n\n## åˆ·å…¥ Pixle Experience ROM\n\nä¸‹è¼‰ [Galaxy S7 Pixle Experience](https://download.pixelexperience.org/herolte)ï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ (20210923-1530)ã€‚\n\né€²å…¥ TWRP å…ˆ Wipe å››å€‹åˆ†å€ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/eed93d6e-153c-43d5-eac0-7eceeee50b00/public)\n\nå¦‚æœ Wipe å¤±æ•—ä¸”æ˜¯å› ç‚ºæ²’è¾¦æ³• mount dataï¼Œå¯ä»¥åƒè€ƒ[é€™ç¯‡æ–‡ç« ](https://forum.xda-developers.com/t/how-to-fix-unable-to-mount-data-internal-storage-0mb-in-twrp-permanently.3830897/)ã€‚\n\næ¥ä¸‹ä¾†å¯ä»¥é¸æ“‡å…ˆå°‡ ROM æ”¾å…¥ SD å¡ï¼Œæˆ–æ˜¯ç›´æ¥ç”¨ adb å‘½ä»¤åˆ· (é›»è…¦ç•¶ç„¶è¦è£å¥½ adbï¼Œæœ€å¿«çš„æ–¹æ³•é‚„æ˜¯ç”¨ Chocolatey)ï¼Œæˆ‘è‡ªå·±æ˜¯ç›´æ¥ç”¨ adb çš„å‘½ä»¤åˆ·ã€‚åœ¨ TWRP ä¸»ç•«é¢é¸ Advancedï¼Œç„¶å¾Œä½¿ç”¨ ADB Sideloadã€‚\n\né–‹å•Ÿé›»è…¦ Terminalï¼Œcd åˆ°æ”¾å‰›å‰›ä¸‹è¼‰çš„ ROM çš„ç›®éŒ„ï¼Œä¸¦è¼¸å…¥ä»¥ä¸‹å‘½ä»¤ (æª”åè¨˜å¾—æ›¿æ›è‡ªå·±çš„)ï¼š\n\n```sh\nadb sideload .\\PixelExperience_herolte-11.0-20210923-1530-OFFICIAL.zip\n```\n\né€™å€‹æœƒæ˜¯å…¨éƒ¨è€—è²»æœ€ä¹…çš„æ­¥é©Ÿï¼Œè¦æœ‰è€å¿ƒåœ°ç­‰ä¹…ä¸€é»ã€‚\n\nå®Œæˆå¾Œ Reboot æ²’å•é¡Œçš„è©±ï¼Œç­‰ä¸€å…©åˆ†é˜ (å®˜æ–¹å¥½åƒæ˜¯èªª 15 åˆ†é˜å…§ï¼Œä½†æˆ‘æ²’é‡åˆ°é‚£éº¼ä¹…) æ‡‰è©²å°±å¯ä»¥é€²å…¥åˆ°ç³»çµ±ã€‚é€²å…¥åˆ°ç³»çµ±å¾Œå¯ä»¥å…ˆåšä¸€äº›æ‰‹æ©Ÿçš„åˆå§‹åŒ–ï¼Œç¢ºå®šæ‰‹æ©Ÿä½¿ç”¨ä¸Šæ²’ç”šéº¼å¤§å•é¡Œå¾Œï¼Œå¯ä»¥å…ˆåˆ° Google Play ä¸‹è¼‰ Pokemon Go å†ç¹¼çºŒã€‚\n\n## å®‰è£ Magisk\n\n[Magisk](https://magiskmanager.com/) æ˜¯æ‰€æœ‰ Root ç©å®¶æ‡‰è©²éƒ½æœƒç”¨åˆ°çš„å¥½æ±è¥¿ï¼Œæ‡‰è©²ä¹Ÿæ˜¯ä¸‹è¼‰æœ€æ–°ç‰ˆå°±å¯ä»¥(ç›®å‰æ˜¯ 25.1)ã€‚ä¸‹è¼‰å¾Œè¦å°‡å‰¯æª”åæ”¹æˆ zipã€‚å¯ä»¥ç”¨æ‰‹æ©Ÿç›´æ¥ä¸‹è¼‰ï¼Œæˆ–æ˜¯ç”¨é›»è…¦ä¸‹è¼‰å¾Œç”¨ adb å‘½ä»¤ push åˆ°æ‰‹æ©Ÿä¸­ï¼Œæˆ‘é‚„æ˜¯é¸æ“‡ç”¨ adbï¼ŒæŒ‡ä»¤å¦‚ä¸‹ã€‚ï¼š\n\n```sh\nadb push magisk.zip /sdcard/Download\n```\n\né—œæ©Ÿå¾Œå†æ¬¡é€²å…¥ TWRPï¼Œé€™æ¬¡é¸æ“‡ Installï¼Œä¸¦å®‰è£å‰›å‰› push åˆ°æ‰‹æ©Ÿä¸­çš„ Magisk.zipã€‚å®‰è£å¾Œé‡é–‹æ©Ÿï¼Œå†é–‹å•Ÿ Magisk App å®Œæˆå®‰è£ã€‚\n\nå®‰è£å®Œæˆ Magisk å¾Œï¼Œé€²å…¥ Magisk å³ä¸Šè§’çš„è¨­å®šï¼Œé¸æ“‡éš±è— Magiskï¼Œå–ä¸€å€‹è‡ªå·±å–œæ­¡çš„åå­—ï¼Œé¿å…è¢« Pokemon Go åµæ¸¬åˆ° Magisk çš„å­˜åœ¨ã€‚\n\næœ€å¾Œé–‹å•Ÿå…©å€‹é¸é …ï¼šZygiskã€å¼·åˆ¶é»‘åå–®ï¼Œé–‹å•Ÿé€™å…©å€‹é¸é …å¾Œï¼Œéœ€è¦å†æ¬¡é‡é–‹æ©Ÿï¼Œä¸¦åœ¨**è¨­å®šé»‘åå–®é¸é …**ä¸­æŠŠ Pokemon Go (Pokemon Go App å¥½åƒæœ‰å…©å€‹ Package name è¨˜å¾—éƒ½è¦å‹¾) é¸æ“‡èµ·ä¾†ã€‚\n\n## å®‰è£ SmaliPatcher å’Œ SafetyNet Fix\n\nSmaliPatcher æ˜¯ç‚ºäº†è®“ Pokemon Go åµæ¸¬ä¸åˆ°æ‰‹æ©Ÿæ˜¯ç”¨æ¨¡æ“¬çš„ä½ç½®ï¼ŒSafetyNet å¥½åƒæ˜¯è®“ Pokemon Go åµæ¸¬ä¸åˆ°æœ‰ Root (é€™æˆ‘ä¸æ˜¯å¾ˆç¢ºå®šï¼Œæˆ‘åªçŸ¥é“ä¸è£é€²ä¸äº†éŠæˆ²)\n\nç¹¼çºŒå°‡æ‰‹æ©Ÿé€£æ©Ÿåˆ°é›»è…¦ï¼Œç”¨é»è…¦ä¸‹è¼‰ [SamliPatcher](https://forum.xda-developers.com/t/module-smali-patcher-7-4.3680053/)(ç›®å‰æœ€æ–°æ˜¯ 0.0.7.4)ï¼Œè§£å£“ç¸®å¾Œæ˜¯å€‹åŸ·è¡Œæª”ï¼Œç”¨ç³»çµ±ç®¡ç†å“¡çš„èº«åˆ†åŸ·è¡Œï¼Œä¸¦å‹¾å¦‚åœ–çš„é¸é … (æˆ‘æ˜¯å‹¾äº†é€™ä¸‰å€‹ï¼Œä½†è½èªªå¥½åƒåªå‹¾ç¬¬ä¸€å€‹ä¹Ÿå¯ä»¥)ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/5678afd4-b35f-4d1b-94ec-f12496862700/public)\n\nç¢ºå®šæ‰‹æ©Ÿé€£æ¥åˆ°é›»è…¦å¾ŒæŒ‰ä¸‹ ADD PATCHï¼Œé€™æœƒéœ€è¦è·‘ä¸€é™£å­ï¼Œä¹Ÿéœ€è¦æœ‰é»å…§å¿ƒçš„ç­‰å€™ï¼Œå®Œæˆæœƒåœ¨åŸ·è¡Œæª”çš„ç›®éŒ„æ‹¿åˆ°ä¸€å€‹æª”åé¡ä¼¼ SmaliPatcherModule çš„å£“ç¸®æª”ï¼Œä¸€æ¨£å¯ä»¥ç”¨å‰›å‰›çš„ adb å‘½ä»¤ push åˆ°æ‰‹æ©Ÿä¸­ï¼Œæœ€å¾Œç”¨ Magisk å®‰è£é€™å€‹æ¨¡çµ„å¾Œé‡é–‹æ©Ÿå³å¯ã€‚\n\n> SmaliPatcher æˆªè‡³ç›®å‰æ˜¯ä¸æ”¯æ´ Android 12 çš„ï¼Œæˆ‘å› ç‚ºé€™å€‹å‘å¡äº†æ•´å€‹ä¸‹åˆï¼ŒPokemon Go éƒ½æœƒåµæ¸¬åˆ°æ¨¡æ“¬ä½ç½®\n\næœ€å¾Œä¸€å€‹è¦å®‰è£çš„æ±è¥¿ï¼Œ[SafetyNet Fix](https://github.com/kdrag0n/safetynet-fix/releases) (ç›®å‰ç‰ˆæœ¬æ˜¯ 2.3.1)ï¼Œå¯ç”¨å‰›å‰›çš„æ–¹å¼åœ¨é›»è…¦ä¸‹è¼‰ zip å¾Œ push åˆ°æ‰‹æ©Ÿï¼Œæˆ–æ˜¯ç›´æ¥åœ¨æ‰‹æ©Ÿä¸‹è¼‰ï¼Œç„¶å¾Œé‚„æ˜¯ç”¨ Magisk å®‰è£æ¨¡çµ„é‡é–‹æ©Ÿå³å¯ã€‚\n\n## è¨­å®š GPS JoyStick\n\nä¸è¦å¾ Google Play ä¸‹è¼‰ GPS JoyStickï¼Œåˆ°ä»–çš„[å®˜ç¶²](http://gpsjoystick.theappninjas.com/)ä¸‹è¼‰ Unlock Version (æœ€æ–°ç‰ˆæœ¬æ˜¯ 4.3.2)ã€‚\n\né–‹å•Ÿ GPS JoyStick æœƒçœ‹åˆ°ä¸€å€‹éš±ç§æ¨¡å¼ï¼Œé€™ä¹Ÿæ˜¯ç‚ºäº†é¿å…è¢« Pokemon Go åµæ¸¬åˆ°é€™å€‹ App çš„å­˜åœ¨ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯è‡ªå·±é–‹å¿ƒå–å€‹åå­—é‡æ–°å®‰è£ã€‚\n\nåˆ°è¨­å®šä¸­é—œé–‰ `å•Ÿç”¨é–“æ¥æ¨¡æ“¬`ï¼Œé€™é¸é …é è¨­æ˜¯é–‹å•Ÿçš„ï¼Œä¸€å®šè¦æŠŠå®ƒé—œé–‰ã€‚ç„¶å¾Œåˆ°é–‹ç™¼äººå“¡é¸é …ä¸­æŠŠæ¨¡æ“¬ä½ç½®çš„é¸é …è¨­å®šæˆè‡ªå·±çš„ JoyStick åå­—ã€‚\n\n## é–‹å•Ÿ Pokemon Go\n\nç„¡é ˆè¨­å®šï¼Œå¤§åŠŸå‘Šæˆ\n\n## Reference\n\n- [Galaxy S7 Pixle Experience](https://download.pixelexperience.org/herolte)\n- [Odin](https://odindownload.com/)\n- [TWRP for Samsung Galaxy S7](https://twrp.me/samsung/samsunggalaxys7.html)\n- [Magisk](https://magiskmanager.com/)\n- [SamliPatcher](https://forum.xda-developers.com/t/module-smali-patcher-7-4.3680053/)\n- [GPS JoyStick](http://gpsjoystick.theappninjas.com/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Android/S7 Poekmon Root.md","excerpt":"ä»Šå¤©æŠŠä¸€å°å¤è€çš„ Samsung Galaxy S7 å¾ Android 6M åˆ·ä¸Š Android 11Rï¼Œä½¿ç”¨ Pixle Experience ROMï¼Œä¸¦å®‰è£ Magisk å’Œ GPS JoyStick ä¾†ç© Pokemon Goã€‚éç¨‹ä¸é›£ï¼Œä¸€æ­¥æ­¥åšå°±ä¸æœƒå‡ºéŒ¯ï¼Œå¾ Andoird 6 å‡åˆ° 11 ä¹Ÿæ²’æœ‰æ—©æˆæ‰‹æ©Ÿæœ‰æ˜é¡¯å¡é “ï¼Œä½©æœä½œè€…ã€‚ é€™æ¬¡çš„å‹•æ©Ÿä¸»è¦æ˜¯ Pokemon Go æœ€è¿‘é–‹å§‹ä¸æ”¯æ´ â€¦","frontmatter":{"title":"S7 åˆ· Android 11 + Pokemon Go é£›äººç°¡å–®ç´€éŒ„","date":"2022-07-17T13:39:39.000Z","draft":false,"tags":["android","samsung","s7","twrp","pokemon","joystick","gps","pixle","magisk","odin"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d0d9494e-6a67-4237-77aa-c4d7f059b400/public","description":null}}},{"node":{"id":"497c64d1-c2d9-57b6-bd9f-9c60e6829fa5","html":"<p>ç´€éŒ„ä¸€ä¸‹ç¶²ç«™æˆæ•ˆ</p>\n<!--more-->\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/7e18d41e-67cc-45cb-92fc-2e1373ba2a00/public\" alt=\"img\"></p>\n<p>å…©ç¯‡æˆæ•ˆæ„å¤–å¥½çš„å‘</p>\n<blockquote>\n<p>å»¢æ–‡æ²’éŒ¯</p>\n</blockquote>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://search.google.com/\">Google Search Console</a></li>\n</ul>","rawMarkdownBody":"\nç´€éŒ„ä¸€ä¸‹ç¶²ç«™æˆæ•ˆ\n\n<!--more-->\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/7e18d41e-67cc-45cb-92fc-2e1373ba2a00/public)\n\nå…©ç¯‡æˆæ•ˆæ„å¤–å¥½çš„å‘\n\n> å»¢æ–‡æ²’éŒ¯\n\n## Reference\n\n- [Google Search Console](https://search.google.com/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Blog/20220708 review.md","excerpt":"ç´€éŒ„ä¸€ä¸‹ç¶²ç«™æˆæ•ˆ img å…©ç¯‡æˆæ•ˆæ„å¤–å¥½çš„å‘ å»¢æ–‡æ²’éŒ¯ Reference Google Search Console","frontmatter":{"title":"æœ¬ç«™ 2022/7/8 æˆæ•ˆç´€éŒ„","date":"2022-07-08T05:24:40.177Z","draft":false,"tags":["blog","gatsby","google","search"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/46de886b-02a6-48d1-e5f5-1486881dcc00/public","description":null}}},{"node":{"id":"22235767-e1e6-5ec4-a8c0-8f1428c52404","html":"<p>Cloudflare Workers ä¹Ÿæ˜¯ Cloudflare çš„ä½›å¿ƒæœå‹™ä¹‹ä¸€ï¼Œå¯ä»¥æŠŠ node ç¨‹å¼éƒ¨ç½²åˆ° Cloudflare ä¸Šçš„çœ¾å¤šç¯€é»ï¼Œæ•ˆèƒ½ä¹Ÿä¸ä¿—ï¼Œæ¯å¤©é‚„æœ‰ 100,000 æ¬¡çš„å…è²»å‘¼å«ï¼Œä¹Ÿæ²’æœ‰å†·å•Ÿå‹•çš„å•é¡Œï¼Œå°æµé‡ä¸é«˜çš„ç¶²é ä¾†èªªå®Œå…¨å¤ ç”¨ã€‚å¦å¤–ï¼Œé‚„æœ‰ Workers KV å¯ä»¥ç”¨ä¾†å„²å­˜è³‡æ–™ï¼Œé€™å°±å¯ä»¥å¯«å‡ºç°¡å–®çš„å‹•æ…‹ç¶²é ï¼Œç”šè‡³æ˜¯ä¸€äº›æ›´è¤‡é›œçš„æ‡‰ç”¨ã€‚ä»Šå¤©å°±ä¾†å¯«ä¸€å€‹ Serverless çš„çŸ­ç¶²å€æœå‹™ï¼Œä¸¦æŠŠè³‡æ–™å­˜åœ¨ KV ä¸­ï¼Œå°±æˆ‘ç›®å‰è‡ªå·±æ¸¬è©¦ä¸‹ä¾†ï¼ŒWorkers çš„æ•ˆç‡çœŸçš„æ²’è©±èªªã€‚</p>\n<!--more-->\n<h2>Workers Playground</h2>\n<p>å¦‚æœæƒ³è¦åœ¨ç¶²é ä¸­å…ˆè©¦è©¦çœ‹ Workersï¼Œå¯ä»¥åˆ° <a href=\"https://cloudflareworkers.com/\">Cloudflare Workers</a> é€™å€‹ç¶²ç«™ã€‚</p>\n<p>æœƒæœ‰ä¸€å€‹é è¨­çš„æ¨¡æ¿é•·é€™æ¨£ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fetch\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span><span class=\"token function\">handleRequest</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Fetch and log a given request object\n * @param {Request} request\n */</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">handleRequest</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got request\"</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got response\"</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è®“æˆ‘å€‘å…ˆä¾†ç†è§£ä¸€ä¸‹ç¨‹å¼ç¢¼ã€‚</p>\n<p>å¯ä»¥çœ‹åˆ°ç¨‹å¼æœ‰å…©å€‹ functionï¼Œå…¶ä¸­ <code class=\"language-text\">addEventListener(...)</code> å°±æ˜¯ç¨‹å¼çš„å…¥å£ï¼Œç•¶ Workers æ”¶åˆ° Request ä¹‹å¾Œï¼Œå°±æœƒå‚³å…¥ä½ çµ¦ä»–çš„ functionï¼Œç„¶å¾Œå†æ±ºå®šè¦ç”¨ä»€éº¼ Response å›å‚³åˆ° Clientï¼Œé€™è£¡ä»–å¯«äº†ä¸€å€‹ <code class=\"language-text\">handleRequest</code> çš„ function ä¾†è™•ç†ã€‚æ‰€ä»¥é€™å€‹ç¨‹å¼ç¢¼å¯¦éš›ä¸Šåšçš„äº‹ï¼Œå°±åªæœ‰æŠŠ Request å’Œ Response çµ¦ log å‡ºä¾†ï¼Œå›å‚³åŸæœ¬çš„ç¶²é çš„æ¨£å­ä¸åšä»»ä½•æ›´å‹•ã€‚</p>\n<p>ä¸‹åœ–æ˜¯ Workers åœ¨ Cloudflare ä¸Šçš„é‹è¡Œé †åºï¼Œå¯ä»¥çœ‹åˆ° Workers è¢«æ”¾åœ¨æœ€å¾Œä¸€å€‹ï¼Œä¹Ÿå°±æ˜¯æœ€å¾Œä¸€å€‹æ±ºå®šè¦å›å‚³ä»€éº¼å…§å®¹çµ¦ User çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥ç†è§£ç‚ºå¯ä»¥åœ¨é€™è£¡å°åŸæœ¬çš„ Response åšæœ€å¾Œçš„æ›´å‹•ï¼Œå†å›å‚³çµ¦ Clientã€‚</p>\n<p>æ‰€ä»¥é€™å€‹ Playground ä¸Šå¯ä»¥è¼¸å…¥ä»»æ„çš„ URLï¼Œä¾†é è¦½ä½ çš„ Workers åœ¨ä»»ä½•ä¸€å€‹ç¶²ç«™ä¸Šï¼Œæœƒå° Response åšçš„æ›´å‹•ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/32bd1508-ba78-4e94-76a0-adec503fe000/public\" alt=\"img\"></p>\n<p>ä¹Ÿå°±æ˜¯èªªå¦‚æœæŠŠç¨‹å¼æ”¹æˆä¸‹é¢é€™æ¨£ï¼Œå°±å¯ä»¥ç™¼ç¾ä»»æ„ç¶²ç«™éƒ½æœƒè®Šæˆ Google çš„æ¨¡æ¨£ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fetch\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span><span class=\"token function\">handleRequest</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">handleRequest</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://google.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d7409a8b-8203-4e23-6491-309a4cc5b500/public\" alt=\"img\"></p>\n<p>ç†è§£å¾Œå°±æœƒç™¼ç¾ï¼Œå…¶å¯¦ Workers å¯ä»¥å°ç¶²é æœ‰å³æ™‚æ€§çš„æ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯èªªå¯ä»¥å°ç¾æœ‰çš„ç¶²é åŠ ä¸Šæ–°åŠŸèƒ½ï¼Œæˆ–æ˜¯åœ¨ä¸æ›´å‹•åŸæœ¬ç¶²é çš„æƒ…æ³ä¸‹å»ä¿® bugã€‚</p>\n<h2>Wrangler</h2>\n<p>Wrangler æ˜¯ç®¡ç† Workers æœƒç”¨åˆ°çš„ cli å·¥å…·ï¼Œé›–ç„¶ä¸å®‰è£ä¹Ÿæ˜¯å¯ä»¥åœ¨ç¶²é ä¸­æ’°å¯« Workers ï¼Œä½†æ˜¯åŠŸèƒ½å°±æœƒå°‘å¾ˆå¤šï¼Œæ‰€ä»¥é‚„æ˜¯å»ºè­°å®‰è£ä¸€ä¸‹ã€‚é€™è£¡æ˜¯å®˜æ–¹çš„ Repo <a href=\"https://github.com/cloudflare/wrangler2\">cloudflare/wrangler2</a>ã€‚</p>\n<p>ç”¨ npm å®‰è£åˆ° Globalï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i @cloudflare/wrangler -g</code></pre></div>\n<p>é‚„æ˜¯å»ºè­°å»å®˜æ–¹ Repo çœ‹ä¸‹æœ‰æ²’æœ‰å…¶ä»–æ³¨æ„äº‹é …</p>\n<p>å®‰è£å®Œæˆå¾Œè¦ç™»å…¥ Cloudflare å¸³è™Ÿï¼Œ<code class=\"language-text\">wrangler login</code>ï¼Œå†ç”¨ç€è¦½å™¨ç™»å…¥å³å¯ã€‚</p>\n<h2>Init Project</h2>\n<p><code class=\"language-text\">wrangler init &lt;project-name></code> å‰µå»ºæ–°çš„å°ˆæ¡ˆï¼Œé€™ç•¶ä¸­ Wrangler æœƒå•ä¸€äº›å•é¡Œï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚æ±ºå®šã€‚</p>\n<p>init å®Œæˆå¾Œï¼Œå¯ä»¥çœ‹åˆ°è‡ªå‹•ç”¢ç”Ÿäº†ä¸€äº›æª”æ¡ˆï¼ŒåŸºæœ¬ä¸Šæœƒç”¨åˆ°çš„åªæœ‰ <code class=\"language-text\">wrangler.toml</code> å’Œ <code class=\"language-text\">index.js</code> å…©å€‹æª”æ¡ˆã€‚</p>\n<p>ç¾åœ¨å¯ä»¥å…ˆåœ¨ Terminal ä¸­è¼¸å…¥ <code class=\"language-text\">wrangler dev</code>ï¼Œå°±å¯ä»¥è®“ Workers è·‘åœ¨æœ¬åœ°ã€‚</p>\n<h3>Bug</h3>\n<p>å› ç‚ºæˆ‘çš„ Cloudflare ä¸€æ¬¡ç™»å…¥å¤šå€‹ Userï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ wrangler çš„ <strong>2.0.14</strong> æ™‚å€™æœƒå‡º bug ç›´æ¥é–ƒé€€ï¼Œæˆ‘è§£æ±ºçš„æ–¹å¼æ˜¯ç›´æ¥åœ¨ <code class=\"language-text\">wrangler.toml</code> ä¸­è¼¸å…¥ <code class=\"language-text\">account_id</code> ä¾†é¿å… wrangler æœƒéœ€è¦é¸æ“‡å¸³è™Ÿçš„å•é¡Œã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token key property\">account_id</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"xxxxxxxxxxxxxxx\"</span></code></pre></div>\n<h2>Cloudflare Workers KV</h2>\n<p>çœ‹åˆ°åå­—å–ä½œ KVï¼Œç›´è§€çš„å°±æ˜¯è¡¨ç¤º <code class=\"language-text\">key-value</code> éµå€¼å°ï¼Œç¼ºé»æ˜¯ Key åªèƒ½å°ä¸Šä¸€å€‹ Valueï¼Œä¸èƒ½è¦å·¢ç‹€çš„ Value (åƒæ˜¯ Json é‚£æ¨£)ï¼Œè§£æ±ºçš„æ–¹å¼å…¶å¯¦ä¹Ÿæ˜¯ä¸é›£ï¼Œå¯ä»¥ç›´æ¥åœ¨ Value ä¸­å­˜ä¸Šæ•´çš„ Json æª”æ¡ˆï¼Œä½†åœ¨æœ¬æ–‡ä¸æœƒå¤šåšèªªæ˜ï¼Œå¯ä»¥è‡ªå·±ç ”ç©¶çœ‹çœ‹ã€‚</p>\n<p>å¦å¤– Cloudflare ä¹Ÿæœ‰æåˆ°ï¼ŒKV å­˜å–åœ¨å…¨çƒå¯èƒ½ä¸æ˜¯å³æ™‚æ€§çš„ï¼Œå¥½åƒæ˜¯åªä¿è­‰ 60 ç§’å¾ŒæœƒåŒæ­¥åˆ°æ‰€æœ‰ Serverï¼Œé›–ç„¶æˆ‘è¦ºå¾—æœ€æ…¢æ‡‰è©²ä¹Ÿæ˜¯ 5 å…§ç§’å•¦ï¼Œæˆ‘å¾ä¾†æ²’æœ‰æ„Ÿå—åˆ°å»¶é²éï¼Œä½†å¦‚æœå°å³æ™‚æ€§æœ‰ç–‘æ…®çš„å°ˆæ¡ˆå¯èƒ½ä¹Ÿè¦æ³¨æ„ä¸€ä¸‹ã€‚</p>\n<p>ä¸‹é¢å°±ä¾†å‰µå»ºä¸€å€‹ KV namespaceï¼Œé€™å°±æ˜¯ä¸€å€‹ Database çš„åŸºæœ¬å–®ä½ï¼Œç›®å‰ Cloudflare æ˜¯å…è¨±ä¸€å€‹å¸³è™Ÿæœ‰ 100 å€‹ KV namespaceï¼Œæ‰€ä»¥æ­£å¸¸ä¾†èªªæ‡‰è©²ä¹Ÿä¸ç”¨æ“”å¿ƒæœƒç”¨å®Œã€‚ä¸‹é¢ç”¨ <code class=\"language-text\">URLS</code> ç•¶ä½œ namespace çš„åç¨±ï¼Œå› ç‚ºæˆ‘å€‘æ˜¯è¦å­˜çŸ­ç¶²å€çš„è³‡æ–™ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ wrangler kv:namespace create <span class=\"token string\">\"URLS\"</span>\n\nğŸŒ€  Creating namespace with title <span class=\"token string\">\"my-site-MY_KV\"</span>\nâœ¨  Success<span class=\"token operator\">!</span>\nAdd the following to your configuration file:\nkv_namespaces <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> binding <span class=\"token operator\">=</span> <span class=\"token string\">\"URLS\"</span>, <span class=\"token function\">id</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"xxxxxxxxxxxxxxxxxxxxxxx\"</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>ç„¶å¾Œ wrangler æœƒæœ‰å€‹çµ¦ä½ ä¸€å€‹ binding å’Œ idï¼Œå°±ç›´æ¥è¤‡è£½è²¼ä¸Šåˆ° <code class=\"language-text\">wrangler.tmol</code> ä¸­å³å¯ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token key property\">kv_namespaces</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token key property\">binding</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"URLS\"</span><span class=\"token punctuation\">,</span> <span class=\"token key property\">id</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"xxxxxxxxxxxxxxxxxxxxxxx\"</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>å¦‚æœè¦åœ¨ wrangler çš„ dev æ¨¡å¼ä¸­æ¸¬è©¦ KVï¼Œå°±å¤šç”³è«‹ä¸€å€‹ Preview KVï¼Œä¾†é¿å…å°å·²ç¶“ä¸Šç·šçš„æœå‹™é€ æˆå½±éŸ¿ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ wrangler kv:namespace create <span class=\"token string\">\"URLS\"</span> --preview\n\nâ›…ï¸ wrangler <span class=\"token number\">2.0</span>.14\n--------------------\nğŸŒ€ Creating namespace with title <span class=\"token string\">\"URLS\"</span>\nâœ¨ Success<span class=\"token operator\">!</span>\nAdd the following to your configuration <span class=\"token function\">file</span> <span class=\"token keyword\">in</span> your kv_namespaces array:\n<span class=\"token punctuation\">{</span> binding <span class=\"token operator\">=</span> <span class=\"token string\">\"URLS\"</span>, preview_id <span class=\"token operator\">=</span> <span class=\"token string\">\"xxxxxxxxxxxxxxxxxxxx2\"</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>é€™æ¬¡æŠŠ <code class=\"language-text\">preview_id</code> åŠ åœ¨åŸæœ¬çš„ id å¾Œæ–¹å³å¯ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token key property\">kv_namespaces</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token key property\">binding</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"URLS\"</span><span class=\"token punctuation\">,</span> <span class=\"token key property\">id</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"xxxxxxxxxxxxxxxxxxxx\"</span><span class=\"token punctuation\">,</span> <span class=\"token key property\">preview_id</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"xxxxxxxxxxxxxxxxxxxx2\"</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>è¨­å®šå¥½å¾Œï¼Œwrangler æœƒç›´æ¥æŠŠä½ å‰›å‰›å–çš„åå­—ç›´æ¥ç”¨ç’°å¢ƒè®Šæ•¸ (ENV) å‚³å…¥ï¼Œå…·é«”çš„ä½¿ç”¨æ–¹å¼å¯ä»¥ç¹¼çºŒå¾€ä¸‹çœ‹ã€‚</p>\n<h2>Routing</h2>\n<p>ç‚ºäº†æ–¹ä¾¿ç­‰ç­‰æˆ‘å€‘è™•ç†å‚³å…¥çš„ Routingï¼Œæˆ‘å€‘å…ˆä¾†å®‰è£ä¸€å€‹ npm å¥—ä»¶ã€‚å°ä½ æ²’çœ‹éŒ¯ï¼ŒWorkers ä¹Ÿæ˜¯æ”¯æ´ npm å¥—ä»¶çš„ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> itty-router\n\n<span class=\"token function\">npm</span> i itty-router</code></pre></div>\n<p>é€™æ¨£ç­‰ç­‰å°±å¯ä»¥ç”¨ itty-router ä¾†è™•ç†å‚³å…¥çš„ requestã€‚</p>\n<p>æˆ‘å€‘å…ˆå°‡ Handle Request å®Œå…¨ä¸Ÿçµ¦çš„ itty-router ä¾†è™•ç†ï¼Œå°‡ index.js æ”¹æˆä¸‹æ–¹é€™æ¨£ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"itty-router\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">Router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">fetch</span><span class=\"token operator\">:</span> router<span class=\"token punctuation\">.</span>handle<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>å¯ä»¥çœ‹åˆ°ç›´æ¥ export router çš„ handle æ–¹æ³•ï¼Œé€™æ¨£å°±å®Œå…¨æŠŠ Requse äº¤çµ¦ Router ä¾†è™•ç†ã€‚æˆ‘å€‘å…ˆå°‡ root å›å‚³ Hello æ¸¬è©¦çœ‹çœ‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"itty-router\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">Router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> env</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Workers\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">fetch</span><span class=\"token operator\">:</span> router<span class=\"token punctuation\">.</span>handle<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ç¾åœ¨å¯ä»¥ <code class=\"language-text\">wrangler dev</code> ä¸€ä¸‹ï¼Œç„¶å¾Œåˆ° <code class=\"language-text\">loclahost:8787/</code> çœ‹çœ‹æœƒä¸æœƒå›å‚³ Hello Workersã€‚</p>\n<blockquote>\n<p>ä¹‹å¾Œçš„ç¨‹å¼ç¢¼å°±ä¸å†å®Œæ•´çš„å¯«å‡ºä¾†äº†ï¼Œä½†å°±æ˜¯åœ¨é€™å€‹å¤§æ¡†æ¶ä¸‹æ’°å¯«</p>\n</blockquote>\n<h3>New çŸ­ç¶²å€</h3>\n<p>æˆ‘å€‘å¯«ä¸€å€‹ post æ–¹æ³•ä¾†æ¥æ”¶æ–°çš„ç¶²å€ï¼Œä¸¦å›å‚³ä»–çš„æ–°çŸ­ç¶²å€çµ¦ä»–ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">router<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/new\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> env</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// å–å¾— POST JSON BODY ä¸¦è½‰æˆ JS ç‰©ä»¶</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> <span class=\"token punctuation\">{</span> url<span class=\"token punctuation\">,</span> len <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> body<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>url <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token function\">f00</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// JSON æœ‰èª¤ï¼Œå›å‚³ 400 éŒ¯èª¤</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isValidHttpUrl</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token function\">f00</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"URL is not valid\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ç¢ºèªæ˜¯å¦ç‚º Http ç¶²å€</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>len <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> len <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>len <span class=\"token operator\">&lt;</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token function\">f00</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Lenght must be at least 4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç¢ºèªè‡³å°‘å¤§æ–¼ç­‰æ–¼ 4</span>\n  <span class=\"token keyword\">var</span> s <span class=\"token operator\">=</span> <span class=\"token function\">getRandomString</span><span class=\"token punctuation\">(</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ç”¢ç”Ÿè‹±æ–‡äº‚ç¢¼</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">URLS</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// å¾ kv ç¢ºèªæ²’æœ‰é‡è¤‡</span>\n    len<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span> æœ‰é‡è¤‡å°‡ len <span class=\"token operator\">+</span><span class=\"token number\">1</span> å¾Œå†ç”¢ç”Ÿæ–°çš„\n    s <span class=\"token operator\">=</span> <span class=\"token function\">getRandomString</span><span class=\"token punctuation\">(</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">await</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">URLS</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å­˜å…¥ kv</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">f00</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>msg <span class=\"token operator\">?</span> msg <span class=\"token operator\">:</span> <span class=\"token string\">\"BAD REQUEST\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">isValidHttpUrl</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> url<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    url <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URL</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> url<span class=\"token punctuation\">.</span>protocol <span class=\"token operator\">===</span> <span class=\"token string\">\"http:\"</span> <span class=\"token operator\">||</span> url<span class=\"token punctuation\">.</span>protocol <span class=\"token operator\">===</span> <span class=\"token string\">\"https:\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getRandomString</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">len</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> s <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    s <span class=\"token operator\">+=</span> String<span class=\"token punctuation\">.</span><span class=\"token function\">fromCharCode</span><span class=\"token punctuation\">(</span><span class=\"token function\">getRandomInt</span><span class=\"token punctuation\">(</span><span class=\"token number\">26</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">97</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é€™å€‹ POST è¦åƒä¸€å€‹åƒæ˜¯ä¸‹é¢çš„ json bodyï¼Œåˆ†åˆ¥æœ‰è¦ç¸®çš„ç¶²å€ï¼Œå’Œè¦ç”¢å‡ºçš„çŸ­ç¶²å€é•·åº¦ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://tonypepe.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"len\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å¯ä»¥ç™¼ç¾æˆ‘å€‘æ˜¯æ²’æœ‰åšæ¬Šé™æª¢æŸ¥çš„ï¼Œæ‰€ä»¥ä»»ä½•äººåªè¦å° POST <code class=\"language-text\">/new</code>ï¼Œéƒ½å¯ä»¥ç”¢ç”Ÿæ–°çš„çŸ­ç¶²å€ï¼Œä½†æˆ‘è‡ªå·±æ˜¯è¦ºå¾—å•é¡Œä¹Ÿä¸å¤§ï¼Œç•¢ç«Ÿ Cloudflare å°±æ˜¯ä¸€å®¶ ddos é˜²è­·å•†ï¼Œæ‰€ä»¥è¦è¢«æ”»æ“Šåˆ°ä¸€å¤©çš„ä½¿ç”¨é‡éƒ½ç”¨å®Œæ‡‰è©²ä¹Ÿå¾ˆé›£ã€‚æˆ–æ˜¯ä½ æƒ³è¦åšæ¬Šé™æª¢æŸ¥ï¼Œä¹Ÿå¯ä»¥è©¦è‘—å¯¦ä½œçœ‹çœ‹ã€‚</p>\n<h2>Redirect é‡æ–°å°å‘</h2>\n<p>æœ€å¾Œä¸€æ­¥å°±æ˜¯æŠŠçŸ­ç¶²å€é‡æ–°å°å‘åˆ°åŸæœ¬çš„ç¶²å€ï¼Œé€™éƒ¨ä»½å¾ˆç°¡å–®ï¼Œå°±æ˜¯å¾ kv å–å¾—åŸæœ¬çš„ç¶²å€ï¼Œç„¶å¾Œ Response HTTP 303 ä¾†åšé‡æ–°å°å‘ï¼Œå–ä¸åˆ° value å°±çµ¦ 404ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">router<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/:path\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> env</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> params <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> req<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">URLS</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>url <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NOT FOUND\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token number\">404</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token number\">303</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Location\"</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Publish</h2>\n<p><code class=\"language-text\">wrangler publish</code> å°±å¯ä»¥æŠŠç¨‹å¼ç¢¼éƒ¨ç½²åˆ°å…¨çƒçš„ Cloudflare ç¯€é»ï¼Œå¦‚æœæ²’æœ‰è‡ªå·±ç¶²åŸŸï¼ŒCloudflare ä¹Ÿæœƒçµ¦ä½ ä¸€å€‹ <code class=\"language-text\">xxx.workers.dev</code> çš„ç¶²åŸŸå…è²»ä½¿ç”¨ï¼Œå¯ä»¥ç¾åœ¨é€™è£¡æ¸¬è©¦çœ‹çœ‹ï¼Œå†æ±ºå®šè¦ä¸è¦æŠŠè‡ªå·±çš„ç¶²åŸŸç¶å®šä¸Šå»ã€‚</p>\n<h2>å¾Œè¨˜</h2>\n<p>é€™ç¯‡ç”¨ä¸åˆ° 100 è¡Œç¨‹å¼ç¢¼ç†Ÿç·´äº† Cloudflare çš„ Serverless æœå‹™ï¼Œå’Œå¯«å‡ºäº†çŸ­ç¶²å€æ‡‰ç”¨ï¼Œè®“æˆ‘å€‘ä¸ç”¨è‡ªå·±æ¶è¨­è‡ªå·±çš„ Server å°±å¯ä»¥æœ‰å‹•æ…‹ç¶²é çš„åŠŸèƒ½ã€‚æˆ‘é‚„çœ‹åˆ°å®˜æ–¹çš„æ–‡ä»¶ä¸­å¯ä»¥æŠŠ Response åŠ ä¸Š Cors çš„æ¨™é ­ï¼Œè®“åŸæœ¬ä¸å…è¨±è·¨ç«™å­˜å–çš„ api å¯ä»¥è·¨ç«™å­˜å–ï¼Œé›–ç„¶å¾ˆä¸é“å¾·ï¼Œä½†æ˜¯æˆ‘å–œæ­¡ã€‚æˆ‘è‡ªå·±é‚„æƒ³åˆ°å¯ä»¥å°åŸæœ¬çš„éœæ…‹ç¶²é åŠ ä¸Šé™åˆ¶å­˜å–çš„åŠŸèƒ½ï¼Œæˆ–æ˜¯ç¶²é æœ‰èª¤ç›´æ¥æŠŠç¶²é å…ˆå°å‘ 404ï¼Œé€™éƒ½æ˜¯å¾ˆæœ‰è¶£çš„æ‡‰ç”¨ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±ç™¼æ®çœ‹çœ‹ã€‚</p>\n<p>å¦‚æœè¦å®Œæ•´ç¨‹å¼ç¢¼ï¼š<a href=\"https://gist.github.com/TonyPepeBear/f435dae11b83fc2626a49a6b3cc9848b\">Gist</a></p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://developers.cloudflare.com/workers/\">Cloudflare Workers documentation</a></li>\n</ul>","rawMarkdownBody":"\nCloudflare Workers ä¹Ÿæ˜¯ Cloudflare çš„ä½›å¿ƒæœå‹™ä¹‹ä¸€ï¼Œå¯ä»¥æŠŠ node ç¨‹å¼éƒ¨ç½²åˆ° Cloudflare ä¸Šçš„çœ¾å¤šç¯€é»ï¼Œæ•ˆèƒ½ä¹Ÿä¸ä¿—ï¼Œæ¯å¤©é‚„æœ‰ 100,000 æ¬¡çš„å…è²»å‘¼å«ï¼Œä¹Ÿæ²’æœ‰å†·å•Ÿå‹•çš„å•é¡Œï¼Œå°æµé‡ä¸é«˜çš„ç¶²é ä¾†èªªå®Œå…¨å¤ ç”¨ã€‚å¦å¤–ï¼Œé‚„æœ‰ Workers KV å¯ä»¥ç”¨ä¾†å„²å­˜è³‡æ–™ï¼Œé€™å°±å¯ä»¥å¯«å‡ºç°¡å–®çš„å‹•æ…‹ç¶²é ï¼Œç”šè‡³æ˜¯ä¸€äº›æ›´è¤‡é›œçš„æ‡‰ç”¨ã€‚ä»Šå¤©å°±ä¾†å¯«ä¸€å€‹ Serverless çš„çŸ­ç¶²å€æœå‹™ï¼Œä¸¦æŠŠè³‡æ–™å­˜åœ¨ KV ä¸­ï¼Œå°±æˆ‘ç›®å‰è‡ªå·±æ¸¬è©¦ä¸‹ä¾†ï¼ŒWorkers çš„æ•ˆç‡çœŸçš„æ²’è©±èªªã€‚\n\n<!--more-->\n\n## Workers Playground\n\nå¦‚æœæƒ³è¦åœ¨ç¶²é ä¸­å…ˆè©¦è©¦çœ‹ Workersï¼Œå¯ä»¥åˆ° [Cloudflare Workers](https://cloudflareworkers.com/) é€™å€‹ç¶²ç«™ã€‚\n\næœƒæœ‰ä¸€å€‹é è¨­çš„æ¨¡æ¿é•·é€™æ¨£ï¼š\n\n```js\naddEventListener(\"fetch\", (event) => {\n  event.respondWith(handleRequest(event.request));\n});\n\n/**\n * Fetch and log a given request object\n * @param {Request} request\n */\nasync function handleRequest(request) {\n  console.log(\"Got request\", request);\n  const response = await fetch(request);\n  console.log(\"Got response\", response);\n  return response;\n}\n```\n\nè®“æˆ‘å€‘å…ˆä¾†ç†è§£ä¸€ä¸‹ç¨‹å¼ç¢¼ã€‚\n\nå¯ä»¥çœ‹åˆ°ç¨‹å¼æœ‰å…©å€‹ functionï¼Œå…¶ä¸­ `addEventListener(...)` å°±æ˜¯ç¨‹å¼çš„å…¥å£ï¼Œç•¶ Workers æ”¶åˆ° Request ä¹‹å¾Œï¼Œå°±æœƒå‚³å…¥ä½ çµ¦ä»–çš„ functionï¼Œç„¶å¾Œå†æ±ºå®šè¦ç”¨ä»€éº¼ Response å›å‚³åˆ° Clientï¼Œé€™è£¡ä»–å¯«äº†ä¸€å€‹ `handleRequest` çš„ function ä¾†è™•ç†ã€‚æ‰€ä»¥é€™å€‹ç¨‹å¼ç¢¼å¯¦éš›ä¸Šåšçš„äº‹ï¼Œå°±åªæœ‰æŠŠ Request å’Œ Response çµ¦ log å‡ºä¾†ï¼Œå›å‚³åŸæœ¬çš„ç¶²é çš„æ¨£å­ä¸åšä»»ä½•æ›´å‹•ã€‚\n\nä¸‹åœ–æ˜¯ Workers åœ¨ Cloudflare ä¸Šçš„é‹è¡Œé †åºï¼Œå¯ä»¥çœ‹åˆ° Workers è¢«æ”¾åœ¨æœ€å¾Œä¸€å€‹ï¼Œä¹Ÿå°±æ˜¯æœ€å¾Œä¸€å€‹æ±ºå®šè¦å›å‚³ä»€éº¼å…§å®¹çµ¦ User çš„åœ°æ–¹ï¼Œä¹Ÿå¯ä»¥ç†è§£ç‚ºå¯ä»¥åœ¨é€™è£¡å°åŸæœ¬çš„ Response åšæœ€å¾Œçš„æ›´å‹•ï¼Œå†å›å‚³çµ¦ Clientã€‚\n\næ‰€ä»¥é€™å€‹ Playground ä¸Šå¯ä»¥è¼¸å…¥ä»»æ„çš„ URLï¼Œä¾†é è¦½ä½ çš„ Workers åœ¨ä»»ä½•ä¸€å€‹ç¶²ç«™ä¸Šï¼Œæœƒå° Response åšçš„æ›´å‹•ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/32bd1508-ba78-4e94-76a0-adec503fe000/public)\n\nä¹Ÿå°±æ˜¯èªªå¦‚æœæŠŠç¨‹å¼æ”¹æˆä¸‹é¢é€™æ¨£ï¼Œå°±å¯ä»¥ç™¼ç¾ä»»æ„ç¶²ç«™éƒ½æœƒè®Šæˆ Google çš„æ¨¡æ¨£ã€‚\n\n```js\naddEventListener(\"fetch\", (event) => {\n  event.respondWith(handleRequest(event.request));\n});\n\nasync function handleRequest(request) {\n  const response = await fetch(\"https://google.com\");\n  return response;\n}\n```\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d7409a8b-8203-4e23-6491-309a4cc5b500/public)\n\nç†è§£å¾Œå°±æœƒç™¼ç¾ï¼Œå…¶å¯¦ Workers å¯ä»¥å°ç¶²é æœ‰å³æ™‚æ€§çš„æ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯èªªå¯ä»¥å°ç¾æœ‰çš„ç¶²é åŠ ä¸Šæ–°åŠŸèƒ½ï¼Œæˆ–æ˜¯åœ¨ä¸æ›´å‹•åŸæœ¬ç¶²é çš„æƒ…æ³ä¸‹å»ä¿® bugã€‚\n\n## Wrangler\n\nWrangler æ˜¯ç®¡ç† Workers æœƒç”¨åˆ°çš„ cli å·¥å…·ï¼Œé›–ç„¶ä¸å®‰è£ä¹Ÿæ˜¯å¯ä»¥åœ¨ç¶²é ä¸­æ’°å¯« Workers ï¼Œä½†æ˜¯åŠŸèƒ½å°±æœƒå°‘å¾ˆå¤šï¼Œæ‰€ä»¥é‚„æ˜¯å»ºè­°å®‰è£ä¸€ä¸‹ã€‚é€™è£¡æ˜¯å®˜æ–¹çš„ Repo [cloudflare/wrangler2](https://github.com/cloudflare/wrangler2)ã€‚\n\nç”¨ npm å®‰è£åˆ° Globalï¼š\n\n```bash\nnpm i @cloudflare/wrangler -g\n```\n\né‚„æ˜¯å»ºè­°å»å®˜æ–¹ Repo çœ‹ä¸‹æœ‰æ²’æœ‰å…¶ä»–æ³¨æ„äº‹é …\n\nå®‰è£å®Œæˆå¾Œè¦ç™»å…¥ Cloudflare å¸³è™Ÿï¼Œ`wrangler login`ï¼Œå†ç”¨ç€è¦½å™¨ç™»å…¥å³å¯ã€‚\n\n## Init Project\n\n`wrangler init <project-name>` å‰µå»ºæ–°çš„å°ˆæ¡ˆï¼Œé€™ç•¶ä¸­ Wrangler æœƒå•ä¸€äº›å•é¡Œï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚æ±ºå®šã€‚\n\ninit å®Œæˆå¾Œï¼Œå¯ä»¥çœ‹åˆ°è‡ªå‹•ç”¢ç”Ÿäº†ä¸€äº›æª”æ¡ˆï¼ŒåŸºæœ¬ä¸Šæœƒç”¨åˆ°çš„åªæœ‰ `wrangler.toml` å’Œ `index.js` å…©å€‹æª”æ¡ˆã€‚\n\nç¾åœ¨å¯ä»¥å…ˆåœ¨ Terminal ä¸­è¼¸å…¥ `wrangler dev`ï¼Œå°±å¯ä»¥è®“ Workers è·‘åœ¨æœ¬åœ°ã€‚\n\n### Bug\n\nå› ç‚ºæˆ‘çš„ Cloudflare ä¸€æ¬¡ç™»å…¥å¤šå€‹ Userï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ wrangler çš„ **2.0.14** æ™‚å€™æœƒå‡º bug ç›´æ¥é–ƒé€€ï¼Œæˆ‘è§£æ±ºçš„æ–¹å¼æ˜¯ç›´æ¥åœ¨ `wrangler.toml` ä¸­è¼¸å…¥ `account_id` ä¾†é¿å… wrangler æœƒéœ€è¦é¸æ“‡å¸³è™Ÿçš„å•é¡Œã€‚\n\n```toml\naccount_id = \"xxxxxxxxxxxxxxx\"\n```\n\n## Cloudflare Workers KV\n\nçœ‹åˆ°åå­—å–ä½œ KVï¼Œç›´è§€çš„å°±æ˜¯è¡¨ç¤º `key-value` éµå€¼å°ï¼Œç¼ºé»æ˜¯ Key åªèƒ½å°ä¸Šä¸€å€‹ Valueï¼Œä¸èƒ½è¦å·¢ç‹€çš„ Value (åƒæ˜¯ Json é‚£æ¨£)ï¼Œè§£æ±ºçš„æ–¹å¼å…¶å¯¦ä¹Ÿæ˜¯ä¸é›£ï¼Œå¯ä»¥ç›´æ¥åœ¨ Value ä¸­å­˜ä¸Šæ•´çš„ Json æª”æ¡ˆï¼Œä½†åœ¨æœ¬æ–‡ä¸æœƒå¤šåšèªªæ˜ï¼Œå¯ä»¥è‡ªå·±ç ”ç©¶çœ‹çœ‹ã€‚\n\nå¦å¤– Cloudflare ä¹Ÿæœ‰æåˆ°ï¼ŒKV å­˜å–åœ¨å…¨çƒå¯èƒ½ä¸æ˜¯å³æ™‚æ€§çš„ï¼Œå¥½åƒæ˜¯åªä¿è­‰ 60 ç§’å¾ŒæœƒåŒæ­¥åˆ°æ‰€æœ‰ Serverï¼Œé›–ç„¶æˆ‘è¦ºå¾—æœ€æ…¢æ‡‰è©²ä¹Ÿæ˜¯ 5 å…§ç§’å•¦ï¼Œæˆ‘å¾ä¾†æ²’æœ‰æ„Ÿå—åˆ°å»¶é²éï¼Œä½†å¦‚æœå°å³æ™‚æ€§æœ‰ç–‘æ…®çš„å°ˆæ¡ˆå¯èƒ½ä¹Ÿè¦æ³¨æ„ä¸€ä¸‹ã€‚\n\nä¸‹é¢å°±ä¾†å‰µå»ºä¸€å€‹ KV namespaceï¼Œé€™å°±æ˜¯ä¸€å€‹ Database çš„åŸºæœ¬å–®ä½ï¼Œç›®å‰ Cloudflare æ˜¯å…è¨±ä¸€å€‹å¸³è™Ÿæœ‰ 100 å€‹ KV namespaceï¼Œæ‰€ä»¥æ­£å¸¸ä¾†èªªæ‡‰è©²ä¹Ÿä¸ç”¨æ“”å¿ƒæœƒç”¨å®Œã€‚ä¸‹é¢ç”¨ `URLS` ç•¶ä½œ namespace çš„åç¨±ï¼Œå› ç‚ºæˆ‘å€‘æ˜¯è¦å­˜çŸ­ç¶²å€çš„è³‡æ–™ã€‚\n\n```bash\n$ wrangler kv:namespace create \"URLS\"\n\nğŸŒ€  Creating namespace with title \"my-site-MY_KV\"\nâœ¨  Success!\nAdd the following to your configuration file:\nkv_namespaces = [\n  { binding = \"URLS\", id = \"xxxxxxxxxxxxxxxxxxxxxxx\" }\n]\n```\n\nç„¶å¾Œ wrangler æœƒæœ‰å€‹çµ¦ä½ ä¸€å€‹ binding å’Œ idï¼Œå°±ç›´æ¥è¤‡è£½è²¼ä¸Šåˆ° `wrangler.tmol` ä¸­å³å¯ï¼š\n\n```toml\nkv_namespaces = [\n  { binding = \"URLS\", id = \"xxxxxxxxxxxxxxxxxxxxxxx\" }\n]\n```\n\nå¦‚æœè¦åœ¨ wrangler çš„ dev æ¨¡å¼ä¸­æ¸¬è©¦ KVï¼Œå°±å¤šç”³è«‹ä¸€å€‹ Preview KVï¼Œä¾†é¿å…å°å·²ç¶“ä¸Šç·šçš„æœå‹™é€ æˆå½±éŸ¿ï¼š\n\n```bash\n$ wrangler kv:namespace create \"URLS\" --preview\n\nâ›…ï¸ wrangler 2.0.14\n--------------------\nğŸŒ€ Creating namespace with title \"URLS\"\nâœ¨ Success!\nAdd the following to your configuration file in your kv_namespaces array:\n{ binding = \"URLS\", preview_id = \"xxxxxxxxxxxxxxxxxxxx2\" }\n```\n\né€™æ¬¡æŠŠ `preview_id` åŠ åœ¨åŸæœ¬çš„ id å¾Œæ–¹å³å¯ï¼š\n\n```toml\nkv_namespaces = [\n    { binding = \"URLS\", id = \"xxxxxxxxxxxxxxxxxxxx\", preview_id = \"xxxxxxxxxxxxxxxxxxxx2\" }\n]\n```\n\nè¨­å®šå¥½å¾Œï¼Œwrangler æœƒç›´æ¥æŠŠä½ å‰›å‰›å–çš„åå­—ç›´æ¥ç”¨ç’°å¢ƒè®Šæ•¸ (ENV) å‚³å…¥ï¼Œå…·é«”çš„ä½¿ç”¨æ–¹å¼å¯ä»¥ç¹¼çºŒå¾€ä¸‹çœ‹ã€‚\n\n## Routing\n\nç‚ºäº†æ–¹ä¾¿ç­‰ç­‰æˆ‘å€‘è™•ç†å‚³å…¥çš„ Routingï¼Œæˆ‘å€‘å…ˆä¾†å®‰è£ä¸€å€‹ npm å¥—ä»¶ã€‚å°ä½ æ²’çœ‹éŒ¯ï¼ŒWorkers ä¹Ÿæ˜¯æ”¯æ´ npm å¥—ä»¶çš„ï¼š\n\n```bash\nyarn add itty-router\n\nnpm i itty-router\n```\n\né€™æ¨£ç­‰ç­‰å°±å¯ä»¥ç”¨ itty-router ä¾†è™•ç†å‚³å…¥çš„ requestã€‚\n\næˆ‘å€‘å…ˆå°‡ Handle Request å®Œå…¨ä¸Ÿçµ¦çš„ itty-router ä¾†è™•ç†ï¼Œå°‡ index.js æ”¹æˆä¸‹æ–¹é€™æ¨£ï¼š\n\n```js\nimport { Router } from \"itty-router\";\n\nconst router = Router();\n\nexport default {\n  fetch: router.handle,\n};\n```\n\nå¯ä»¥çœ‹åˆ°ç›´æ¥ export router çš„ handle æ–¹æ³•ï¼Œé€™æ¨£å°±å®Œå…¨æŠŠ Requse äº¤çµ¦ Router ä¾†è™•ç†ã€‚æˆ‘å€‘å…ˆå°‡ root å›å‚³ Hello æ¸¬è©¦çœ‹çœ‹ï¼š\n\n```js\nimport { Router } from \"itty-router\";\n\nconst router = Router();\n\nrouter.get(\"/\", async (req, env) => {\n  return new Response(\"Hello Workers\", {\n    status: 200,\n  });\n});\n\nexport default {\n  fetch: router.handle,\n};\n```\n\nç¾åœ¨å¯ä»¥ `wrangler dev` ä¸€ä¸‹ï¼Œç„¶å¾Œåˆ° `loclahost:8787/` çœ‹çœ‹æœƒä¸æœƒå›å‚³ Hello Workersã€‚\n\n> ä¹‹å¾Œçš„ç¨‹å¼ç¢¼å°±ä¸å†å®Œæ•´çš„å¯«å‡ºä¾†äº†ï¼Œä½†å°±æ˜¯åœ¨é€™å€‹å¤§æ¡†æ¶ä¸‹æ’°å¯«\n\n### New çŸ­ç¶²å€\n\næˆ‘å€‘å¯«ä¸€å€‹ post æ–¹æ³•ä¾†æ¥æ”¶æ–°çš„ç¶²å€ï¼Œä¸¦å›å‚³ä»–çš„æ–°çŸ­ç¶²å€çµ¦ä»–ã€‚\n\n```js\nrouter.post(\"/new\", async (req, env) => {\n  const body = await req.json();        // å–å¾— POST JSON BODY ä¸¦è½‰æˆ JS ç‰©ä»¶\n  console.log(JSON.stringify(body));\n  var { url, len } = body;\n  if (url == undefined) return f00(\"\"); // JSON æœ‰èª¤ï¼Œå›å‚³ 400 éŒ¯èª¤\n  if (!isValidHttpUrl(url)) return f00(\"URL is not valid\");  // ç¢ºèªæ˜¯å¦ç‚º Http ç¶²å€\n  if (len == undefined) len = 5;\n  if (len < 4) return f00(\"Lenght must be at least 4\"); // ç¢ºèªè‡³å°‘å¤§æ–¼ç­‰æ–¼ 4\n  var s = getRandomString(len); // ç”¢ç”Ÿè‹±æ–‡äº‚ç¢¼\n  while ((await env.URLS.get(s)) != undefined) { // å¾ kv ç¢ºèªæ²’æœ‰é‡è¤‡\n    len++; æœ‰é‡è¤‡å°‡ len +1 å¾Œå†ç”¢ç”Ÿæ–°çš„\n    s = getRandomString(len);\n  }\n  await env.URLS.put(s, url); // å­˜å…¥ kv\n  return new Response(s);\n});\n\nconst f00 = (msg) => new Response(msg ? msg : \"BAD REQUEST\", { status: 400 });\n\nfunction isValidHttpUrl(string) {\n  let url;\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\nfunction getRandomString(len) {\n  var s = \"\";\n  for (let i = 0; i < len; i++) {\n    s += String.fromCharCode(getRandomInt(26) + 97);\n  }\n  return s;\n}\n```\n\né€™å€‹ POST è¦åƒä¸€å€‹åƒæ˜¯ä¸‹é¢çš„ json bodyï¼Œåˆ†åˆ¥æœ‰è¦ç¸®çš„ç¶²å€ï¼Œå’Œè¦ç”¢å‡ºçš„çŸ­ç¶²å€é•·åº¦ï¼š\n\n```json\n{\n  \"url\": \"https://tonypepe.com\",\n  \"len\": 3\n}\n```\n\nå¯ä»¥ç™¼ç¾æˆ‘å€‘æ˜¯æ²’æœ‰åšæ¬Šé™æª¢æŸ¥çš„ï¼Œæ‰€ä»¥ä»»ä½•äººåªè¦å° POST `/new`ï¼Œéƒ½å¯ä»¥ç”¢ç”Ÿæ–°çš„çŸ­ç¶²å€ï¼Œä½†æˆ‘è‡ªå·±æ˜¯è¦ºå¾—å•é¡Œä¹Ÿä¸å¤§ï¼Œç•¢ç«Ÿ Cloudflare å°±æ˜¯ä¸€å®¶ ddos é˜²è­·å•†ï¼Œæ‰€ä»¥è¦è¢«æ”»æ“Šåˆ°ä¸€å¤©çš„ä½¿ç”¨é‡éƒ½ç”¨å®Œæ‡‰è©²ä¹Ÿå¾ˆé›£ã€‚æˆ–æ˜¯ä½ æƒ³è¦åšæ¬Šé™æª¢æŸ¥ï¼Œä¹Ÿå¯ä»¥è©¦è‘—å¯¦ä½œçœ‹çœ‹ã€‚\n\n## Redirect é‡æ–°å°å‘\n\næœ€å¾Œä¸€æ­¥å°±æ˜¯æŠŠçŸ­ç¶²å€é‡æ–°å°å‘åˆ°åŸæœ¬çš„ç¶²å€ï¼Œé€™éƒ¨ä»½å¾ˆç°¡å–®ï¼Œå°±æ˜¯å¾ kv å–å¾—åŸæœ¬çš„ç¶²å€ï¼Œç„¶å¾Œ Response HTTP 303 ä¾†åšé‡æ–°å°å‘ï¼Œå–ä¸åˆ° value å°±çµ¦ 404ã€‚\n\n```js\nrouter.get(\"/:path\", async (req, env) => {\n  const { params } = req;\n  const url = await env.URLS.get(params.path.toLowerCase());\n  if (url == undefined) return new Response(\"NOT FOUND\", { status: 404 });\n  const response = new Response(\"\", { status: 303 });\n  response.headers.append(\"Location\", url);\n  return response;\n});\n```\n\n## Publish\n\n`wrangler publish` å°±å¯ä»¥æŠŠç¨‹å¼ç¢¼éƒ¨ç½²åˆ°å…¨çƒçš„ Cloudflare ç¯€é»ï¼Œå¦‚æœæ²’æœ‰è‡ªå·±ç¶²åŸŸï¼ŒCloudflare ä¹Ÿæœƒçµ¦ä½ ä¸€å€‹ `xxx.workers.dev` çš„ç¶²åŸŸå…è²»ä½¿ç”¨ï¼Œå¯ä»¥ç¾åœ¨é€™è£¡æ¸¬è©¦çœ‹çœ‹ï¼Œå†æ±ºå®šè¦ä¸è¦æŠŠè‡ªå·±çš„ç¶²åŸŸç¶å®šä¸Šå»ã€‚\n\n## å¾Œè¨˜\n\né€™ç¯‡ç”¨ä¸åˆ° 100 è¡Œç¨‹å¼ç¢¼ç†Ÿç·´äº† Cloudflare çš„ Serverless æœå‹™ï¼Œå’Œå¯«å‡ºäº†çŸ­ç¶²å€æ‡‰ç”¨ï¼Œè®“æˆ‘å€‘ä¸ç”¨è‡ªå·±æ¶è¨­è‡ªå·±çš„ Server å°±å¯ä»¥æœ‰å‹•æ…‹ç¶²é çš„åŠŸèƒ½ã€‚æˆ‘é‚„çœ‹åˆ°å®˜æ–¹çš„æ–‡ä»¶ä¸­å¯ä»¥æŠŠ Response åŠ ä¸Š Cors çš„æ¨™é ­ï¼Œè®“åŸæœ¬ä¸å…è¨±è·¨ç«™å­˜å–çš„ api å¯ä»¥è·¨ç«™å­˜å–ï¼Œé›–ç„¶å¾ˆä¸é“å¾·ï¼Œä½†æ˜¯æˆ‘å–œæ­¡ã€‚æˆ‘è‡ªå·±é‚„æƒ³åˆ°å¯ä»¥å°åŸæœ¬çš„éœæ…‹ç¶²é åŠ ä¸Šé™åˆ¶å­˜å–çš„åŠŸèƒ½ï¼Œæˆ–æ˜¯ç¶²é æœ‰èª¤ç›´æ¥æŠŠç¶²é å…ˆå°å‘ 404ï¼Œé€™éƒ½æ˜¯å¾ˆæœ‰è¶£çš„æ‡‰ç”¨ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±ç™¼æ®çœ‹çœ‹ã€‚\n\nå¦‚æœè¦å®Œæ•´ç¨‹å¼ç¢¼ï¼š[Gist](https://gist.github.com/TonyPepeBear/f435dae11b83fc2626a49a6b3cc9848b)\n\n## Reference\n\n- [Cloudflare Workers documentation](https://developers.cloudflare.com/workers/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Web/cf-workers-short-url.md","excerpt":"Cloudflare Workers ä¹Ÿæ˜¯ Cloudflare çš„ä½›å¿ƒæœå‹™ä¹‹ä¸€ï¼Œå¯ä»¥æŠŠ node ç¨‹å¼éƒ¨ç½²åˆ° Cloudflare ä¸Šçš„çœ¾å¤šç¯€é»ï¼Œæ•ˆèƒ½ä¹Ÿä¸ä¿—ï¼Œæ¯å¤©é‚„æœ‰ 100,000 æ¬¡çš„å…è²»å‘¼å«ï¼Œä¹Ÿæ²’æœ‰å†·å•Ÿå‹•çš„å•é¡Œï¼Œå°æµé‡ä¸é«˜çš„ç¶²é ä¾†èªªå®Œå…¨å¤ ç”¨ã€‚å¦å¤–ï¼Œé‚„æœ‰ Workers KV å¯ä»¥ç”¨ä¾†å„²å­˜è³‡æ–™ï¼Œé€™å°±å¯ä»¥å¯«å‡ºç°¡å–®çš„å‹•æ…‹ç¶²é ï¼Œç”šè‡³æ˜¯ä¸€äº›æ›´è¤‡é›œçš„æ‡‰ç”¨ã€‚ä»Šå¤©å°±ä¾†å¯«ä¸€å€‹ Serverless çš„çŸ­ç¶²â€¦","frontmatter":{"title":"ç”¨ Cloudflare Workers æ¶è¨­ Serverless çŸ­ç¶²å€æœå‹™","date":"2022-06-21T09:15:49.000Z","draft":false,"tags":["cloudflare","workers","worker","web","short","url"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/b6cf9d30-1028-4aa5-c136-0dbc6c098f00/public","description":null}}},{"node":{"id":"1f835006-d336-5140-acce-32c9475d47e1","html":"<p>æœ€è¿‘æŠŠç¶²ç«™å¾ Hugo é·ç§»åˆ° Gatsbyï¼Œé‡åˆ°äº†ä¸€äº›å•é¡Œï¼Œæˆ‘å°±ä¾†ç°¡å–®è¨˜éŒ„ä¸€ä¸‹è§£æ±ºå•é¡Œçš„éç¨‹ï¼Œè€Œä¸”å› ç‚ºæˆ‘å° Node ä¹Ÿä¸æ˜¯å¾ˆç†Ÿï¼Œæ‰€ä»¥ä¸»è¦æ˜¯åœ¨ç•¶ä½œæˆ‘ç·´ç¿’ Node å’Œ Reactã€‚</p>\n<!--more-->\n<h2>Whyï¼Ÿ</h2>\n<ol>\n<li>Hugo å¯¦åœ¨å¾ˆé›£ä½¿ç”¨ Node å¥—ä»¶</li>\n<li>å–®ç´”æƒ³çµ¦è‡ªå·±ä¸€å€‹æ¥è§¸ Node çš„æ©Ÿæœƒ</li>\n</ol>\n<p>è¨±å¤šç¶²é çš„å¥—ä»¶åº«éƒ½æ˜¯ä½¿ç”¨ node é–‹ç™¼çš„ï¼Œä½†å› ç‚º Hugo æ˜¯ç”¨ go é–‹ç™¼ï¼Œé›–ç„¶æœ‰æä¾›å° npm å¥—ä»¶çš„æ”¯æ´ï¼Œä½†æ˜¯é‚„æ˜¯æ²’æœ‰åŸç”Ÿçš„æ–¹ä¾¿ï¼Œåœ¨ç”¨å¥—ä»¶çš„æ™‚å€™å¸¸å¸¸æœƒé‡åˆ°å•é¡Œã€‚æ‰€ä»¥æˆ‘é‚„æ˜¯ä¸‹å®šæ±ºå¿ƒæ›åˆ° Gatsbyï¼Œä¹Ÿå¯ä»¥é †ä¾¿ç†Ÿæ‚‰ä¸€ä¸‹ Reactã€‚å¦å¤–ï¼Œæˆ‘æ˜¯ä½¿ç”¨ TypeScript ä¾†é–‹ç™¼ï¼Œé€™ä¹Ÿæ˜¯æœ‰é»è™å¾…è‡ªå·±ï¼Œä¸éé‚„å¥½é‚„æ˜¯é †åˆ©å®Œæˆï¼Œä¹Ÿå° TS æœ‰å¤šé»èªè­˜ã€‚</p>\n<p>ç›®å‰é‡åˆ°çš„ä¸€å€‹æœ€å¤§çš„ç¼ºé»ï¼Œå¤§æ¦‚å°±æ˜¯ Hugo ç”¢ç”Ÿç¶²é çš„é€Ÿåº¦çœŸçš„è¶…ç´šå¿«ï¼ŒGatsby å› ç‚ºä¾è³´ä¸€å¤§å † npm å¥—ä»¶ï¼Œæ‰€ä»¥æˆ‘åœ¨ Cloudflare Pages ä¸Šçš„å¹³å‡éœ€è¦å¤§ç´„ 5 åˆ†é˜ç¶²é æ‰èƒ½å»ºç½®å¥½ã€‚</p>\n<h2>é‡åˆ°çš„å•é¡Œ</h2>\n<p>ç›®å‰é‡åˆ°çš„ä¸»è¦å•é¡Œå¤§æ¦‚å°±æ˜¯ä¸‹é¢ä¸‰é»ï¼š</p>\n<ol>\n<li>npm build ä¸æˆåŠŸ</li>\n<li>è§€çœ‹æ›´å¤šçš„åŠŸèƒ½</li>\n<li>meilisearch</li>\n</ol>\n<h2>npm to yarn</h2>\n<p>ä¸€é–‹å§‹æˆ‘æ˜¯ä½¿ç”¨ npm ä½œç‚ºå¥—ä»¶ç®¡ç†ï¼Œæˆ‘åœ¨æœ¬æ©Ÿé–‹ç™¼æ™‚éƒ½æ²’æœ‰é‡åˆ°ä»€éº¼å•é¡Œï¼Œç›´åˆ°æˆ‘å¹¾ä¹éƒ½é–‹ç™¼å®Œæˆå¾Œï¼Œæˆ‘å°±å°‡ç¶²é  push åˆ° GitHub ä¸Šï¼ŒGitHub Actions åœ¨ Build æ™‚ä¹Ÿæ²’æœ‰é‡åˆ°å•é¡Œï¼Œç›´åˆ° Cloudflare Pages åœ¨å»ºç½®æ™‚ï¼Œå°±æ˜¯æœƒä¸€ç›´å¤±æ•—ï¼Œæˆ‘ä¹Ÿä¸€ç›´ç¢ºå®š node å’Œ npm ç‰ˆæœ¬è·Ÿæˆ‘æœ¬åœ°çš„ä¸€æ¨£ï¼Œä½†ç„¡è«–å¦‚ä½•å°±æ˜¯å¤±æ•—ï¼Œç›´åˆ°æˆ‘ä¸Šç¶²æŸ¥å¾Œï¼Œæ‰ç™¼ç¾ Gatsby å®˜æ–¹ä¹Ÿæ˜¯å»ºè­°ä½¿ç”¨ yarnï¼Œnpm å¥½åƒæœƒé‡åˆ°å•é¡Œã€‚æˆ‘å°±è©¦è‘— <code class=\"language-text\">yarn</code> ä¸€ä¸‹ï¼Œè®“å°ˆæ¡ˆè‡ªå‹•é·ç§»åˆ° yarnï¼Œå°±æ²’åˆå†å‡ºç¾å•é¡Œäº†ï¼Œå¯¦åœ¨è«åå…¶å¦™ã€‚æ‰€ä»¥ä¹Ÿæ˜¯å»ºè­°å¤§å®¶ä»¥å¾Œè‹¥æœ‰ä½¿ç”¨åˆ° Gatsbyï¼Œé‚„æ˜¯ä½¿ç”¨ yarn æ¯”è¼ƒå¥½ä¸€é»ã€‚</p>\n<h2>è§€çœ‹æ›´å¤š</h2>\n<p>åœ¨ Hugo æ™‚ï¼ŒHugo æ”¯æ´åœ¨ Markdown ä¸­ä½¿ç”¨ <code class=\"language-text\">&lt;!--more--></code> çš„æ¨™ç±¤ä¾†æå–æ¨™ç±¤å‰çš„éƒ¨åˆ†ç•¶ä½œæ–‡ç« æ‘˜è¦ï¼Œç”¨ä¾†é¡¯ç¤ºåœ¨ ListTemplateï¼Œè€Œ Gatsby åªæœ‰æä¾›æå–å‰ n å­—çš„åŠŸèƒ½ã€‚è€Œé€™å°æˆ‘ç¶²é çš„ç¾è§€ç¨‹åº¦å°±æœ‰ä¸€é»ä¸æ–¹ä¾¿ï¼Œå› ç‚ºæˆ‘ Hugo å·²ç¶“ç´¯è¨ˆäº†ä¸å°‘æ–‡ç« ï¼Œè‹¥è¦ç¾åœ¨å†å»ä¸€ç¯‡ç¯‡ä¿®æ”¹ï¼Œä¹Ÿæ˜¯æœƒæœ‰é»éº»ç…©ï¼Œæ‰€ä»¥åªå¥½è‡ªå·±ç¨å¾®ç ”ç©¶ä¸€ä¸‹è¦æ€éº¼è™•ç†ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\">Hello\n\næ‘˜è¦\n\n<span class=\"token comment\">&lt;!--more--></span>\n\næ­£æ–‡\n\næ­£æ–‡</code></pre></div>\n<p>æˆ‘è™•ç†çš„æ–¹å¼ç°¡å–®æš´åŠ›ï¼Œæˆ‘ç™¼ç¾ Gatsby åœ¨ GraphQL çš„æ™‚å€™ï¼Œå¯ä»¥æ‹¿åˆ° RawMarkdownï¼Œè€Œä¸”é€™å€‹ä¹Ÿæœƒä¿ç•™è¨»è§£ï¼Œæ‰€ä»¥æˆ‘éˆæ©Ÿä¸€å‹•ï¼Œæˆ‘å°±è‡ªå·±ä½¿ç”¨ Node å¥—ä»¶ï¼Œè‡ªå·±è§£æ Markdown ä¸å°±å¥½äº†ï¼Ÿæ‰€ä»¥æˆ‘å°±ç”¨ <code class=\"language-text\">marked</code> å¥—ä»¶ï¼Œå¹«æˆ‘æŠŠ md è½‰æˆ htmlã€‚ç¯„ä¾‹å¤§è‡´å¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> marked <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"marked\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Summary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> summary <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>rawMarkdownBody<span class=\"token punctuation\">.</span><span class=\"token function\">spllit</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;!--more-->\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div dangerouslaSetSetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token operator\">:</span> marked<span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>summary<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>MeiliSearch</h2>\n<p>æˆ‘åŸæœ¬çš„ Hugo ç¶²é ï¼Œå°±æ˜¯ä½¿ç”¨ MeiliSearch ä¾†ç•¶æˆ‘çš„æœå°‹åŠŸèƒ½ï¼Œå¯ä»¥åƒè€ƒé€™å€‹ <a href=\"/search/tag?tag=meilisearch\">tag</a> ã€‚æ‰€ä»¥ä¸€æ¨£æ˜¯æœƒéœ€è¦ç”¢ç”Ÿä¸€å€‹ <code class=\"language-text\">SearchIndex.json</code>ï¼Œæˆ‘ç›´æ¥åœ¨ <code class=\"language-text\">gatsby-node.ts</code> è£¡çš„ <code class=\"language-text\">noPostBuild</code> æ‰‹å‹•ç”¢ç”Ÿ jsonï¼Œå†ç”¨ <code class=\"language-text\">fs</code> å¯«å…¥æª”æ¡ˆï¼Œç›´æ¥çµ¦å¤§å®¶ç¨‹å¼ç¢¼åƒè€ƒã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> onPostBuild<span class=\"token operator\">:</span> GatsbyNode<span class=\"token punctuation\">[</span><span class=\"token string\">\"onPostBuild\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  graphql<span class=\"token punctuation\">,</span>\n  actions<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> errors<span class=\"token punctuation\">,</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token generic-function\"><span class=\"token function\">graphql</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>ArticleListData<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>articleGraphql<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// SearchIndex.json</span>\n  <span class=\"token keyword\">const</span> searchArr<span class=\"token operator\">:</span> SearchIndex<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  data<span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> summary <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>rawMarkdownBody<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;!--more-->\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span>\n      <span class=\"token string\">\"/posts/\"</span> <span class=\"token operator\">+</span>\n      node<span class=\"token punctuation\">.</span>fileAbsolutePath\n        <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/posts/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".md\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> miliseconds <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    searchArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      id<span class=\"token operator\">:</span> index<span class=\"token punctuation\">,</span>\n      date<span class=\"token operator\">:</span> miliseconds<span class=\"token punctuation\">,</span>\n      url<span class=\"token operator\">:</span> url<span class=\"token punctuation\">,</span>\n      title<span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n      summary<span class=\"token operator\">:</span> summary<span class=\"token punctuation\">,</span>\n      content<span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      tags<span class=\"token operator\">:</span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./public/SearchIndex.json\"</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>searchArr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ç”¢ç”Ÿ Json å¾Œï¼Œæˆ‘ä¸€æ¨£æ˜¯ä½¿ç”¨ GitHub Actions ä¾†è‡ªå‹•æŠŠ Index æ¨åˆ° MeiliSearch Serverã€‚</p>\n<h2>Tag Page</h2>\n<p>å…¶å¯¦ Gatsby æ‡‰è©²ä¹Ÿæ˜¯æœ‰æ–¹æ³•å¯ä»¥ç”¢ç”Ÿ Tag Pageï¼Œä½†æ˜¯å› ç‚ºæˆ‘æƒ³åˆ°è¦ç”¨ Tag Page æ™‚ï¼Œæˆ‘å·²ç¶“å¼„å¥½ MeiliSearch äº†ï¼Œæ‰€ä»¥æˆ‘å°±éˆæ©Ÿä¸€å‹•ï¼Œæƒ³æƒ³æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç›´æ¥ç°¡å–®çš„ä½¿ç”¨ MeiliSearch ä¾†å‹•æ…‹çš„ç”¢ç”Ÿ Tag Page å°±å¥½ï¼Œçµæœé‚„çœŸçš„è¢«æˆ‘å¼„æˆåŠŸäº†ï¼Œå°±ä¾†ç´€éŒ„ä¸€ä¸‹æˆ‘å¤§æ¦‚çš„æ€è·¯ã€‚é›–ç„¶æˆ‘çŸ¥é“é€™å…«æˆä¸æ˜¯ä»€éº¼å¥½æ–¹æ³•ï¼Œä½†æ˜¯ç°¡å–®æš´åŠ›ã€‚</p>\n<p>MeiliSearch å¯ä»¥è¨­å®š <code class=\"language-text\">filterableAttributes</code> çš„å±¬æ€§ï¼Œæ‰€ä»¥æˆ‘æŠŠæˆ‘çš„ Index ä¸­çš„ Tag å±¬æ€§è¨­å®šæˆå¯ä»¥ Filterableï¼Œç„¶å¾Œå†å–å¾—ç¶²å€çš„ Paramsï¼Œæœ€å¾Œå‘ MeiliSearch æœå°‹å¾Œå‹•æ…‹çš„æŠŠçµæœé¡¯ç¤ºåœ¨ç¶²é ä¸Šã€‚ä¹Ÿå¯ä»¥åƒè€ƒ<a href=\"https://docs.meilisearch.com/learn/advanced/filtering_and_faceted_search.html#configuring-filters\">å®˜æ–¹æ–‡ä»¶</a>ã€‚</p>\n<p>é€™æ™‚é‡åˆ°çš„å•é¡Œå°±æ˜¯ Gatsby æ˜¯ Server Side Renderingï¼Œæ‰€ä»¥å–çš„ Params è¦ä½¿ç”¨é¡å¤–çš„ pluginï¼Œæˆ‘æ˜¯ä½¿ç”¨ <code class=\"language-text\">gatsby-plugin-use-query-params</code>ï¼Œå°±å¯ä»¥åƒæ˜¯ React çš„ useState çš„æ–¹å¼ä¾†å–çš„ç¶²å€çš„ Parmã€‚</p>\n<p>ä¹Ÿæ˜¯æä¾›éƒ¨åˆ†çš„ç¨‹å¼ç¢¼çµ¦å¤§å®¶åƒè€ƒï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">SearchTags</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> tag <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useQueryParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> tag<span class=\"token operator\">:</span> StringParam <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// å–çš„ Params</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>result<span class=\"token punctuation\">,</span> setResult<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> setIsLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// åŸ·è¡Œæœå°‹</span>\n    client\n      <span class=\"token punctuation\">.</span><span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"gatsby-blog\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        filter<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"tags=\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>tag <span class=\"token operator\">?</span> tag <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        limit<span class=\"token operator\">:</span> Number<span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_SAFE_INTEGER</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>res<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setResult</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>MainLayout title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"tag: \"</span> <span class=\"token operator\">+</span> tag <span class=\"token operator\">+</span> <span class=\"token string\">\" - TonyPepe\"</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token string\">\"my-4 bg-white rounded-md py-4 px-6 text-2xl\"</span><span class=\"token operator\">></span>\n          <span class=\"token punctuation\">{</span><span class=\"token string\">\"Tag: \"</span> <span class=\"token operator\">+</span> tag<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>isLoading <span class=\"token operator\">?</span> <span class=\"token operator\">&lt;</span>LoadingChild <span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>ResultClild hits<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>result<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>MainLayout<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MeiliSearch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  host<span class=\"token operator\">:</span> <span class=\"token string\">\"https://search.tonypepe.com\"</span><span class=\"token punctuation\">,</span>\n  apiKey<span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>å¾Œç´€</h2>\n<p>Node åœ¨å»ºç½®ä¸Šå¯¦åœ¨æ˜¯å¤ªæ…¢ï¼ŒçœŸçš„æœƒæœ‰ä¸€é»å—ä¸äº†ï¼Œæ¯æ¬¡å…‰æ˜¯è¦ Run èµ· Dev Serverï¼Œå°±è‡³å°‘éœ€è¦ 30 ç§’ï¼Œç›¸æ¯” Hugo å°±ç®—æ˜¯æœ‰è£ä¸€é»é»çš„ npm å¥—ä»¶ï¼Œé‚„æ˜¯åªè¦ 10 ç§’å·¦å³å°±å¯ä»¥é–‹å§‹å¯«ç¶²é äº†ã€‚</p>\n<p>ç•¶ç„¶ï¼Œä½¿ç”¨ Gatsby é–‹ç™¼çš„å¥½è™•ä¹Ÿæ˜¯å¾ˆå¤šï¼Œå¯ä»¥æœ€å¤§åŒ–çš„è‡ªè¨‚ç¶²é çš„é•·ç›¸å’ŒåŠŸèƒ½ï¼Œä¸æœƒè¢« Hugo çš„åŠŸèƒ½é™åˆ¶ä½ï¼Œå¦‚æœç¼ºå°‘äº†ä»€éº¼åŠŸèƒ½ï¼Œéƒ½å¯ä»¥è‡ªå·±ç”¨ js é–‹ç™¼å‡ºä¾†ï¼Œè€Œä¸”åœ¨ä½¿ç”¨ä¸€äº› Web Library å’Œ React çœŸçš„å¤ªæ–¹ä¾¿äº†ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://gatsbyjs.org/\">Gatsby</a></li>\n<li><a href=\"https://docs.meilisearch.com/learn/advanced/filtering_and_faceted_search.html#configuring-filters\">MeiliSearch - Filtering and faceted search</a></li>\n</ul>","rawMarkdownBody":"\næœ€è¿‘æŠŠç¶²ç«™å¾ Hugo é·ç§»åˆ° Gatsbyï¼Œé‡åˆ°äº†ä¸€äº›å•é¡Œï¼Œæˆ‘å°±ä¾†ç°¡å–®è¨˜éŒ„ä¸€ä¸‹è§£æ±ºå•é¡Œçš„éç¨‹ï¼Œè€Œä¸”å› ç‚ºæˆ‘å° Node ä¹Ÿä¸æ˜¯å¾ˆç†Ÿï¼Œæ‰€ä»¥ä¸»è¦æ˜¯åœ¨ç•¶ä½œæˆ‘ç·´ç¿’ Node å’Œ Reactã€‚\n\n<!--more-->\n\n## Whyï¼Ÿ\n\n1. Hugo å¯¦åœ¨å¾ˆé›£ä½¿ç”¨ Node å¥—ä»¶\n2. å–®ç´”æƒ³çµ¦è‡ªå·±ä¸€å€‹æ¥è§¸ Node çš„æ©Ÿæœƒ\n\nè¨±å¤šç¶²é çš„å¥—ä»¶åº«éƒ½æ˜¯ä½¿ç”¨ node é–‹ç™¼çš„ï¼Œä½†å› ç‚º Hugo æ˜¯ç”¨ go é–‹ç™¼ï¼Œé›–ç„¶æœ‰æä¾›å° npm å¥—ä»¶çš„æ”¯æ´ï¼Œä½†æ˜¯é‚„æ˜¯æ²’æœ‰åŸç”Ÿçš„æ–¹ä¾¿ï¼Œåœ¨ç”¨å¥—ä»¶çš„æ™‚å€™å¸¸å¸¸æœƒé‡åˆ°å•é¡Œã€‚æ‰€ä»¥æˆ‘é‚„æ˜¯ä¸‹å®šæ±ºå¿ƒæ›åˆ° Gatsbyï¼Œä¹Ÿå¯ä»¥é †ä¾¿ç†Ÿæ‚‰ä¸€ä¸‹ Reactã€‚å¦å¤–ï¼Œæˆ‘æ˜¯ä½¿ç”¨ TypeScript ä¾†é–‹ç™¼ï¼Œé€™ä¹Ÿæ˜¯æœ‰é»è™å¾…è‡ªå·±ï¼Œä¸éé‚„å¥½é‚„æ˜¯é †åˆ©å®Œæˆï¼Œä¹Ÿå° TS æœ‰å¤šé»èªè­˜ã€‚\n\nç›®å‰é‡åˆ°çš„ä¸€å€‹æœ€å¤§çš„ç¼ºé»ï¼Œå¤§æ¦‚å°±æ˜¯ Hugo ç”¢ç”Ÿç¶²é çš„é€Ÿåº¦çœŸçš„è¶…ç´šå¿«ï¼ŒGatsby å› ç‚ºä¾è³´ä¸€å¤§å † npm å¥—ä»¶ï¼Œæ‰€ä»¥æˆ‘åœ¨ Cloudflare Pages ä¸Šçš„å¹³å‡éœ€è¦å¤§ç´„ 5 åˆ†é˜ç¶²é æ‰èƒ½å»ºç½®å¥½ã€‚\n\n## é‡åˆ°çš„å•é¡Œ\n\nç›®å‰é‡åˆ°çš„ä¸»è¦å•é¡Œå¤§æ¦‚å°±æ˜¯ä¸‹é¢ä¸‰é»ï¼š\n\n1. npm build ä¸æˆåŠŸ\n2. è§€çœ‹æ›´å¤šçš„åŠŸèƒ½\n3. meilisearch\n\n## npm to yarn\n\nä¸€é–‹å§‹æˆ‘æ˜¯ä½¿ç”¨ npm ä½œç‚ºå¥—ä»¶ç®¡ç†ï¼Œæˆ‘åœ¨æœ¬æ©Ÿé–‹ç™¼æ™‚éƒ½æ²’æœ‰é‡åˆ°ä»€éº¼å•é¡Œï¼Œç›´åˆ°æˆ‘å¹¾ä¹éƒ½é–‹ç™¼å®Œæˆå¾Œï¼Œæˆ‘å°±å°‡ç¶²é  push åˆ° GitHub ä¸Šï¼ŒGitHub Actions åœ¨ Build æ™‚ä¹Ÿæ²’æœ‰é‡åˆ°å•é¡Œï¼Œç›´åˆ° Cloudflare Pages åœ¨å»ºç½®æ™‚ï¼Œå°±æ˜¯æœƒä¸€ç›´å¤±æ•—ï¼Œæˆ‘ä¹Ÿä¸€ç›´ç¢ºå®š node å’Œ npm ç‰ˆæœ¬è·Ÿæˆ‘æœ¬åœ°çš„ä¸€æ¨£ï¼Œä½†ç„¡è«–å¦‚ä½•å°±æ˜¯å¤±æ•—ï¼Œç›´åˆ°æˆ‘ä¸Šç¶²æŸ¥å¾Œï¼Œæ‰ç™¼ç¾ Gatsby å®˜æ–¹ä¹Ÿæ˜¯å»ºè­°ä½¿ç”¨ yarnï¼Œnpm å¥½åƒæœƒé‡åˆ°å•é¡Œã€‚æˆ‘å°±è©¦è‘— `yarn` ä¸€ä¸‹ï¼Œè®“å°ˆæ¡ˆè‡ªå‹•é·ç§»åˆ° yarnï¼Œå°±æ²’åˆå†å‡ºç¾å•é¡Œäº†ï¼Œå¯¦åœ¨è«åå…¶å¦™ã€‚æ‰€ä»¥ä¹Ÿæ˜¯å»ºè­°å¤§å®¶ä»¥å¾Œè‹¥æœ‰ä½¿ç”¨åˆ° Gatsbyï¼Œé‚„æ˜¯ä½¿ç”¨ yarn æ¯”è¼ƒå¥½ä¸€é»ã€‚\n\n## è§€çœ‹æ›´å¤š\n\nåœ¨ Hugo æ™‚ï¼ŒHugo æ”¯æ´åœ¨ Markdown ä¸­ä½¿ç”¨ `<!--more-->` çš„æ¨™ç±¤ä¾†æå–æ¨™ç±¤å‰çš„éƒ¨åˆ†ç•¶ä½œæ–‡ç« æ‘˜è¦ï¼Œç”¨ä¾†é¡¯ç¤ºåœ¨ ListTemplateï¼Œè€Œ Gatsby åªæœ‰æä¾›æå–å‰ n å­—çš„åŠŸèƒ½ã€‚è€Œé€™å°æˆ‘ç¶²é çš„ç¾è§€ç¨‹åº¦å°±æœ‰ä¸€é»ä¸æ–¹ä¾¿ï¼Œå› ç‚ºæˆ‘ Hugo å·²ç¶“ç´¯è¨ˆäº†ä¸å°‘æ–‡ç« ï¼Œè‹¥è¦ç¾åœ¨å†å»ä¸€ç¯‡ç¯‡ä¿®æ”¹ï¼Œä¹Ÿæ˜¯æœƒæœ‰é»éº»ç…©ï¼Œæ‰€ä»¥åªå¥½è‡ªå·±ç¨å¾®ç ”ç©¶ä¸€ä¸‹è¦æ€éº¼è™•ç†ã€‚\n\n```md\nHello\n\næ‘˜è¦\n\n<!--more-->\n\næ­£æ–‡\n\næ­£æ–‡\n```\n\næˆ‘è™•ç†çš„æ–¹å¼ç°¡å–®æš´åŠ›ï¼Œæˆ‘ç™¼ç¾ Gatsby åœ¨ GraphQL çš„æ™‚å€™ï¼Œå¯ä»¥æ‹¿åˆ° RawMarkdownï¼Œè€Œä¸”é€™å€‹ä¹Ÿæœƒä¿ç•™è¨»è§£ï¼Œæ‰€ä»¥æˆ‘éˆæ©Ÿä¸€å‹•ï¼Œæˆ‘å°±è‡ªå·±ä½¿ç”¨ Node å¥—ä»¶ï¼Œè‡ªå·±è§£æ Markdown ä¸å°±å¥½äº†ï¼Ÿæ‰€ä»¥æˆ‘å°±ç”¨ `marked` å¥—ä»¶ï¼Œå¹«æˆ‘æŠŠ md è½‰æˆ htmlã€‚ç¯„ä¾‹å¤§è‡´å¦‚ä¸‹ï¼š\n\n```typescript\nimport { marked } from \"marked\";\n\nexport default function Summary({ node }: Props) {\n  const summary = node.rawMarkdownBody.spllit(\"<!--more-->\")[0];\n  return <div dangerouslaSetSetInnerHTML={{ __html: marked.parse(summary) }} />;\n}\n```\n\n## MeiliSearch\n\næˆ‘åŸæœ¬çš„ Hugo ç¶²é ï¼Œå°±æ˜¯ä½¿ç”¨ MeiliSearch ä¾†ç•¶æˆ‘çš„æœå°‹åŠŸèƒ½ï¼Œå¯ä»¥åƒè€ƒé€™å€‹ [tag](/search/tag?tag=meilisearch) ã€‚æ‰€ä»¥ä¸€æ¨£æ˜¯æœƒéœ€è¦ç”¢ç”Ÿä¸€å€‹ `SearchIndex.json`ï¼Œæˆ‘ç›´æ¥åœ¨ `gatsby-node.ts` è£¡çš„ `noPostBuild` æ‰‹å‹•ç”¢ç”Ÿ jsonï¼Œå†ç”¨ `fs` å¯«å…¥æª”æ¡ˆï¼Œç›´æ¥çµ¦å¤§å®¶ç¨‹å¼ç¢¼åƒè€ƒã€‚\n\n```typescript\nexport const onPostBuild: GatsbyNode[\"onPostBuild\"] = async ({\n  graphql,\n  actions,\n}) => {\n  const { errors, data } = await graphql<ArticleListData>(articleGraphql);\n  // SearchIndex.json\n  const searchArr: SearchIndex[] = [];\n  data!!.allMarkdownRemark.edges.forEach(({ node }, index) => {\n    const summary = node.rawMarkdownBody.split(\"<!--more-->\")[0];\n    const url =\n      \"/posts/\" +\n      node.fileAbsolutePath\n        .split(\"/posts/\")[1]\n        .split(\".md\")[0]\n        .replace(\" \", \"-\")\n        .toLowerCase();\n    const miliseconds = new Date(node.frontmatter.date).getTime();\n    searchArr.push({\n      id: index,\n      date: miliseconds,\n      url: url,\n      title: node.frontmatter.title,\n      summary: summary,\n      content: node.internal.content.replace(\"\\n\", \" \"),\n      tags: node.frontmatter.tags,\n    });\n  });\n  fs.writeFileSync(\"./public/SearchIndex.json\", JSON.stringify(searchArr));\n};\n```\n\nç”¢ç”Ÿ Json å¾Œï¼Œæˆ‘ä¸€æ¨£æ˜¯ä½¿ç”¨ GitHub Actions ä¾†è‡ªå‹•æŠŠ Index æ¨åˆ° MeiliSearch Serverã€‚\n\n## Tag Page\n\nå…¶å¯¦ Gatsby æ‡‰è©²ä¹Ÿæ˜¯æœ‰æ–¹æ³•å¯ä»¥ç”¢ç”Ÿ Tag Pageï¼Œä½†æ˜¯å› ç‚ºæˆ‘æƒ³åˆ°è¦ç”¨ Tag Page æ™‚ï¼Œæˆ‘å·²ç¶“å¼„å¥½ MeiliSearch äº†ï¼Œæ‰€ä»¥æˆ‘å°±éˆæ©Ÿä¸€å‹•ï¼Œæƒ³æƒ³æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç›´æ¥ç°¡å–®çš„ä½¿ç”¨ MeiliSearch ä¾†å‹•æ…‹çš„ç”¢ç”Ÿ Tag Page å°±å¥½ï¼Œçµæœé‚„çœŸçš„è¢«æˆ‘å¼„æˆåŠŸäº†ï¼Œå°±ä¾†ç´€éŒ„ä¸€ä¸‹æˆ‘å¤§æ¦‚çš„æ€è·¯ã€‚é›–ç„¶æˆ‘çŸ¥é“é€™å…«æˆä¸æ˜¯ä»€éº¼å¥½æ–¹æ³•ï¼Œä½†æ˜¯ç°¡å–®æš´åŠ›ã€‚\n\nMeiliSearch å¯ä»¥è¨­å®š `filterableAttributes` çš„å±¬æ€§ï¼Œæ‰€ä»¥æˆ‘æŠŠæˆ‘çš„ Index ä¸­çš„ Tag å±¬æ€§è¨­å®šæˆå¯ä»¥ Filterableï¼Œç„¶å¾Œå†å–å¾—ç¶²å€çš„ Paramsï¼Œæœ€å¾Œå‘ MeiliSearch æœå°‹å¾Œå‹•æ…‹çš„æŠŠçµæœé¡¯ç¤ºåœ¨ç¶²é ä¸Šã€‚ä¹Ÿå¯ä»¥åƒè€ƒ[å®˜æ–¹æ–‡ä»¶](https://docs.meilisearch.com/learn/advanced/filtering_and_faceted_search.html#configuring-filters)ã€‚\n\né€™æ™‚é‡åˆ°çš„å•é¡Œå°±æ˜¯ Gatsby æ˜¯ Server Side Renderingï¼Œæ‰€ä»¥å–çš„ Params è¦ä½¿ç”¨é¡å¤–çš„ pluginï¼Œæˆ‘æ˜¯ä½¿ç”¨ `gatsby-plugin-use-query-params`ï¼Œå°±å¯ä»¥åƒæ˜¯ React çš„ useState çš„æ–¹å¼ä¾†å–çš„ç¶²å€çš„ Parmã€‚\n\nä¹Ÿæ˜¯æä¾›éƒ¨åˆ†çš„ç¨‹å¼ç¢¼çµ¦å¤§å®¶åƒè€ƒï¼š\n\n```typescript\nexport default function SearchTags() {\n  const [{ tag }, _] = useQueryParams({ tag: StringParam }); // å–çš„ Params\n  const [result, setResult] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(true);\n  React.useEffect(() => {\n    // åŸ·è¡Œæœå°‹\n    client\n      .index(\"gatsby-blog\")\n      .search(\"\", {\n        filter: [\"tags=\" + (tag ? tag : \"\")],\n        limit: Number.MAX_SAFE_INTEGER,\n      })\n      .then((res: any) => {\n        setResult(res.hits);\n        setIsLoading(false);\n      });\n  }, []);\n  return (\n    <MainLayout title={\"tag: \" + tag + \" - TonyPepe\"}>\n      <div>\n        <h1 className=\"my-4 bg-white rounded-md py-4 px-6 text-2xl\">\n          {\"Tag: \" + tag}\n        </h1>\n        {isLoading ? <LoadingChild /> : <ResultClild hits={result} />}\n      </div>\n    </MainLayout>\n  );\n}\n\nconst client = new MeiliSearch({\n  host: \"https://search.tonypepe.com\",\n  apiKey: \"\",\n});\n```\n\n## å¾Œç´€\n\nNode åœ¨å»ºç½®ä¸Šå¯¦åœ¨æ˜¯å¤ªæ…¢ï¼ŒçœŸçš„æœƒæœ‰ä¸€é»å—ä¸äº†ï¼Œæ¯æ¬¡å…‰æ˜¯è¦ Run èµ· Dev Serverï¼Œå°±è‡³å°‘éœ€è¦ 30 ç§’ï¼Œç›¸æ¯” Hugo å°±ç®—æ˜¯æœ‰è£ä¸€é»é»çš„ npm å¥—ä»¶ï¼Œé‚„æ˜¯åªè¦ 10 ç§’å·¦å³å°±å¯ä»¥é–‹å§‹å¯«ç¶²é äº†ã€‚\n\nç•¶ç„¶ï¼Œä½¿ç”¨ Gatsby é–‹ç™¼çš„å¥½è™•ä¹Ÿæ˜¯å¾ˆå¤šï¼Œå¯ä»¥æœ€å¤§åŒ–çš„è‡ªè¨‚ç¶²é çš„é•·ç›¸å’ŒåŠŸèƒ½ï¼Œä¸æœƒè¢« Hugo çš„åŠŸèƒ½é™åˆ¶ä½ï¼Œå¦‚æœç¼ºå°‘äº†ä»€éº¼åŠŸèƒ½ï¼Œéƒ½å¯ä»¥è‡ªå·±ç”¨ js é–‹ç™¼å‡ºä¾†ï¼Œè€Œä¸”åœ¨ä½¿ç”¨ä¸€äº› Web Library å’Œ React çœŸçš„å¤ªæ–¹ä¾¿äº†ã€‚\n\n## Reference\n\n- [Gatsby](https://gatsbyjs.org/)\n- [MeiliSearch - Filtering and faceted search](https://docs.meilisearch.com/learn/advanced/filtering_and_faceted_search.html#configuring-filters)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Web/hugo-to-gatsby.md","excerpt":"æœ€è¿‘æŠŠç¶²ç«™å¾ Hugo é·ç§»åˆ° Gatsbyï¼Œé‡åˆ°äº†ä¸€äº›å•é¡Œï¼Œæˆ‘å°±ä¾†ç°¡å–®è¨˜éŒ„ä¸€ä¸‹è§£æ±ºå•é¡Œçš„éç¨‹ï¼Œè€Œä¸”å› ç‚ºæˆ‘å° Node ä¹Ÿä¸æ˜¯å¾ˆç†Ÿï¼Œæ‰€ä»¥ä¸»è¦æ˜¯åœ¨ç•¶ä½œæˆ‘ç·´ç¿’ Node å’Œ Reactã€‚ Whyï¼Ÿ Hugo å¯¦åœ¨å¾ˆé›£ä½¿ç”¨ Node å¥—ä»¶ å–®ç´”æƒ³çµ¦è‡ªå·±ä¸€å€‹æ¥è§¸ Node çš„æ©Ÿæœƒ è¨±å¤šç¶²é çš„å¥—ä»¶åº«éƒ½æ˜¯ä½¿ç”¨ node é–‹ç™¼çš„ï¼Œä½†å› ç‚º Hugo æ˜¯ç”¨ go é–‹ç™¼ï¼Œé›–ç„¶æœ‰æä¾›å° npm å¥—ä»¶çš„æ”¯æ´ï¼Œä½†æ˜¯é‚„æ˜¯æ²’â€¦","frontmatter":{"title":"å¾ Hugo é·åˆ° Gatsby çš„ç´€éŒ„","date":"2022-06-01T15:17:28.142Z","draft":false,"tags":["hugo","gatsby","blog","web","node","npm","meilisearch","search"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/2892b2bf-2c12-4d17-21f7-ba2e57c98100/public","description":null}}},{"node":{"id":"af3c84b0-2162-5466-8b24-f810139828dd","html":"<p>è¨˜éŒ„ä¸€äº›æˆ‘æ€•å¿˜çš„ Command Line æŠ€å·§ï¼Œç•¶ä½œå­—å…¸ç”¨ã€‚</p>\n<!--more-->\n<h2>æ¸…è¢å¹•</h2>\n<p><code class=\"language-text\">clear</code> æˆ–æ˜¯ <code class=\"language-text\">ctrl + L</code></p>\n<h2>å®¶ç›®éŒ„</h2>\n<p><code class=\"language-text\">~</code> æ³¢æµªç¬¦å°±æ˜¯ä»£è¡¨å®¶ç›®éŒ„</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">/etc$ <span class=\"token builtin class-name\">cd</span> ~\n\n~$</code></pre></div>\n<h2>é è¨­æ–‡å­—ç·¨è¼¯å™¨</h2>\n<p>æœ‰æ™‚é è¨­çš„æ–‡å­—ç·¨è¼¯å™¨ä¸æ˜¯ vimï¼Œè€Œæ˜¯ <code class=\"language-text\">nano</code> æˆ–æ˜¯ <code class=\"language-text\">emacs</code>ï¼Œåœ¨æ‰“ git æŒ‡ä»¤æ™‚ï¼Œæœƒé€²éŒ¯ç·¨è¼¯å™¨ã€‚åªè¦åœ¨ <code class=\"language-text\">.bashrc</code> ä¸­åŠ å…¥ä»¥ä¸‹å…©è¡Œï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">EDITOR</span><span class=\"token operator\">=</span>vim\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">VISUAL</span><span class=\"token operator\">=</span>vim</code></pre></div>\n<h2>è®Šæ›´ rc file å¾Œé¦¬ä¸Šç”Ÿæ•ˆ</h2>\n<p><code class=\"language-text\">source ~/.bashrc</code></p>\n<h2>è¿”å›ä¸Šä¸€å€‹è·¯å¾‘</h2>\n<p><code class=\"language-text\">cd -</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ <span class=\"token builtin class-name\">cd</span> /etc\n\n/etc$ <span class=\"token builtin class-name\">cd</span> /var\n\n/var$ <span class=\"token builtin class-name\">cd</span> -\n\n/etc$ <span class=\"token builtin class-name\">cd</span> ~\n\n~$</code></pre></div>\n<h2>æŠŠè·¯å¾‘æ”¾é€² Stack</h2>\n<p><code class=\"language-text\">pushd</code> æŠŠç¾åœ¨çš„è·¯å¾‘æ¨é€² Stackï¼Œä¸¦ cd åˆ°å¾Œé¢çš„åƒæ•¸</p>\n<p><code class=\"language-text\">popd</code> æ‹¿å‡ºä¾†</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">/etc$ <span class=\"token function\">pushd</span> /var\n/var /etc\n\n/var$ <span class=\"token function\">pushd</span> /home\n/home /var /etc\n\n/home$ <span class=\"token builtin class-name\">cd</span> ~\n\n~$ <span class=\"token builtin class-name\">cd</span> /var/\n\n~$ <span class=\"token builtin class-name\">cd</span> /var/lib/\n\n/var/lib$ <span class=\"token function\">popd</span>\n/var /etc\n\n/var$ <span class=\"token function\">popd</span>\n/etc\n\n/etc$</code></pre></div>\n<h2>æŠŠå·¥ä½œæ”¾åˆ°èƒŒæ™¯</h2>\n<p><code class=\"language-text\">ctrl + z</code></p>\n<p>æ³¨æ„ï¼Œé€™æœƒæš«åœæ•´å€‹ processï¼Œä¸¦ä¸æ˜¯æ”¾åˆ°èƒŒæ™¯åŸ·è¡Œ</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ <span class=\"token function\">vim</span> /proc/cpuinfo\n\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>+  Stopped                 <span class=\"token function\">vim</span> /proc/cpuinfo\n\n~$</code></pre></div>\n<p><code class=\"language-text\">fg</code> (foreground) æŠŠæ”¾åˆ°èƒŒæ™¯çš„ process å–å›å‰æ™¯ç¹¼çºŒåŸ·è¡Œ</p>\n<p>Shell çµæŸæ™‚ï¼Œæ‰€æœ‰è¢«æš«åœçš„ process ä¹Ÿæœƒä¸€èµ·è¢«æ®ºæ‰</p>\n<h2>é‡è¤‡ä¸Šä¸€å€‹ Command</h2>\n<p><code class=\"language-text\">!!</code> å°±æ˜¯ä»£è¡¨ä¸Šä¸€å€‹ Command</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ <span class=\"token builtin class-name\">echo</span> HI\nHI\n\n~$ <span class=\"token operator\">!</span><span class=\"token operator\">!</span>\n<span class=\"token builtin class-name\">echo</span> HI\nHI\n\n~$</code></pre></div>\n<p>é€™æ˜¯å¯ä»¥çµ„åˆæŠ€çš„ï¼šå¿˜è¨˜æ‰“ sudo å°± <code class=\"language-text\">sudo !!</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ <span class=\"token function\">apt</span> update\nReading package lists<span class=\"token punctuation\">..</span>. Done\nE: Could not <span class=\"token function\">open</span> lock <span class=\"token function\">file</span> /var/lib/apt/lists/lock - <span class=\"token function\">open</span> <span class=\"token punctuation\">(</span><span class=\"token number\">13</span>: Permission denied<span class=\"token punctuation\">)</span>\nE: Unable to lock directory /var/lib/apt/lists/\n\n~$ <span class=\"token function\">sudo</span> <span class=\"token operator\">!</span><span class=\"token operator\">!</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\nHit:1 http://archive.ubuntu.com/ubuntu jammy InRelease\nGet:2 http://security.ubuntu.com/ubuntu jammy-security InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">110</span> kB<span class=\"token punctuation\">]</span>\nGet:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">109</span> kB<span class=\"token punctuation\">]</span>\nGet:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">99.8</span> kB<span class=\"token punctuation\">]</span>\nGet:5 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">230</span> kB<span class=\"token punctuation\">]</span>\nGet:6 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">143</span> kB<span class=\"token punctuation\">]</span>\nFetched <span class=\"token number\">693</span> kB <span class=\"token keyword\">in</span> 2s <span class=\"token punctuation\">(</span><span class=\"token number\">328</span> kB/s<span class=\"token punctuation\">)</span>\nReading package lists<span class=\"token punctuation\">..</span>. Done\nBuilding dependency tree<span class=\"token punctuation\">..</span>. Done\nReading state information<span class=\"token punctuation\">..</span>. Done\n<span class=\"token number\">1</span> package can be upgraded. Run <span class=\"token string\">'apt list --upgradable'</span> to see it.\n~$</code></pre></div>\n<h2>sudo ä¸è¼¸å…¥å¯†ç¢¼</h2>\n<p>åªè¦è®“ä¸‹é¢é‚£ä¸€è¡Œå‡ºç¾åœ¨ <code class=\"language-text\">/etc/sudoers</code> ä¸­å°±å¯ä»¥ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">%sudo ALL=(ALL) NOPASSWD:ALL</code></pre></div>\n<p>æˆ–æ˜¯ç›´æ¥è¼¸å…¥ (with root)ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span> ~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'%sudo ALL=(ALL) NOPASSWD:ALL'</span> <span class=\"token operator\">>></span> /etc/sudoers</code></pre></div>\n<h2>æœå°‹æ‰“éçš„æŒ‡ä»¤</h2>\n<p><code class=\"language-text\">ctrl + r</code>ï¼Œç„¶å¾Œæ‰“ä¸Šéƒ¨åˆ†è¨˜å¾—çš„æŒ‡ä»¤ï¼Œå°±æœƒè‡ªå‹•è£œå®Œ</p>\n<h2>è¼¸å‡ºå°é€² less</h2>\n<p>æœ‰æ™‚æŒ‡ä»¤è¼¸å‡ºå¾ˆé•·ï¼Œéœ€è¦ç¿»é é¡¯ç¤ºæ™‚ï¼Œå¯ä»¥ç”¨ <code class=\"language-text\">|</code> å°å…¥ <code class=\"language-text\">less</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ <span class=\"token function\">cat</span> /proc/cpuinfo <span class=\"token operator\">|</span> <span class=\"token function\">less</span></code></pre></div>\n<h2>æ¸…æ‰ä¸€æ•´è¡Œ</h2>\n<p><code class=\"language-text\">ctrl + u</code> æŠŠé‚„æ²’ enter çš„æŒ‡ä»¤æ¸…æ‰</p>\n<h2>å…‰æ¨™åˆ°æœ€å‰æˆ–æœ€å¾Œ</h2>\n<p><code class=\"language-text\">ctrl + a</code> ç§»å‹•å…‰æ¨™åˆ°æœ€å‰</p>\n<p><code class=\"language-text\">ctrl + e</code> ç§»å‹•å…‰æ¨™åˆ°æœ€å¾Œ</p>\n<h2>é€£çºŒåŸ·è¡ŒæŒ‡ä»¤</h2>\n<p><code class=\"language-text\">;</code> ä¸ç®¡å‰é¢æœ‰æ²’æœ‰æˆåŠŸï¼Œéƒ½åŸ·è¡Œå¾Œé¢çš„å‘½ä»¤</p>\n<p><code class=\"language-text\">&amp;&amp;</code> è¦å‰é¢å¾—åŸ·è¡ŒæˆåŠŸï¼Œæ‰åŸ·è¡Œå¾Œé¢çš„å‘½ä»¤</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ <span class=\"token function\">ls</span> / <span class=\"token punctuation\">;</span> <span class=\"token builtin class-name\">echo</span> hi\nbin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\nhi\n\n~$ <span class=\"token function\">ls</span> / <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> hi\nbin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\nhi\n\n~$ <span class=\"token function\">ls</span> /no_such_dir <span class=\"token punctuation\">;</span> <span class=\"token builtin class-name\">echo</span> hi\nls: cannot access <span class=\"token string\">'/no_such_dir'</span><span class=\"token builtin class-name\">:</span> No such <span class=\"token function\">file</span> or directory\nhi\n\n~$ <span class=\"token function\">ls</span> /no_such_dir <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">echo</span> hi\nls: cannot access <span class=\"token string\">'/no_such_dir'</span><span class=\"token builtin class-name\">:</span> No such <span class=\"token function\">file</span> or directory</code></pre></div>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://youtube.com/watch?v=AVXYq8aL47Q\">18 Commands That Will Change The Way You Use Linux Forever</a></li>\n</ul>","rawMarkdownBody":"\nè¨˜éŒ„ä¸€äº›æˆ‘æ€•å¿˜çš„ Command Line æŠ€å·§ï¼Œç•¶ä½œå­—å…¸ç”¨ã€‚\n\n<!--more-->\n\n## æ¸…è¢å¹•\n\n`clear` æˆ–æ˜¯ `ctrl + L`\n\n## å®¶ç›®éŒ„\n\n`~` æ³¢æµªç¬¦å°±æ˜¯ä»£è¡¨å®¶ç›®éŒ„\n\n```bash\n/etc$ cd ~\n\n~$\n```\n\n## é è¨­æ–‡å­—ç·¨è¼¯å™¨\n\næœ‰æ™‚é è¨­çš„æ–‡å­—ç·¨è¼¯å™¨ä¸æ˜¯ vimï¼Œè€Œæ˜¯ `nano` æˆ–æ˜¯ `emacs`ï¼Œåœ¨æ‰“ git æŒ‡ä»¤æ™‚ï¼Œæœƒé€²éŒ¯ç·¨è¼¯å™¨ã€‚åªè¦åœ¨ `.bashrc` ä¸­åŠ å…¥ä»¥ä¸‹å…©è¡Œï¼š\n\n```bash\nexport EDITOR=vim\nexport VISUAL=vim\n```\n\n## è®Šæ›´ rc file å¾Œé¦¬ä¸Šç”Ÿæ•ˆ\n\n`source ~/.bashrc`\n\n## è¿”å›ä¸Šä¸€å€‹è·¯å¾‘\n\n`cd -`\n\n```bash\n~$ cd /etc\n\n/etc$ cd /var\n\n/var$ cd -\n\n/etc$ cd ~\n\n~$\n```\n\n## æŠŠè·¯å¾‘æ”¾é€² Stack\n\n`pushd` æŠŠç¾åœ¨çš„è·¯å¾‘æ¨é€² Stackï¼Œä¸¦ cd åˆ°å¾Œé¢çš„åƒæ•¸\n\n`popd` æ‹¿å‡ºä¾†\n\n```bash\n/etc$ pushd /var\n/var /etc\n\n/var$ pushd /home\n/home /var /etc\n\n/home$ cd ~\n\n~$ cd /var/\n\n~$ cd /var/lib/\n\n/var/lib$ popd\n/var /etc\n\n/var$ popd\n/etc\n\n/etc$\n```\n\n## æŠŠå·¥ä½œæ”¾åˆ°èƒŒæ™¯\n\n`ctrl + z`\n\næ³¨æ„ï¼Œé€™æœƒæš«åœæ•´å€‹ processï¼Œä¸¦ä¸æ˜¯æ”¾åˆ°èƒŒæ™¯åŸ·è¡Œ\n\n```bash\n~$ vim /proc/cpuinfo\n\n[1]+  Stopped                 vim /proc/cpuinfo\n\n~$\n```\n\n`fg` (foreground) æŠŠæ”¾åˆ°èƒŒæ™¯çš„ process å–å›å‰æ™¯ç¹¼çºŒåŸ·è¡Œ\n\nShell çµæŸæ™‚ï¼Œæ‰€æœ‰è¢«æš«åœçš„ process ä¹Ÿæœƒä¸€èµ·è¢«æ®ºæ‰\n\n## é‡è¤‡ä¸Šä¸€å€‹ Command\n\n`!!` å°±æ˜¯ä»£è¡¨ä¸Šä¸€å€‹ Command\n\n```bash\n~$ echo HI\nHI\n\n~$ !!\necho HI\nHI\n\n~$\n```\n\né€™æ˜¯å¯ä»¥çµ„åˆæŠ€çš„ï¼šå¿˜è¨˜æ‰“ sudo å°± `sudo !!`\n\n```bash\n~$ apt update\nReading package lists... Done\nE: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)\nE: Unable to lock directory /var/lib/apt/lists/\n\n~$ sudo !!\nsudo apt update\nHit:1 http://archive.ubuntu.com/ubuntu jammy InRelease\nGet:2 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]\nGet:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [109 kB]\nGet:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [99.8 kB]\nGet:5 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [230 kB]\nGet:6 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [143 kB]\nFetched 693 kB in 2s (328 kB/s)\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\n1 package can be upgraded. Run 'apt list --upgradable' to see it.\n~$\n```\n\n## sudo ä¸è¼¸å…¥å¯†ç¢¼\n\nåªè¦è®“ä¸‹é¢é‚£ä¸€è¡Œå‡ºç¾åœ¨ `/etc/sudoers` ä¸­å°±å¯ä»¥ï¼š\n\n```text\n%sudo ALL=(ALL) NOPASSWD:ALL\n```\n\næˆ–æ˜¯ç›´æ¥è¼¸å…¥ (with root)ï¼š\n\n```bash\n(root) ~$ echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers\n```\n\n## æœå°‹æ‰“éçš„æŒ‡ä»¤\n\n`ctrl + r`ï¼Œç„¶å¾Œæ‰“ä¸Šéƒ¨åˆ†è¨˜å¾—çš„æŒ‡ä»¤ï¼Œå°±æœƒè‡ªå‹•è£œå®Œ\n\n## è¼¸å‡ºå°é€² less\n\næœ‰æ™‚æŒ‡ä»¤è¼¸å‡ºå¾ˆé•·ï¼Œéœ€è¦ç¿»é é¡¯ç¤ºæ™‚ï¼Œå¯ä»¥ç”¨ `|` å°å…¥ `less`\n\n```bash\n~$ cat /proc/cpuinfo | less\n```\n\n## æ¸…æ‰ä¸€æ•´è¡Œ\n\n`ctrl + u` æŠŠé‚„æ²’ enter çš„æŒ‡ä»¤æ¸…æ‰\n\n## å…‰æ¨™åˆ°æœ€å‰æˆ–æœ€å¾Œ\n\n`ctrl + a` ç§»å‹•å…‰æ¨™åˆ°æœ€å‰\n\n`ctrl + e` ç§»å‹•å…‰æ¨™åˆ°æœ€å¾Œ\n\n## é€£çºŒåŸ·è¡ŒæŒ‡ä»¤\n\n`;` ä¸ç®¡å‰é¢æœ‰æ²’æœ‰æˆåŠŸï¼Œéƒ½åŸ·è¡Œå¾Œé¢çš„å‘½ä»¤\n\n`&&` è¦å‰é¢å¾—åŸ·è¡ŒæˆåŠŸï¼Œæ‰åŸ·è¡Œå¾Œé¢çš„å‘½ä»¤\n\n```bash\n~$ ls / ; echo hi\nbin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\nhi\n\n~$ ls / && echo hi\nbin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\nhi\n\n~$ ls /no_such_dir ; echo hi\nls: cannot access '/no_such_dir': No such file or directory\nhi\n\n~$ ls /no_such_dir && echo hi\nls: cannot access '/no_such_dir': No such file or directory\n```\n\n## Reference\n\n- [18 Commands That Will Change The Way You Use Linux Forever](https://youtube.com/watch?v=AVXYq8aL47Q)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Linux/command tips.md","excerpt":"è¨˜éŒ„ä¸€äº›æˆ‘æ€•å¿˜çš„ Command Line æŠ€å·§ï¼Œç•¶ä½œå­—å…¸ç”¨ã€‚ æ¸…è¢å¹•  æˆ–æ˜¯  å®¶ç›®éŒ„  æ³¢æµªç¬¦å°±æ˜¯ä»£è¡¨å®¶ç›®éŒ„ é è¨­æ–‡å­—ç·¨è¼¯å™¨ æœ‰æ™‚é è¨­çš„æ–‡å­—ç·¨è¼¯å™¨ä¸æ˜¯ vimï¼Œè€Œæ˜¯  æˆ–æ˜¯ ï¼Œåœ¨æ‰“ git æŒ‡ä»¤æ™‚ï¼Œæœƒé€²éŒ¯ç·¨è¼¯å™¨ã€‚åªè¦åœ¨  ä¸­åŠ å…¥ä»¥ä¸‹å…©è¡Œï¼š è®Šæ›´ rc file å¾Œé¦¬ä¸Šç”Ÿæ•ˆ  è¿”å›ä¸Šä¸€å€‹è·¯å¾‘  æŠŠè·¯å¾‘æ”¾é€² Stack  æŠŠç¾åœ¨çš„è·¯å¾‘æ¨é€² Stackï¼Œä¸¦ cd åˆ°å¾Œé¢çš„åƒæ•¸  æ‹¿å‡ºä¾† æŠŠå·¥ä½œæ”¾åˆ°â€¦","frontmatter":{"title":"ä¸€äº› Command Line æŠ€å·§","date":"2022-05-25T15:27:30.000Z","draft":false,"tags":["linux","ubuntu","mac","command","max"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9dfac9e4-1de1-43dc-eead-381301a1b500/public","description":null}}},{"node":{"id":"22c3b17c-4301-5fb4-9145-fa9a71fdb584","html":"<p>ç‚ºä»€éº¼è¦åœ¨ Container ä¸­ Codingï¼Ÿå› çˆ²é–‹ç™¼ä¸­æœ€å¤§çš„é›£é¡Œç¸½æ˜¯åœ¨ç’°å¢ƒå»ºç½®ï¼Œå¥½ä¸å®¹æ˜“å»ºç½®å¥½ç’°å¢ƒï¼Œè¦å¯«ä¸‹å€‹å°ˆæ¡ˆæ™‚ï¼Œå› ç‚ºé›»è…¦å·²ç¶“é«’å…®å…®ï¼Œå®‰è£ç’°å¢ƒæ™‚å°±æœƒå®¹æ˜“è¡åˆ°ç‰ˆæœ¬ï¼Œè€Œé€ æˆæƒ¡æ€§å¾ªç’°ï¼Œç’°å¢ƒå»ºç½®ä¸€æ¬¡æ¯”ä¸€æ¬¡å›°é›£ï¼Œæœ€å¾Œç™¼ç¾é‡çŒé›»è…¦æœ€å¿«ã€‚åœ¨ Container ä¸­ Coding å°±å¯ä»¥ç°¡å–®ç”¨å®Œå³ä¸Ÿï¼Œæ¯æ¬¡éƒ½å¯ä»¥åœ¨ä¹¾æ·¨çš„é›»è…¦å®‰è£ç’°å¢ƒï¼Œè£ä»»ä½•æ±è¥¿ä¹Ÿä¸æ€•æŠŠæœ¬æ©Ÿå¼„é«’ï¼Œåœ¨ Windows ä¸Šæ›´å¯ä»¥ç°¡å–®çš„åœ¨ Linux ä¸­é–‹ç™¼ã€‚</p>\n<!--more-->\n<p>åœ¨ Container è£¡ Coding å·²ç¶“ä¸æ˜¯ä»€éº¼æ–°é®®äº‹ï¼ŒVSCode çš„å®˜æ–¹å°±æœ‰æä¾› <a href=\"https://code.visualstudio.com/docs/remote/containers\">Developing inside a Container</a> çš„å®˜æ–¹æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æœ¬æ©Ÿçš„ Docker å¿«é€Ÿçš„ç”¢ç”Ÿ Container ä¸¦ä¸”åœ¨è£¡é¢é–‹ç™¼ã€‚å£è™•å°±æ˜¯åªèƒ½åœ¨æœ¬æ©Ÿé€£ç·šï¼Œå¦‚æœæœ‰å¤šå°é›»è…¦æƒ³è¦å…±åŒé–‹ç™¼çš„éœ€æ±‚ï¼Œå°±åªå¥½ç”¨ä»Šå¤©è¦ä»‹ç´¹çš„æ–¹å¼ï¼Œç”¨ SSH é€£å…¥ Containerï¼Œåªè¦é€£å¾—ä¸Š SSH å°±å¯ä»¥é–‹ç™¼ï¼Œé–‹ç™¼æ™‚ä¹Ÿä¸ç”¨è¢«ä¾·é™åœ¨ä¸€å°é›»è…¦çš„ Docker ä¸Šã€‚ç•¶ç„¶ï¼Œæœ€å¤§çš„ç¼ºé»å°±æ˜¯è¦æœ‰ä¸€å°ä¸€ç›´é‹ä½œè‘— Docker çš„ Server å¯ä»¥è®“ä½ éš¨æ™‚é€£ç·šã€‚GitHub æœ‰ä¸€å€‹ <a href=\"https://github.com/features/codespaces\">Codespace</a> çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¾ˆé¡ä¼¼çš„æƒ³æ³•ï¼ŒCode in Cloudï¼Œä½†ç•¢ç«Ÿæ˜¯ä¼æ¥­çš„æ”¶è²»æœå‹™ï¼Œæˆ‘ä¹‹å‰æœ‰æŠ½åˆ°é è¦½ç‰ˆï¼Œåˆ°ç¾åœ¨éƒ½å¯ä»¥å…è²»ä½¿ç”¨ï¼Œæ˜¯çœŸçš„å¾ˆæ–¹ä¾¿çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ä»–çš„æ–¹ä¾¿ï¼Œè®“æˆ‘æƒ³ç ”ç©¶å¦‚ä½•è‡ªå·±æ¶é¡ä¼¼çš„æœå‹™ã€‚</p>\n<h2>Dockerfile</h2>\n<p>ç°¡å–®ä¾†èªªå°±æ˜¯å‰µå»ºä¸€å€‹å·²ç¶“è¢«é è£ SSH Server çš„ Linuxï¼Œæˆ‘å€‘ä»Šå¤©å°±ç”¨ Ubuntuï¼Œç„¶å¾Œé †ä¾¿é è£ä¸€äº›é–‹ç™¼ä¸­å¸¸æœƒç”¨åˆ°å¥—ä»¶ï¼Œåƒæ˜¯ <code class=\"language-text\">git</code>, <code class=\"language-text\">vim</code> ç­‰ç­‰ã€‚</p>\n<blockquote>\n<p>å¦‚æœæƒ³è·³éé€™æ­¥é©Ÿï¼Œç”¨æˆ‘å‰µå»ºå¥½çš„ Image å¯ä»¥æ‹‰åˆ°ä¸‹ä¸€å€‹ç« ç¯€å»çœ‹</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token instruction\"><span class=\"token keyword\">ARG</span> UBUNTU_VERSION=latest</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:<span class=\"token variable\">${UBUNTU_VERSION}</span></span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> DEBIAN_FRONTEND noninteractive</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt update <span class=\"token operator\">\\</span>\n    &amp;&amp; apt install -y openssh-server ssh sudo git vim <span class=\"token operator\">\\</span>\n    &amp;&amp; useradd -rm -d /home/ubuntu -s /bin/bash -g root -G sudo -u 1000 ubuntu <span class=\"token operator\">\\</span>\n    &amp;&amp; echo <span class=\"token string\">\"ubuntu:ubuntu\"</span> | chpasswd <span class=\"token operator\">\\</span>\n    &amp;&amp; echo <span class=\"token string\">'%sudo ALL=(ALL) NOPASSWD:ALL'</span> >> /etc/sudoers <span class=\"token operator\">\\</span>\n    &amp;&amp; service ssh start</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">EXPOSE</span> 22</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"/usr/sbin/sshd\"</span>, <span class=\"token string\">\"-D\"</span>]</span></code></pre></div>\n<p>å¯ä»¥çœ‹åˆ°æˆ‘æŠŠå¸³è™Ÿå¯†ç¢¼éƒ½è¨­ç½®ç‚º <code class=\"language-text\">ubuntu</code>ï¼Œç„¶å¾Œè®“ <code class=\"language-text\">sudo</code> æ™‚å¯ä»¥ä¸ç”¨å¯†ç¢¼ã€‚ç„¶å¾Œå®‰è£å•Ÿå‹• ssh serviceï¼Œæœ€å¾Œé–‹å•Ÿ 22 portã€‚ç”¨ä¸‹é¢çš„ Docker æŒ‡ä»¤å°±å¯ä»¥å‰µå»ºè‡ªå·±çš„ Imageï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker</span> build -t ssh-ubuntu <span class=\"token builtin class-name\">.</span></code></pre></div>\n<h3>æˆ‘æ§‹å»ºå¥½çš„ Image</h3>\n<p>æˆ‘æœ‰å‰µä¸€å€‹ GitHub Repo æ”¾æˆ‘çš„ Dockerfileï¼Œä¸¦ç”¨ GitHub Actions + Packages ä¾†ç™¼å¸ƒ Imageï¼ŒImage åç¨±ç‚º <code class=\"language-text\">ghcr.io/tonypepebear/ssh-dev-ubuntu</code>ã€‚</p>\n<p><a href=\"https://github.com/TonyPepeBear/ssh-dev-container/pkgs/container/ssh-dev-ubuntu\">Package ç¶²å€</a></p>\n<h2>å•Ÿå‹• Container ä¸¦ SSH é€£å…¥</h2>\n<p>å•Ÿå‹• Container ä¸¦æŠŠ 22 Port å¼„å‡ºä¾†ï¼Œæˆ‘æ˜¯æ˜ å°„åˆ° 8222ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker</span> run -dp <span class=\"token number\">8222</span>:22 ssh-ubuntu\n\nå¦‚æœè¦ç”¨æˆ‘çš„ Imageï¼š\n<span class=\"token function\">docker</span> run -dp <span class=\"token number\">8222</span>:22 ghcr.io/tonypepebear/ssh-dev-ubuntu</code></pre></div>\n<p>SSH é€£å…¥ï¼Œè©¢å•å¯†ç¢¼å°±æ˜¯ <code class=\"language-text\">ubuntu</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">ssh</span> -p <span class=\"token number\">8222</span> ubuntu@localhost</code></pre></div>\n<p>å¦‚æœæ²’ç™¼ç”Ÿå•é¡Œï¼Œåˆ°ç¾åœ¨æ‡‰è©²å°±å¯ä»¥é †åˆ©çš„é€£åˆ° Container ä¸­ã€‚</p>\n<h2>VSCode SSH é€£ç·š</h2>\n<p>éœ€è¦å…ˆåœ¨ VSCode ä¸­å®‰è£ Remote - SSH å¥—ä»¶ï¼Œå¦‚åœ–ï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be8ec8dc-8900-4cbe-1587-45fa6f3f6500/public\" alt=\"img\"></p>\n<p>å®‰è£å®Œæˆå¾Œï¼Œé»æ“Šæœ€å·¦ä¸‹è§’çš„ Remote åŠŸèƒ½ï¼Œå†é¸æ“‡ Connect to SSH Hostï¼Œè¼¸å…¥ SSH æŒ‡ä»¤ <code class=\"language-text\">ssh -p 8222 ubuntu@localhost</code>ï¼Œå°±å¯ä»¥é †åˆ©é€£åˆ° Container ä¸­ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/960ea18c-82c7-4ce1-73d3-8ff092f2b000/public\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/814b9dac-f39d-4d07-1095-2d280cd5e300/public\" alt=\"img\"></p>\n<h2>å¾Œè¨˜</h2>\n<p>å…¶å¯¦æˆ‘ä¹Ÿä¸æœƒæ¯å€‹å°ˆæ¡ˆéƒ½æ–°å¢ä¸€å€‹æ–°çš„ Containerï¼Œè€Œæ˜¯ç”¨åˆ°æˆ‘å—ä¸äº†æˆ–è¡çªåˆ°å¾Œï¼Œæ‰å‰µå»ºä¸€å€‹æ–°çš„ï¼Œç•¢ç«Ÿæ¯æ¬¡å‰µæ–°çš„ Container ä¹Ÿæ˜¯æœ‰é»éº»ç…©ï¼Œä½†æ˜¯èƒ½è®“æˆ‘åœ¨å®‰è£ä¸€äº›äº‚ä¸ƒå…«ç³Ÿçš„ç’°å¢ƒ (å°±æ˜¯åœ¨èªªä½ å€‘ npm, pip) æ™‚ï¼Œå¯ä»¥å¤§è†½åœ°æŒ‰ä¸‹å»ï¼Œä¸ç”¨æ“”å¿ƒæŠŠé›»è…¦æåˆ°å—ä¸äº†æ‰æ˜¯é‡é»ã€‚å¸Œæœ›å¤§å®¶åœ¨é–‹ç™¼çš„è·¯ä¸Šå¯ä»¥æ›´åŠ é †åˆ©ã€‚</p>\n<p>å¦å¤–ï¼ŒVSCode çš„ SSH é€£ç·šåŠŸèƒ½çœŸçš„åšçš„ä¸éŒ¯ï¼Œç”šè‡³å¯ä»¥ Port Forwardingï¼Œåœ¨é–‹ç™¼ç¶²é çš„æ™‚å€™ä¸ç”¨åœ¨ Docker ä¸­å¤š Forwarding ä¸€å€‹ Portï¼Œå¯ä»¥éš¨æ™‚ç”¨ VSCode Forwarding åˆ°æœ¬æ©Ÿä¸Šã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://code.visualstudio.com/docs/remote/ssh\">Remote Development using SSH</a></li>\n</ul>","rawMarkdownBody":"\nç‚ºä»€éº¼è¦åœ¨ Container ä¸­ Codingï¼Ÿå› çˆ²é–‹ç™¼ä¸­æœ€å¤§çš„é›£é¡Œç¸½æ˜¯åœ¨ç’°å¢ƒå»ºç½®ï¼Œå¥½ä¸å®¹æ˜“å»ºç½®å¥½ç’°å¢ƒï¼Œè¦å¯«ä¸‹å€‹å°ˆæ¡ˆæ™‚ï¼Œå› ç‚ºé›»è…¦å·²ç¶“é«’å…®å…®ï¼Œå®‰è£ç’°å¢ƒæ™‚å°±æœƒå®¹æ˜“è¡åˆ°ç‰ˆæœ¬ï¼Œè€Œé€ æˆæƒ¡æ€§å¾ªç’°ï¼Œç’°å¢ƒå»ºç½®ä¸€æ¬¡æ¯”ä¸€æ¬¡å›°é›£ï¼Œæœ€å¾Œç™¼ç¾é‡çŒé›»è…¦æœ€å¿«ã€‚åœ¨ Container ä¸­ Coding å°±å¯ä»¥ç°¡å–®ç”¨å®Œå³ä¸Ÿï¼Œæ¯æ¬¡éƒ½å¯ä»¥åœ¨ä¹¾æ·¨çš„é›»è…¦å®‰è£ç’°å¢ƒï¼Œè£ä»»ä½•æ±è¥¿ä¹Ÿä¸æ€•æŠŠæœ¬æ©Ÿå¼„é«’ï¼Œåœ¨ Windows ä¸Šæ›´å¯ä»¥ç°¡å–®çš„åœ¨ Linux ä¸­é–‹ç™¼ã€‚\n\n<!--more-->\n\nåœ¨ Container è£¡ Coding å·²ç¶“ä¸æ˜¯ä»€éº¼æ–°é®®äº‹ï¼ŒVSCode çš„å®˜æ–¹å°±æœ‰æä¾› [Developing inside a Container](https://code.visualstudio.com/docs/remote/containers) çš„å®˜æ–¹æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æœ¬æ©Ÿçš„ Docker å¿«é€Ÿçš„ç”¢ç”Ÿ Container ä¸¦ä¸”åœ¨è£¡é¢é–‹ç™¼ã€‚å£è™•å°±æ˜¯åªèƒ½åœ¨æœ¬æ©Ÿé€£ç·šï¼Œå¦‚æœæœ‰å¤šå°é›»è…¦æƒ³è¦å…±åŒé–‹ç™¼çš„éœ€æ±‚ï¼Œå°±åªå¥½ç”¨ä»Šå¤©è¦ä»‹ç´¹çš„æ–¹å¼ï¼Œç”¨ SSH é€£å…¥ Containerï¼Œåªè¦é€£å¾—ä¸Š SSH å°±å¯ä»¥é–‹ç™¼ï¼Œé–‹ç™¼æ™‚ä¹Ÿä¸ç”¨è¢«ä¾·é™åœ¨ä¸€å°é›»è…¦çš„ Docker ä¸Šã€‚ç•¶ç„¶ï¼Œæœ€å¤§çš„ç¼ºé»å°±æ˜¯è¦æœ‰ä¸€å°ä¸€ç›´é‹ä½œè‘— Docker çš„ Server å¯ä»¥è®“ä½ éš¨æ™‚é€£ç·šã€‚GitHub æœ‰ä¸€å€‹ [Codespace](https://github.com/features/codespaces) çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¾ˆé¡ä¼¼çš„æƒ³æ³•ï¼ŒCode in Cloudï¼Œä½†ç•¢ç«Ÿæ˜¯ä¼æ¥­çš„æ”¶è²»æœå‹™ï¼Œæˆ‘ä¹‹å‰æœ‰æŠ½åˆ°é è¦½ç‰ˆï¼Œåˆ°ç¾åœ¨éƒ½å¯ä»¥å…è²»ä½¿ç”¨ï¼Œæ˜¯çœŸçš„å¾ˆæ–¹ä¾¿çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ä»–çš„æ–¹ä¾¿ï¼Œè®“æˆ‘æƒ³ç ”ç©¶å¦‚ä½•è‡ªå·±æ¶é¡ä¼¼çš„æœå‹™ã€‚\n\n## Dockerfile\n\nç°¡å–®ä¾†èªªå°±æ˜¯å‰µå»ºä¸€å€‹å·²ç¶“è¢«é è£ SSH Server çš„ Linuxï¼Œæˆ‘å€‘ä»Šå¤©å°±ç”¨ Ubuntuï¼Œç„¶å¾Œé †ä¾¿é è£ä¸€äº›é–‹ç™¼ä¸­å¸¸æœƒç”¨åˆ°å¥—ä»¶ï¼Œåƒæ˜¯ `git`, `vim` ç­‰ç­‰ã€‚\n\n> å¦‚æœæƒ³è·³éé€™æ­¥é©Ÿï¼Œç”¨æˆ‘å‰µå»ºå¥½çš„ Image å¯ä»¥æ‹‰åˆ°ä¸‹ä¸€å€‹ç« ç¯€å»çœ‹\n\n```Dockerfile\nARG UBUNTU_VERSION=latest\n\nFROM ubuntu:${UBUNTU_VERSION}\n\nENV DEBIAN_FRONTEND noninteractive\n\nRUN apt update \\\n    && apt install -y openssh-server ssh sudo git vim \\\n    && useradd -rm -d /home/ubuntu -s /bin/bash -g root -G sudo -u 1000 ubuntu \\\n    && echo \"ubuntu:ubuntu\" | chpasswd \\\n    && echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers \\\n    && service ssh start\n\nEXPOSE 22\n\nCMD [\"/usr/sbin/sshd\", \"-D\"]\n```\n\nå¯ä»¥çœ‹åˆ°æˆ‘æŠŠå¸³è™Ÿå¯†ç¢¼éƒ½è¨­ç½®ç‚º `ubuntu`ï¼Œç„¶å¾Œè®“ `sudo` æ™‚å¯ä»¥ä¸ç”¨å¯†ç¢¼ã€‚ç„¶å¾Œå®‰è£å•Ÿå‹• ssh serviceï¼Œæœ€å¾Œé–‹å•Ÿ 22 portã€‚ç”¨ä¸‹é¢çš„ Docker æŒ‡ä»¤å°±å¯ä»¥å‰µå»ºè‡ªå·±çš„ Imageï¼š\n\n```shell\ndocker build -t ssh-ubuntu .\n```\n\n### æˆ‘æ§‹å»ºå¥½çš„ Image\n\næˆ‘æœ‰å‰µä¸€å€‹ GitHub Repo æ”¾æˆ‘çš„ Dockerfileï¼Œä¸¦ç”¨ GitHub Actions + Packages ä¾†ç™¼å¸ƒ Imageï¼ŒImage åç¨±ç‚º `ghcr.io/tonypepebear/ssh-dev-ubuntu`ã€‚\n\n[Package ç¶²å€](https://github.com/TonyPepeBear/ssh-dev-container/pkgs/container/ssh-dev-ubuntu)\n\n## å•Ÿå‹• Container ä¸¦ SSH é€£å…¥\n\nå•Ÿå‹• Container ä¸¦æŠŠ 22 Port å¼„å‡ºä¾†ï¼Œæˆ‘æ˜¯æ˜ å°„åˆ° 8222ï¼š\n\n```shell\ndocker run -dp 8222:22 ssh-ubuntu\n\nå¦‚æœè¦ç”¨æˆ‘çš„ Imageï¼š\ndocker run -dp 8222:22 ghcr.io/tonypepebear/ssh-dev-ubuntu\n```\n\nSSH é€£å…¥ï¼Œè©¢å•å¯†ç¢¼å°±æ˜¯ `ubuntu`ï¼š\n\n```shell\nssh -p 8222 ubuntu@localhost\n```\n\nå¦‚æœæ²’ç™¼ç”Ÿå•é¡Œï¼Œåˆ°ç¾åœ¨æ‡‰è©²å°±å¯ä»¥é †åˆ©çš„é€£åˆ° Container ä¸­ã€‚\n\n## VSCode SSH é€£ç·š\n\néœ€è¦å…ˆåœ¨ VSCode ä¸­å®‰è£ Remote - SSH å¥—ä»¶ï¼Œå¦‚åœ–ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be8ec8dc-8900-4cbe-1587-45fa6f3f6500/public)\n\nå®‰è£å®Œæˆå¾Œï¼Œé»æ“Šæœ€å·¦ä¸‹è§’çš„ Remote åŠŸèƒ½ï¼Œå†é¸æ“‡ Connect to SSH Hostï¼Œè¼¸å…¥ SSH æŒ‡ä»¤ `ssh -p 8222 ubuntu@localhost`ï¼Œå°±å¯ä»¥é †åˆ©é€£åˆ° Container ä¸­ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/960ea18c-82c7-4ce1-73d3-8ff092f2b000/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/814b9dac-f39d-4d07-1095-2d280cd5e300/public)\n\n## å¾Œè¨˜\n\nå…¶å¯¦æˆ‘ä¹Ÿä¸æœƒæ¯å€‹å°ˆæ¡ˆéƒ½æ–°å¢ä¸€å€‹æ–°çš„ Containerï¼Œè€Œæ˜¯ç”¨åˆ°æˆ‘å—ä¸äº†æˆ–è¡çªåˆ°å¾Œï¼Œæ‰å‰µå»ºä¸€å€‹æ–°çš„ï¼Œç•¢ç«Ÿæ¯æ¬¡å‰µæ–°çš„ Container ä¹Ÿæ˜¯æœ‰é»éº»ç…©ï¼Œä½†æ˜¯èƒ½è®“æˆ‘åœ¨å®‰è£ä¸€äº›äº‚ä¸ƒå…«ç³Ÿçš„ç’°å¢ƒ (å°±æ˜¯åœ¨èªªä½ å€‘ npm, pip) æ™‚ï¼Œå¯ä»¥å¤§è†½åœ°æŒ‰ä¸‹å»ï¼Œä¸ç”¨æ“”å¿ƒæŠŠé›»è…¦æåˆ°å—ä¸äº†æ‰æ˜¯é‡é»ã€‚å¸Œæœ›å¤§å®¶åœ¨é–‹ç™¼çš„è·¯ä¸Šå¯ä»¥æ›´åŠ é †åˆ©ã€‚\n\nå¦å¤–ï¼ŒVSCode çš„ SSH é€£ç·šåŠŸèƒ½çœŸçš„åšçš„ä¸éŒ¯ï¼Œç”šè‡³å¯ä»¥ Port Forwardingï¼Œåœ¨é–‹ç™¼ç¶²é çš„æ™‚å€™ä¸ç”¨åœ¨ Docker ä¸­å¤š Forwarding ä¸€å€‹ Portï¼Œå¯ä»¥éš¨æ™‚ç”¨ VSCode Forwarding åˆ°æœ¬æ©Ÿä¸Šã€‚\n\n## Reference\n\n- [Remote Development using SSH](https://code.visualstudio.com/docs/remote/ssh)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/VSCode/SSH Dev Container.md","excerpt":"ç‚ºä»€éº¼è¦åœ¨ Container ä¸­ Codingï¼Ÿå› çˆ²é–‹ç™¼ä¸­æœ€å¤§çš„é›£é¡Œç¸½æ˜¯åœ¨ç’°å¢ƒå»ºç½®ï¼Œå¥½ä¸å®¹æ˜“å»ºç½®å¥½ç’°å¢ƒï¼Œè¦å¯«ä¸‹å€‹å°ˆæ¡ˆæ™‚ï¼Œå› ç‚ºé›»è…¦å·²ç¶“é«’å…®å…®ï¼Œå®‰è£ç’°å¢ƒæ™‚å°±æœƒå®¹æ˜“è¡åˆ°ç‰ˆæœ¬ï¼Œè€Œé€ æˆæƒ¡æ€§å¾ªç’°ï¼Œç’°å¢ƒå»ºç½®ä¸€æ¬¡æ¯”ä¸€æ¬¡å›°é›£ï¼Œæœ€å¾Œç™¼ç¾é‡çŒé›»è…¦æœ€å¿«ã€‚åœ¨ Container ä¸­ Coding å°±å¯ä»¥ç°¡å–®ç”¨å®Œå³ä¸Ÿï¼Œæ¯æ¬¡éƒ½å¯ä»¥åœ¨ä¹¾æ·¨çš„é›»è…¦å®‰è£ç’°å¢ƒï¼Œè£ä»»ä½•æ±è¥¿ä¹Ÿä¸æ€•æŠŠæœ¬æ©Ÿå¼„é«’ï¼Œåœ¨ Windows ä¸Šæ›´å¯ä»¥ç°¡å–®çš„åœ¨ Linâ€¦","frontmatter":{"title":"VSCode SSH é€£å…¥ Docker Container","date":"2022-05-21T14:07:16.000Z","draft":false,"tags":["vscode","ssh","docker"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0f3867f8-dd79-482c-1f27-a7a166f7dc00/public","description":null}}},{"node":{"id":"9b4fd17c-47e0-5706-ae0f-62acdd29fab4","html":"<p>Kotlin åœ¨å¤šå·¥è™•ç†ä¸Šæä¾›éå¸¸å¥½ç”¨çš„ Coroutineã€‚ç•¶ä¸åŒ Job ä¹‹é–“éœ€è¦å‚³éè³‡æ–™æ™‚ï¼Œç¸½æœƒé‡åˆ°è¨±å¤šå•é¡Œï¼Œä»¥å‰æœ€ç°¡å–®çš„æ–¹å¼å°±æ˜¯ Callbackï¼Œä½† Callback æ¨¡å¼å·²ç¶“åœ¨å„å€‹ç¨‹å¼èªè¨€ä¸­ç”¢ç”Ÿè¨±å¤šå•é¡Œï¼Œé€™é‚Šå°±ä¸å¤šè¨è«–ã€‚Kotlin Coroutine å¦‚æœåªæ˜¯è¦å›å‚³ä¸€å€‹å€¼ï¼Œå¯ä»¥ç›´æ¥ç”¨ Suspend çš„ Return å€¼ï¼Œä½†å¦‚æœæ˜¯è¦å›å‚³å¾ˆå¤šè³‡æ–™å‘¢ï¼Ÿç°¡å–®çš„æ–¹å¼æ˜¯ç›´æ¥å›å‚³ Listï¼Œå¯æ˜¯å¦‚æœè³‡æ–™éå¸¸å¤§ï¼Œä¹Ÿæœƒç”¢ç”Ÿå‡ºå•é¡Œã€‚æ‰€ä»¥ Kotlin æä¾› Flow ä¾†å¹«åŠ©è§£æ±ºå¤§é‡è³‡æ–™å‚³éçš„å•é¡Œã€‚</p>\n<!--more-->\n<h2>Kotline Coroutine</h2>\n<p>å¦‚æœé‚„ä¸çŸ¥é“ä»€éº¼æ˜¯ Coroutine çš„ï¼Œæˆ‘ä»¥å‰ä¹Ÿæœ‰å¯«é<a href=\"/posts/kotlin/kotlin-coroutine/\">Kotlin Coroutine</a>ã€‚</p>\n<h2>List OF Numbers</h2>\n<p>è®“æˆ‘å€‘å…ˆä¾†çœ‹ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼Œç”¢ç”Ÿä¸€å€‹æœƒå›å‚³ 1 åˆ° 100 çš„ Int Functionï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> ans <span class=\"token operator\">=</span> mutableListOf<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        ans<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> ans\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span> <span class=\"token punctuation\">{</span> value <span class=\"token operator\">-></span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¹çœ‹ä¹‹ä¸‹æ²’ä»€éº¼å•é¡Œï¼Œä½†æ˜¯å¦‚æœé€™æ˜¯ä¸€å€‹éœ€è¦å¤§é‡ CPU æˆ– IO è™•ç†çš„å·¥ä½œè€Œä¸”å›å‚³å€¼éå¸¸å¤§ï¼Œå°±æœƒå°è¨˜æ†¶é«”ç”¢ç”Ÿè² æ“”ã€‚ä¸‹é¢å‡è¨­æˆ‘å€‘éœ€è¦ 1 åˆ° 100,000ï¼Œä¸¦ç”¨ <code class=\"language-text\">delay()</code> æ¨¡æ“¬ CPU å·¥ä½œï¼Œç„¶å¾Œæ”¹æˆ Suspend Functionã€‚ä¸‹é¢ä¹ŸæŠŠ main æ”¹æˆ <code class=\"language-text\">runBlocking</code>ï¼Œæ–¹ä¾¿åŸ·è¡Œ Suspend Functionï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> ans <span class=\"token operator\">=</span> mutableListOf<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span><span class=\"token number\">100_000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        ans<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> ans\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> runBlocking <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span> <span class=\"token punctuation\">{</span> value <span class=\"token operator\">-></span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¸Šé¢çš„ç¯„ä¾‹å°±æœƒå°è¨˜æ†¶é«”ç”¢ç”Ÿä¸€å®šçš„è² æ“”ï¼Œé€™æ™‚å°±æ˜¯æ”¹æˆ Flow çš„å¥½æ™‚æ©Ÿï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> flow <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span><span class=\"token number\">100_000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> runBlocking <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ç¯„ä¾‹æ²’æœ‰ä¸€æ¬¡ç”¢ç”Ÿä¸€å€‹å¾ˆå¤§çš„ Listï¼Œå†ä¸€æ¬¡æŠŠè³‡æ–™å›å‚³ï¼Œå¯«çš„ä¹Ÿå¯ä»¥æ›´ç°¡æ½”ã€‚</p>\n<h2>Flow is Cold</h2>\n<p>é€™å¥è©±çš„æ„æ€æ˜¯ï¼Œå¦‚æœ Flow æ²’æœ‰è¢« Collectï¼Œé‚£éº¼ Flow å°±æ°¸é ä¸æœƒè¢«åŸ·è¡Œã€‚</p>\n<p>ä¸‹é¢çš„ä¾‹å­æˆ‘å€‘åœ¨ Emit å‰åŠ ä¸Šä¸€å€‹ <code class=\"language-text\">println</code> ï¼Œä¸¦ç”¨ä¸€å€‹è®Šæ•¸æ¥ä½ä¸€å€‹ Flowï¼Œä½†ä¸å»å‘¼å« Collectï¼Œæ‰€ä»¥æœƒå…ˆè¼¸å‡º <code class=\"language-text\">Hello World</code> æ‰æœƒè¼¸å‡º <code class=\"language-text\">Start Flow</code>ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> flow <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Start Flow\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> runBlocking <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> n<span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello World\"</span></span><span class=\"token punctuation\">)</span>\n    n<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è¼¸å‡ºï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Hello World\nStart Flow\n1\n2\n3\n4\n5</code></pre></div>\n<h2>Emit æ™‚ æ‰æœƒå‘¼å« Collect</h2>\n<p>æŠŠä¸Šé¢çš„ä¾‹å­å† emit å‰åŠ ä¸Šä¸€å€‹ <code class=\"language-text\">println()</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> flow <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Start Flow\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"emit </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">i</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> runBlocking <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> n<span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello World\"</span></span><span class=\"token punctuation\">)</span>\n    n<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>çœ‹åˆ°è¼¸å‡ºå¯ä»¥ç™¼ç¾ï¼Œæœƒå…ˆçœ‹åˆ° emit() ä¸Šé¢çš„ print è¢«åŸ·è¡Œï¼Œæ‰æœƒåŸ·è¡Œåˆ°å‘¼å« collect æ™‚å‚³é€²å»çš„ functionã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Hello World\nStart Flow\nemit 1\n1\nemit 2\n2\nemit 3\n3\nemit 4\n4\nemit 5\n5</code></pre></div>\n<h2>Flow çš„è³‡æ–™é‡æ˜¯å›ºå®šçš„</h2>\n<p>é€™å¥è©±çš„æ„æ€ä¸¦ä¸æ˜¯èªª flow åªèƒ½å®šç¾©å¥½æ•¸é‡å†å›å‚³ï¼Œè€Œæ˜¯èªªå¦‚æœ flow è£¡çš„æ‰€æœ‰ emit æ²’æœ‰è¢« collectï¼Œå°±æœƒå‡ºéŒ¯ã€‚</p>\n<p>ä¸‹é¢çš„ flow å°±ä¸€å®šè¦è¢« collect äº”æ¬¡ï¼Œå¦‚æœå› ç‚ºå‘¼å«ä»–çš„ function è¢«æ„å¤–ä¸­æ–·ï¼Œé€™å€‹ flow ä¹Ÿæœƒæ‹‹å‡ºéŒ¯èª¤ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">nums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> flow <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é‚£éº¼å¦‚æœæˆ‘åªè¦ä¸€å®šæ•¸é‡çš„è³‡æ–™æ€éº¼è¾¦ï¼Ÿä¸‹é¢ç¯„ä¾‹å–è‡ªå®˜æ–¹æ–‡ä»¶ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">numbers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> flow <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"This line will not execute\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Finally in numbers\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> runBlocking<span class=\"token operator\">&lt;</span>Unit<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">numbers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// take only the first two</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span> <span class=\"token punctuation\">{</span> value <span class=\"token operator\">-></span> <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* output:\n1\n2\nFinally in numbers\n*/</span></code></pre></div>\n<h2>Flow mapping</h2>\n<p>Flow å¯ä»¥ç”¨ map çš„æ–¹å¼ï¼Œè½‰æ›æˆå¦ä¸€å€‹ Flowã€‚</p>\n<p>é€™å€‹ä¾‹å­ç”¢ç”Ÿå¹³æ–¹æ•¸ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">allNumbers</span><span class=\"token punctuation\">(</span>n<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> flow <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span>n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">square</span><span class=\"token punctuation\">(</span>n<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">allNumbers</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span> <span class=\"token punctuation\">{</span> it <span class=\"token operator\">*</span> it <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> runBlocking <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">square</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">it</span></span><span class=\"token string\"> \"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// output: 1 4 9 16 25 36 49 64 81 100</span></code></pre></div>\n<h2>Flow Filter</h2>\n<p>é€™å€‹ä¾‹å­è¼¸å‡º 1 åˆ° 100 ä¹‹é–“çš„æ‰€æœ‰è³ªæ•¸(å‹¿æ¨¡ä»¿ï¼Œæ•ˆç‡å ªæ†‚)ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">allNumbers</span><span class=\"token punctuation\">(</span>n<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> flow <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span>n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">suspend</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">primeNumbers</span><span class=\"token punctuation\">(</span>n<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Flow<span class=\"token operator\">&lt;</span>Int<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">allNumbers</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span> <span class=\"token punctuation\">{</span> it<span class=\"token punctuation\">.</span><span class=\"token function\">isPrime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> Int<span class=\"token punctuation\">.</span><span class=\"token function\">isPrime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Boolean <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">2</span><span class=\"token operator\">..</span>this <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token operator\">%</span> i <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> runBlocking <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">primeNumbers</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">it</span></span><span class=\"token string\"> \"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// output: 2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97</span></code></pre></div>\n<blockquote>\n<p>ç¢å¿µï¼šé€™æ®µç¨‹å¼çœŸçš„å……åˆ†å±•ç¾ Kotlin çš„å¨åŠ›..</p>\n</blockquote>\n<h2>å¾Œè¨˜</h2>\n<p>Flow é‚„æœ‰å¾ˆå¤šè¤‡é›œçš„ç”¨æ³•ï¼Œåƒæ˜¯åˆä½µå…©å€‹ flow ä¹‹é¡çš„ï¼Œå»ºè­°æœ‰èˆˆè¶£çš„äººå¯ä»¥è‡ªå·±å»çœ‹å®˜æ–¹æ–‡ä»¶ã€‚</p>\n<p>å¦å¤–ï¼ŒKotlin å…¶å¯¦é‚„æœ‰ä¸€å€‹å«åš Sequence çš„ Interfaceï¼Œè·Ÿ Flow éå¸¸åƒï¼Œåœ¨ä¸æ˜¯éœ€è¦å¤šç·šç¨‹çš„æ™‚å€™å°±å·²ç¶“å¾ˆå¤ ç”¨ï¼ŒFlow ä¸»è¦åœ¨å¤šç·šç¨‹ä¸­ä½¿ç”¨ï¼ŒSequence å–®ç·šç¨‹ä¸­ä½¿ç”¨ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/flow.html\">Asynchronous Flow</a></li>\n</ul>","rawMarkdownBody":"\nKotlin åœ¨å¤šå·¥è™•ç†ä¸Šæä¾›éå¸¸å¥½ç”¨çš„ Coroutineã€‚ç•¶ä¸åŒ Job ä¹‹é–“éœ€è¦å‚³éè³‡æ–™æ™‚ï¼Œç¸½æœƒé‡åˆ°è¨±å¤šå•é¡Œï¼Œä»¥å‰æœ€ç°¡å–®çš„æ–¹å¼å°±æ˜¯ Callbackï¼Œä½† Callback æ¨¡å¼å·²ç¶“åœ¨å„å€‹ç¨‹å¼èªè¨€ä¸­ç”¢ç”Ÿè¨±å¤šå•é¡Œï¼Œé€™é‚Šå°±ä¸å¤šè¨è«–ã€‚Kotlin Coroutine å¦‚æœåªæ˜¯è¦å›å‚³ä¸€å€‹å€¼ï¼Œå¯ä»¥ç›´æ¥ç”¨ Suspend çš„ Return å€¼ï¼Œä½†å¦‚æœæ˜¯è¦å›å‚³å¾ˆå¤šè³‡æ–™å‘¢ï¼Ÿç°¡å–®çš„æ–¹å¼æ˜¯ç›´æ¥å›å‚³ Listï¼Œå¯æ˜¯å¦‚æœè³‡æ–™éå¸¸å¤§ï¼Œä¹Ÿæœƒç”¢ç”Ÿå‡ºå•é¡Œã€‚æ‰€ä»¥ Kotlin æä¾› Flow ä¾†å¹«åŠ©è§£æ±ºå¤§é‡è³‡æ–™å‚³éçš„å•é¡Œã€‚\n\n<!--more-->\n\n## Kotline Coroutine\n\nå¦‚æœé‚„ä¸çŸ¥é“ä»€éº¼æ˜¯ Coroutine çš„ï¼Œæˆ‘ä»¥å‰ä¹Ÿæœ‰å¯«é[Kotlin Coroutine](/posts/kotlin/kotlin-coroutine/)ã€‚\n\n## List OF Numbers\n\nè®“æˆ‘å€‘å…ˆä¾†çœ‹ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼Œç”¢ç”Ÿä¸€å€‹æœƒå›å‚³ 1 åˆ° 100 çš„ Int Functionï¼š\n\n```kotlin\nfun nums(): List<Int> {\n    val ans = mutableListOf<Int>()\n    for (i in 1..100) {\n        ans.add(i)\n    }\n    return ans\n}\n\nfun main() {\n    nums().forEach { value ->\n        println(value)\n    }\n}\n```\n\nä¹çœ‹ä¹‹ä¸‹æ²’ä»€éº¼å•é¡Œï¼Œä½†æ˜¯å¦‚æœé€™æ˜¯ä¸€å€‹éœ€è¦å¤§é‡ CPU æˆ– IO è™•ç†çš„å·¥ä½œè€Œä¸”å›å‚³å€¼éå¸¸å¤§ï¼Œå°±æœƒå°è¨˜æ†¶é«”ç”¢ç”Ÿè² æ“”ã€‚ä¸‹é¢å‡è¨­æˆ‘å€‘éœ€è¦ 1 åˆ° 100,000ï¼Œä¸¦ç”¨ `delay()` æ¨¡æ“¬ CPU å·¥ä½œï¼Œç„¶å¾Œæ”¹æˆ Suspend Functionã€‚ä¸‹é¢ä¹ŸæŠŠ main æ”¹æˆ `runBlocking`ï¼Œæ–¹ä¾¿åŸ·è¡Œ Suspend Functionï¼š\n\n```kotlin\nsuspend fun nums(): List<Int> {\n    val ans = mutableListOf<Int>()\n    for (i in 1..100_000) {\n        delay(100)\n        ans.add(i)\n    }\n    return ans\n}\n\nfun main() = runBlocking {\n    nums().forEach { value ->\n        println(value)\n    }\n}\n```\n\nä¸Šé¢çš„ç¯„ä¾‹å°±æœƒå°è¨˜æ†¶é«”ç”¢ç”Ÿä¸€å®šçš„è² æ“”ï¼Œé€™æ™‚å°±æ˜¯æ”¹æˆ Flow çš„å¥½æ™‚æ©Ÿï¼š\n\n```kotlin\nsuspend fun nums(): Flow<Int> = flow {\n    for (i in 1..100_000) {\n        delay(100)\n        emit(i)\n    }\n}\n\nfun main() = runBlocking {\n    nums().collect {\n        println(it)\n    }\n}\n```\n\nå¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ç¯„ä¾‹æ²’æœ‰ä¸€æ¬¡ç”¢ç”Ÿä¸€å€‹å¾ˆå¤§çš„ Listï¼Œå†ä¸€æ¬¡æŠŠè³‡æ–™å›å‚³ï¼Œå¯«çš„ä¹Ÿå¯ä»¥æ›´ç°¡æ½”ã€‚\n\n## Flow is Cold\n\né€™å¥è©±çš„æ„æ€æ˜¯ï¼Œå¦‚æœ Flow æ²’æœ‰è¢« Collectï¼Œé‚£éº¼ Flow å°±æ°¸é ä¸æœƒè¢«åŸ·è¡Œã€‚\n\nä¸‹é¢çš„ä¾‹å­æˆ‘å€‘åœ¨ Emit å‰åŠ ä¸Šä¸€å€‹ `println` ï¼Œä¸¦ç”¨ä¸€å€‹è®Šæ•¸æ¥ä½ä¸€å€‹ Flowï¼Œä½†ä¸å»å‘¼å« Collectï¼Œæ‰€ä»¥æœƒå…ˆè¼¸å‡º `Hello World` æ‰æœƒè¼¸å‡º `Start Flow`ã€‚\n\n```kotlin\nsuspend fun nums(): Flow<Int> = flow {\n    println(\"Start Flow\")\n    for (i in 1..5) {\n        delay(100)\n        emit(i)\n    }\n}\n\nfun main() = runBlocking {\n    var n: Flow<Int> = nums()\n    println(\"Hello World\")\n    n.collect {\n        println(it)\n    }\n}\n```\n\nè¼¸å‡ºï¼š\n\n```text\nHello World\nStart Flow\n1\n2\n3\n4\n5\n```\n\n## Emit æ™‚ æ‰æœƒå‘¼å« Collect\n\næŠŠä¸Šé¢çš„ä¾‹å­å† emit å‰åŠ ä¸Šä¸€å€‹ `println()`ï¼š\n\n```kotlin\nsuspend fun nums(): Flow<Int> = flow {\n    println(\"Start Flow\")\n    for (i in 1..5) {\n        delay(100)\n        println(\"emit $i\")\n        emit(i)\n    }\n}\n\nfun main() = runBlocking {\n    var n: Flow<Int> = nums()\n    println(\"Hello World\")\n    n.collect {\n        println(it)\n    }\n}\n```\n\nçœ‹åˆ°è¼¸å‡ºå¯ä»¥ç™¼ç¾ï¼Œæœƒå…ˆçœ‹åˆ° emit() ä¸Šé¢çš„ print è¢«åŸ·è¡Œï¼Œæ‰æœƒåŸ·è¡Œåˆ°å‘¼å« collect æ™‚å‚³é€²å»çš„ functionã€‚\n\n```text\nHello World\nStart Flow\nemit 1\n1\nemit 2\n2\nemit 3\n3\nemit 4\n4\nemit 5\n5\n```\n\n## Flow çš„è³‡æ–™é‡æ˜¯å›ºå®šçš„\n\né€™å¥è©±çš„æ„æ€ä¸¦ä¸æ˜¯èªª flow åªèƒ½å®šç¾©å¥½æ•¸é‡å†å›å‚³ï¼Œè€Œæ˜¯èªªå¦‚æœ flow è£¡çš„æ‰€æœ‰ emit æ²’æœ‰è¢« collectï¼Œå°±æœƒå‡ºéŒ¯ã€‚\n\nä¸‹é¢çš„ flow å°±ä¸€å®šè¦è¢« collect äº”æ¬¡ï¼Œå¦‚æœå› ç‚ºå‘¼å«ä»–çš„ function è¢«æ„å¤–ä¸­æ–·ï¼Œé€™å€‹ flow ä¹Ÿæœƒæ‹‹å‡ºéŒ¯èª¤ã€‚\n\n```kotlin\nsuspend fun nums(): Flow<Int> = flow {\n    for (i in 1..5) {\n        emit(i)\n    }\n}\n```\n\né‚£éº¼å¦‚æœæˆ‘åªè¦ä¸€å®šæ•¸é‡çš„è³‡æ–™æ€éº¼è¾¦ï¼Ÿä¸‹é¢ç¯„ä¾‹å–è‡ªå®˜æ–¹æ–‡ä»¶ï¼š\n\n```kotlin\nfun numbers(): Flow<Int> = flow {\n    try {\n        emit(1)\n        emit(2)\n        println(\"This line will not execute\")\n        emit(3)\n    } finally {\n        println(\"Finally in numbers\")\n    }\n}\n\nfun main() = runBlocking<Unit> {\n    numbers()\n        .take(2) // take only the first two\n        .collect { value -> println(value) }\n}\n\n/* output:\n1\n2\nFinally in numbers\n*/\n```\n\n## Flow mapping\n\nFlow å¯ä»¥ç”¨ map çš„æ–¹å¼ï¼Œè½‰æ›æˆå¦ä¸€å€‹ Flowã€‚\n\né€™å€‹ä¾‹å­ç”¢ç”Ÿå¹³æ–¹æ•¸ï¼š\n\n```kotlin\nsuspend fun allNumbers(n: Int): Flow<Int> = flow {\n    for (i in 1..n) {\n        emit(i)\n    }\n}\n\nsuspend fun square(n: Int): Flow<Int> = allNumbers(n).map { it * it }\n\nfun main() = runBlocking {\n    square(10).collect {\n        print(\"$it \")\n    }\n}\n\n// output: 1 4 9 16 25 36 49 64 81 100\n```\n\n## Flow Filter\n\né€™å€‹ä¾‹å­è¼¸å‡º 1 åˆ° 100 ä¹‹é–“çš„æ‰€æœ‰è³ªæ•¸(å‹¿æ¨¡ä»¿ï¼Œæ•ˆç‡å ªæ†‚)ï¼š\n\n```kotlin\nsuspend fun allNumbers(n: Int): Flow<Int> = flow {\n    for (i in 1..n) {\n        emit(i)\n    }\n}\n\nsuspend fun primeNumbers(n: Int): Flow<Int> = allNumbers(n).filter { it.isPrime() }\n\nfun Int.isPrime(): Boolean {\n    if (this <= 1) return false\n    for (i in 2..this / 2) {\n        if (this % i == 0) {\n            return false\n        }\n    }\n    return true\n}\n\nfun main() = runBlocking {\n    primeNumbers(100).collect {\n        print(\"$it \")\n    }\n}\n\n// output: 2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97\n```\n\n> ç¢å¿µï¼šé€™æ®µç¨‹å¼çœŸçš„å……åˆ†å±•ç¾ Kotlin çš„å¨åŠ›..\n\n## å¾Œè¨˜\n\nFlow é‚„æœ‰å¾ˆå¤šè¤‡é›œçš„ç”¨æ³•ï¼Œåƒæ˜¯åˆä½µå…©å€‹ flow ä¹‹é¡çš„ï¼Œå»ºè­°æœ‰èˆˆè¶£çš„äººå¯ä»¥è‡ªå·±å»çœ‹å®˜æ–¹æ–‡ä»¶ã€‚\n\nå¦å¤–ï¼ŒKotlin å…¶å¯¦é‚„æœ‰ä¸€å€‹å«åš Sequence çš„ Interfaceï¼Œè·Ÿ Flow éå¸¸åƒï¼Œåœ¨ä¸æ˜¯éœ€è¦å¤šç·šç¨‹çš„æ™‚å€™å°±å·²ç¶“å¾ˆå¤ ç”¨ï¼ŒFlow ä¸»è¦åœ¨å¤šç·šç¨‹ä¸­ä½¿ç”¨ï¼ŒSequence å–®ç·šç¨‹ä¸­ä½¿ç”¨ã€‚\n\n## Reference\n\n- [Asynchronous Flow](https://kotlinlang.org/docs/flow.html)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Kotlin/Kotlin Flow.md","excerpt":"Kotlin åœ¨å¤šå·¥è™•ç†ä¸Šæä¾›éå¸¸å¥½ç”¨çš„ Coroutineã€‚ç•¶ä¸åŒ Job ä¹‹é–“éœ€è¦å‚³éè³‡æ–™æ™‚ï¼Œç¸½æœƒé‡åˆ°è¨±å¤šå•é¡Œï¼Œä»¥å‰æœ€ç°¡å–®çš„æ–¹å¼å°±æ˜¯ Callbackï¼Œä½† Callback æ¨¡å¼å·²ç¶“åœ¨å„å€‹ç¨‹å¼èªè¨€ä¸­ç”¢ç”Ÿè¨±å¤šå•é¡Œï¼Œé€™é‚Šå°±ä¸å¤šè¨è«–ã€‚Kotlin Coroutine å¦‚æœåªæ˜¯è¦å›å‚³ä¸€å€‹å€¼ï¼Œå¯ä»¥ç›´æ¥ç”¨ Suspend çš„ Return å€¼ï¼Œä½†å¦‚æœæ˜¯è¦å›å‚³å¾ˆå¤šè³‡æ–™å‘¢ï¼Ÿç°¡å–®çš„æ–¹å¼æ˜¯ç›´æ¥å›å‚³ Listï¼Œå¯â€¦","frontmatter":{"title":"Kotlin Flow","date":"2022-04-17T14:00:13.000Z","draft":false,"tags":["kotlin","coroutines","flow","android"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/973beda6-caa9-4559-1f92-8ab5bd7d2700/public","description":null}}},{"node":{"id":"90e0fd93-6420-5e55-aef4-b691b3fcf6e2","html":"<p>æœ€è¿‘å¸¸å¸¸æœƒçœ‹åˆ°åˆ¥å…¥ GitHub ä¸Šçš„ Commit æœƒæœ‰ Verified çš„å­—æ¨£ï¼ŒæŸ¥äº†æ‰çŸ¥é“é€™æ˜¯ç‚ºäº†é˜²æ­¢æœ‰äººç›œç”¨ä½ çš„ email ç°½ commitï¼Œç•¢ç«Ÿ git çš„ user.email æ˜¯å¯ä»¥è‡ªå·±éš¨ä¾¿è¨­çš„ï¼Œæ‰€ä»¥ GitHub å°±æä¾›ä¸€å€‹å¯ä»¥ç”¨å…¬ç§é‘°çš„æ–¹å¼ä¾†ç¢ºèªèº«ä»½ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6e429f76-94c1-46ff-77da-7d50a886d100/public\" alt=\"img\"></p>\n<!--more-->\n<h2>GnuPG</h2>\n<p>æˆ‘å€‘è¦åˆ©ç”¨ GnuPG ä¾†ç”¢ç”Ÿé‡‘é‘°å’Œç°½ç½² Commitï¼Œç•¶ç„¶è¦å…ˆå®‰è£ä»–ï¼Œå¯ä»¥è‡ªå·±æŸ¥ä¸€ä¸‹è‡ªå·±çš„ OS è¦æ€éº¼è£ï¼š</p>\n<p><a href=\"https://www.gnupg.org/download\">Download GnuPG</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew install gnupg     # macOS\nchoco install gnupg    # Windows\napt install gnupg      # Ubuntu</code></pre></div>\n<h2>ç”¢ç”Ÿ GPG Key</h2>\n<p>ç”¨ä¸‹é¢çš„ä¸€è¡ŒæŒ‡ä»¤å°±æœƒé€²åˆ°äº’å‹•å¼çš„ç•«é¢ï¼Œæ¥ä¸‹ä¾†éœ€è¦è¼¸å…¥ä¸€äº›è³‡æ–™ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gpg --full-generate-key</code></pre></div>\n<ol>\n<li>ç”¢ç”Ÿ Rsa and Rsa</li>\n<li>GitHub å»ºè­°ä½¿ç”¨ 4096ï¼Œæœ€è¤‡é›œçš„å°±å°äº†</li>\n<li>é‡‘é‘°è¦ä¸è¦éæœŸå¯ä»¥è‡ªå·±è©•ä¼°ï¼Œæˆ‘æ˜¯é¸ä¸éæœŸ</li>\n<li>ç¢ºèªè³‡æ–™è¼¸å…¥æ­£ç¢º</li>\n</ol>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d6411985-0b33-4ab2-e883-f95ce0da3c00/public\" alt=\"img\"></p>\n<ol>\n<li>è¼¸å…¥è¦ç°½ç½²çš„åå­—</li>\n<li>è¼¸å…¥è¦ç°½ç½²çš„ emailï¼Œæ³¨æ„å¿…é ˆèˆ‡ GitHub Email å’Œ <code class=\"language-text\">git config user.email</code> çš„ä¸€æ¨£ã€‚</li>\n<li>è¨»é‡‹éš¨ä¾¿è¼¸å…¥å³å¯</li>\n<li>ç¢ºèªè³‡æ–™è¼¸å…¥æ­£ç¢º</li>\n</ol>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/594a269c-ab4f-4484-fa9a-c74307454600/public\" alt=\"img\"></p>\n<p>æ¥ä¸‹ä¾†æœƒè·³å‡ºä¸€å€‹è¦è¼¸å…¥å¯†ç¢¼çš„ç•«é¢ï¼Œä¸€æ¨£ä¾è‡ªå·±éœ€æ±‚è¨­å®šå³å¯</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6b11a19b-c7fa-4697-0861-5fb4c66ff800/public\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/56a8fc50-5a1e-4a0e-e9ef-30b9fe74fc00/public\" alt=\"img\"></p>\n<p>é€™æ¨£å°±ç”¢ç”ŸæˆåŠŸäº†ï¼Œå¯ä»¥è¨˜ä¸€ä¸‹é€™å€‹ç•«é¢å‡ºç¾çš„è³‡æ–™</p>\n<p>å¦‚æœè¦é¡¯ç¤ºæ‰€æœ‰çš„ Keyï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gpg --list-secret-keys</code></pre></div>\n<h2>è¤‡è£½ GPG Key åˆ° GitHub</h2>\n<p>ç”¨å„å€‹æŒ‡ä»¤ä¾†é¡¯ç¤ºå…¬é‘°ï¼Œä¸¦ä¸”è¤‡è£½åˆ° GitHub ä¸Šï¼ŒåŒ…å« Begin å’Œ End å…©è¡Œï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gpg --armor --export <span class=\"token operator\">&lt;</span>Your Key<span class=\"token operator\">></span></code></pre></div>\n<p>é€²åˆ°è¨­å®šè£¡ï¼Œæ–°å¢ GPG Keyï¼Œè²¼ä¸Šå‰›å‰›è¤‡è£½ä¸‹çš„é‡‘é‘°</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/8a75edb9-4a08-4060-608a-d63353a77c00/public\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9c5ad211-0bcc-4058-a304-6903e69c8700/public\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0ef8e55b-7f1b-43ab-cd40-43303b98bc00/public\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/32e1e3a5-2fdc-4e6d-aef3-08122d448d00/public\" alt=\"img\"></p>\n<h2>ç°½ç½² Commit</h2>\n<p>è¦ç°½ç½² Commit æˆ‘å€‘éœ€è¦å…ˆå‘Šè¨´ git æˆ‘å€‘è¦ç”¨å“ªæ”¯é‘°åŒ™ï¼Œä¹Ÿæ˜¯ç”¨ git config è¨­å®šï¼Œå¦‚æœè¦æ¯å€‹å€‰åº«éƒ½ç”¨é€™æ”¯é‘°åŒ™ï¼Œå¯ä»¥ç›´æ¥è¨­å®š globalï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> config user.signingkey <span class=\"token operator\">&lt;</span>Your Key<span class=\"token operator\">></span>\n<span class=\"token function\">git</span> config --global user.signingkey <span class=\"token operator\">&lt;</span>Your Key<span class=\"token operator\">></span></code></pre></div>\n<p>è¨­å®šå¥½å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥é–‹å§‹ç°½ Commitï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯åœ¨ Commit æ™‚åŠ ä¸Š <code class=\"language-text\">-S</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> commit -S -m <span class=\"token string\">\"Commit Message\"</span></code></pre></div>\n<p>å¦‚æœè¦ºå¾—æ¯æ¬¡éƒ½è¦åŠ ä¸Šåƒæ•¸å¾ˆéº»ç…©ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åŠ åˆ° config ä¸­ï¼Œè®“æ¯æ¬¡ Commit éƒ½é è¨­ç°½ç½²ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> config commit.gpgsign <span class=\"token boolean\">true</span>\n<span class=\"token function\">git</span> config --global commit.gpgsign <span class=\"token boolean\">true</span></code></pre></div>\n<p>æ¥ä¸‹ä¾†ï¼Œåªè¦ push åˆ° GitHub ä¸Šï¼Œå°±æœƒçœ‹åˆ°æœ‰ Verified çš„æ¨™ç±¤ï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6e429f76-94c1-46ff-77da-7d50a886d100/public\" alt=\"img\"></p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key\">Generating a new GPG key</a></li>\n<li><a href=\"https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account\">Adding a new GPG key to your GitHub account</a></li>\n<li><a href=\"https://www.gnupg.org/\">GnuPG</a></li>\n</ul>","rawMarkdownBody":"\næœ€è¿‘å¸¸å¸¸æœƒçœ‹åˆ°åˆ¥å…¥ GitHub ä¸Šçš„ Commit æœƒæœ‰ Verified çš„å­—æ¨£ï¼ŒæŸ¥äº†æ‰çŸ¥é“é€™æ˜¯ç‚ºäº†é˜²æ­¢æœ‰äººç›œç”¨ä½ çš„ email ç°½ commitï¼Œç•¢ç«Ÿ git çš„ user.email æ˜¯å¯ä»¥è‡ªå·±éš¨ä¾¿è¨­çš„ï¼Œæ‰€ä»¥ GitHub å°±æä¾›ä¸€å€‹å¯ä»¥ç”¨å…¬ç§é‘°çš„æ–¹å¼ä¾†ç¢ºèªèº«ä»½ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6e429f76-94c1-46ff-77da-7d50a886d100/public)\n\n<!--more-->\n\n## GnuPG\n\næˆ‘å€‘è¦åˆ©ç”¨ GnuPG ä¾†ç”¢ç”Ÿé‡‘é‘°å’Œç°½ç½² Commitï¼Œç•¶ç„¶è¦å…ˆå®‰è£ä»–ï¼Œå¯ä»¥è‡ªå·±æŸ¥ä¸€ä¸‹è‡ªå·±çš„ OS è¦æ€éº¼è£ï¼š\n\n[Download GnuPG](https://www.gnupg.org/download)\n\n```text\nbrew install gnupg     # macOS\nchoco install gnupg    # Windows\napt install gnupg      # Ubuntu\n```\n\n## ç”¢ç”Ÿ GPG Key\n\nç”¨ä¸‹é¢çš„ä¸€è¡ŒæŒ‡ä»¤å°±æœƒé€²åˆ°äº’å‹•å¼çš„ç•«é¢ï¼Œæ¥ä¸‹ä¾†éœ€è¦è¼¸å…¥ä¸€äº›è³‡æ–™ï¼š\n\n```shell\ngpg --full-generate-key\n```\n\n1. ç”¢ç”Ÿ Rsa and Rsa\n2. GitHub å»ºè­°ä½¿ç”¨ 4096ï¼Œæœ€è¤‡é›œçš„å°±å°äº†\n3. é‡‘é‘°è¦ä¸è¦éæœŸå¯ä»¥è‡ªå·±è©•ä¼°ï¼Œæˆ‘æ˜¯é¸ä¸éæœŸ\n4. ç¢ºèªè³‡æ–™è¼¸å…¥æ­£ç¢º\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d6411985-0b33-4ab2-e883-f95ce0da3c00/public)\n\n1. è¼¸å…¥è¦ç°½ç½²çš„åå­—\n2. è¼¸å…¥è¦ç°½ç½²çš„ emailï¼Œæ³¨æ„å¿…é ˆèˆ‡ GitHub Email å’Œ `git config user.email` çš„ä¸€æ¨£ã€‚\n3. è¨»é‡‹éš¨ä¾¿è¼¸å…¥å³å¯\n4. ç¢ºèªè³‡æ–™è¼¸å…¥æ­£ç¢º\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/594a269c-ab4f-4484-fa9a-c74307454600/public)\n\næ¥ä¸‹ä¾†æœƒè·³å‡ºä¸€å€‹è¦è¼¸å…¥å¯†ç¢¼çš„ç•«é¢ï¼Œä¸€æ¨£ä¾è‡ªå·±éœ€æ±‚è¨­å®šå³å¯\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6b11a19b-c7fa-4697-0861-5fb4c66ff800/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/56a8fc50-5a1e-4a0e-e9ef-30b9fe74fc00/public)\n\né€™æ¨£å°±ç”¢ç”ŸæˆåŠŸäº†ï¼Œå¯ä»¥è¨˜ä¸€ä¸‹é€™å€‹ç•«é¢å‡ºç¾çš„è³‡æ–™\n\nå¦‚æœè¦é¡¯ç¤ºæ‰€æœ‰çš„ Keyï¼š\n\n```shell\ngpg --list-secret-keys\n```\n\n## è¤‡è£½ GPG Key åˆ° GitHub\n\nç”¨å„å€‹æŒ‡ä»¤ä¾†é¡¯ç¤ºå…¬é‘°ï¼Œä¸¦ä¸”è¤‡è£½åˆ° GitHub ä¸Šï¼ŒåŒ…å« Begin å’Œ End å…©è¡Œï¼š\n\n```shell\ngpg --armor --export <Your Key>\n```\n\né€²åˆ°è¨­å®šè£¡ï¼Œæ–°å¢ GPG Keyï¼Œè²¼ä¸Šå‰›å‰›è¤‡è£½ä¸‹çš„é‡‘é‘°\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/8a75edb9-4a08-4060-608a-d63353a77c00/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9c5ad211-0bcc-4058-a304-6903e69c8700/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0ef8e55b-7f1b-43ab-cd40-43303b98bc00/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/32e1e3a5-2fdc-4e6d-aef3-08122d448d00/public)\n\n## ç°½ç½² Commit\n\nè¦ç°½ç½² Commit æˆ‘å€‘éœ€è¦å…ˆå‘Šè¨´ git æˆ‘å€‘è¦ç”¨å“ªæ”¯é‘°åŒ™ï¼Œä¹Ÿæ˜¯ç”¨ git config è¨­å®šï¼Œå¦‚æœè¦æ¯å€‹å€‰åº«éƒ½ç”¨é€™æ”¯é‘°åŒ™ï¼Œå¯ä»¥ç›´æ¥è¨­å®š globalï¼š\n\n```shell\ngit config user.signingkey <Your Key>\ngit config --global user.signingkey <Your Key>\n```\n\nè¨­å®šå¥½å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥é–‹å§‹ç°½ Commitï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯åœ¨ Commit æ™‚åŠ ä¸Š `-S`ï¼š\n\n```shell\ngit commit -S -m \"Commit Message\"\n```\n\nå¦‚æœè¦ºå¾—æ¯æ¬¡éƒ½è¦åŠ ä¸Šåƒæ•¸å¾ˆéº»ç…©ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åŠ åˆ° config ä¸­ï¼Œè®“æ¯æ¬¡ Commit éƒ½é è¨­ç°½ç½²ï¼š\n\n```shell\ngit config commit.gpgsign true\ngit config --global commit.gpgsign true\n```\n\næ¥ä¸‹ä¾†ï¼Œåªè¦ push åˆ° GitHub ä¸Šï¼Œå°±æœƒçœ‹åˆ°æœ‰ Verified çš„æ¨™ç±¤ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6e429f76-94c1-46ff-77da-7d50a886d100/public)\n\n## Reference\n\n- [Generating a new GPG key](https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key)\n- [Adding a new GPG key to your GitHub account](https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-new-gpg-key-to-your-github-account)\n- [GnuPG](https://www.gnupg.org/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Git/github gpg.md","excerpt":"æœ€è¿‘å¸¸å¸¸æœƒçœ‹åˆ°åˆ¥å…¥ GitHub ä¸Šçš„ Commit æœƒæœ‰ Verified çš„å­—æ¨£ï¼ŒæŸ¥äº†æ‰çŸ¥é“é€™æ˜¯ç‚ºäº†é˜²æ­¢æœ‰äººç›œç”¨ä½ çš„ email ç°½ commitï¼Œç•¢ç«Ÿ git çš„ user.email æ˜¯å¯ä»¥è‡ªå·±éš¨ä¾¿è¨­çš„ï¼Œæ‰€ä»¥ GitHub å°±æä¾›ä¸€å€‹å¯ä»¥ç”¨å…¬ç§é‘°çš„æ–¹å¼ä¾†ç¢ºèªèº«ä»½ã€‚ img GnuPG æˆ‘å€‘è¦åˆ©ç”¨ GnuPG ä¾†ç”¢ç”Ÿé‡‘é‘°å’Œç°½ç½² Commitï¼Œç•¶ç„¶è¦å…ˆå®‰è£ä»–ï¼Œå¯ä»¥è‡ªå·±æŸ¥ä¸€ä¸‹è‡ªå·±çš„ OS è¦æ€â€¦","frontmatter":{"title":"GitHub GPG - Verified Commit","date":"2022-03-24T14:32:19.000Z","draft":false,"tags":["git","github","gpg","verified","commit"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/eb2adedc-6625-46d1-73ea-07c01fc92000/public","description":"æœ€è¿‘å¸¸å¸¸æœƒçœ‹åˆ°åˆ¥å…¥ GitHub ä¸Šçš„ Commit æœƒæœ‰ Verified çš„å­—æ¨£ï¼ŒæŸ¥äº†æ‰çŸ¥é“é€™æ˜¯ç‚ºäº†é˜²æ­¢æœ‰äººç›œç”¨ä½ çš„ email ç°½ commitï¼Œç•¢ç«Ÿ git çš„ user.email æ˜¯å¯ä»¥è‡ªå·±éš¨ä¾¿è¨­çš„ï¼Œæ‰€ä»¥ GitHub å°±æä¾›ä¸€å€‹å¯ä»¥ç”¨å…¬ç§é‘°çš„æ–¹å¼ä¾†ç¢ºèªèº«ä»½ã€‚"}}},{"node":{"id":"8e495473-8d57-530c-bb3f-4262fce2dde7","html":"<p>èªªåˆ°æœå°‹çš„è§£æ±ºæ–¹æ¡ˆï¼Œæœ€æœ‰åçš„å¤§æ¦‚å°±æ˜¯ <a href=\"https://www.algolia.com/\">Algolia</a>ï¼Œå¯ä»¥æ–¹ä¾¿çš„å‰µå»ºç´¢å¼•ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¯«å¥½çš„å‰ç«¯ç¶²é å…ƒä»¶å¯ä»¥ä½¿ç”¨ï¼Œå”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ”¶è²»ã€‚é›–ç„¶ Algolia è¦æ”¶è²»ï¼Œä½†å…¶å¯¦å°æ–¼æˆ‘é€™å€‹å°ç¶²é éƒ½ç´¢å¼•é‡æ˜¯å®Œå…¨ä¸ç”¨éŒ¢çš„ï¼Œä½†æ˜¯å°±é‚„æ˜¯è¦ºå¾—è‡ªå·±æ¶ä¸€å€‹ç´¢å¼•ç³»çµ±æ¯”è¼ƒæœ‰æ„Ÿè¦ºï¼Œç„¶å¾Œæˆ‘å°±åœ¨ GitHub ä¸Šç™¼ç¾äº†é–‹æºçš„ <a href=\"https://meilisearch.com\">MeiliSearch</a>ï¼ŒåŠŸèƒ½åŸºæœ¬ä¸Šè·Ÿ Algolia å¾ˆåƒï¼Œä¹Ÿæ”¯æ´ä¸­æ–‡ï¼Œç”šè‡³æœ‰äº›å‰ç«¯å…ƒä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ Algolia çš„ï¼Œç¼ºé»å°±æ˜¯è¦è‡ªå·±æ¶è¨­ Serverã€‚</p>\n<!--more-->\n<p>æœ¬æ–‡ä»¥æœå°‹æœ¬ç«™ç‚ºç›®çš„æ’°å¯«ï¼Œæ‰€ä»¥å¾Œé¢çš„ç¯„ä¾‹å¤§å¤šèˆ‡ Hugo ç›¸é—œï¼Œå¦‚æœæƒ³è¦çœ‹å®Œæ•´çš„ç¨‹å¼ç¢¼ï¼Œå¯ä»¥ç›´æ¥åˆ°æœ¬ç«™çš„ GitHubã€‚</p>\n<h2>ç°¡ä»‹ MeiliSearch Server</h2>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f93885e8-f670-44ec-ea24-264a97c9a500/public\" alt=\"img\"></p>\n<p>åŸºæœ¬ä¸Š MeiliSearch å°±æ˜¯ä¸€å€‹ RESTful APIï¼Œç›®æ¨™æ˜¯è¦æä¾›ç¾æˆçš„æœå°‹è§£æ±ºæ–¹æ¡ˆï¼Œå®Œå…¨é–‹æºï¼Œæä¾›å³æ™‚æœå°‹ã€æ‹¼å¯«éŒ¯èª¤ã€åŒç¾©è©ã€æ¨¡ç³Šæœå°‹ã€è‡ªè¨‚æ’åã€æ’åºå’Œå¤šèªè¨€æœå°‹çš„æ”¯æ´ï¼Œé€£ä¸­æ–‡ä¹Ÿä¸ä¾‹å¤–ã€‚æ ¹æ“šå®˜æ–¹æ–‡ä»¶çš„ä»‹ç´¹ï¼ŒMeiliSearch ä»¥æ˜“ç”¨æ€§ç‚ºé¦–è¦ç›®æ¨™ï¼Œå°æ–¼é–‹ç™¼è€…ï¼Œåªéœ€è¦å°‘å°‘å¹¾è¡Œ code å°±å¯ä»¥ä½¿ç”¨ï¼›å°æ–¼ä½¿ç”¨è€…ï¼Œæä¾›ç›´è§€çš„å³æ™‚è¼¸å…¥å³æ™‚åæ‡‰çš„æœå°‹çµæœã€‚</p>\n<p>å®˜æ–¹ä¹Ÿæœ‰å¾ˆå¤šçš„ SDKï¼Œ.NET, Dart, Go, Java, JS, Python, Swiftï¼Œè€Œä¸”ä¸Šé¢é€™äº›é‚„ä¸æ˜¯å…¨éƒ¨ï¼Œæ‰€ä»¥åœ¨é–‹ç™¼å„èªè¨€çš„æ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œéƒ½å¯ä»¥è€ƒæ…®ç”¨ MeiliSearch åšç‚ºå¾Œç«¯æœå°‹å¼•æ“ã€‚</p>\n<p>MeiliSearch ä¹Ÿä¸æ˜¯å®Œå…¨æ²’æœ‰ç¼ºé»ï¼Œç¼ºé»å°±æ˜¯è¦è‡ªå·±æœ‰ä¼ºæœå™¨ï¼Œåƒæ˜¯æœ¬æ–‡ä»Šå¤©çš„æ¡ˆä¾‹å°±æ˜¯è¦å¹« Static Site åšæœå°‹çš„åŠŸèƒ½ï¼Œé€šå¸¸ Static Site å¤§å®¶æ‡‰è©²éƒ½æ˜¯ç”¨ GitHub Pages ç­‰ Statice Site Hosting æœå‹™ï¼Œæ‰€ä»¥ç¶²é æœ¬èº«æ˜¯æ²’æœ‰è‡ªå·±æ¶ Server çš„ï¼Œç‚ºäº†åŠ å€‹æœå°‹åŠŸèƒ½æœƒè¦å¤šä¸€å€‹ Server å°±æ˜¯å¾ˆå¤§çš„ç¼ºé»ã€‚</p>\n<h2>SearchIndex.json</h2>\n<p>åœ¨é–‹å§‹ä½¿ç”¨ MeiliSearch ä¹‹å‰ï¼Œæˆ‘å€‘å…ˆä¾†æŠŠè¦ç´¢å¼•çš„è³‡æ–™æº–å‚™å¥½ï¼ŒMeiliSearch æœƒéœ€è¦ä½¿ç”¨ json ç•¶ä½œç´¢å¼•ï¼Œæ‰€ä»¥æˆ‘å€‘è¦ç”¢ç”Ÿä¸€å€‹ json çš„ç¯„æœ¬ã€‚å‰µå»º <code class=\"language-text\">/layouts/list.searchindex.json</code>ï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[ {{- $i := 0 -}}\n    {{- range where .Site.RegularPages \"Section\" \"ne\" \"\" -}}\n       {{- if not .Params.noSearch -}}\n          {{- if gt $i 0 }},{{ end -}}\n          {\"id\":{{ $i }}, \"date\":\"{{ .Date.Unix }}\", \"url\":\"{{ .Permalink }}\", \"title\":{{ .Title | jsonify  }}, \"summary\":{{ with .Description}}{{ . | plainify | jsonify }}{{ else }}{{ .Summary | plainify | jsonify }}{{ end }}, \"content\":{{ .Content | plainify | jsonify }},\"tags\":[ {{- $t := 0 }}{{- range .Param \"tags\" -}}{{ if gt $t 0 }},{{ end }}{{ . | jsonify }}{{ $t = add $t 1 }}{{ end -}} ], \"section\": {{ .Section | jsonify -}} }\n        {{- $i = add $i 1 -}}\n    {{- end -}}\n{{- end -}} ]</code></pre></div>\n<p>ç„¶å¾Œåœ¨ <code class=\"language-text\">config.yaml</code> ä¸­åŠ å…¥ä¸‹é¢çš„è¨­å®šå€¼ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">outputFormats</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">SearchIndex</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">mediaType</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"application/json\"</span>\n    <span class=\"token key atrule\">baseName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"searchindex\"</span>\n    <span class=\"token key atrule\">isPlainText</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">notAlternative</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n<span class=\"token key atrule\">outputs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">home</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"HTML\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"RSS\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"SearchIndex\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>å®Œæˆä¸Šé¢å…©æ¨£è¨­å®šå¾Œï¼Œå¯ä»¥ <code class=\"language-text\">hugo</code> ä¸€ä¸‹è©¦è©¦çœ‹ï¼Œæœ‰æ²’æœ‰åœ¨ <code class=\"language-text\">/public/searchindex.json</code> ä¸­çœ‹åˆ°ç´¢å¼•æª”æ¡ˆï¼Œæ‡‰è©²æœƒé¡ä¼¼å¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"date\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1622891718\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://tonypepe.com/posts/others/hello-world/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello World. This is a test post.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"This is my first post in hugo\\ncontent\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"hugo\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"test\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"section\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"posts\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<h2>æ¶è¨­ MeiliSearch Server</h2>\n<p>æº–å‚™å¥½ç´¢å¼•æª”æ¡ˆå¾Œï¼Œæˆ‘å€‘å°±ä¾†æ¶è¨­ MeiliSearch çš„ Serverï¼ŒMeiliSearch æ˜¯ç”¨ Rust ç·¨å¯«ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯è·¨å¹³å°é€šç”¨ã€‚å®˜æ–¹æä¾›å¾ˆå¤šç¨®å®‰è£æ–¹å¼ï¼Œé‚„æœ‰ä¸€éµå•Ÿå‹•è…³æœ¬ï¼Œç•¶ç„¶ï¼Œç‚ºäº†é¿å…å¼„é«’ç’°å¢ƒï¼Œæœ€æ¨è–¦çš„ç•¶ç„¶é‚„æ˜¯ Dockerï¼Œä¸‹é¢å°±å…ˆä»¥ Docker ç‚ºç¯„ä¾‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run -it --rm <span class=\"token punctuation\">\\</span>\n    -p <span class=\"token number\">7700</span>:7700 <span class=\"token punctuation\">\\</span>\n    -v <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span>/data.ms:/data.ms <span class=\"token punctuation\">\\</span>\n    getmeili/meilisearch:latest</code></pre></div>\n<p>æ³¨æ„ä¸€ä¸‹ï¼Œä¸Šé¢æ›è¼‰äº†ä¸€å€‹ <code class=\"language-text\">data.ms</code> çš„è³‡æ–™å¤¾ï¼Œæ‰€ä»¥åœ¨åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å‰ï¼Œè¨˜å¾—å…ˆå‰µå»ºå¥½ã€‚<code class=\"language-text\">data.ms</code> é€™å€‹è³‡æ–™å¤¾æ˜¯ç‚ºäº†å­˜æ”¾ç´¢å¼•è³‡æ–™ï¼Œé¿å…å› ç‚º Docker å®¹å™¨é‡å•Ÿå°±æå¤±è³‡æ–™ï¼Œæ‰€ä»¥å¾ˆé‡è¦ã€‚</p>\n<p>ç¾åœ¨å¯ä»¥åˆ° <a href=\"http://localhost:7700\">http://localhost:7700</a>ï¼Œæœƒçœ‹åˆ°æœ‰ä¸€å€‹ç°¡æ˜“çš„ WEB UIã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/5664dc51-5d55-415a-3633-ac45e17d7a00/public\" alt=\"img\"></p>\n<p>å¦‚æœä¸æƒ³ç”¨ Dockerï¼Œé‚„æ˜¯å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶çš„å…¶ä»–å®‰è£æ–¹å¼å®‰è£ã€‚</p>\n<h2>æäº¤ç´¢å¼•è³‡æ–™</h2>\n<p>å‰é¢æœ‰æåˆ° MeiliSearch æ˜¯ RESTful APIï¼Œæ‰€ä»¥è¦å‘ä»–æœå°‹æˆ–æ˜¯æä¾›è³‡æ–™ï¼Œéƒ½æ˜¯ç”¨ HTTP Methodã€‚å®˜æ–¹æ–‡ä»¶å¯«çš„éƒ½æ˜¯ curlï¼Œæˆ‘å€‘é‚„æ˜¯ä½¿ç”¨ GUI çš„æ–¹å¼ä»‹ç´¹ã€‚HTTP çš„ GUI å¤§å®¶æ‡‰è©²éƒ½æœƒæƒ³åˆ° Postmanï¼Œä½†ä»Šå¤©æˆ‘å€‘è¦ä½¿ç”¨ä»–çš„é–‹æºæ›¿ä»£ <a href=\"https://hoppspot.io\">Hoppsotch</a>ï¼Œä»–æ˜¯ä¸€å€‹ç¶²é å·¥å…·ï¼Œæ‰€ä»¥ä¸éœ€è¦å®‰è£ã€‚</p>\n<p>å¯ä»¥å…ˆå° <code class=\"language-text\">/health</code> åš <code class=\"language-text\">GET</code> è©¦è©¦çœ‹æœ‰æ²’æœ‰é€£ä¸Šï¼Œå¦‚æœæ²’æœ‰é€£ä¸Šï¼Œå¯èƒ½è¦æª¢æŸ¥ä¸€ä¸‹æœ‰æ²’æœ‰æˆåŠŸå•Ÿå‹• MeiliSearch Serverã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/cf86e106-a1f6-472e-d2c1-a6b186944f00/public\" alt=\"img\"></p>\n<p>ç¢ºå®šé€£ä¸Šå¾Œï¼Œæˆ‘å€‘å°±ä¾†æäº¤ç´¢å¼•è³‡æ–™ï¼Œå¦‚æœé‚„æ²’æœ‰ Hugo ç”¢ç”Ÿçš„ç´¢å¼•è³‡æ–™ï¼Œå¯ä»¥å…ˆåˆ°æœ¬ç«™çš„ GitHubï¼Œæ‹¿æœ¬ç«™çš„ <a href=\"https://github.com/TonyPepeBear/HugoBlog/blob/1bfae9859a44338d24a9f6676be37f72cc983505/searchindex.json\">searchindex.json</a> åšæ¸¬è©¦ã€‚</p>\n<p>å› ç‚º MeiliSearch ä¹Ÿå¯ä»¥åŒæ™‚æœ‰å¤šå€‹ Indexes åšæœå°‹ï¼Œæˆ‘å€‘ä¸‹é¢çš„ç¯„ä¾‹ä»¥ <code class=\"language-text\">hugo_blog</code> ä½œç‚ºç¯„ä¾‹åç¨±ï¼Œå¤§å®¶å¯ä»¥æ ¹æ“šéœ€æ±‚è‡ªå·±æ±ºå®šä½¿ç”¨çš„åç¨±ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/71797a57-6f97-44cd-f4dc-675ec42ffd00/public\" alt=\"img\"></p>\n<p>å¯ä»¥çœ‹åˆ°ä¸Šåœ–å° <code class=\"language-text\">/indexes/&lt;&lt;IndexName>>/documents</code> åš <code class=\"language-text\">POST</code> æ–¹æ³•ï¼Œå°±å¯ä»¥æŠŠç´¢å¼•è³‡æ–™æäº¤åˆ° MeiliSearch Serverã€‚è¨˜å¾—å…§å®¹é¡å‹æ˜¯ <code class=\"language-text\">application/json</code>ï¼Œç„¶å¾ŒæŠŠç´¢å¼•è³‡æ–™æ”¾åˆ° bodyã€‚</p>\n<p>ç¾åœ¨å›åˆ° <a href=\"http://localhost:7700\">localhost:7700</a>ï¼Œæ‡‰è©²å°±å¯ä»¥çœ‹åˆ°åŸæœ¬ç©ºç©ºå¦‚ä¹Ÿçš„ WEB UI ç¾åœ¨å¯ä»¥åšæœå°‹äº†ï¼Œå¯ä»¥å…ˆåœ¨é€™è£¡åšä¸€äº›ç°¡å–®çš„æœå°‹ï¼Œè©¦è©¦çœ‹è‡ªå·±çš„ç´¢å¼•è³‡æ–™æœ‰æ²’æœ‰è¢«æˆåŠŸçš„ä½¿ç”¨ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c58970b0-53b5-4a16-50bb-ff40fa6fde00/public\" alt=\"img\"></p>\n<h2>MeiliSearch in Production</h2>\n<p>MeiliSearch é è¨­çš„å•Ÿå‹•æ–¹å¼å…¶å¯¦æ˜¯ <code class=\"language-text\">development</code>ï¼Œé€™æ¨¡å¼åªæ˜¯æ–¹ä¾¿æœ¬åœ°åšæ¸¬è©¦ä½¿ç”¨çš„ï¼Œå¦‚æœè¦ä½¿ç”¨åœ¨ç”Ÿç”¢ç’°å¢ƒï¼Œæ‡‰è©²è¦ä»¥ <code class=\"language-text\">production</code> æ¨¡å¼å•Ÿå‹•ã€‚åœ¨ Production æ¨¡å¼ä¸‹ï¼Œæœƒæœ‰å…©å€‹ä¸ä¸€æ¨£çš„åœ°æ–¹ï¼Œç¬¬ä¸€é …æ˜¯ Web UI æœƒè¢«åœç”¨ï¼Œç¬¬äºŒé …æ˜¯æœƒå¿…é ˆè¦è¨­å®š <code class=\"language-text\">Master Key</code>ï¼Œä¸‹é¢é‚„æ˜¯ç”¨ Docker ä½œç‚ºç¯„ä¾‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run -it --rm <span class=\"token punctuation\">\\</span>\n    -p <span class=\"token number\">7700</span>:7700 <span class=\"token punctuation\">\\</span>\n    -v <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">pwd</span><span class=\"token variable\">)</span></span>/data.ms:/data.ms <span class=\"token punctuation\">\\</span>\n    -e <span class=\"token assign-left variable\">MEILI_ENV</span><span class=\"token operator\">=</span>production <span class=\"token punctuation\">\\</span>\n    -e <span class=\"token assign-left variable\">MEILI_MASTER_KEY</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>Your Master Key<span class=\"token operator\">></span> <span class=\"token punctuation\">\\</span>\n    getmeili/meilisearch:latest</code></pre></div>\n<p>ä¸Šé¢è¨­å®šçš„ Master Keyï¼Œå°±æ˜¯ç®¡ç†æ¬Šé™æœ€å¤§çš„ API Keyï¼Œæ‰€ä»¥è¦è¨˜å¾—å¦¥å–„ä¿å­˜ã€‚</p>\n<p>ä¸‹é¢ç”¨å‰›å‰›çš„ Master Key å»å° <code class=\"language-text\">/keys</code> åš <code class=\"language-text\">GET</code>ï¼Œç„¶å¾Œåœ¨ Headers ä¸­ï¼ŒåŠ ä¸Šå‰›å‰›çš„ Master Keyï¼Œå°±å¯ä»¥æ‹¿åˆ°é è¨­çš„æœå°‹ KEYï¼Œå’Œé è¨­çš„ ADMIN KEYã€‚å¦‚æœè¦å†å¦å¤–æ–°å¢ API KEYï¼Œå¯ä»¥åƒè€ƒå®˜æ–¹çš„æ–‡ä»¶ï¼Œé€™è£¡å°±ä¸å¤šè‘—å¢¨ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/91af11f7-29fc-446b-7ae1-dcb47f82b900/public\" alt=\"img\"></p>\n<h2>ç‚ºç¶²é åŠ ä¸Šæœå°‹åŠŸèƒ½</h2>\n<p>æˆ‘å€‘æœƒç”¨åˆ° MeiliSearch æä¾›çš„ <a href=\"https://github.com/meilisearch/instant-meilisearch\">Instant MeiliSearch</a>ï¼Œé€™å€‹ JS åº«å°±æ˜¯ä½¿ç”¨ Algolia çš„ Instant Search æ”¹çš„ï¼Œæ‰€ä»¥æœ‰äº›æ–‡ä»¶å¯ä»¥ç›´æ¥å»çœ‹ Algolia çš„å®˜æ–¹æ–‡ä»¶ã€‚Instant MeiliSearch æœ€ç°¡å–®çš„ä½¿ç”¨æ–¹å¼ä¹Ÿæ˜¯ç›´æ¥ç”¨ CDN çš„æ–¹å¼ï¼Œä¸‹é¢æ˜¯ä¸€å€‹æœ€ç°¡å–®çš„æ¨¡æ¿ï¼Œçœ‹æ‡‚å¾Œç”¨é¡ä¼¼çš„é‚è¼¯åŠ åˆ°è‡ªå·±çš„ç¶²é ä¸­å°±å¥½ã€‚</p>\n<p>html:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>searchbox<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hits<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/@meilisearch/instant-meilisearch/dist/instant-meilisearch.umd.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/instantsearch.js@4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>./app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>ä¸‹é¢æ˜¯å‰›å‰›çš„ html æœƒç”¨åˆ°çš„ <code class=\"language-text\">app.js</code>ï¼Œç”¨ä¾†ä½œç‚º Search çš„è¨­å®šå€¼ï¼Œåªè¦æŠŠä¸‹é¢çš„ç¶²å€è¨­å®šæˆè‡ªå·±çš„ç¶²å€ï¼Œå’Œè‡ªå·±åœ¨å‰å¹¾æ­¥é©Ÿæ‹¿åˆ°çš„æœå°‹ API KEY å°±å¯ä»¥ä½¿ç”¨äº†ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> search <span class=\"token operator\">=</span> <span class=\"token function\">instantsearch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">indexName</span><span class=\"token operator\">:</span> <span class=\"token string\">\"steam-video-games\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">searchClient</span><span class=\"token operator\">:</span> <span class=\"token function\">instantMeiliSearch</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"https://integration-demos.meilisearch.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"q7QHwGiX841a509c8b05ef29e55f2d94c02c00635f729ccf097a734cbdf7961530f47c47\"</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsearch<span class=\"token punctuation\">.</span><span class=\"token function\">addWidgets</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  instantsearch<span class=\"token punctuation\">.</span>widgets<span class=\"token punctuation\">.</span><span class=\"token function\">searchBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#searchbox\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  instantsearch<span class=\"token punctuation\">.</span>widgets<span class=\"token punctuation\">.</span><span class=\"token function\">hits</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#hits\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">templates</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">item</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n        &lt;div>\n          &lt;div class=\"hit-name\">\n            {{#helpers.highlight}}{ \"attribute\": \"name\" }{{/helpers.highlight}}\n          &lt;/div>\n        &lt;/div>\n      </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsearch<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>å¦‚æœè¦ºå¾—ä»–é è¨­æä¾›çš„ UI å¾ˆé†œï¼Œå¯ä»¥ç”¨ CSS çš„æ–¹å¼å»æ”¹ä»–ã€‚</p>\n<h2>GitHub Actions è‡ªå‹•æäº¤ç´¢å¼•</h2>\n<p>ä¸å»¢è©±ï¼Œç›´æ¥ä¸Šæœ¬ç«™çš„ yml:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> MeiliSearch Index\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> master <span class=\"token comment\"># Set a branch to deploy</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span><span class=\"token number\">20.04</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">submodules</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># Fetch Hugo themes (true OR recursive)</span>\n          <span class=\"token key atrule\">fetch-depth</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token comment\"># Fetch all history for .GitInfo and .Lastmod</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Node\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"14\"</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Hugo\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>hugo@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">hugo-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"latest\"</span>\n          <span class=\"token key atrule\">extended</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          npm i\n          hugo --minify</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Post Index\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          curl \\\n            -X POST \"https://search.tonypepe.com/indexes/hugo_blog/documents\" \\\n            -H 'Authorization: Bearer ${{ secrets.MEILISEARCH_KEY }}' \\\n            -H 'Content-Type: application/json' \\\n            --data-binary \"@public/searchindex.json\"</span></code></pre></div>\n<p>å…¶å¯¦é‡é»å°±æ˜¯åœ¨æœ€å¾Œä¸€æ­¥ï¼ŒæŠŠç´¢å¼•æª”æ¡ˆ POST åˆ° MeiliSearch å°±å¯ä»¥äº†ã€‚</p>\n<h2>Referenc</h2>\n<ul>\n<li><a href=\"https://meilisearch.com\">MeiliSearch</a></li>\n<li><a href=\"https://discourse.gohugo.io/t/a-simple-javascript-based-full-text-search-function/29119\">A simple javascript based full text search function</a></li>\n<li><a href=\"https://hoppspot.io\">Hoppsotch</a></li>\n<li><a href=\"https://github.com/meilisearch/instant-meilisearch\">Instant MeiliSearch</a></li>\n</ul>","rawMarkdownBody":"\nèªªåˆ°æœå°‹çš„è§£æ±ºæ–¹æ¡ˆï¼Œæœ€æœ‰åçš„å¤§æ¦‚å°±æ˜¯ [Algolia](https://www.algolia.com/)ï¼Œå¯ä»¥æ–¹ä¾¿çš„å‰µå»ºç´¢å¼•ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¯«å¥½çš„å‰ç«¯ç¶²é å…ƒä»¶å¯ä»¥ä½¿ç”¨ï¼Œå”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ”¶è²»ã€‚é›–ç„¶ Algolia è¦æ”¶è²»ï¼Œä½†å…¶å¯¦å°æ–¼æˆ‘é€™å€‹å°ç¶²é éƒ½ç´¢å¼•é‡æ˜¯å®Œå…¨ä¸ç”¨éŒ¢çš„ï¼Œä½†æ˜¯å°±é‚„æ˜¯è¦ºå¾—è‡ªå·±æ¶ä¸€å€‹ç´¢å¼•ç³»çµ±æ¯”è¼ƒæœ‰æ„Ÿè¦ºï¼Œç„¶å¾Œæˆ‘å°±åœ¨ GitHub ä¸Šç™¼ç¾äº†é–‹æºçš„ [MeiliSearch](https://meilisearch.com)ï¼ŒåŠŸèƒ½åŸºæœ¬ä¸Šè·Ÿ Algolia å¾ˆåƒï¼Œä¹Ÿæ”¯æ´ä¸­æ–‡ï¼Œç”šè‡³æœ‰äº›å‰ç«¯å…ƒä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ Algolia çš„ï¼Œç¼ºé»å°±æ˜¯è¦è‡ªå·±æ¶è¨­ Serverã€‚\n\n<!--more-->\n\næœ¬æ–‡ä»¥æœå°‹æœ¬ç«™ç‚ºç›®çš„æ’°å¯«ï¼Œæ‰€ä»¥å¾Œé¢çš„ç¯„ä¾‹å¤§å¤šèˆ‡ Hugo ç›¸é—œï¼Œå¦‚æœæƒ³è¦çœ‹å®Œæ•´çš„ç¨‹å¼ç¢¼ï¼Œå¯ä»¥ç›´æ¥åˆ°æœ¬ç«™çš„ GitHubã€‚\n\n## ç°¡ä»‹ MeiliSearch Server\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f93885e8-f670-44ec-ea24-264a97c9a500/public)\n\nåŸºæœ¬ä¸Š MeiliSearch å°±æ˜¯ä¸€å€‹ RESTful APIï¼Œç›®æ¨™æ˜¯è¦æä¾›ç¾æˆçš„æœå°‹è§£æ±ºæ–¹æ¡ˆï¼Œå®Œå…¨é–‹æºï¼Œæä¾›å³æ™‚æœå°‹ã€æ‹¼å¯«éŒ¯èª¤ã€åŒç¾©è©ã€æ¨¡ç³Šæœå°‹ã€è‡ªè¨‚æ’åã€æ’åºå’Œå¤šèªè¨€æœå°‹çš„æ”¯æ´ï¼Œé€£ä¸­æ–‡ä¹Ÿä¸ä¾‹å¤–ã€‚æ ¹æ“šå®˜æ–¹æ–‡ä»¶çš„ä»‹ç´¹ï¼ŒMeiliSearch ä»¥æ˜“ç”¨æ€§ç‚ºé¦–è¦ç›®æ¨™ï¼Œå°æ–¼é–‹ç™¼è€…ï¼Œåªéœ€è¦å°‘å°‘å¹¾è¡Œ code å°±å¯ä»¥ä½¿ç”¨ï¼›å°æ–¼ä½¿ç”¨è€…ï¼Œæä¾›ç›´è§€çš„å³æ™‚è¼¸å…¥å³æ™‚åæ‡‰çš„æœå°‹çµæœã€‚\n\nå®˜æ–¹ä¹Ÿæœ‰å¾ˆå¤šçš„ SDKï¼Œ.NET, Dart, Go, Java, JS, Python, Swiftï¼Œè€Œä¸”ä¸Šé¢é€™äº›é‚„ä¸æ˜¯å…¨éƒ¨ï¼Œæ‰€ä»¥åœ¨é–‹ç™¼å„èªè¨€çš„æ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œéƒ½å¯ä»¥è€ƒæ…®ç”¨ MeiliSearch åšç‚ºå¾Œç«¯æœå°‹å¼•æ“ã€‚\n\nMeiliSearch ä¹Ÿä¸æ˜¯å®Œå…¨æ²’æœ‰ç¼ºé»ï¼Œç¼ºé»å°±æ˜¯è¦è‡ªå·±æœ‰ä¼ºæœå™¨ï¼Œåƒæ˜¯æœ¬æ–‡ä»Šå¤©çš„æ¡ˆä¾‹å°±æ˜¯è¦å¹« Static Site åšæœå°‹çš„åŠŸèƒ½ï¼Œé€šå¸¸ Static Site å¤§å®¶æ‡‰è©²éƒ½æ˜¯ç”¨ GitHub Pages ç­‰ Statice Site Hosting æœå‹™ï¼Œæ‰€ä»¥ç¶²é æœ¬èº«æ˜¯æ²’æœ‰è‡ªå·±æ¶ Server çš„ï¼Œç‚ºäº†åŠ å€‹æœå°‹åŠŸèƒ½æœƒè¦å¤šä¸€å€‹ Server å°±æ˜¯å¾ˆå¤§çš„ç¼ºé»ã€‚\n\n## SearchIndex.json\n\nåœ¨é–‹å§‹ä½¿ç”¨ MeiliSearch ä¹‹å‰ï¼Œæˆ‘å€‘å…ˆä¾†æŠŠè¦ç´¢å¼•çš„è³‡æ–™æº–å‚™å¥½ï¼ŒMeiliSearch æœƒéœ€è¦ä½¿ç”¨ json ç•¶ä½œç´¢å¼•ï¼Œæ‰€ä»¥æˆ‘å€‘è¦ç”¢ç”Ÿä¸€å€‹ json çš„ç¯„æœ¬ã€‚å‰µå»º `/layouts/list.searchindex.json`ï¼Œå…§å®¹å¦‚ä¸‹ï¼š\n\n```text\n[ {{- $i := 0 -}}\n    {{- range where .Site.RegularPages \"Section\" \"ne\" \"\" -}}\n       {{- if not .Params.noSearch -}}\n          {{- if gt $i 0 }},{{ end -}}\n          {\"id\":{{ $i }}, \"date\":\"{{ .Date.Unix }}\", \"url\":\"{{ .Permalink }}\", \"title\":{{ .Title | jsonify  }}, \"summary\":{{ with .Description}}{{ . | plainify | jsonify }}{{ else }}{{ .Summary | plainify | jsonify }}{{ end }}, \"content\":{{ .Content | plainify | jsonify }},\"tags\":[ {{- $t := 0 }}{{- range .Param \"tags\" -}}{{ if gt $t 0 }},{{ end }}{{ . | jsonify }}{{ $t = add $t 1 }}{{ end -}} ], \"section\": {{ .Section | jsonify -}} }\n        {{- $i = add $i 1 -}}\n    {{- end -}}\n{{- end -}} ]\n```\n\nç„¶å¾Œåœ¨ `config.yaml` ä¸­åŠ å…¥ä¸‹é¢çš„è¨­å®šå€¼ï¼š\n\n```yaml\noutputFormats:\n  SearchIndex:\n    mediaType: \"application/json\"\n    baseName: \"searchindex\"\n    isPlainText: true\n    notAlternative: true\noutputs:\n  home: [\"HTML\", \"RSS\", \"SearchIndex\"]\n```\n\nå®Œæˆä¸Šé¢å…©æ¨£è¨­å®šå¾Œï¼Œå¯ä»¥ `hugo` ä¸€ä¸‹è©¦è©¦çœ‹ï¼Œæœ‰æ²’æœ‰åœ¨ `/public/searchindex.json` ä¸­çœ‹åˆ°ç´¢å¼•æª”æ¡ˆï¼Œæ‡‰è©²æœƒé¡ä¼¼å¦‚ä¸‹ï¼š\n\n```json\n[\n  {\n    \"id\": 0,\n    \"date\": \"1622891718\",\n    \"url\": \"https://tonypepe.com/posts/others/hello-world/\",\n    \"title\": \"Hello World\",\n    \"summary\": \"Hello World. This is a test post.\",\n    \"content\": \"This is my first post in hugo\\ncontent\",\n    \"tags\": [\"hugo\", \"test\"],\n    \"section\": \"posts\"\n  }\n]\n```\n\n## æ¶è¨­ MeiliSearch Server\n\næº–å‚™å¥½ç´¢å¼•æª”æ¡ˆå¾Œï¼Œæˆ‘å€‘å°±ä¾†æ¶è¨­ MeiliSearch çš„ Serverï¼ŒMeiliSearch æ˜¯ç”¨ Rust ç·¨å¯«ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯è·¨å¹³å°é€šç”¨ã€‚å®˜æ–¹æä¾›å¾ˆå¤šç¨®å®‰è£æ–¹å¼ï¼Œé‚„æœ‰ä¸€éµå•Ÿå‹•è…³æœ¬ï¼Œç•¶ç„¶ï¼Œç‚ºäº†é¿å…å¼„é«’ç’°å¢ƒï¼Œæœ€æ¨è–¦çš„ç•¶ç„¶é‚„æ˜¯ Dockerï¼Œä¸‹é¢å°±å…ˆä»¥ Docker ç‚ºç¯„ä¾‹ï¼š\n\n```bash\ndocker run -it --rm \\\n    -p 7700:7700 \\\n    -v $(pwd)/data.ms:/data.ms \\\n    getmeili/meilisearch:latest\n```\n\næ³¨æ„ä¸€ä¸‹ï¼Œä¸Šé¢æ›è¼‰äº†ä¸€å€‹ `data.ms` çš„è³‡æ–™å¤¾ï¼Œæ‰€ä»¥åœ¨åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å‰ï¼Œè¨˜å¾—å…ˆå‰µå»ºå¥½ã€‚`data.ms` é€™å€‹è³‡æ–™å¤¾æ˜¯ç‚ºäº†å­˜æ”¾ç´¢å¼•è³‡æ–™ï¼Œé¿å…å› ç‚º Docker å®¹å™¨é‡å•Ÿå°±æå¤±è³‡æ–™ï¼Œæ‰€ä»¥å¾ˆé‡è¦ã€‚\n\nç¾åœ¨å¯ä»¥åˆ° [http://localhost:7700](http://localhost:7700)ï¼Œæœƒçœ‹åˆ°æœ‰ä¸€å€‹ç°¡æ˜“çš„ WEB UIã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/5664dc51-5d55-415a-3633-ac45e17d7a00/public)\n\nå¦‚æœä¸æƒ³ç”¨ Dockerï¼Œé‚„æ˜¯å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶çš„å…¶ä»–å®‰è£æ–¹å¼å®‰è£ã€‚\n\n## æäº¤ç´¢å¼•è³‡æ–™\n\nå‰é¢æœ‰æåˆ° MeiliSearch æ˜¯ RESTful APIï¼Œæ‰€ä»¥è¦å‘ä»–æœå°‹æˆ–æ˜¯æä¾›è³‡æ–™ï¼Œéƒ½æ˜¯ç”¨ HTTP Methodã€‚å®˜æ–¹æ–‡ä»¶å¯«çš„éƒ½æ˜¯ curlï¼Œæˆ‘å€‘é‚„æ˜¯ä½¿ç”¨ GUI çš„æ–¹å¼ä»‹ç´¹ã€‚HTTP çš„ GUI å¤§å®¶æ‡‰è©²éƒ½æœƒæƒ³åˆ° Postmanï¼Œä½†ä»Šå¤©æˆ‘å€‘è¦ä½¿ç”¨ä»–çš„é–‹æºæ›¿ä»£ [Hoppsotch](https://hoppspot.io)ï¼Œä»–æ˜¯ä¸€å€‹ç¶²é å·¥å…·ï¼Œæ‰€ä»¥ä¸éœ€è¦å®‰è£ã€‚\n\nå¯ä»¥å…ˆå° `/health` åš `GET` è©¦è©¦çœ‹æœ‰æ²’æœ‰é€£ä¸Šï¼Œå¦‚æœæ²’æœ‰é€£ä¸Šï¼Œå¯èƒ½è¦æª¢æŸ¥ä¸€ä¸‹æœ‰æ²’æœ‰æˆåŠŸå•Ÿå‹• MeiliSearch Serverã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/cf86e106-a1f6-472e-d2c1-a6b186944f00/public)\n\nç¢ºå®šé€£ä¸Šå¾Œï¼Œæˆ‘å€‘å°±ä¾†æäº¤ç´¢å¼•è³‡æ–™ï¼Œå¦‚æœé‚„æ²’æœ‰ Hugo ç”¢ç”Ÿçš„ç´¢å¼•è³‡æ–™ï¼Œå¯ä»¥å…ˆåˆ°æœ¬ç«™çš„ GitHubï¼Œæ‹¿æœ¬ç«™çš„ [searchindex.json](https://github.com/TonyPepeBear/HugoBlog/blob/1bfae9859a44338d24a9f6676be37f72cc983505/searchindex.json) åšæ¸¬è©¦ã€‚\n\nå› ç‚º MeiliSearch ä¹Ÿå¯ä»¥åŒæ™‚æœ‰å¤šå€‹ Indexes åšæœå°‹ï¼Œæˆ‘å€‘ä¸‹é¢çš„ç¯„ä¾‹ä»¥ `hugo_blog` ä½œç‚ºç¯„ä¾‹åç¨±ï¼Œå¤§å®¶å¯ä»¥æ ¹æ“šéœ€æ±‚è‡ªå·±æ±ºå®šä½¿ç”¨çš„åç¨±ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/71797a57-6f97-44cd-f4dc-675ec42ffd00/public)\n\nå¯ä»¥çœ‹åˆ°ä¸Šåœ–å° `/indexes/<<IndexName>>/documents` åš `POST` æ–¹æ³•ï¼Œå°±å¯ä»¥æŠŠç´¢å¼•è³‡æ–™æäº¤åˆ° MeiliSearch Serverã€‚è¨˜å¾—å…§å®¹é¡å‹æ˜¯ `application/json`ï¼Œç„¶å¾ŒæŠŠç´¢å¼•è³‡æ–™æ”¾åˆ° bodyã€‚\n\nç¾åœ¨å›åˆ° [localhost:7700](http://localhost:7700)ï¼Œæ‡‰è©²å°±å¯ä»¥çœ‹åˆ°åŸæœ¬ç©ºç©ºå¦‚ä¹Ÿçš„ WEB UI ç¾åœ¨å¯ä»¥åšæœå°‹äº†ï¼Œå¯ä»¥å…ˆåœ¨é€™è£¡åšä¸€äº›ç°¡å–®çš„æœå°‹ï¼Œè©¦è©¦çœ‹è‡ªå·±çš„ç´¢å¼•è³‡æ–™æœ‰æ²’æœ‰è¢«æˆåŠŸçš„ä½¿ç”¨ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c58970b0-53b5-4a16-50bb-ff40fa6fde00/public)\n\n## MeiliSearch in Production\n\nMeiliSearch é è¨­çš„å•Ÿå‹•æ–¹å¼å…¶å¯¦æ˜¯ `development`ï¼Œé€™æ¨¡å¼åªæ˜¯æ–¹ä¾¿æœ¬åœ°åšæ¸¬è©¦ä½¿ç”¨çš„ï¼Œå¦‚æœè¦ä½¿ç”¨åœ¨ç”Ÿç”¢ç’°å¢ƒï¼Œæ‡‰è©²è¦ä»¥ `production` æ¨¡å¼å•Ÿå‹•ã€‚åœ¨ Production æ¨¡å¼ä¸‹ï¼Œæœƒæœ‰å…©å€‹ä¸ä¸€æ¨£çš„åœ°æ–¹ï¼Œç¬¬ä¸€é …æ˜¯ Web UI æœƒè¢«åœç”¨ï¼Œç¬¬äºŒé …æ˜¯æœƒå¿…é ˆè¦è¨­å®š `Master Key`ï¼Œä¸‹é¢é‚„æ˜¯ç”¨ Docker ä½œç‚ºç¯„ä¾‹ï¼š\n\n```bash\ndocker run -it --rm \\\n    -p 7700:7700 \\\n    -v $(pwd)/data.ms:/data.ms \\\n    -e MEILI_ENV=production \\\n    -e MEILI_MASTER_KEY=<Your Master Key> \\\n    getmeili/meilisearch:latest\n```\n\nä¸Šé¢è¨­å®šçš„ Master Keyï¼Œå°±æ˜¯ç®¡ç†æ¬Šé™æœ€å¤§çš„ API Keyï¼Œæ‰€ä»¥è¦è¨˜å¾—å¦¥å–„ä¿å­˜ã€‚\n\nä¸‹é¢ç”¨å‰›å‰›çš„ Master Key å»å° `/keys` åš `GET`ï¼Œç„¶å¾Œåœ¨ Headers ä¸­ï¼ŒåŠ ä¸Šå‰›å‰›çš„ Master Keyï¼Œå°±å¯ä»¥æ‹¿åˆ°é è¨­çš„æœå°‹ KEYï¼Œå’Œé è¨­çš„ ADMIN KEYã€‚å¦‚æœè¦å†å¦å¤–æ–°å¢ API KEYï¼Œå¯ä»¥åƒè€ƒå®˜æ–¹çš„æ–‡ä»¶ï¼Œé€™è£¡å°±ä¸å¤šè‘—å¢¨ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/91af11f7-29fc-446b-7ae1-dcb47f82b900/public)\n\n## ç‚ºç¶²é åŠ ä¸Šæœå°‹åŠŸèƒ½\n\næˆ‘å€‘æœƒç”¨åˆ° MeiliSearch æä¾›çš„ [Instant MeiliSearch](https://github.com/meilisearch/instant-meilisearch)ï¼Œé€™å€‹ JS åº«å°±æ˜¯ä½¿ç”¨ Algolia çš„ Instant Search æ”¹çš„ï¼Œæ‰€ä»¥æœ‰äº›æ–‡ä»¶å¯ä»¥ç›´æ¥å»çœ‹ Algolia çš„å®˜æ–¹æ–‡ä»¶ã€‚Instant MeiliSearch æœ€ç°¡å–®çš„ä½¿ç”¨æ–¹å¼ä¹Ÿæ˜¯ç›´æ¥ç”¨ CDN çš„æ–¹å¼ï¼Œä¸‹é¢æ˜¯ä¸€å€‹æœ€ç°¡å–®çš„æ¨¡æ¿ï¼Œçœ‹æ‡‚å¾Œç”¨é¡ä¼¼çš„é‚è¼¯åŠ åˆ°è‡ªå·±çš„ç¶²é ä¸­å°±å¥½ã€‚\n\nhtml:\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n  </head>\n\n  <body>\n    <div>\n      <div id=\"searchbox\"></div>\n      <div id=\"hits\"></div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/@meilisearch/instant-meilisearch/dist/instant-meilisearch.umd.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/instantsearch.js@4\"></script>\n    <script src=\"./app.js\"></script>\n  </body>\n</html>\n```\n\nä¸‹é¢æ˜¯å‰›å‰›çš„ html æœƒç”¨åˆ°çš„ `app.js`ï¼Œç”¨ä¾†ä½œç‚º Search çš„è¨­å®šå€¼ï¼Œåªè¦æŠŠä¸‹é¢çš„ç¶²å€è¨­å®šæˆè‡ªå·±çš„ç¶²å€ï¼Œå’Œè‡ªå·±åœ¨å‰å¹¾æ­¥é©Ÿæ‹¿åˆ°çš„æœå°‹ API KEY å°±å¯ä»¥ä½¿ç”¨äº†ï¼š\n\n```js\nconst search = instantsearch({\n  indexName: \"steam-video-games\",\n  searchClient: instantMeiliSearch(\n    \"https://integration-demos.meilisearch.com\",\n    \"q7QHwGiX841a509c8b05ef29e55f2d94c02c00635f729ccf097a734cbdf7961530f47c47\"\n  ),\n});\n\nsearch.addWidgets([\n  instantsearch.widgets.searchBox({\n    container: \"#searchbox\",\n  }),\n  instantsearch.widgets.hits({\n    container: \"#hits\",\n    templates: {\n      item: `\n        <div>\n          <div class=\"hit-name\">\n            {{#helpers.highlight}}{ \"attribute\": \"name\" }{{/helpers.highlight}}\n          </div>\n        </div>\n      `,\n    },\n  }),\n]);\n\nsearch.start();\n```\n\nå¦‚æœè¦ºå¾—ä»–é è¨­æä¾›çš„ UI å¾ˆé†œï¼Œå¯ä»¥ç”¨ CSS çš„æ–¹å¼å»æ”¹ä»–ã€‚\n\n## GitHub Actions è‡ªå‹•æäº¤ç´¢å¼•\n\nä¸å»¢è©±ï¼Œç›´æ¥ä¸Šæœ¬ç«™çš„ yml:\n\n```yml\nname: MeiliSearch Index\n\non:\n  push:\n    branches:\n      - master # Set a branch to deploy\n\njobs:\n  deploy:\n    runs-on: ubuntu-20.04\n    steps:\n      - uses: actions/checkout@v2\n        with:\n          submodules: true # Fetch Hugo themes (true OR recursive)\n          fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod\n\n      - name: Setup Node\n        uses: actions/setup-node@v2\n        with:\n          node-version: \"14\"\n\n      - name: Setup Hugo\n        uses: peaceiris/actions-hugo@v2\n        with:\n          hugo-version: \"latest\"\n          extended: true\n\n      - name: Build\n        run: |\n          npm i\n          hugo --minify\n\n      - name: Post Index\n        run: |\n          curl \\\n            -X POST \"https://search.tonypepe.com/indexes/hugo_blog/documents\" \\\n            -H 'Authorization: Bearer ${{ secrets.MEILISEARCH_KEY }}' \\\n            -H 'Content-Type: application/json' \\\n            --data-binary \"@public/searchindex.json\"\n```\n\nå…¶å¯¦é‡é»å°±æ˜¯åœ¨æœ€å¾Œä¸€æ­¥ï¼ŒæŠŠç´¢å¼•æª”æ¡ˆ POST åˆ° MeiliSearch å°±å¯ä»¥äº†ã€‚\n\n## Referenc\n\n- [MeiliSearch](https://meilisearch.com)\n- [A simple javascript based full text search function](https://discourse.gohugo.io/t/a-simple-javascript-based-full-text-search-function/29119)\n- [Hoppsotch](https://hoppspot.io)\n- [Instant MeiliSearch](https://github.com/meilisearch/instant-meilisearch)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Web/MeiliSearch-hugo.md","excerpt":"èªªåˆ°æœå°‹çš„è§£æ±ºæ–¹æ¡ˆï¼Œæœ€æœ‰åçš„å¤§æ¦‚å°±æ˜¯ Algoliaï¼Œå¯ä»¥æ–¹ä¾¿çš„å‰µå»ºç´¢å¼•ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¯«å¥½çš„å‰ç«¯ç¶²é å…ƒä»¶å¯ä»¥ä½¿ç”¨ï¼Œå”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ”¶è²»ã€‚é›–ç„¶ Algolia è¦æ”¶è²»ï¼Œä½†å…¶å¯¦å°æ–¼æˆ‘é€™å€‹å°ç¶²é éƒ½ç´¢å¼•é‡æ˜¯å®Œå…¨ä¸ç”¨éŒ¢çš„ï¼Œä½†æ˜¯å°±é‚„æ˜¯è¦ºå¾—è‡ªå·±æ¶ä¸€å€‹ç´¢å¼•ç³»çµ±æ¯”è¼ƒæœ‰æ„Ÿè¦ºï¼Œç„¶å¾Œæˆ‘å°±åœ¨ GitHub ä¸Šç™¼ç¾äº†é–‹æºçš„ MeiliSearchï¼ŒåŠŸèƒ½åŸºæœ¬ä¸Šè·Ÿ Algolia å¾ˆåƒï¼Œä¹Ÿæ”¯æ´ä¸­æ–‡ï¼Œç”šè‡³æœ‰äº›å‰ç«¯å…ƒä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ Alâ€¦","frontmatter":{"title":"MeiliSearch with Hugo","date":"2022-01-17T17:40:09.000Z","draft":false,"tags":["meilisearch","search","web","hugo","github","actions"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f9f8be53-5393-4190-b6da-baf27d8a7500/public","description":null}}},{"node":{"id":"7344f3d5-18b8-56c7-8a29-887c8c755a3a","html":"<p>GitHub ä¸Šæœ‰è¨±è¨±å¤šå¤šé–‹æºçš„ iconï¼Œä½†æ˜¯æ¯å€‹ç”¨æ³•ä¸ç›¡ç›¸åŒï¼Œç”šè‡³å¤§éƒ¨åˆ†çš„ä½¿ç”¨æ–¹å¼ï¼Œéƒ½æ˜¯ç›´æ¥ä¸‹è¼‰ SVG ä½¿ç”¨ã€‚é›–ç„¶ä½¿ç”¨ SVG ä¹Ÿä¸æ˜¯ä¸å¥½ï¼Œä½†æ˜¯å°±æœƒéœ€è¦è‡ªå·±å¤šä¸€æ­¥é©Ÿçš„ä½¿ç”¨ã€‚Iconify æŠŠè¨±å¤š icon æ•´åˆåœ¨ä¸€èµ·ï¼Œä¸¦ä¸”æä¾›éå¸¸ç°¡å–®çš„è¾¦æ³•ï¼Œå°±å¯ä»¥è®“ç¶²é æœ‰å¾ˆç²¾ç¾çš„ iconã€‚</p>\n<!--more-->\n<h2>ä½¿ç”¨ Iconify</h2>\n<p>ä½¿ç”¨ Iconify åªéœ€è¦å…ˆåœ¨ HTML ä¸­å¼•å…¥ Iconify çš„ Scriptï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://code.iconify.design/2/2.1.0/iconify.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>æ¥ä¸‹ä¾†åªéœ€è¦åœ¨è¦ä½¿ç”¨ icon çš„åœ°æ–¹ï¼Œæ–°å¢ä¸€å€‹ spanï¼Œå…¶ä¸­è¦æœ‰åŒ…å« <code class=\"language-text\">class=\"iconify\"</code> å’Œ <code class=\"language-text\">data-icon</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>iconify<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-icon</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fa:home<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>æ­£ç¢ºä½¿ç”¨å¾Œï¼Œæ‡‰è©²å°±å¯ä»¥åœ¨ç¶²é ä¸­æ­£ç¢ºçš„é¡¯ç¤ºä¸‹é¢çš„ iconï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f0141e02-3e26-415d-1ee2-438dc4d43600/public\" alt=\"img\"></p>\n<h2>æœå°‹ Icon</h2>\n<p>å°±åƒå‰é¢èªªçš„ï¼ŒIconify æä¾›éå¸¸å¤šçš„ iconï¼Œæ‰€ä»¥ä½œè€…ä¹Ÿæœ‰å¯«ä¸€å€‹å¯ä»¥æœå°‹åœ–æ¨™çš„åœ°æ–¹ï¼Œè€Œä¸”æœå°‹åˆ°åœ–æ¨™å¾Œï¼Œé‚„æä¾›è¨±å¤šå¯ä»¥å”åŠ©å®¢è£½åŒ–åœ–æ¨™çš„æ–¹æ³•ï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/44c38b28-baa8-4faa-6d06-8e2615f19500/public\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c330c161-f8b4-41d2-db15-b02079185b00/public\" alt=\"\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f0141e02-3e26-415d-1ee2-438dc4d43600/public\" alt=\"img\"></p>\n<p>å¦‚æœçœŸçš„ä¸æƒ³ä½¿ç”¨ Iconify çš„æ–¹å¼é¡¯ç¤ºåœ–æ¨™ï¼Œä¹Ÿå¯ä»¥å–®ç´”çš„ç•¶ä½œåœ–æ¨™è’å°‹å™¨ï¼Œæœå°‹åˆ°ä¹‹å¾Œç›´æ¥ä¸‹è¼‰ SVG ä½¿ç”¨å³å¯ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://iconify.design/\">Iconify</a></li>\n</ul>","rawMarkdownBody":"\nGitHub ä¸Šæœ‰è¨±è¨±å¤šå¤šé–‹æºçš„ iconï¼Œä½†æ˜¯æ¯å€‹ç”¨æ³•ä¸ç›¡ç›¸åŒï¼Œç”šè‡³å¤§éƒ¨åˆ†çš„ä½¿ç”¨æ–¹å¼ï¼Œéƒ½æ˜¯ç›´æ¥ä¸‹è¼‰ SVG ä½¿ç”¨ã€‚é›–ç„¶ä½¿ç”¨ SVG ä¹Ÿä¸æ˜¯ä¸å¥½ï¼Œä½†æ˜¯å°±æœƒéœ€è¦è‡ªå·±å¤šä¸€æ­¥é©Ÿçš„ä½¿ç”¨ã€‚Iconify æŠŠè¨±å¤š icon æ•´åˆåœ¨ä¸€èµ·ï¼Œä¸¦ä¸”æä¾›éå¸¸ç°¡å–®çš„è¾¦æ³•ï¼Œå°±å¯ä»¥è®“ç¶²é æœ‰å¾ˆç²¾ç¾çš„ iconã€‚\n\n<!--more-->\n\n## ä½¿ç”¨ Iconify\n\nä½¿ç”¨ Iconify åªéœ€è¦å…ˆåœ¨ HTML ä¸­å¼•å…¥ Iconify çš„ Scriptï¼š\n\n```html\n<script src=\"https://code.iconify.design/2/2.1.0/iconify.min.js\"></script>\n```\n\næ¥ä¸‹ä¾†åªéœ€è¦åœ¨è¦ä½¿ç”¨ icon çš„åœ°æ–¹ï¼Œæ–°å¢ä¸€å€‹ spanï¼Œå…¶ä¸­è¦æœ‰åŒ…å« `class=\"iconify\"` å’Œ `data-icon`ï¼š\n\n```html\n<span class=\"iconify\" data-icon=\"fa:home\"></span>\n```\n\næ­£ç¢ºä½¿ç”¨å¾Œï¼Œæ‡‰è©²å°±å¯ä»¥åœ¨ç¶²é ä¸­æ­£ç¢ºçš„é¡¯ç¤ºä¸‹é¢çš„ iconï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f0141e02-3e26-415d-1ee2-438dc4d43600/public)\n\n## æœå°‹ Icon\n\nå°±åƒå‰é¢èªªçš„ï¼ŒIconify æä¾›éå¸¸å¤šçš„ iconï¼Œæ‰€ä»¥ä½œè€…ä¹Ÿæœ‰å¯«ä¸€å€‹å¯ä»¥æœå°‹åœ–æ¨™çš„åœ°æ–¹ï¼Œè€Œä¸”æœå°‹åˆ°åœ–æ¨™å¾Œï¼Œé‚„æä¾›è¨±å¤šå¯ä»¥å”åŠ©å®¢è£½åŒ–åœ–æ¨™çš„æ–¹æ³•ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/44c38b28-baa8-4faa-6d06-8e2615f19500/public)\n\n![](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c330c161-f8b4-41d2-db15-b02079185b00/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f0141e02-3e26-415d-1ee2-438dc4d43600/public)\n\nå¦‚æœçœŸçš„ä¸æƒ³ä½¿ç”¨ Iconify çš„æ–¹å¼é¡¯ç¤ºåœ–æ¨™ï¼Œä¹Ÿå¯ä»¥å–®ç´”çš„ç•¶ä½œåœ–æ¨™è’å°‹å™¨ï¼Œæœå°‹åˆ°ä¹‹å¾Œç›´æ¥ä¸‹è¼‰ SVG ä½¿ç”¨å³å¯ã€‚\n\n## Reference\n\n- [Iconify](https://iconify.design/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Web/iconify.md","excerpt":"GitHub ä¸Šæœ‰è¨±è¨±å¤šå¤šé–‹æºçš„ iconï¼Œä½†æ˜¯æ¯å€‹ç”¨æ³•ä¸ç›¡ç›¸åŒï¼Œç”šè‡³å¤§éƒ¨åˆ†çš„ä½¿ç”¨æ–¹å¼ï¼Œéƒ½æ˜¯ç›´æ¥ä¸‹è¼‰ SVG ä½¿ç”¨ã€‚é›–ç„¶ä½¿ç”¨ SVG ä¹Ÿä¸æ˜¯ä¸å¥½ï¼Œä½†æ˜¯å°±æœƒéœ€è¦è‡ªå·±å¤šä¸€æ­¥é©Ÿçš„ä½¿ç”¨ã€‚Iconify æŠŠè¨±å¤š icon æ•´åˆåœ¨ä¸€èµ·ï¼Œä¸¦ä¸”æä¾›éå¸¸ç°¡å–®çš„è¾¦æ³•ï¼Œå°±å¯ä»¥è®“ç¶²é æœ‰å¾ˆç²¾ç¾çš„ iconã€‚ ä½¿ç”¨ Iconify ä½¿ç”¨ Iconify åªéœ€è¦å…ˆåœ¨ HTML ä¸­å¼•å…¥ Iconify çš„ Scriptï¼š æ¥ä¸‹â€¦","frontmatter":{"title":"Iconify -- icon å¤§ç¦®åŒ…","date":"2022-01-14T13:48:25.000Z","draft":false,"tags":["icon","web","ios","android","design"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/ca9b8ae2-b684-421a-a662-2dd4356ce600/public","description":null}}},{"node":{"id":"9c3da1a2-833a-52a8-9d4e-e9194f199199","html":"<p>Telegram Bot æ²’æœ‰ä»»ä½•ä½¿ç”¨é™åˆ¶ï¼Œå¯ä»¥å¯«å‡ºè¨±å¤šå±¬æ–¼è‡ªå·±çš„å¹«æ‰‹ã€‚æœ¬ç¯‡ç°¡å–®çš„ç”¨ Go å¯«ä¸€å€‹é¸šéµ¡æ©Ÿå™¨äººï¼Œç”¨æˆ¶èªªä»€éº¼ï¼Œæ©Ÿå™¨äººå°±å›ä»€éº¼ã€‚</p>\n<!--more-->\n<h2>æ–°å¢è‡ªå·±çš„ Bot</h2>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/fbf36cb0-84f4-4f7a-2553-04ecccf44800/public\" alt=\"image\"></p>\n<p>Telegram éå¸¸æœ‰è¶£ï¼Œè¦æ–°å¢è‡ªå·±çš„ Botï¼Œåªè¦è·Ÿ Telegram ä¸Šçš„ <a href=\"https://telegram.me/BotFather\">BotFather</a> <code class=\"language-text\">èªªä¸€ä¸‹</code>ï¼Œä»–å°±æœƒçµ¦ä½ ä¸€å€‹ Botã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9200bc38-828c-4ad4-a022-d34c3a692d00/public\" alt=\"image\"></p>\n<p>æŒ‰ BotFather çµ¦ä½ çš„æ­¥é©Ÿåšï¼Œæœ€å¾Œå¯ä»¥çœ‹åˆ°ä»–æœƒæä¾›ä¸€å€‹ API Token çµ¦ä½ ï¼Œåªè¦æœ‰é€™å€‹ Token å°±å¯ä»¥è·Ÿ Bot æºé€šï¼Œè¦ä¿å­˜å¥½ï¼Œç­‰ç­‰æœƒç”¨åˆ°ï¼Œä¹Ÿä¸è¦çµ¦åˆ¥äººçœ‹åˆ°ï¼Œä»¥å…è‡ªå·±çš„ Bot è®Šæˆåˆ¥äººçš„ç©å…·ã€‚</p>\n<h2>go-telegram-bot-api</h2>\n<p>Go å·²ç¶“æœ‰ç¤¾å€é–‹ç™¼çš„å‡½å¼åº«å¯ä»¥ç”¨ <a href=\"https://github.com/go-telegram-bot-api/telegram-bot-api\">telegram-bot-api</a>ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">go get -u github.com/go-telegram-bot-api/telegram-bot-api/v5\n</code></pre></div>\n<p>ä¹‹å¾Œåªè¦ import å°±å¯ä»¥ä½¿ç”¨ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n    tgbotapi <span class=\"token string\">\"github.com/go-telegram-bot-api/telegram-bot-api/v5\"</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>é€£ç·šåˆ° Telegram Bot</h2>\n<p>åˆ©ç”¨å‰›å‰› import çš„å‡½å¼åº«ï¼Œåªéœ€è¦å‰›å‰›å‰µå»ºå¥½çš„ Bot çš„ API Token å°±å¯ä»¥é€£ç·šåˆ° Telegramã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\">bot<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewBotAPI</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span><span class=\"token function\">Getenv</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TELEGRAM_API_TOKEN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">panic</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¸Šé¢ç”¨ç’°å¢ƒè®Šæ•¸çš„æ–¹å¼ä¾†å–å¾— TOKENï¼Œé¿å…éœ€è¦ç›´æ¥å¯«åœ¨ç¨‹å¼ç¢¼è£¡ï¼Œå¦‚æœè¦ºå¾—åœ¨æ¸¬è©¦æ™‚è¨­å®šç’°å¢ƒè®Šæ•¸å¾ˆéº»ç…©ï¼Œå¯ä»¥ç”¨ JetBrains çš„ <a href=\"https://www.jetbrains.com/go/\">GoLand</a>ï¼Œè¨­å®š Runtime çš„ç’°å¢ƒè®Šæ•¸ï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9af5d8a5-3504-479d-ab04-f8b0adf93500/public\" alt=\"image\"></p>\n<h2>è™•ç† Update</h2>\n<p>è¦æ¥æ”¶ä½¿ç”¨è€…å‚³éä¾†çš„è¨Šæ¯ï¼ŒTelegram API ç¨±ç‚º Updateï¼Œæˆ‘å€‘ä½¿ç”¨çš„å‡½ç¤ºåº«åŸºæœ¬ä¸Šéƒ½è‡ªå‹•è™•ç†å¥½äº†ï¼Œåªéœ€è¦æ¥æ”¶ä¸€å€‹ Channel å°±å¥½ã€‚ä½¿ç”¨ <code class=\"language-text\">bot.GetUpdatesChan(config)</code> æœƒéœ€è¦çµ¦ä¸€å€‹ Configï¼Œé€™å¯ä»¥ç”¨ <code class=\"language-text\">tgbotapi.NewUpdate(0)</code> ä¾†ç”Ÿï¼Œç„¶å¾Œé€™é‚Šè¨­å®š Timeout ç‚º 60ï¼Œå¦‚æœå°é€™å€‹è¨­å®šå€¼æœ‰èˆˆè¶£ï¼Œå¯ä»¥å»çœ‹ Telegram çš„æ–‡ä»¶ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\">updateConfig <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewUpdate</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\nupdateConfig<span class=\"token punctuation\">.</span>Timeout <span class=\"token operator\">=</span> <span class=\"token number\">60</span>\nupdates <span class=\"token operator\">:=</span> bot<span class=\"token punctuation\">.</span><span class=\"token function\">GetUpdatesChan</span><span class=\"token punctuation\">(</span>updateConfig<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>å›å¾©</h2>\n<p>æˆ‘å€‘å…ˆç°¡å–®å¯«ä¸€éš»é¸šéµ¡ï¼ŒæŠŠç”¨æˆ¶å‚³éä¾†çš„ Textï¼Œç›´æ¥å‚³å›å»ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/19bbc73e-3090-4a0d-0eec-d65671c01900/public\" alt=\"image\"></p>\n<p>ç”¨ for æŠŠ Channel ä¸­çš„ Update ä¸€å€‹ä¸€å€‹æ‹¿å‡ºä¾†ï¼Œç„¶å¾Œç”¨ <code class=\"language-text\">tgbotapi</code> ç”¢ç”Ÿä¸€å€‹ Message ç‰©ä»¶ï¼Œè£¡é¢æ”¾åœ¨èŠå¤©å®¤çš„ ID å’Œè¦å›å‚³çš„ Textï¼Œæœ€å¾Œç”¨ bot æŠŠ Message å‚³å›å»ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">for</span> update <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> updates <span class=\"token punctuation\">{</span>\n    text <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Text\n    chatID <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Chat<span class=\"token punctuation\">.</span>ID\n    replyMsg <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewMessage</span><span class=\"token punctuation\">(</span>chatID<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span>\n    <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> bot<span class=\"token punctuation\">.</span><span class=\"token function\">Send</span><span class=\"token punctuation\">(</span>replyMsg<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>ç°¡å–®é¸šéµ¡çš„å®Œæ•´ç¨‹å¼ç¢¼</h2>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n    tgbotapi <span class=\"token string\">\"github.com/go-telegram-bot-api/telegram-bot-api/v5\"</span>\n    <span class=\"token string\">\"os\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    bot<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewBotAPI</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span><span class=\"token function\">Getenv</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TELEGRAM_API_TOKEN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">panic</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    bot<span class=\"token punctuation\">.</span>Debug <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    updateConfig <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewUpdate</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    updateConfig<span class=\"token punctuation\">.</span>Timeout <span class=\"token operator\">=</span> <span class=\"token number\">60</span>\n    updates <span class=\"token operator\">:=</span> bot<span class=\"token punctuation\">.</span><span class=\"token function\">GetUpdatesChan</span><span class=\"token punctuation\">(</span>updateConfig<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> update <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> updates <span class=\"token punctuation\">{</span>\n        text <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Text\n        chatID <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Chat<span class=\"token punctuation\">.</span>ID\n        replyMsg <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewMessage</span><span class=\"token punctuation\">(</span>chatID<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span>\n        <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> bot<span class=\"token punctuation\">.</span><span class=\"token function\">Send</span><span class=\"token punctuation\">(</span>replyMsg<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>æ”¹å¯«æˆéé˜»å¡çš„ Goroutine</h2>\n<p>å› ç‚ºæ¯æ¬¡è™•ç†å’Œå›å¾©éƒ½æœƒéœ€è¦ä¸€é»æ™‚é–“ï¼Œç”šè‡³æ˜¯è¦å» DB æ‰¾è³‡æ–™ï¼Œå¦‚æœç”¨ä¸Šé¢çš„å¯«æ³•ï¼Œåœ¨è™•ç†å¤šäººæˆ–é«˜é€Ÿå‚³è¨Šæ¯çš„æ™‚å€™æœƒè¢«å¡ä½ï¼Œä¸€æ¬¡åªèƒ½è™•ç†çš„ä¸€å€‹è¨Šæ¯ã€‚é‚„å¥½ Go çš„ä½µç™¼å¯«æ³•éå¸¸ç°¡å–®ï¼Œåªè¦æ”¾ä¸€å€‹ go åœ¨å‰é¢ï¼Œå°±å¯ä»¥éé˜»å¡çš„åŸ·è¡Œ function ä¸­çš„å…§å®¹ã€‚</p>\n<p>æˆ‘å€‘å…ˆæŠŠ <code class=\"language-text\">handleUpdate</code> æå–æˆä¸€å€‹ functionï¼Œç„¶å¾Œå†ç”¨ go å»åŸ·è¡Œä»–ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    bot<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewBotAPI</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span><span class=\"token function\">Getenv</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TELEGRAM_API_TOKEN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">panic</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    bot<span class=\"token punctuation\">.</span>Debug <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    updateConfig <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewUpdate</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    updateConfig<span class=\"token punctuation\">.</span>Timeout <span class=\"token operator\">=</span> <span class=\"token number\">60</span>\n    updates <span class=\"token operator\">:=</span> bot<span class=\"token punctuation\">.</span><span class=\"token function\">GetUpdatesChan</span><span class=\"token punctuation\">(</span>updateConfig<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> update <span class=\"token operator\">:=</span> <span class=\"token keyword\">range</span> updates <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">go</span> <span class=\"token function\">handleUpdate</span><span class=\"token punctuation\">(</span>bot<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">handleUpdate</span><span class=\"token punctuation\">(</span>bot <span class=\"token operator\">*</span>tgbotapi<span class=\"token punctuation\">.</span>BotAPI<span class=\"token punctuation\">,</span> update tgbotapi<span class=\"token punctuation\">.</span>Update<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    text <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Text\n    chatID <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Chat<span class=\"token punctuation\">.</span>ID\n    replyMsg <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewMessage</span><span class=\"token punctuation\">(</span>chatID<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span>\n    <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> bot<span class=\"token punctuation\">.</span><span class=\"token function\">Send</span><span class=\"token punctuation\">(</span>replyMsg<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>å›å¾©ç‰¹å®šè¨Šæ¯</h2>\n<p>è¦å›å¾© <code class=\"language-text\">å›å¾©è¨Šæ¯</code> ï¼Œåƒæ˜¯ä¸‹é¢çš„æ•ˆæœä¹Ÿå¾ˆç°¡å–®ï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/22010000-e325-45e6-52f9-64eec6b28500/public\" alt=\"image\"></p>\n<p>åªéœ€è¦è¨­å®š <code class=\"language-text\">replyMsg.ReplyToMessageID</code> å°±å¯ä»¥å›å¾©ç‰¹å®šçš„è¨Šæ¯ï¼Œä¸‹é¢å°±æ˜¯ç›´æ¥å›è¦†æ¥æ”¶åˆ°çš„è¨Šæ¯ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">handleUpdate</span><span class=\"token punctuation\">(</span>bot <span class=\"token operator\">*</span>tgbotapi<span class=\"token punctuation\">.</span>BotAPI<span class=\"token punctuation\">,</span> update tgbotapi<span class=\"token punctuation\">.</span>Update<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    text <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Text\n    chatID <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Chat<span class=\"token punctuation\">.</span>ID\n    replyMsg <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewMessage</span><span class=\"token punctuation\">(</span>chatID<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span>\n    replyMsg<span class=\"token punctuation\">.</span>ReplyToMessageID <span class=\"token operator\">=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>MessageID\n    <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> bot<span class=\"token punctuation\">.</span><span class=\"token function\">Send</span><span class=\"token punctuation\">(</span>replyMsg<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>è™•ç† Command</h2>\n<p>Telegram ä¸­ï¼Œç”¨ <code class=\"language-text\">/</code> é–‹é ­çš„æ–‡å­—å°±æ˜¯ Commandï¼Œé€™å€‹å‡½ç¤ºåº«ä¹Ÿæœ‰å¯«å¥½è™•ç† Command çš„æ–¹æ³•ï¼Œåªéœ€è¦ç”¨ <code class=\"language-text\">isCommand()</code>ï¼Œç¢ºèªä¸€ä¸‹æ˜¯ä¸æ˜¯ Command å°±å¯ä»¥ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">handleUpdate</span><span class=\"token punctuation\">(</span>bot <span class=\"token operator\">*</span>tgbotapi<span class=\"token punctuation\">.</span>BotAPI<span class=\"token punctuation\">,</span> update tgbotapi<span class=\"token punctuation\">.</span>Update<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    text <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Text\n    chatID <span class=\"token operator\">:=</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>Chat<span class=\"token punctuation\">.</span>ID\n    replyMsg <span class=\"token operator\">:=</span> tgbotapi<span class=\"token punctuation\">.</span><span class=\"token function\">NewMessage</span><span class=\"token punctuation\">(</span>chatID<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span><span class=\"token function\">IsCommand</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">switch</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span><span class=\"token function\">Command</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">\"start\"</span><span class=\"token punctuation\">:</span>\n            replyMsg<span class=\"token punctuation\">.</span>Text <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello \"</span> <span class=\"token operator\">+</span> update<span class=\"token punctuation\">.</span>Message<span class=\"token punctuation\">.</span>From<span class=\"token punctuation\">.</span>FirstName\n        <span class=\"token keyword\">case</span> <span class=\"token string\">\"help\"</span><span class=\"token punctuation\">:</span>\n            replyMsg<span class=\"token punctuation\">.</span>Text <span class=\"token operator\">=</span> <span class=\"token string\">\"What can I help you?\"</span>\n        <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n            replyMsg<span class=\"token punctuation\">.</span>Text <span class=\"token operator\">=</span> <span class=\"token string\">\"No such command!!!\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">_</span> <span class=\"token operator\">=</span> bot<span class=\"token punctuation\">.</span><span class=\"token function\">Send</span><span class=\"token punctuation\">(</span>replyMsg<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼å…¶å¯¦ä¹Ÿå¯ä»¥çœ‹åˆ°å¦‚ä½•æ‹¿åˆ°å‚³é€è€…çš„ä¸€äº›åŸºæœ¬è³‡æ–™ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0fd54240-5c18-4b75-c7be-981cdb144e00/public\" alt=\"image\"></p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://core.telegram.org/\">Telegram APIs</a></li>\n<li><a href=\"https://github.com/go-telegram-bot-api/telegram-bot-api\">Golang bindings for the Telegram Bot API - GitHub</a></li>\n</ul>","rawMarkdownBody":"\nTelegram Bot æ²’æœ‰ä»»ä½•ä½¿ç”¨é™åˆ¶ï¼Œå¯ä»¥å¯«å‡ºè¨±å¤šå±¬æ–¼è‡ªå·±çš„å¹«æ‰‹ã€‚æœ¬ç¯‡ç°¡å–®çš„ç”¨ Go å¯«ä¸€å€‹é¸šéµ¡æ©Ÿå™¨äººï¼Œç”¨æˆ¶èªªä»€éº¼ï¼Œæ©Ÿå™¨äººå°±å›ä»€éº¼ã€‚\n\n<!--more-->\n\n## æ–°å¢è‡ªå·±çš„ Bot\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/fbf36cb0-84f4-4f7a-2553-04ecccf44800/public)\n\nTelegram éå¸¸æœ‰è¶£ï¼Œè¦æ–°å¢è‡ªå·±çš„ Botï¼Œåªè¦è·Ÿ Telegram ä¸Šçš„ [BotFather](https://telegram.me/BotFather) `èªªä¸€ä¸‹`ï¼Œä»–å°±æœƒçµ¦ä½ ä¸€å€‹ Botã€‚\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9200bc38-828c-4ad4-a022-d34c3a692d00/public)\n\næŒ‰ BotFather çµ¦ä½ çš„æ­¥é©Ÿåšï¼Œæœ€å¾Œå¯ä»¥çœ‹åˆ°ä»–æœƒæä¾›ä¸€å€‹ API Token çµ¦ä½ ï¼Œåªè¦æœ‰é€™å€‹ Token å°±å¯ä»¥è·Ÿ Bot æºé€šï¼Œè¦ä¿å­˜å¥½ï¼Œç­‰ç­‰æœƒç”¨åˆ°ï¼Œä¹Ÿä¸è¦çµ¦åˆ¥äººçœ‹åˆ°ï¼Œä»¥å…è‡ªå·±çš„ Bot è®Šæˆåˆ¥äººçš„ç©å…·ã€‚\n\n## go-telegram-bot-api\n\nGo å·²ç¶“æœ‰ç¤¾å€é–‹ç™¼çš„å‡½å¼åº«å¯ä»¥ç”¨ [telegram-bot-api](https://github.com/go-telegram-bot-api/telegram-bot-api)ã€‚\n\n```shell\ngo get -u github.com/go-telegram-bot-api/telegram-bot-api/v5\n\n```\n\nä¹‹å¾Œåªè¦ import å°±å¯ä»¥ä½¿ç”¨ï¼š\n\n```go\nimport (\n    tgbotapi \"github.com/go-telegram-bot-api/telegram-bot-api/v5\"\n)\n```\n\n## é€£ç·šåˆ° Telegram Bot\n\nåˆ©ç”¨å‰›å‰› import çš„å‡½å¼åº«ï¼Œåªéœ€è¦å‰›å‰›å‰µå»ºå¥½çš„ Bot çš„ API Token å°±å¯ä»¥é€£ç·šåˆ° Telegramã€‚\n\n```go\nbot, err := tgbotapi.NewBotAPI(os.Getenv(\"TELEGRAM_API_TOKEN\"))\nif err != nil {\n    panic(err)\n}\n```\n\nä¸Šé¢ç”¨ç’°å¢ƒè®Šæ•¸çš„æ–¹å¼ä¾†å–å¾— TOKENï¼Œé¿å…éœ€è¦ç›´æ¥å¯«åœ¨ç¨‹å¼ç¢¼è£¡ï¼Œå¦‚æœè¦ºå¾—åœ¨æ¸¬è©¦æ™‚è¨­å®šç’°å¢ƒè®Šæ•¸å¾ˆéº»ç…©ï¼Œå¯ä»¥ç”¨ JetBrains çš„ [GoLand](https://www.jetbrains.com/go/)ï¼Œè¨­å®š Runtime çš„ç’°å¢ƒè®Šæ•¸ï¼š\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9af5d8a5-3504-479d-ab04-f8b0adf93500/public)\n\n## è™•ç† Update\n\nè¦æ¥æ”¶ä½¿ç”¨è€…å‚³éä¾†çš„è¨Šæ¯ï¼ŒTelegram API ç¨±ç‚º Updateï¼Œæˆ‘å€‘ä½¿ç”¨çš„å‡½ç¤ºåº«åŸºæœ¬ä¸Šéƒ½è‡ªå‹•è™•ç†å¥½äº†ï¼Œåªéœ€è¦æ¥æ”¶ä¸€å€‹ Channel å°±å¥½ã€‚ä½¿ç”¨ `bot.GetUpdatesChan(config)` æœƒéœ€è¦çµ¦ä¸€å€‹ Configï¼Œé€™å¯ä»¥ç”¨ `tgbotapi.NewUpdate(0)` ä¾†ç”Ÿï¼Œç„¶å¾Œé€™é‚Šè¨­å®š Timeout ç‚º 60ï¼Œå¦‚æœå°é€™å€‹è¨­å®šå€¼æœ‰èˆˆè¶£ï¼Œå¯ä»¥å»çœ‹ Telegram çš„æ–‡ä»¶ã€‚\n\n```go\nupdateConfig := tgbotapi.NewUpdate(0)\nupdateConfig.Timeout = 60\nupdates := bot.GetUpdatesChan(updateConfig)\n```\n\n## å›å¾©\n\næˆ‘å€‘å…ˆç°¡å–®å¯«ä¸€éš»é¸šéµ¡ï¼ŒæŠŠç”¨æˆ¶å‚³éä¾†çš„ Textï¼Œç›´æ¥å‚³å›å»ã€‚\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/19bbc73e-3090-4a0d-0eec-d65671c01900/public)\n\nç”¨ for æŠŠ Channel ä¸­çš„ Update ä¸€å€‹ä¸€å€‹æ‹¿å‡ºä¾†ï¼Œç„¶å¾Œç”¨ `tgbotapi` ç”¢ç”Ÿä¸€å€‹ Message ç‰©ä»¶ï¼Œè£¡é¢æ”¾åœ¨èŠå¤©å®¤çš„ ID å’Œè¦å›å‚³çš„ Textï¼Œæœ€å¾Œç”¨ bot æŠŠ Message å‚³å›å»ã€‚\n\n```go\nfor update := range updates {\n    text := update.Message.Text\n    chatID := update.Message.Chat.ID\n    replyMsg := tgbotapi.NewMessage(chatID, text)\n    _, _ = bot.Send(replyMsg)\n}\n```\n\n## ç°¡å–®é¸šéµ¡çš„å®Œæ•´ç¨‹å¼ç¢¼\n\n```go\npackage main\n\nimport (\n    tgbotapi \"github.com/go-telegram-bot-api/telegram-bot-api/v5\"\n    \"os\"\n)\n\nfunc main() {\n    bot, err := tgbotapi.NewBotAPI(os.Getenv(\"TELEGRAM_API_TOKEN\"))\n    if err != nil {\n        panic(err)\n    }\n    bot.Debug = true\n    updateConfig := tgbotapi.NewUpdate(0)\n    updateConfig.Timeout = 60\n    updates := bot.GetUpdatesChan(updateConfig)\n    for update := range updates {\n        text := update.Message.Text\n        chatID := update.Message.Chat.ID\n        replyMsg := tgbotapi.NewMessage(chatID, text)\n        _, _ = bot.Send(replyMsg)\n    }\n}\n```\n\n## æ”¹å¯«æˆéé˜»å¡çš„ Goroutine\n\nå› ç‚ºæ¯æ¬¡è™•ç†å’Œå›å¾©éƒ½æœƒéœ€è¦ä¸€é»æ™‚é–“ï¼Œç”šè‡³æ˜¯è¦å» DB æ‰¾è³‡æ–™ï¼Œå¦‚æœç”¨ä¸Šé¢çš„å¯«æ³•ï¼Œåœ¨è™•ç†å¤šäººæˆ–é«˜é€Ÿå‚³è¨Šæ¯çš„æ™‚å€™æœƒè¢«å¡ä½ï¼Œä¸€æ¬¡åªèƒ½è™•ç†çš„ä¸€å€‹è¨Šæ¯ã€‚é‚„å¥½ Go çš„ä½µç™¼å¯«æ³•éå¸¸ç°¡å–®ï¼Œåªè¦æ”¾ä¸€å€‹ go åœ¨å‰é¢ï¼Œå°±å¯ä»¥éé˜»å¡çš„åŸ·è¡Œ function ä¸­çš„å…§å®¹ã€‚\n\næˆ‘å€‘å…ˆæŠŠ `handleUpdate` æå–æˆä¸€å€‹ functionï¼Œç„¶å¾Œå†ç”¨ go å»åŸ·è¡Œä»–ï¼š\n\n```go\nfunc main() {\n    bot, err := tgbotapi.NewBotAPI(os.Getenv(\"TELEGRAM_API_TOKEN\"))\n    if err != nil {\n        panic(err)\n    }\n    bot.Debug = true\n    updateConfig := tgbotapi.NewUpdate(0)\n    updateConfig.Timeout = 60\n    updates := bot.GetUpdatesChan(updateConfig)\n    for update := range updates {\n        go handleUpdate(bot, update)\n    }\n}\n\nfunc handleUpdate(bot *tgbotapi.BotAPI, update tgbotapi.Update) {\n    text := update.Message.Text\n    chatID := update.Message.Chat.ID\n    replyMsg := tgbotapi.NewMessage(chatID, text)\n    _, _ = bot.Send(replyMsg)\n}\n```\n\n## å›å¾©ç‰¹å®šè¨Šæ¯\n\nè¦å›å¾© `å›å¾©è¨Šæ¯` ï¼Œåƒæ˜¯ä¸‹é¢çš„æ•ˆæœä¹Ÿå¾ˆç°¡å–®ï¼š\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/22010000-e325-45e6-52f9-64eec6b28500/public)\n\nåªéœ€è¦è¨­å®š `replyMsg.ReplyToMessageID` å°±å¯ä»¥å›å¾©ç‰¹å®šçš„è¨Šæ¯ï¼Œä¸‹é¢å°±æ˜¯ç›´æ¥å›è¦†æ¥æ”¶åˆ°çš„è¨Šæ¯ï¼š\n\n```go\nfunc handleUpdate(bot *tgbotapi.BotAPI, update tgbotapi.Update) {\n    text := update.Message.Text\n    chatID := update.Message.Chat.ID\n    replyMsg := tgbotapi.NewMessage(chatID, text)\n    replyMsg.ReplyToMessageID = update.Message.MessageID\n    _, _ = bot.Send(replyMsg)\n}\n```\n\n## è™•ç† Command\n\nTelegram ä¸­ï¼Œç”¨ `/` é–‹é ­çš„æ–‡å­—å°±æ˜¯ Commandï¼Œé€™å€‹å‡½ç¤ºåº«ä¹Ÿæœ‰å¯«å¥½è™•ç† Command çš„æ–¹æ³•ï¼Œåªéœ€è¦ç”¨ `isCommand()`ï¼Œç¢ºèªä¸€ä¸‹æ˜¯ä¸æ˜¯ Command å°±å¯ä»¥ï¼š\n\n```go\nfunc handleUpdate(bot *tgbotapi.BotAPI, update tgbotapi.Update) {\n    text := update.Message.Text\n    chatID := update.Message.Chat.ID\n    replyMsg := tgbotapi.NewMessage(chatID, text)\n    if update.Message.IsCommand() {\n        switch update.Message.Command() {\n        case \"start\":\n            replyMsg.Text = \"Hello \" + update.Message.From.FirstName\n        case \"help\":\n            replyMsg.Text = \"What can I help you?\"\n        default:\n            replyMsg.Text = \"No such command!!!\"\n        }\n    }\n    _, _ = bot.Send(replyMsg)\n}\n```\n\nä¸Šé¢çš„ç¨‹å¼ç¢¼å…¶å¯¦ä¹Ÿå¯ä»¥çœ‹åˆ°å¦‚ä½•æ‹¿åˆ°å‚³é€è€…çš„ä¸€äº›åŸºæœ¬è³‡æ–™ã€‚\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0fd54240-5c18-4b75-c7be-981cdb144e00/public)\n\n## Reference\n\n- [Telegram APIs](https://core.telegram.org/)\n- [Golang bindings for the Telegram Bot API - GitHub](https://github.com/go-telegram-bot-api/telegram-bot-api)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Telegram/go-tg-bot.md","excerpt":"Telegram Bot æ²’æœ‰ä»»ä½•ä½¿ç”¨é™åˆ¶ï¼Œå¯ä»¥å¯«å‡ºè¨±å¤šå±¬æ–¼è‡ªå·±çš„å¹«æ‰‹ã€‚æœ¬ç¯‡ç°¡å–®çš„ç”¨ Go å¯«ä¸€å€‹é¸šéµ¡æ©Ÿå™¨äººï¼Œç”¨æˆ¶èªªä»€éº¼ï¼Œæ©Ÿå™¨äººå°±å›ä»€éº¼ã€‚ æ–°å¢è‡ªå·±çš„ Bot image Telegram éå¸¸æœ‰è¶£ï¼Œè¦æ–°å¢è‡ªå·±çš„ Botï¼Œåªè¦è·Ÿ Telegram ä¸Šçš„ BotFather ï¼Œä»–å°±æœƒçµ¦ä½ ä¸€å€‹ Botã€‚ image æŒ‰ BotFather çµ¦ä½ çš„æ­¥é©Ÿåšï¼Œæœ€å¾Œå¯ä»¥çœ‹åˆ°ä»–æœƒæä¾›ä¸€å€‹ API Token â€¦","frontmatter":{"title":"ç”¨ Go å¯« Telegram Bot","date":"2021-12-11T14:30:15.000Z","draft":false,"tags":["go","golang","telegram","bot","telegram-bot"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f8c04956-a2ef-4cba-b9fe-2a5ceff40b00/public","description":"Telegram Bot æ²’æœ‰ä»»ä½•ä½¿ç”¨é™åˆ¶ï¼Œå¯ä»¥å¯«å‡ºè¨±å¤šå±¬æ–¼è‡ªå·±çš„å¹«æ‰‹ã€‚æœ¬ç¯‡ç°¡å–®çš„ç”¨ Go å¯«ä¸€å€‹é¸šéµ¡æ©Ÿå™¨äººï¼Œç”¨æˆ¶èªªä»€éº¼ï¼Œæ©Ÿå™¨äººå°±å›ä»€éº¼ã€‚"}}},{"node":{"id":"d8fb3977-7c7f-57ad-83c2-8dc1d7ba1927","html":"<p>Flutter å› ç‚ºå¤§é‡ä½¿ç”¨ä¾è³´æ³¨å…¥ï¼Œæ‰€ä»¥å¸¸å¸¸æœƒéœ€è¦å‚³å…¥ Functionã€‚å‚³å…¥ Function æ™‚ï¼Œå¸¸å¸¸æœƒçœ‹åˆ°å…©ç¨®å¯«æ³•ï¼Œä¸€ä¸‹æ˜¯ <code class=\"language-text\">() {}</code> å¯«æ³•ï¼Œå¦ä¸€å€‹æ˜¯ <code class=\"language-text\">() =></code> å¯«æ³•ã€‚æˆ‘å‰›é–‹å§‹å¯«çš„æ™‚å€™è¢«æå¾—é ­æ˜è…¦è„¹ï¼ŒæŸ¥äº†ä¸€ä¸‹æ‰ç™¼ç¾é€™å…©å€‹æœ¬èº«æ²’ä»€éº¼ä¸åŒã€‚</p>\n<!--more-->\n<h2>ä¸åŒåœ¨å“ª</h2>\n<p>ä¸‹é¢æˆ‘ç”¨åœ¨å¯« Flutter ä¸­å¸¸è¦‹çš„å‰µå»ºä¸€å€‹æœ‰ 10 å€‹ Text çš„ List èˆ‰ä¾‹ã€‚</p>\n<p>å‰µå»ºä¸€å€‹æœ‰ 10 é …å…ƒç´ çš„ Listï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span><span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">generate</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ä¸Šé¢å°±æ˜¯è¼¸å‡ºä¸€å€‹å¸¶æœ‰ 0-9 çš„ Listï¼Œé‚£ç¾åœ¨å‡è¨­æˆ‘æœƒéœ€è¦å†å‰µå»º Text å‰ï¼Œæ ¹æ“š index ä¾†åšä¸€äº›æ”¹è®Šï¼Œä¸‹é¢å°±åšæœ€ç°¡å–®çš„å¹³æ–¹ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span><span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">generate</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// do some work</span>\n    <span class=\"token keyword\">var</span> text <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">*</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>è§€å¯Ÿä¸Šé¢å…©å€‹ä¾‹å­ï¼Œä¸é›£ç™¼ç¾å…©å€‹çš„å·®åˆ¥ï¼Œç¬¬ä¸€å€‹å¯«æ³• <code class=\"language-text\">() =></code> å¾Œé¢ç›´æ¥æ¥ä¸Šä¸€å€‹è¡¨é”å¼(Expression)ï¼Œç•¶ä½œå›å‚³å€¼ã€‚è€Œ <code class=\"language-text\">() {}</code> å‰‡æ˜¯åœ¨å¤§æ‹¬è™Ÿä¸­å¯«ä¸€å€‹å®Œæ•´çš„ Functionï¼Œæ‰€ä»¥è¦å¯«ä¸€å€‹ returnã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/51868395/flutter-dart-difference-between-and\">Flutter/Dart - Difference between () {} and () => {}</a></li>\n</ul>","rawMarkdownBody":"\nFlutter å› ç‚ºå¤§é‡ä½¿ç”¨ä¾è³´æ³¨å…¥ï¼Œæ‰€ä»¥å¸¸å¸¸æœƒéœ€è¦å‚³å…¥ Functionã€‚å‚³å…¥ Function æ™‚ï¼Œå¸¸å¸¸æœƒçœ‹åˆ°å…©ç¨®å¯«æ³•ï¼Œä¸€ä¸‹æ˜¯ `() {}` å¯«æ³•ï¼Œå¦ä¸€å€‹æ˜¯ `() =>` å¯«æ³•ã€‚æˆ‘å‰›é–‹å§‹å¯«çš„æ™‚å€™è¢«æå¾—é ­æ˜è…¦è„¹ï¼ŒæŸ¥äº†ä¸€ä¸‹æ‰ç™¼ç¾é€™å…©å€‹æœ¬èº«æ²’ä»€éº¼ä¸åŒã€‚\n\n<!--more-->\n\n## ä¸åŒåœ¨å“ª\n\nä¸‹é¢æˆ‘ç”¨åœ¨å¯« Flutter ä¸­å¸¸è¦‹çš„å‰µå»ºä¸€å€‹æœ‰ 10 å€‹ Text çš„ List èˆ‰ä¾‹ã€‚\n\nå‰µå»ºä¸€å€‹æœ‰ 10 é …å…ƒç´ çš„ Listï¼š\n\n```dart\nList<Text> list = List.generate(10, (index) => Text(index.toString()));\n```\n\nä¸Šé¢å°±æ˜¯è¼¸å‡ºä¸€å€‹å¸¶æœ‰ 0-9 çš„ Listï¼Œé‚£ç¾åœ¨å‡è¨­æˆ‘æœƒéœ€è¦å†å‰µå»º Text å‰ï¼Œæ ¹æ“š index ä¾†åšä¸€äº›æ”¹è®Šï¼Œä¸‹é¢å°±åšæœ€ç°¡å–®çš„å¹³æ–¹ã€‚\n\n```dart\nList<Text> list = List.generate(10, (index) {\n    // do some work\n    var text = (index * index).toString();\n    return Text(text);\n});\n```\n\nè§€å¯Ÿä¸Šé¢å…©å€‹ä¾‹å­ï¼Œä¸é›£ç™¼ç¾å…©å€‹çš„å·®åˆ¥ï¼Œç¬¬ä¸€å€‹å¯«æ³• `() =>` å¾Œé¢ç›´æ¥æ¥ä¸Šä¸€å€‹è¡¨é”å¼(Expression)ï¼Œç•¶ä½œå›å‚³å€¼ã€‚è€Œ `() {}` å‰‡æ˜¯åœ¨å¤§æ‹¬è™Ÿä¸­å¯«ä¸€å€‹å®Œæ•´çš„ Functionï¼Œæ‰€ä»¥è¦å¯«ä¸€å€‹ returnã€‚\n\n## Reference\n\n- [Flutter/Dart - Difference between () {} and () => {}](https://stackoverflow.com/questions/51868395/flutter-dart-difference-between-and)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Flutter/Dart Function Lambda diff.md","excerpt":"Flutter å› ç‚ºå¤§é‡ä½¿ç”¨ä¾è³´æ³¨å…¥ï¼Œæ‰€ä»¥å¸¸å¸¸æœƒéœ€è¦å‚³å…¥ Functionã€‚å‚³å…¥ Function æ™‚ï¼Œå¸¸å¸¸æœƒçœ‹åˆ°å…©ç¨®å¯«æ³•ï¼Œä¸€ä¸‹æ˜¯  å¯«æ³•ï¼Œå¦ä¸€å€‹æ˜¯  å¯«æ³•ã€‚æˆ‘å‰›é–‹å§‹å¯«çš„æ™‚å€™è¢«æå¾—é ­æ˜è…¦è„¹ï¼ŒæŸ¥äº†ä¸€ä¸‹æ‰ç™¼ç¾é€™å…©å€‹æœ¬èº«æ²’ä»€éº¼ä¸åŒã€‚ ä¸åŒåœ¨å“ª ä¸‹é¢æˆ‘ç”¨åœ¨å¯« Flutter ä¸­å¸¸è¦‹çš„å‰µå»ºä¸€å€‹æœ‰ 10 å€‹ Text çš„ List èˆ‰ä¾‹ã€‚ å‰µå»ºä¸€å€‹æœ‰ 10 é …å…ƒç´ çš„ Listï¼š ä¸Šé¢å°±æ˜¯è¼¸å‡ºä¸€å€‹å¸¶æœ‰ 0-9â€¦","frontmatter":{"title":"Flutter/Dart (){} å’Œ () => çš„å·®åˆ¥","date":"2021-11-04T05:52:44.000Z","draft":false,"tags":["dart","flutter","function"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f8a3eaa5-e9c2-455f-d301-43fc77fee200/large","description":"Flutter å› ç‚ºå¤§é‡ä½¿ç”¨ä¾è³´æ³¨å…¥ï¼Œæ‰€ä»¥å¸¸å¸¸æœƒéœ€è¦å‚³å…¥ Functionã€‚å‚³å…¥ Function æ™‚ï¼Œå¸¸å¸¸æœƒçœ‹åˆ°å…©ç¨®å¯«æ³•ï¼Œä¸€ä¸‹æ˜¯ () {} å¯«æ³•ï¼Œå¦ä¸€å€‹æ˜¯ () => å¯«æ³•ã€‚æˆ‘å‰›é–‹å§‹å¯«çš„æ™‚å€™è¢«æå¾—é ­æ˜è…¦è„¹ï¼ŒæŸ¥äº†ä¸€ä¸‹æ‰ç™¼ç¾é€™å…©å€‹æœ¬èº«æ²’ä»€éº¼ä¸åŒã€‚"}}},{"node":{"id":"5a287e0a-4039-585c-b56d-03d41cb6b549","html":"<p>ä¸Šå€‹æœˆçœ‹åˆ° Cloudflare ç™¼å¸ƒäº†ä¸€é—œæ–¼é€Ÿåº¦é€±çš„æ–‡ç« ï¼Œé›–ç„¶çœ‹èµ·ä¾†åƒæ˜¯ Cloudflare å»£å‘Šè‡ªå·±çš„ç”¢å“ç”¨çš„ï¼Œæˆ‘ç´°è®€å¾Œæ‰ç™¼ç¾ï¼Œä»–è©³ç´°äº†èªªæ˜äº†ç¾åœ¨åœ¨ä¸Šç¶²æ™‚ç‚ºä½•æœƒæœ‰çš„ç¶²é å¯ä»¥å¾ˆå¿«ï¼Œæœ‰çš„ç¶²é å»æ…¢çš„è·Ÿçƒé¾œä¸€æ¨£ï¼Œè©³ç´°èªªæ˜ç¶²è·¯æœƒé‡åˆ°çš„ä¸€äº›å›°å¢ƒå’ŒåŸç† (å–®ç„¶è§£æ³•å°±æ˜¯ç”¨ä»–å€‘å®¶çš„ç”¢å“)ï¼Œåœ¨æŠ€è¡“æ–¹é¢å€¼å¾—ä¸€è®€ï¼Œæˆ‘å°±ç¨å¾®çµ±æ•´ä¸€ä¸‹ã€‚</p>\n<!--more-->\n<blockquote>\n<p>No one likes to wait. Internet impatience is something we all suffer from.</p>\n</blockquote>\n<p>æ–‡ç« ä¸€é–‹é ­å°±ç”¨ä¸€å¥é»å‡ºå¤§å®¶åœ¨ä¸Šç¶²æ™‚æœƒé‡åˆ°çš„ç‹€æ³ï¼Œæ²’æœ‰äººå–œæ­¡ç­‰å¾…ï¼Œå¯æ˜¯æ‰€æœ‰äººéƒ½åœ¨ä¸Šç¶²æ™‚èº«å—å…¶å®³ï¼Œç›¸ä¿¡å¤§å®¶éƒ½é‡éä¸‹é¢çš„æƒ…æ³ï¼š</p>\n<ol>\n<li>ç­‰å¾… App å®Œæˆå…§å®¹æ›´æ–°</li>\n<li>ç­‰å¾…ç¶²é å‡ºç¾</li>\n<li>ç­‰å¾…é›»å½±é–‹å§‹æ’­æ”¾</li>\n</ol>\n<p>ä½†æœ‰å¯«éç¨‹å¼æˆ–æœå‹™çš„éƒ½çŸ¥é“ï¼Œäººä¸€å¤šï¼Œå°±ä¸€å®šæ…¢ï¼Œéå¸¸çš„é›£é¿å…ï¼Œ<del>æ‰€ä»¥é€™æ™‚å€™å°±è¦ç”¨ Cloudflare</del>ï¼Œé€™æ™‚åˆå®£å‚³äº†ä¸€ä¸‹ Cloudflareã€‚</p>\n<p>è¨±å¤šä½¿ç”¨è€…å®¶è£¡éƒ½æœƒè¦ºå¾—ç¶²è·¯å¾ˆæ…¢ï¼Œç„¶å¾Œè²·äº†å¾ˆå¿«å¾ˆå¿«çš„ç¶²é€Ÿï¼Œåƒæ˜¯ 100Mbpa, 1Gbps ç”šè‡³ 2Gbpsï¼Œä½†å…¶å¯¦å°±ç®—å®¶è£¡çš„ç¶²è·¯å†æ€éº¼å¿«ï¼Œä½ é€£ç·šçš„ Server å°±æ˜¯å¾ˆæ…¢ï¼Œä½ çš„ä¸Šç¶²é«”é©—é‚„æ˜¯å¤§æ‰“æŠ˜æ‰£ã€‚</p>\n<p>å¦‚æœè¦è®“è‡ªå·±çš„æœå‹™ä¸å¡ï¼Œåªéœ€è¦å®Œæˆä¸‹é¢ä¸‰æ¨£è¦æ±‚ï¼š</p>\n<ol>\n<li>Server æœ‰å……è¶³çš„å¸¶å¯¬</li>\n<li>è®“ Server ç›¡é‡æ¥è¿‘ User</li>\n<li>è®“ä½ çš„ Web æˆ– App ç›¡é‡å¾—å¿«</li>\n</ol>\n<p>çœ‹èµ·ä¾†å¾ˆç°¡å–®ï¼Œä½†å¦‚æœè¦å®Œæˆé€™ä¸‰å€‹è¦æ±‚ï¼Œéƒ½æœƒè€—è²»æ¥µå¤§çš„æˆæœ¬ã€‚</p>\n<h2>DNS</h2>\n<p>ç¾ä»Šçš„ç¶²è·¯ä¸–ç•Œä¸»è¦æ˜¯ç”± ipv4 çµ„æˆï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå¦‚æœæ²’æœ‰ ipv4 åœ°å€ï¼Œæ‰€æœ‰çš„ç¶²è·¯é€£ç·šéƒ½ä¸æœƒç™¼ç”Ÿï¼Œå¦‚æœæˆ‘åªçŸ¥é“ <a href=\"www.fcu.edu.tw\">www.fcu.edu.tw</a>ï¼Œæ˜¯å®Œå…¨æ²’æœ‰è¾¦æ³•ä¸Šç¶²çš„ï¼Œå› ç‚ºæˆ‘ä¸¦ä¸çŸ¥é“é€™å€‹ç¶²å€å°æ‡‰çš„ ip æ˜¯å¤šå°‘ (åƒæ˜¯ 140.134.xxx.xxx)ï¼Œå°±å®Œå…¨æ²’æœ‰è¾¦æ³•å’Œä¼ºæœå™¨ç”¢ç”Ÿé€£ç·šã€‚DNS å‡ºç¾å‰ï¼Œå¤§å®¶éƒ½æ˜¯ç›´æ¥ç”¨ ip æºé€šï¼Œå¿«é€Ÿæ–¹ä¾¿ï¼Œæœ€å¤§çš„ç¼ºé»å°±æ˜¯éå¸¸é›£è¨˜ã€‚æ‰€ä»¥ DNS å°±å‡ºç¾äº†ï¼ŒDNS å°±åƒä½ æ‰“é›»è©±æœƒéœ€è¦é›»è©±ç°¿ä¸€æ¨£ï¼Œæˆ‘åªæˆ‘éœ€è¦ä¸€å€‹ç°¡å–®å¥½è¨˜çš„åå­—ï¼Œå†å»é›»è©±ç°¿æœå°‹çœŸæ­£çš„é›»è©±è™Ÿç¢¼å°±å¥½ã€‚</p>\n<p>åœ¨çŸ¥é“é›»è©±è™Ÿç¢¼å‰ï¼Œæ‰€æœ‰ç¶²è·¯é€£ç·šéƒ½ä¸æœƒç™¼ç”Ÿï¼Œæ‰€ä»¥ç”¨æœ€å¿«é€Ÿçš„æ–¹å¼æŸ¥æ‰¾é›»è©±ç°¿çµ•å°æ˜¯ä¸Šç¶²é€Ÿåº¦æœ€é‡è¦çš„ä¸€ç’°ï¼Œå¦‚æœå…‰æ˜¯è¦çŸ¥é“ ip ä½ç½®å°±èŠ±æ‰ 50ms(ç”šè‡³æ›´å¤š)ï¼Œä¸Šç¶²æ•ˆç‡å°±æœƒå¤§å¤§é™ä½ã€‚å¦‚ä»Šç¶²è·¯ä¸Šæœ‰è¨±å¤šçš„ DNS æä¾›å•†ï¼Œç‚ºå¤§å®¶è¨˜ä¸‹é€™é¾å¤§çš„ DNS é›»è©±ç°¿ï¼Œæœ€è‘—åçš„å°±æ˜¯ Google çš„ <a href=\"8.8.8.8\">8.8.8.8</a>ï¼Œå’Œ Cloudflare çš„ <a href=\"1.1.1.1\">1.1.1.1</a>ï¼ŒCloudflare å®£ç¨±ä»–æ˜¯å…¨ä¸–ç•Œæœ€å¿«çš„ DNS æä¾›å•†ï¼Œ(é›–ç„¶åœ¨å°ç£å¥½åƒæœªå¿…)ï¼Œä½† Cloudflare æ‰¿è«¾ä»–ä¸æœƒ<strong>ç´€éŒ„</strong>ä½¿ç”¨è€…æŸ¥éçš„ DNS ç´€éŒ„ï¼Œæˆ–ä¸Šéä»€éº¼ç¶²é  (å¥½åƒæ˜¯åœ¨æš—ç¤ºç«¶çˆ­å°æ‰‹æœƒé€™éº¼åš)ã€‚</p>\n<p>å¦å¤–ï¼Œå°±ç®— DNS ä¼ºæœå™¨å®Œå…¨ä¸å‡æ€ç´¢ (æ²’æœ‰åæ‡‰æ™‚é–“) å°±å›å‚³ DNS çš„æŸ¥è©¢çµæœï¼Œé€™ä¹Ÿä»˜å‡ºäº†è‡³å°‘ä¸€å€‹<a href=\"#%E5%85%89%E9%80%9F%E6%90%8D%E8%80%97\"><strong>å…‰é€Ÿçš„ä»£åƒ¹</strong></a>ï¼Œè½èµ·ä¾†å¥½åƒæ²’ä»€éº¼å½±éŸ¿ï¼Œä½†å¯ä»¥çœ‹çœ‹ä¸‹é¢ç°¡å–®çš„è¨ˆç®—ã€‚</p>\n<h3>å…‰é€Ÿæè€—</h3>\n<p>å‡è¨­æˆ‘å®¶å’Œ DNS ä¼ºæœå™¨ä¹‹é–“çš„ç›´ç·šè·é›¢æ˜¯ 100 å…¬é‡Œï¼Œè€Œä¸”ä¸­è¯é›»ä¿¡ç­†ç›´çš„é€£æ¥äº†ä¸€æ¢ç­†ç›´å…‰çº–åˆ° DNS ä¼ºæœå™¨ï¼Œè€Œå…‰åœ¨å…‰çº–ä¸­çš„é€Ÿåº¦æ˜¯ 200,000,000 å…¬å°º/ç§’ï¼Œå¾€è¿”éœ€è¦ 200,000 å…¬å°ºã€‚ç¶“éé€™æ¨£ç°¡å–®çš„è¨ˆç®—ï¼Œå…‰æ˜¯å…‰é€Ÿå°±å·²ç¶“è€—è²»æ•´æ•´ 1 æ¯«ç§’(ms)ï¼Œå¯ä»¥è©¦è‘—æƒ³æƒ³çœ‹æ›´ç³Ÿçš„æƒ…æ³ï¼Œå…‰é€Ÿå·²ç¶“é–‹å§‹åœ¨åš´é‡æ‹–ç´¯ç¶²é€Ÿã€‚</p>\n<h2>Hello Hello OK</h2>\n<p>çŸ¥é“äº† ip å¾Œï¼Œç€è¦½å™¨çµ‚æ–¼å¯ä»¥é€£ä¸Šç›®æ¨™ä¼ºæœå™¨å–å¾—ç¶²é ï¼Œä¸ä¹…å¾Œå°±å¯ä»¥çœ‹åˆ°ç¶²é å‡ºç¾åœ¨çœ¼å‰ã€‚</p>\n<p>ä¸Šé¢çš„æ­¥é©Ÿï¼Œå¹¾ä¹éƒ½æ˜¯ç”± TCP å”å®šå®Œæˆï¼Œå”å®šçš„ç¬¬ä¸€æ­¥å°±æ˜¯ä½ çš„é›»è…¦å’Œä¼ºæœå™¨äº’ç›¸åŒæ„é€£ç·šï¼Œé€™å€‹éç¨‹ç¨±ä½œä¸‰å‘äº¤æ¡ (Three-Way Handshake)ï¼Œæ­¥é©Ÿå¦‚ä¸‹ï¼š</p>\n<ol>\n<li>Client å° Server èªªï¼šHello</li>\n<li>Server å° Client èªªï¼šæˆ‘è½åˆ°ä½ èªª Hello</li>\n<li>Client å° Server èªªï¼šæˆ‘è½åˆ° -- ä½ èªªä½ è½åˆ°æˆ‘èªª Helloï¼Œæˆ‘å€‘ç¾åœ¨å¯ä»¥æºé€šäº†ã€‚</li>\n</ol>\n<p>å¾ä¸Šé¢çš„æ­¥é©Ÿå°±å¯ä»¥ç™¼ç¾ï¼Œå·²ç¶“è‡³å°‘è€—è²»äº†<a href=\"#%E5%85%89%E9%80%9F%E6%90%8D%E8%80%97\">ä¸€å€‹å…‰é€Ÿçš„æ™‚é–“</a>ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œä¼ºæœå™¨æ„ˆé è¿‘ç”¨æˆ¶ï¼Œç¶²é€Ÿå°±æ„ˆå¿«ã€‚é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼ Cloudflare åœ¨ä¸–ç•Œå„åœ°å»£è¨­ä¼ºæœå™¨ã€‚</p>\n<h3>TLS/SSL</h3>\n<p>æœ‰äº† TCP æˆ‘å€‘å°±å¯ä»¥å®‰å…¨çš„é€£ç·šäº†å—ï¼Ÿç•¶ç„¶ä¸æ˜¯ï¼ŒTCP ä¸€é»ä¹Ÿä¸å®‰å…¨ï¼Œç¾åœ¨çš„ç¶²è·¯é€£ç·šå¹¾ä¹éƒ½æ˜¯é€é TLS (æˆ–ç¨±ä½œ SSL) åŠ å¯†é€£ç·šï¼Œæ‰€ä»¥ TCP é€£ç·šå¾Œï¼Œä¸‹ä¸€æ­¥æ˜¯å»ºç«‹å®‰å…¨çš„åŠ å¯†é€£ç·šã€‚</p>\n<p>TLS æ˜¯ä¸€å€‹éå¸¸è¤‡é›œçš„åŠ å¯†å”å®šï¼Œæœƒç‰½æ¶‰åˆ°ä¸‹é¢çš„è¨­å‚™ï¼šç¶²è·¯ç€è¦½å™¨ã€å»ºç«‹é‘°åŒ™çš„ä¼ºæœå™¨ï¼Œè€Œä¸”é‚„è¦æœ‰ä¸€å€‹å¯ä»¥è­‰æ˜ä»–çš„èº«åˆ†çš„ä¼ºæœå™¨ï¼Œå› ç‚ºä¸æœƒæƒ³è¦å’ŒéŠ€è¡Œå»ºç«‹å®‰å…¨é€£ç·šï¼Œä½†ä½ æ ¹æœ¬ä¸ç¢ºå®šä»–æ˜¯ä¸æ˜¯ä½ çš„éŠ€è¡Œã€‚</p>\n<p>ä¸Šé¢çš„æ­¥é©Ÿä¹Ÿæœƒéœ€è¦å¥½å¹¾æ¬¡<a href=\"#%E5%85%89%E9%80%9F%E6%90%8D%E8%80%97\">å…‰é€Ÿæè€—</a>ï¼Œæ‰€ä»¥è®“ä¼ºæœå™¨æ„ˆé è¿‘ç”¨æˆ¶ç«¯æ„ˆå¥½ã€‚å¦å¤–ï¼Œä¹Ÿè¦ç›¡é‡ä½¿ç”¨æœ€æ–°çš„ TLS æ¨™æº– (ç¾åœ¨æ˜¯ TLS 1.3)ã€‚</p>\n<h2>å¾Œè¨˜</h2>\n<p>æˆ‘è¦ºå¾—é€™ç¯‡æ–‡ç« æœ€æœ‰è¶£çš„çš„éƒ¨åˆ†å°±æ˜¯ä¸€ç›´åœ¨è¨è«–å…‰é€Ÿå°ç¶²è·¯é€£ç·šçš„å½±éŸ¿ï¼Œä»¥å¾€æˆ‘éƒ½è¦ºå¾—å…‰é€Ÿå¾ˆå¿«ï¼Œä½†å…‰å°±ç®—å¾ˆå¿«ï¼Œå…‰ä¹Ÿæ˜¯è¦è·‘å¾ˆé•·ä¸€æ®µè·é›¢ï¼Œé€™æ¨£è€—æä¾†å›å€‹å¹¾æ¬¡å°±å·²ç¶“å°ç¶²è·¯é€£ç·šç”¢ç”Ÿæ¥µå¤§çš„å½±éŸ¿äº†ï¼Œè€Œä¸”æ›´ä½•æ³ä¸€å€‹é€£ç·šå°±ä¸€å®šæœƒéœ€è¦ä¾†å›æºé€šå¥½å¹¾æ¬¡ã€‚é€™ç¯‡æ–‡ç« å¾Œé¢é‚„æœ‰è »å¤šå…§å®¹ï¼Œä½†æˆ‘è¦ºå¾—æ²’æœ‰é‚£éº¼é‡è¦å°±æ‡¶å¾—å¯«äº†ï¼Œæœ‰èˆˆè¶£çš„è©±å¯ä»¥è‡ªå·±ç¹¼çºŒå¾€ä¸‹çœ‹ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://blog.cloudflare.com/fastest-internet/\">Welcome to Speed Week and a Waitless Internet</a></li>\n</ul>","rawMarkdownBody":"\nä¸Šå€‹æœˆçœ‹åˆ° Cloudflare ç™¼å¸ƒäº†ä¸€é—œæ–¼é€Ÿåº¦é€±çš„æ–‡ç« ï¼Œé›–ç„¶çœ‹èµ·ä¾†åƒæ˜¯ Cloudflare å»£å‘Šè‡ªå·±çš„ç”¢å“ç”¨çš„ï¼Œæˆ‘ç´°è®€å¾Œæ‰ç™¼ç¾ï¼Œä»–è©³ç´°äº†èªªæ˜äº†ç¾åœ¨åœ¨ä¸Šç¶²æ™‚ç‚ºä½•æœƒæœ‰çš„ç¶²é å¯ä»¥å¾ˆå¿«ï¼Œæœ‰çš„ç¶²é å»æ…¢çš„è·Ÿçƒé¾œä¸€æ¨£ï¼Œè©³ç´°èªªæ˜ç¶²è·¯æœƒé‡åˆ°çš„ä¸€äº›å›°å¢ƒå’ŒåŸç† (å–®ç„¶è§£æ³•å°±æ˜¯ç”¨ä»–å€‘å®¶çš„ç”¢å“)ï¼Œåœ¨æŠ€è¡“æ–¹é¢å€¼å¾—ä¸€è®€ï¼Œæˆ‘å°±ç¨å¾®çµ±æ•´ä¸€ä¸‹ã€‚\n\n<!--more-->\n\n> No one likes to wait. Internet impatience is something we all suffer from.\n\næ–‡ç« ä¸€é–‹é ­å°±ç”¨ä¸€å¥é»å‡ºå¤§å®¶åœ¨ä¸Šç¶²æ™‚æœƒé‡åˆ°çš„ç‹€æ³ï¼Œæ²’æœ‰äººå–œæ­¡ç­‰å¾…ï¼Œå¯æ˜¯æ‰€æœ‰äººéƒ½åœ¨ä¸Šç¶²æ™‚èº«å—å…¶å®³ï¼Œç›¸ä¿¡å¤§å®¶éƒ½é‡éä¸‹é¢çš„æƒ…æ³ï¼š\n\n1. ç­‰å¾… App å®Œæˆå…§å®¹æ›´æ–°\n2. ç­‰å¾…ç¶²é å‡ºç¾\n3. ç­‰å¾…é›»å½±é–‹å§‹æ’­æ”¾\n\nä½†æœ‰å¯«éç¨‹å¼æˆ–æœå‹™çš„éƒ½çŸ¥é“ï¼Œäººä¸€å¤šï¼Œå°±ä¸€å®šæ…¢ï¼Œéå¸¸çš„é›£é¿å…ï¼Œ~~æ‰€ä»¥é€™æ™‚å€™å°±è¦ç”¨ Cloudflare~~ï¼Œé€™æ™‚åˆå®£å‚³äº†ä¸€ä¸‹ Cloudflareã€‚\n\nè¨±å¤šä½¿ç”¨è€…å®¶è£¡éƒ½æœƒè¦ºå¾—ç¶²è·¯å¾ˆæ…¢ï¼Œç„¶å¾Œè²·äº†å¾ˆå¿«å¾ˆå¿«çš„ç¶²é€Ÿï¼Œåƒæ˜¯ 100Mbpa, 1Gbps ç”šè‡³ 2Gbpsï¼Œä½†å…¶å¯¦å°±ç®—å®¶è£¡çš„ç¶²è·¯å†æ€éº¼å¿«ï¼Œä½ é€£ç·šçš„ Server å°±æ˜¯å¾ˆæ…¢ï¼Œä½ çš„ä¸Šç¶²é«”é©—é‚„æ˜¯å¤§æ‰“æŠ˜æ‰£ã€‚\n\nå¦‚æœè¦è®“è‡ªå·±çš„æœå‹™ä¸å¡ï¼Œåªéœ€è¦å®Œæˆä¸‹é¢ä¸‰æ¨£è¦æ±‚ï¼š\n\n1. Server æœ‰å……è¶³çš„å¸¶å¯¬\n2. è®“ Server ç›¡é‡æ¥è¿‘ User\n3. è®“ä½ çš„ Web æˆ– App ç›¡é‡å¾—å¿«\n\nçœ‹èµ·ä¾†å¾ˆç°¡å–®ï¼Œä½†å¦‚æœè¦å®Œæˆé€™ä¸‰å€‹è¦æ±‚ï¼Œéƒ½æœƒè€—è²»æ¥µå¤§çš„æˆæœ¬ã€‚\n\n## DNS\n\nç¾ä»Šçš„ç¶²è·¯ä¸–ç•Œä¸»è¦æ˜¯ç”± ipv4 çµ„æˆï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå¦‚æœæ²’æœ‰ ipv4 åœ°å€ï¼Œæ‰€æœ‰çš„ç¶²è·¯é€£ç·šéƒ½ä¸æœƒç™¼ç”Ÿï¼Œå¦‚æœæˆ‘åªçŸ¥é“ [www.fcu.edu.tw](www.fcu.edu.tw)ï¼Œæ˜¯å®Œå…¨æ²’æœ‰è¾¦æ³•ä¸Šç¶²çš„ï¼Œå› ç‚ºæˆ‘ä¸¦ä¸çŸ¥é“é€™å€‹ç¶²å€å°æ‡‰çš„ ip æ˜¯å¤šå°‘ (åƒæ˜¯ 140.134.xxx.xxx)ï¼Œå°±å®Œå…¨æ²’æœ‰è¾¦æ³•å’Œä¼ºæœå™¨ç”¢ç”Ÿé€£ç·šã€‚DNS å‡ºç¾å‰ï¼Œå¤§å®¶éƒ½æ˜¯ç›´æ¥ç”¨ ip æºé€šï¼Œå¿«é€Ÿæ–¹ä¾¿ï¼Œæœ€å¤§çš„ç¼ºé»å°±æ˜¯éå¸¸é›£è¨˜ã€‚æ‰€ä»¥ DNS å°±å‡ºç¾äº†ï¼ŒDNS å°±åƒä½ æ‰“é›»è©±æœƒéœ€è¦é›»è©±ç°¿ä¸€æ¨£ï¼Œæˆ‘åªæˆ‘éœ€è¦ä¸€å€‹ç°¡å–®å¥½è¨˜çš„åå­—ï¼Œå†å»é›»è©±ç°¿æœå°‹çœŸæ­£çš„é›»è©±è™Ÿç¢¼å°±å¥½ã€‚\n\nåœ¨çŸ¥é“é›»è©±è™Ÿç¢¼å‰ï¼Œæ‰€æœ‰ç¶²è·¯é€£ç·šéƒ½ä¸æœƒç™¼ç”Ÿï¼Œæ‰€ä»¥ç”¨æœ€å¿«é€Ÿçš„æ–¹å¼æŸ¥æ‰¾é›»è©±ç°¿çµ•å°æ˜¯ä¸Šç¶²é€Ÿåº¦æœ€é‡è¦çš„ä¸€ç’°ï¼Œå¦‚æœå…‰æ˜¯è¦çŸ¥é“ ip ä½ç½®å°±èŠ±æ‰ 50ms(ç”šè‡³æ›´å¤š)ï¼Œä¸Šç¶²æ•ˆç‡å°±æœƒå¤§å¤§é™ä½ã€‚å¦‚ä»Šç¶²è·¯ä¸Šæœ‰è¨±å¤šçš„ DNS æä¾›å•†ï¼Œç‚ºå¤§å®¶è¨˜ä¸‹é€™é¾å¤§çš„ DNS é›»è©±ç°¿ï¼Œæœ€è‘—åçš„å°±æ˜¯ Google çš„ [8.8.8.8](8.8.8.8)ï¼Œå’Œ Cloudflare çš„ [1.1.1.1](1.1.1.1)ï¼ŒCloudflare å®£ç¨±ä»–æ˜¯å…¨ä¸–ç•Œæœ€å¿«çš„ DNS æä¾›å•†ï¼Œ(é›–ç„¶åœ¨å°ç£å¥½åƒæœªå¿…)ï¼Œä½† Cloudflare æ‰¿è«¾ä»–ä¸æœƒ**ç´€éŒ„**ä½¿ç”¨è€…æŸ¥éçš„ DNS ç´€éŒ„ï¼Œæˆ–ä¸Šéä»€éº¼ç¶²é  (å¥½åƒæ˜¯åœ¨æš—ç¤ºç«¶çˆ­å°æ‰‹æœƒé€™éº¼åš)ã€‚\n\nå¦å¤–ï¼Œå°±ç®— DNS ä¼ºæœå™¨å®Œå…¨ä¸å‡æ€ç´¢ (æ²’æœ‰åæ‡‰æ™‚é–“) å°±å›å‚³ DNS çš„æŸ¥è©¢çµæœï¼Œé€™ä¹Ÿä»˜å‡ºäº†è‡³å°‘ä¸€å€‹[**å…‰é€Ÿçš„ä»£åƒ¹**](#å…‰é€Ÿæè€—)ï¼Œè½èµ·ä¾†å¥½åƒæ²’ä»€éº¼å½±éŸ¿ï¼Œä½†å¯ä»¥çœ‹çœ‹ä¸‹é¢ç°¡å–®çš„è¨ˆç®—ã€‚\n\n### å…‰é€Ÿæè€—\n\nå‡è¨­æˆ‘å®¶å’Œ DNS ä¼ºæœå™¨ä¹‹é–“çš„ç›´ç·šè·é›¢æ˜¯ 100 å…¬é‡Œï¼Œè€Œä¸”ä¸­è¯é›»ä¿¡ç­†ç›´çš„é€£æ¥äº†ä¸€æ¢ç­†ç›´å…‰çº–åˆ° DNS ä¼ºæœå™¨ï¼Œè€Œå…‰åœ¨å…‰çº–ä¸­çš„é€Ÿåº¦æ˜¯ 200,000,000 å…¬å°º/ç§’ï¼Œå¾€è¿”éœ€è¦ 200,000 å…¬å°ºã€‚ç¶“éé€™æ¨£ç°¡å–®çš„è¨ˆç®—ï¼Œå…‰æ˜¯å…‰é€Ÿå°±å·²ç¶“è€—è²»æ•´æ•´ 1 æ¯«ç§’(ms)ï¼Œå¯ä»¥è©¦è‘—æƒ³æƒ³çœ‹æ›´ç³Ÿçš„æƒ…æ³ï¼Œå…‰é€Ÿå·²ç¶“é–‹å§‹åœ¨åš´é‡æ‹–ç´¯ç¶²é€Ÿã€‚\n\n## Hello Hello OK\n\nçŸ¥é“äº† ip å¾Œï¼Œç€è¦½å™¨çµ‚æ–¼å¯ä»¥é€£ä¸Šç›®æ¨™ä¼ºæœå™¨å–å¾—ç¶²é ï¼Œä¸ä¹…å¾Œå°±å¯ä»¥çœ‹åˆ°ç¶²é å‡ºç¾åœ¨çœ¼å‰ã€‚\n\nä¸Šé¢çš„æ­¥é©Ÿï¼Œå¹¾ä¹éƒ½æ˜¯ç”± TCP å”å®šå®Œæˆï¼Œå”å®šçš„ç¬¬ä¸€æ­¥å°±æ˜¯ä½ çš„é›»è…¦å’Œä¼ºæœå™¨äº’ç›¸åŒæ„é€£ç·šï¼Œé€™å€‹éç¨‹ç¨±ä½œä¸‰å‘äº¤æ¡ (Three-Way Handshake)ï¼Œæ­¥é©Ÿå¦‚ä¸‹ï¼š\n\n1. Client å° Server èªªï¼šHello\n2. Server å° Client èªªï¼šæˆ‘è½åˆ°ä½ èªª Hello\n3. Client å° Server èªªï¼šæˆ‘è½åˆ° -- ä½ èªªä½ è½åˆ°æˆ‘èªª Helloï¼Œæˆ‘å€‘ç¾åœ¨å¯ä»¥æºé€šäº†ã€‚\n\nå¾ä¸Šé¢çš„æ­¥é©Ÿå°±å¯ä»¥ç™¼ç¾ï¼Œå·²ç¶“è‡³å°‘è€—è²»äº†[ä¸€å€‹å…‰é€Ÿçš„æ™‚é–“](#å…‰é€Ÿæè€—)ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œä¼ºæœå™¨æ„ˆé è¿‘ç”¨æˆ¶ï¼Œç¶²é€Ÿå°±æ„ˆå¿«ã€‚é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼ Cloudflare åœ¨ä¸–ç•Œå„åœ°å»£è¨­ä¼ºæœå™¨ã€‚\n\n### TLS/SSL\n\næœ‰äº† TCP æˆ‘å€‘å°±å¯ä»¥å®‰å…¨çš„é€£ç·šäº†å—ï¼Ÿç•¶ç„¶ä¸æ˜¯ï¼ŒTCP ä¸€é»ä¹Ÿä¸å®‰å…¨ï¼Œç¾åœ¨çš„ç¶²è·¯é€£ç·šå¹¾ä¹éƒ½æ˜¯é€é TLS (æˆ–ç¨±ä½œ SSL) åŠ å¯†é€£ç·šï¼Œæ‰€ä»¥ TCP é€£ç·šå¾Œï¼Œä¸‹ä¸€æ­¥æ˜¯å»ºç«‹å®‰å…¨çš„åŠ å¯†é€£ç·šã€‚\n\nTLS æ˜¯ä¸€å€‹éå¸¸è¤‡é›œçš„åŠ å¯†å”å®šï¼Œæœƒç‰½æ¶‰åˆ°ä¸‹é¢çš„è¨­å‚™ï¼šç¶²è·¯ç€è¦½å™¨ã€å»ºç«‹é‘°åŒ™çš„ä¼ºæœå™¨ï¼Œè€Œä¸”é‚„è¦æœ‰ä¸€å€‹å¯ä»¥è­‰æ˜ä»–çš„èº«åˆ†çš„ä¼ºæœå™¨ï¼Œå› ç‚ºä¸æœƒæƒ³è¦å’ŒéŠ€è¡Œå»ºç«‹å®‰å…¨é€£ç·šï¼Œä½†ä½ æ ¹æœ¬ä¸ç¢ºå®šä»–æ˜¯ä¸æ˜¯ä½ çš„éŠ€è¡Œã€‚\n\nä¸Šé¢çš„æ­¥é©Ÿä¹Ÿæœƒéœ€è¦å¥½å¹¾æ¬¡[å…‰é€Ÿæè€—](#å…‰é€Ÿæè€—)ï¼Œæ‰€ä»¥è®“ä¼ºæœå™¨æ„ˆé è¿‘ç”¨æˆ¶ç«¯æ„ˆå¥½ã€‚å¦å¤–ï¼Œä¹Ÿè¦ç›¡é‡ä½¿ç”¨æœ€æ–°çš„ TLS æ¨™æº– (ç¾åœ¨æ˜¯ TLS 1.3)ã€‚\n\n## å¾Œè¨˜\n\næˆ‘è¦ºå¾—é€™ç¯‡æ–‡ç« æœ€æœ‰è¶£çš„çš„éƒ¨åˆ†å°±æ˜¯ä¸€ç›´åœ¨è¨è«–å…‰é€Ÿå°ç¶²è·¯é€£ç·šçš„å½±éŸ¿ï¼Œä»¥å¾€æˆ‘éƒ½è¦ºå¾—å…‰é€Ÿå¾ˆå¿«ï¼Œä½†å…‰å°±ç®—å¾ˆå¿«ï¼Œå…‰ä¹Ÿæ˜¯è¦è·‘å¾ˆé•·ä¸€æ®µè·é›¢ï¼Œé€™æ¨£è€—æä¾†å›å€‹å¹¾æ¬¡å°±å·²ç¶“å°ç¶²è·¯é€£ç·šç”¢ç”Ÿæ¥µå¤§çš„å½±éŸ¿äº†ï¼Œè€Œä¸”æ›´ä½•æ³ä¸€å€‹é€£ç·šå°±ä¸€å®šæœƒéœ€è¦ä¾†å›æºé€šå¥½å¹¾æ¬¡ã€‚é€™ç¯‡æ–‡ç« å¾Œé¢é‚„æœ‰è »å¤šå…§å®¹ï¼Œä½†æˆ‘è¦ºå¾—æ²’æœ‰é‚£éº¼é‡è¦å°±æ‡¶å¾—å¯«äº†ï¼Œæœ‰èˆˆè¶£çš„è©±å¯ä»¥è‡ªå·±ç¹¼çºŒå¾€ä¸‹çœ‹ã€‚\n\n## Reference\n\n- [Welcome to Speed Week and a Waitless Internet](https://blog.cloudflare.com/fastest-internet/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Web/Cloudflare Speed Week.md","excerpt":"ä¸Šå€‹æœˆçœ‹åˆ° Cloudflare ç™¼å¸ƒäº†ä¸€é—œæ–¼é€Ÿåº¦é€±çš„æ–‡ç« ï¼Œé›–ç„¶çœ‹èµ·ä¾†åƒæ˜¯ Cloudflare å»£å‘Šè‡ªå·±çš„ç”¢å“ç”¨çš„ï¼Œæˆ‘ç´°è®€å¾Œæ‰ç™¼ç¾ï¼Œä»–è©³ç´°äº†èªªæ˜äº†ç¾åœ¨åœ¨ä¸Šç¶²æ™‚ç‚ºä½•æœƒæœ‰çš„ç¶²é å¯ä»¥å¾ˆå¿«ï¼Œæœ‰çš„ç¶²é å»æ…¢çš„è·Ÿçƒé¾œä¸€æ¨£ï¼Œè©³ç´°èªªæ˜ç¶²è·¯æœƒé‡åˆ°çš„ä¸€äº›å›°å¢ƒå’ŒåŸç† (å–®ç„¶è§£æ³•å°±æ˜¯ç”¨ä»–å€‘å®¶çš„ç”¢å“)ï¼Œåœ¨æŠ€è¡“æ–¹é¢å€¼å¾—ä¸€è®€ï¼Œæˆ‘å°±ç¨å¾®çµ±æ•´ä¸€ä¸‹ã€‚ No one likes to wait. Internet impatiencâ€¦","frontmatter":{"title":"Cloudflare Speed Week","date":"2021-10-05T16:10:58.000Z","draft":false,"tags":["cloudflare","web","internet","tcp"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be2106f3-0557-4e94-803a-9dda63550300/public","description":"ä¸Šå€‹æœˆçœ‹åˆ° Cloudflare ç™¼å¸ƒäº†ä¸€é—œæ–¼é€Ÿåº¦é€±çš„æ–‡ç« ï¼Œé›–ç„¶çœ‹èµ·ä¾†åƒæ˜¯ Cloudflare å»£å‘Šè‡ªå·±çš„ç”¢å“ç”¨çš„ï¼Œæˆ‘ç´°è®€å¾Œæ‰ç™¼ç¾ï¼Œä»–è©³ç´°äº†èªªæ˜äº†ç¾åœ¨åœ¨ä¸Šç¶²æ™‚ç‚ºä½•æœƒæœ‰çš„ç¶²é å¯ä»¥å¾ˆå¿«ï¼Œæœ‰çš„ç¶²é å»æ…¢çš„è·Ÿçƒé¾œä¸€æ¨£ï¼Œè©³ç´°èªªæ˜ç¶²è·¯æœƒé‡åˆ°çš„ä¸€äº›å›°å¢ƒå’ŒåŸç† (å–®ç„¶è§£æ³•å°±æ˜¯ç”¨ä»–å€‘å®¶çš„ç”¢å“)ï¼Œåœ¨æŠ€è¡“æ–¹é¢å€¼å¾—ä¸€è®€ï¼Œæˆ‘å°±ç¨å¾®çµ±æ•´ä¸€ä¸‹ã€‚"}}},{"node":{"id":"829e849f-13bc-5b82-8699-88b701b8f0e3","html":"<p>Kotlin åœ¨éåŒæ­¥è™•ç†ä¸Šæœ‰æ–°çš„æ–¹æ³•ï¼Œå”ç¨‹ <code class=\"language-text\">Coroutine</code>ã€‚<code class=\"language-text\">Coroutine</code> ä¸æœƒåƒ <code class=\"language-text\">Thread</code> æœƒè€—è²»å¤§é‡çš„è³‡æºï¼Œèƒ½åœ¨åŸæœ¬çš„<code class=\"language-text\">ç·šç¨‹</code>ä¸Šå‰µå»ºæ¥µç‚ºè¼•é‡çš„<code class=\"language-text\">å”ç¨‹</code>ï¼Œä¸”è¼ƒä¸æœƒç™¼ç”Ÿè¨˜æ†¶é«”æ´©æ¼çš„æƒ…æ³ã€‚</p>\n<!--more-->\n<h2>å°å…¥ Coroutine</h2>\n<p>åœ¨ <code class=\"language-text\">build.gradle</code> ä¸­æ·»åŠ ä¾è³´é …</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">dependencies <span class=\"token punctuation\">{</span>\n    implementation <span class=\"token string\">'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è‹¥è¦åœ¨ <code class=\"language-text\">Android</code> ä¸­ä½¿ç”¨éœ€è¦å†æ·»åŠ  <code class=\"language-text\">Android</code> ä¾è³´</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">implementation <span class=\"token string\">'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.2'</span></code></pre></div>\n<h2>ç¬¬ä¸€å€‹ Coroutine</h2>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> kotlinx<span class=\"token punctuation\">.</span>coroutines<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    GlobalScope<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//åœ¨å¾Œå°å•Ÿå‹•ä¸€å€‹æ–°çš„ç¸£å”ç¨‹</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//éé˜»å¡å¼çš„ç­‰å¾… 1 ç§’é˜</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"World!\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello,\"</span></span><span class=\"token punctuation\">)</span>\n    Thread<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000L</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// é˜»å¡ä¸»ç·šç¨‹å…©ç§’ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¸Šé¢çš„ç¨‹å¼ç¢¼è¼¸å‡ºçµæœï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">Hellow<span class=\"token punctuation\">,</span>\nWorld</code></pre></div>\n<p>åŸºæœ¬ä¸Š <code class=\"language-text\">Coroutine</code> å°±æ˜¯è¼•é‡çš„å”ç¨‹</p>\n<p>ä¹Ÿå¯ä»¥åˆ†åˆ¥å°‡ <code class=\"language-text\">GlobalScope.launch{...}</code> å’Œ <code class=\"language-text\">delay(...)</code> æ›¿æ›æˆ<code class=\"language-text\">thread { ... }</code> å’Œ <code class=\"language-text\">Thread.Sleap(...)</code>ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„çµæœï¼Œå¯ä»¥å˜—è©¦ä¸€ä¸‹ã€‚</p>\n<p>å¦‚æœåªå°‡ <code class=\"language-text\">GlobalScope.launch{...}</code> æ›¿æ›æˆ <code class=\"language-text\">thread{...}</code> ä½ æœƒå¾—åˆ°ä»¥ä¸‹éŒ¯èª¤ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">Error: Kotlin: Suspend functions are only allowed to be called from a coroutine or another <span class=\"token function\">suspend</span> <span class=\"token keyword\">function</span></code></pre></div>\n<p>å› ç‚º <code class=\"language-text\">delay()</code> æ˜¯ä¸€å€‹ç‰¹æ®Šçš„ <code class=\"language-text\">suspend function</code> (æœ‰äººè­¯ä½œ <code class=\"language-text\">æ›èµ·å‡½æ•¸</code>)ï¼Œä»–ä¸æœƒé˜»å¡ç·šç¨‹ï¼Œä½†æ˜¯æœƒ <code class=\"language-text\">suspend</code> å”ç¨‹ï¼Œè€Œä¸”åªèƒ½åœ¨å”ç¨‹ä¸­ä½¿ç”¨ã€‚</p>\n<h2>æ©‹æ¥é˜»å¡å’Œéé˜»å¡çš„ä¸–ç•Œ</h2>\n<p>ä¸Šé¢çš„ç¯„ä¾‹ä¸­åŒæ™‚ä½¿ç”¨äº†éé˜»å¡å¼çš„ <code class=\"language-text\">delay()</code> å’Œé˜»å¡å¼çš„ <code class=\"language-text\">Thread.sleap()</code>ï¼Œé€™æ¨£å¾ˆå®¹æ˜“è®“æˆ‘å€‘æ··æ·†å“ªå€‹æœƒé˜»å¡ç·šç¨‹ã€‚ä¸‹é¢æˆ‘å€‘ä½¿ç”¨ <code class=\"language-text\">runblocking{...}</code> ä¾†é˜»å¡ç·šç¨‹</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> kotlinx<span class=\"token punctuation\">.</span>coroutines<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    GlobalScope<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// åœ¨å¾Œå°å•Ÿå‹•ä¸€å€‹æ–°çš„å”ç¨‹</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"World!\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello,\"</span></span><span class=\"token punctuation\">)</span>\n    runBlocking <span class=\"token punctuation\">{</span>     <span class=\"token comment\">// é€™å€‹è¡¨é”å¼æœƒé˜»å¡ä¸»ç·šç¨‹</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000L</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// å»¶é²å…©ç§’ä¾†ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>çµæœåŸºæœ¬ä¸Šæ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯éƒ½æ˜¯ä½¿ç”¨äº†éçµ„å¡å¼çš„ <code class=\"language-text\">delay()</code>ã€‚èª¿ç”¨äº† <code class=\"language-text\">runblocking{...}</code> çš„ä¸»ç·šç¨‹æœƒè¢«é˜»å¡ç›´åˆ° <code class=\"language-text\">runblocking{...}</code> å…§çš„å”ç¨‹åŸ·è¡Œå®Œç•¢ã€‚</p>\n<p>ä¸‹é¢ç”¨ä¸€å€‹æ›´åˆä¹æ…£ç”¨æ³•çš„æ–¹æ³•åœ¨å¯«ä¸€æ¬¡ï¼Œç”¨ <code class=\"language-text\">runblocking{...}</code> ä¾†åŒ…è£ <code class=\"language-text\">main</code> æ–¹æ³•ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> kotlinx<span class=\"token punctuation\">.</span>coroutines<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> runBlocking<span class=\"token operator\">&lt;</span>Unit<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// é–‹å§‹åŸ·è¡Œä¸»å”ç¨‹</span>\n    GlobalScope<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// åœ¨å¾Œå°å•“å‹•ä¸€å€‹å”ç¨‹ä¸¦ç¹¼çºŒåŸ·è¡Œ</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"World!\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello,\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000L</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// å»¶é² 2 ç§’ä¾†ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é€™è£¡çš„ <code class=\"language-text\">runBlocking {...}</code> ç”¨ä¾†å•Ÿå‹•ä¸»ç·šç¨‹ã€‚æˆ‘å€‘é¡¯å¼æŒ‡å®šäº†å…¶è¿”å›é¡å‹ <code class=\"language-text\">Unit</code>ï¼Œå› ç‚ºåœ¨ Kotlin ä¸­ <code class=\"language-text\">main</code> æ–¹æ³•å¿…é ˆå›å‚³ <code class=\"language-text\">Unit</code>ã€‚</p>\n<h2>ç­‰å¾…ä¸€å€‹ä½œæ¥­å®Œæˆ</h2>\n<p>å»¶é²ä¸€æ®µæ™‚é–“ä¾†ç¢ºä¿å”ç¨‹çš„é‹è¡Œä¸¦ä¸æ˜¯ä¸€å€‹å¥½è¾¦æ³•åˆ©ç”¨ <code class=\"language-text\">job.join()</code> ä¾†ç¢ºä¿å·¥ä½œåŸ·è¡ŒçµæŸã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> job<span class=\"token operator\">:</span> Job <span class=\"token operator\">=</span> GlobalScope<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"World!\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello,\"</span></span><span class=\"token punctuation\">)</span>\njob<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">launch</code> æœƒå›å‚³ä¸€å€‹ <code class=\"language-text\">Job</code> ç‰©ä»¶ï¼Œè€Œ <code class=\"language-text\">job.join()</code> å…¶å¯¦å°±æ˜¯æœƒç­‰å¾… <code class=\"language-text\">job</code> çš„å·¥ä½œå®Œæˆå†ç¹¼çºŒæŒè¡Œã€‚</p>\n<p>æˆ‘å€‘ä¹Ÿå¯ä»¥åˆ©ç”¨ <code class=\"language-text\">job.cancel()</code> å–æ¶ˆå”ç¨‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> job<span class=\"token operator\">:</span> Job <span class=\"token operator\">=</span> GlobalScope<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000L</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"World!\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello,\"</span></span><span class=\"token punctuation\">)</span>\njob<span class=\"token punctuation\">.</span><span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ä½†æ˜¯å¦‚æœ <code class=\"language-text\">job</code> å·²ç¶“å®Œæˆå·¥ä½œï¼Œ<code class=\"language-text\">cancel</code> æ˜¯ä¸æœƒç™¼ç”Ÿä»»ä½•äº‹ã€‚</p>\n<h2>åƒè€ƒè³‡æ–™</h2>\n<ul>\n<li><a href=\"https://kotlinlang.org/docs/reference/coroutines/basics.html\">Coroutine Basics</a></li>\n</ul>","rawMarkdownBody":"\nKotlin åœ¨éåŒæ­¥è™•ç†ä¸Šæœ‰æ–°çš„æ–¹æ³•ï¼Œå”ç¨‹ `Coroutine`ã€‚`Coroutine` ä¸æœƒåƒ `Thread` æœƒè€—è²»å¤§é‡çš„è³‡æºï¼Œèƒ½åœ¨åŸæœ¬çš„`ç·šç¨‹`ä¸Šå‰µå»ºæ¥µç‚ºè¼•é‡çš„`å”ç¨‹`ï¼Œä¸”è¼ƒä¸æœƒç™¼ç”Ÿè¨˜æ†¶é«”æ´©æ¼çš„æƒ…æ³ã€‚\n\n<!--more-->\n\n## å°å…¥ Coroutine\n\nåœ¨ `build.gradle` ä¸­æ·»åŠ ä¾è³´é …\n\n```groovy\ndependencies {\n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.2'\n}\n```\n\nè‹¥è¦åœ¨ `Android` ä¸­ä½¿ç”¨éœ€è¦å†æ·»åŠ  `Android` ä¾è³´\n\n```groovy\nimplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.2'\n```\n\n## ç¬¬ä¸€å€‹ Coroutine\n\n```kotlin\nimport kotlinx.coroutines.*\n\nfun main() {\n    GlobalScope.launch { //åœ¨å¾Œå°å•Ÿå‹•ä¸€å€‹æ–°çš„ç¸£å”ç¨‹\n        delay(1000L) //éé˜»å¡å¼çš„ç­‰å¾… 1 ç§’é˜\n        println(\"World!\")\n    }\n    println(\"Hello,\")\n    Thread.sleep(2000L) // é˜»å¡ä¸»ç·šç¨‹å…©ç§’ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»\n}\n```\n\nä¸Šé¢çš„ç¨‹å¼ç¢¼è¼¸å‡ºçµæœï¼š\n\n```kotlin\nHellow,\nWorld\n```\n\nåŸºæœ¬ä¸Š `Coroutine` å°±æ˜¯è¼•é‡çš„å”ç¨‹\n\nä¹Ÿå¯ä»¥åˆ†åˆ¥å°‡ `GlobalScope.launch{...}` å’Œ `delay(...)` æ›¿æ›æˆ`thread { ... }` å’Œ `Thread.Sleap(...)`ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„çµæœï¼Œå¯ä»¥å˜—è©¦ä¸€ä¸‹ã€‚\n\nå¦‚æœåªå°‡ `GlobalScope.launch{...}` æ›¿æ›æˆ `thread{...}` ä½ æœƒå¾—åˆ°ä»¥ä¸‹éŒ¯èª¤ï¼š\n\n```shell\nError: Kotlin: Suspend functions are only allowed to be called from a coroutine or another suspend function\n```\n\nå› ç‚º `delay()` æ˜¯ä¸€å€‹ç‰¹æ®Šçš„ `suspend function` (æœ‰äººè­¯ä½œ `æ›èµ·å‡½æ•¸`)ï¼Œä»–ä¸æœƒé˜»å¡ç·šç¨‹ï¼Œä½†æ˜¯æœƒ `suspend` å”ç¨‹ï¼Œè€Œä¸”åªèƒ½åœ¨å”ç¨‹ä¸­ä½¿ç”¨ã€‚\n\n## æ©‹æ¥é˜»å¡å’Œéé˜»å¡çš„ä¸–ç•Œ\n\nä¸Šé¢çš„ç¯„ä¾‹ä¸­åŒæ™‚ä½¿ç”¨äº†éé˜»å¡å¼çš„ `delay()` å’Œé˜»å¡å¼çš„ `Thread.sleap()`ï¼Œé€™æ¨£å¾ˆå®¹æ˜“è®“æˆ‘å€‘æ··æ·†å“ªå€‹æœƒé˜»å¡ç·šç¨‹ã€‚ä¸‹é¢æˆ‘å€‘ä½¿ç”¨ `runblocking{...}` ä¾†é˜»å¡ç·šç¨‹\n\n```kotlin\nimport kotlinx.coroutines.*\n\nfun main() {\n    GlobalScope.launch { // åœ¨å¾Œå°å•Ÿå‹•ä¸€å€‹æ–°çš„å”ç¨‹\n        delay(1000L)\n        println(\"World!\")\n    }\n    println(\"Hello,\")\n    runBlocking {     // é€™å€‹è¡¨é”å¼æœƒé˜»å¡ä¸»ç·šç¨‹\n        delay(2000L)  // å»¶é²å…©ç§’ä¾†ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»\n    }\n}\n```\n\nçµæœåŸºæœ¬ä¸Šæ˜¯ç›¸ä¼¼çš„ï¼Œåªæ˜¯éƒ½æ˜¯ä½¿ç”¨äº†éçµ„å¡å¼çš„ `delay()`ã€‚èª¿ç”¨äº† `runblocking{...}` çš„ä¸»ç·šç¨‹æœƒè¢«é˜»å¡ç›´åˆ° `runblocking{...}` å…§çš„å”ç¨‹åŸ·è¡Œå®Œç•¢ã€‚\n\nä¸‹é¢ç”¨ä¸€å€‹æ›´åˆä¹æ…£ç”¨æ³•çš„æ–¹æ³•åœ¨å¯«ä¸€æ¬¡ï¼Œç”¨ `runblocking{...}` ä¾†åŒ…è£ `main` æ–¹æ³•ï¼š\n\n```kotlin\nimport kotlinx.coroutines.*\n\nfun main() = runBlocking<Unit> { // é–‹å§‹åŸ·è¡Œä¸»å”ç¨‹\n    GlobalScope.launch { // åœ¨å¾Œå°å•“å‹•ä¸€å€‹å”ç¨‹ä¸¦ç¹¼çºŒåŸ·è¡Œ\n        delay(1000L)\n        println(\"World!\")\n    }\n    println(\"Hello,\")\n    delay(2000L)  // å»¶é² 2 ç§’ä¾†ç¢ºä¿ä¸»ç·šç¨‹å­˜æ´»\n}\n```\n\né€™è£¡çš„ `runBlocking {...}` ç”¨ä¾†å•Ÿå‹•ä¸»ç·šç¨‹ã€‚æˆ‘å€‘é¡¯å¼æŒ‡å®šäº†å…¶è¿”å›é¡å‹ `Unit`ï¼Œå› ç‚ºåœ¨ Kotlin ä¸­ `main` æ–¹æ³•å¿…é ˆå›å‚³ `Unit`ã€‚\n\n## ç­‰å¾…ä¸€å€‹ä½œæ¥­å®Œæˆ\n\nå»¶é²ä¸€æ®µæ™‚é–“ä¾†ç¢ºä¿å”ç¨‹çš„é‹è¡Œä¸¦ä¸æ˜¯ä¸€å€‹å¥½è¾¦æ³•åˆ©ç”¨ `job.join()` ä¾†ç¢ºä¿å·¥ä½œåŸ·è¡ŒçµæŸã€‚\n\n```kotlin\nval job: Job = GlobalScope.launch {\n    delay(1000L)\n    println(\"World!\")\n}\nprintln(\"Hello,\")\njob.join()\n```\n\n`launch` æœƒå›å‚³ä¸€å€‹ `Job` ç‰©ä»¶ï¼Œè€Œ `job.join()` å…¶å¯¦å°±æ˜¯æœƒç­‰å¾… `job` çš„å·¥ä½œå®Œæˆå†ç¹¼çºŒæŒè¡Œã€‚\n\næˆ‘å€‘ä¹Ÿå¯ä»¥åˆ©ç”¨ `job.cancel()` å–æ¶ˆå”ç¨‹ï¼š\n\n```kotlin\nval job: Job = GlobalScope.launch {\n    delay(1000L)\n    println(\"World!\")\n}\nprintln(\"Hello,\")\njob.cancel()\n```\n\nä½†æ˜¯å¦‚æœ `job` å·²ç¶“å®Œæˆå·¥ä½œï¼Œ`cancel` æ˜¯ä¸æœƒç™¼ç”Ÿä»»ä½•äº‹ã€‚\n\n## åƒè€ƒè³‡æ–™\n\n- [Coroutine Basics](https://kotlinlang.org/docs/reference/coroutines/basics.html)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Kotlin/kotlin coroutine.md","excerpt":"Kotlin åœ¨éåŒæ­¥è™•ç†ä¸Šæœ‰æ–°çš„æ–¹æ³•ï¼Œå”ç¨‹ ã€‚ ä¸æœƒåƒ  æœƒè€—è²»å¤§é‡çš„è³‡æºï¼Œèƒ½åœ¨åŸæœ¬çš„ä¸Šå‰µå»ºæ¥µç‚ºè¼•é‡çš„ï¼Œä¸”è¼ƒä¸æœƒç™¼ç”Ÿè¨˜æ†¶é«”æ´©æ¼çš„æƒ…æ³ã€‚ å°å…¥ Coroutine åœ¨  ä¸­æ·»åŠ ä¾è³´é … è‹¥è¦åœ¨  ä¸­ä½¿ç”¨éœ€è¦å†æ·»åŠ   ä¾è³´ ç¬¬ä¸€å€‹ Coroutine ä¸Šé¢çš„ç¨‹å¼ç¢¼è¼¸å‡ºçµæœï¼š åŸºæœ¬ä¸Š  å°±æ˜¯è¼•é‡çš„å”ç¨‹ ä¹Ÿå¯ä»¥åˆ†åˆ¥å°‡  å’Œ  æ›¿æ›æˆ å’Œ ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„çµæœï¼Œå¯ä»¥å˜—è©¦ä¸€ä¸‹ã€‚ å¦‚æœåªå°‡  æ›¿æ›æˆ  ä½ æœƒâ€¦","frontmatter":{"title":"Kotlin Coroutine","date":"2021-09-19T07:26:56.000Z","draft":false,"tags":["kotlin","coroutine"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6f11a63e-3923-4ce5-3b6e-d06243815300/public","description":"Kotlin åœ¨éåŒæ­¥è™•ç†ä¸Šæœ‰æ–°çš„æ–¹æ³•ï¼Œå”ç¨‹ Coroutineï¼ŒCoroutine ä¸æœƒåƒ Thread æœƒè€—è²»å¤§é‡çš„è³‡æºï¼Œèƒ½åœ¨åŸæœ¬çš„ç·šç¨‹ä¸Šå‰µå»ºæ¥µç‚ºè¼•é‡çš„å”ç¨‹ï¼Œä¸”è¼ƒä¸æœƒç™¼ç”Ÿè¨˜æ†¶é«”æ´©æ¼çš„æƒ…æ³ã€‚"}}},{"node":{"id":"c18c63aa-34a1-5207-8f88-2ab72f9491df","html":"<p>è¦åœ¨ä¸€å€‹ Git å°ˆæ¡ˆä¸­æœ‰å­å°ˆæ¡ˆ (æˆ‘éƒ½å«ä»– git in git)ï¼Œæœ‰å…©å€‹è¾¦æ³•ï¼Œä¸€å€‹æ˜¯ç›´æ¥ clone åˆ°ç›®éŒ„ä¸‹ï¼Œå¦ä¸€å€‹å°±æ˜¯ä½¿ç”¨ submoduleã€‚å…©è€…çš„ä¸åŒæ˜¯å‰è€…çš„å­å°ˆæ¡ˆæœƒåœ¨æ¯å°ˆæ¡ˆä¸­ä½”æ‰æ‰€æœ‰çš„ç©ºé–“ï¼Œè€Œå¾Œè€…åªæœƒç´€éŒ„ submodule çš„è·¯å¾‘å’Œ commit ç‰ˆæœ¬ã€‚</p>\n<!--more-->\n<h2>Add Submodule</h2>\n<p>è¦å°‡å°ˆæ¡ˆæ–°å¢åˆ°ç¾æœ‰çš„ç›®éŒ„ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code class=\"language-text\">git submodule add</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> submodule <span class=\"token function\">add</span> <span class=\"token operator\">&lt;</span>repo_url<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>folder<span class=\"token operator\">></span></code></pre></div>\n<p>åŸ·è¡Œå¾Œï¼Œå¯ä»¥çœ‹åˆ° git æœƒè‡ªå‹•å¹«ä½ æŠŠ submodule clone åˆ°æŒ‡å®šçš„ç›®éŒ„ä¸­ï¼Œä¸¦å¤šäº†ä¸€å€‹æª”æ¡ˆ <code class=\"language-text\">.gitmodules</code>ï¼Œé€™å€‹æª”æ¡ˆå°±æ˜¯ä¸Šé¢èªªåˆ°çš„ Submodule åªç´€éŒ„ commit ç‰ˆæœ¬ï¼Œå’Œ Submodule URL çš„æª”æ¡ˆã€‚</p>\n<p>add submodule å¾Œï¼Œé‚„æ˜¯è¦ commitï¼Œå› ç‚º Submodule ä¹Ÿå°±åªæ˜¯ç´€éŒ„è¦ç”¨å­å°ˆæ¡ˆçš„å“ªä¸€å€‹ commit ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç¢ºä¿å¤§å®¶éƒ½æ˜¯ä½¿ç”¨åˆ°åŒä¸€å€‹ Submodule çš„ç‰ˆæœ¬ã€‚å¯ä»¥è©¦è‘—å°‡å°ˆæ¡ˆ commit and push åˆ° GitHub ä¸Šï¼Œæ‡‰è©²å¯ä»¥çœ‹åˆ° Submodule å°±æ˜¯é€£çµåˆ°å¦å¤–ä¸€å€‹å°ˆæ¡ˆçš„æŸä¸€å€‹ commitï¼Œä¸‹é¢æ˜¯æœ¬ç«™çš„ Hugo ä¸»é¡Œçš„ submoduleï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c4ba8819-787e-4726-fb58-db317f9ed400/public\" alt=\"image\"></p>\n<h2>Clone Submodule</h2>\n<p>åœ¨ Clone å«æœ‰ Submodule çš„å°ˆæ¡ˆæ™‚ï¼ŒGit é è¨­æ˜¯ä¸æœƒè‡ªå‹• clone å­å°ˆæ¡ˆçš„ï¼Œéœ€è¦åŠ ä¸Š <code class=\"language-text\">--recursive</code> é€™å€‹åƒæ•¸ï¼Œæ‰æœƒè‡ªå‹•æŠŠ Submodule ä¹Ÿ Clone ä¸‹ä¾†ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone --recursive <span class=\"token operator\">&lt;</span>repo_url<span class=\"token operator\">></span></code></pre></div>\n<p>å¦‚æœ Clone ä¸‹ä¾†å¾Œæ‰ç™¼ç¾æœ‰ Submoduleï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼è£œæ•‘ï¼ŒæŠŠå­å°ˆæ¡ˆéƒ½ Clone ä¸‹ä¾†ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> submodule init\n<span class=\"token function\">git</span> submodule update --recursive</code></pre></div>","rawMarkdownBody":"\nè¦åœ¨ä¸€å€‹ Git å°ˆæ¡ˆä¸­æœ‰å­å°ˆæ¡ˆ (æˆ‘éƒ½å«ä»– git in git)ï¼Œæœ‰å…©å€‹è¾¦æ³•ï¼Œä¸€å€‹æ˜¯ç›´æ¥ clone åˆ°ç›®éŒ„ä¸‹ï¼Œå¦ä¸€å€‹å°±æ˜¯ä½¿ç”¨ submoduleã€‚å…©è€…çš„ä¸åŒæ˜¯å‰è€…çš„å­å°ˆæ¡ˆæœƒåœ¨æ¯å°ˆæ¡ˆä¸­ä½”æ‰æ‰€æœ‰çš„ç©ºé–“ï¼Œè€Œå¾Œè€…åªæœƒç´€éŒ„ submodule çš„è·¯å¾‘å’Œ commit ç‰ˆæœ¬ã€‚\n\n<!--more-->\n\n## Add Submodule\n\nè¦å°‡å°ˆæ¡ˆæ–°å¢åˆ°ç¾æœ‰çš„ç›®éŒ„ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `git submodule add`ï¼š\n\n```shell\ngit submodule add <repo_url> <folder>\n```\n\nåŸ·è¡Œå¾Œï¼Œå¯ä»¥çœ‹åˆ° git æœƒè‡ªå‹•å¹«ä½ æŠŠ submodule clone åˆ°æŒ‡å®šçš„ç›®éŒ„ä¸­ï¼Œä¸¦å¤šäº†ä¸€å€‹æª”æ¡ˆ `.gitmodules`ï¼Œé€™å€‹æª”æ¡ˆå°±æ˜¯ä¸Šé¢èªªåˆ°çš„ Submodule åªç´€éŒ„ commit ç‰ˆæœ¬ï¼Œå’Œ Submodule URL çš„æª”æ¡ˆã€‚\n\nadd submodule å¾Œï¼Œé‚„æ˜¯è¦ commitï¼Œå› ç‚º Submodule ä¹Ÿå°±åªæ˜¯ç´€éŒ„è¦ç”¨å­å°ˆæ¡ˆçš„å“ªä¸€å€‹ commit ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç¢ºä¿å¤§å®¶éƒ½æ˜¯ä½¿ç”¨åˆ°åŒä¸€å€‹ Submodule çš„ç‰ˆæœ¬ã€‚å¯ä»¥è©¦è‘—å°‡å°ˆæ¡ˆ commit and push åˆ° GitHub ä¸Šï¼Œæ‡‰è©²å¯ä»¥çœ‹åˆ° Submodule å°±æ˜¯é€£çµåˆ°å¦å¤–ä¸€å€‹å°ˆæ¡ˆçš„æŸä¸€å€‹ commitï¼Œä¸‹é¢æ˜¯æœ¬ç«™çš„ Hugo ä¸»é¡Œçš„ submoduleï¼š\n\n![image](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c4ba8819-787e-4726-fb58-db317f9ed400/public)\n\n## Clone Submodule\n\nåœ¨ Clone å«æœ‰ Submodule çš„å°ˆæ¡ˆæ™‚ï¼ŒGit é è¨­æ˜¯ä¸æœƒè‡ªå‹• clone å­å°ˆæ¡ˆçš„ï¼Œéœ€è¦åŠ ä¸Š `--recursive` é€™å€‹åƒæ•¸ï¼Œæ‰æœƒè‡ªå‹•æŠŠ Submodule ä¹Ÿ Clone ä¸‹ä¾†ã€‚\n\n```shell\ngit clone --recursive <repo_url>\n```\n\nå¦‚æœ Clone ä¸‹ä¾†å¾Œæ‰ç™¼ç¾æœ‰ Submoduleï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼è£œæ•‘ï¼ŒæŠŠå­å°ˆæ¡ˆéƒ½ Clone ä¸‹ä¾†ï¼š\n\n```shell\ngit submodule init\ngit submodule update --recursive\n```\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Git/git submodule.md","excerpt":"è¦åœ¨ä¸€å€‹ Git å°ˆæ¡ˆä¸­æœ‰å­å°ˆæ¡ˆ (æˆ‘éƒ½å«ä»– git in git)ï¼Œæœ‰å…©å€‹è¾¦æ³•ï¼Œä¸€å€‹æ˜¯ç›´æ¥ clone åˆ°ç›®éŒ„ä¸‹ï¼Œå¦ä¸€å€‹å°±æ˜¯ä½¿ç”¨ submoduleã€‚å…©è€…çš„ä¸åŒæ˜¯å‰è€…çš„å­å°ˆæ¡ˆæœƒåœ¨æ¯å°ˆæ¡ˆä¸­ä½”æ‰æ‰€æœ‰çš„ç©ºé–“ï¼Œè€Œå¾Œè€…åªæœƒç´€éŒ„ submodule çš„è·¯å¾‘å’Œ commit ç‰ˆæœ¬ã€‚ Add Submodule è¦å°‡å°ˆæ¡ˆæ–°å¢åˆ°ç¾æœ‰çš„ç›®éŒ„ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ ï¼š åŸ·è¡Œå¾Œï¼Œå¯ä»¥çœ‹åˆ° git æœƒè‡ªå‹•å¹«ä½ æŠŠ submodulâ€¦","frontmatter":{"title":"Git Submodule","date":"2021-09-14T05:11:27.000Z","draft":false,"tags":["git","submodule","linux"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/6c29c4ca-3fc9-49b2-3109-0876c7492400/public","description":"è¦åœ¨ä¸€å€‹ Git å°ˆæ¡ˆä¸­æœ‰å­å°ˆæ¡ˆ (æˆ‘ç¨±ç‚º git in git)ï¼Œæœ‰å…©å€‹è¾¦æ³•ï¼Œä¸€å€‹æ˜¯ç›´æ¥ clone åˆ°ç›®éŒ„ä¸‹ï¼Œå¦ä¸€å€‹å°±æ˜¯ä½¿ç”¨ submoduleã€‚å…©è€…çš„ä¸åŒæ˜¯å‰è€…çš„å­å°ˆæ¡ˆæœƒåœ¨æ¯å°ˆæ¡ˆä¸­ä½”æ‰æ‰€æœ‰çš„ç©ºé–“ï¼Œè€Œå¾Œè€…åªæœƒç´€éŒ„"}}},{"node":{"id":"a9e11a01-abab-5de8-b3ae-abccff685c14","html":"<p>åœ¨æœ¬æ©Ÿèˆ‡ GitHub æºé€šæœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯é€é sshï¼Œæœ€å¤§çš„å¥½è™•å°±æ˜¯ä¸éœ€è¦è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ä¾†ç¢ºèªèº«åˆ†ï¼Œä¹Ÿå¯ä»¥äº«å—åˆ° ssh åŠ å¯†æ‰€æä¾›çš„å®‰å…¨æ€§ã€‚</p>\n<!--more-->\n<h2>ssh-keygen</h2>\n<p>è¦ä½¿ç”¨ ssh éå°ç¨±åŠ å¯†ï¼Œå°±æœƒéœ€è¦å…¬é‘°èˆ‡ç§é‘°ï¼Œå‰µå»º ssh key çš„æ–¹æ³•å°±æ˜¯ <code class=\"language-text\">ssh-keygen</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">user@66c0bf85e710:~$ ssh-keygen\nGenerating public/private rsa key pair.\nEnter <span class=\"token function\">file</span> <span class=\"token keyword\">in</span> <span class=\"token function\">which</span> to save the key <span class=\"token punctuation\">(</span>/home/user/.ssh/id_rsa<span class=\"token punctuation\">)</span>:\nCreated directory <span class=\"token string\">'/home/user/.ssh'</span><span class=\"token builtin class-name\">.</span>\nEnter passphrase <span class=\"token punctuation\">(</span>empty <span class=\"token keyword\">for</span> no passphrase<span class=\"token punctuation\">)</span>:\nEnter same passphrase again:\nYour identification has been saved <span class=\"token keyword\">in</span> /home/user/.ssh/id_rsa\nYour public key has been saved <span class=\"token keyword\">in</span> /home/user/.ssh/id_rsa.pub\nThe key fingerprint is:\nSHA256:+UUuTN0YLUi2eh7HJoJvuy0whUuLvXIQejjPPTZ9gw4 user@66c0bf85e710\nThe key's randomart image is:\n+---<span class=\"token punctuation\">[</span>RSA <span class=\"token number\">3072</span><span class=\"token punctuation\">]</span>----+\n<span class=\"token operator\">|</span>         .o<span class=\"token punctuation\">..</span>.   <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>         <span class=\"token punctuation\">..</span>o.+.  <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>       <span class=\"token builtin class-name\">.</span>  o +<span class=\"token punctuation\">..</span>  <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token builtin class-name\">.</span> o<span class=\"token punctuation\">..</span><span class=\"token operator\">=</span> +     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>   o <span class=\"token operator\">=</span>.+S * *    <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  + + *. <span class=\"token operator\">=</span> B     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">=</span> <span class=\"token assign-left variable\">oE</span><span class=\"token operator\">=</span>o.o      <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    + Bo+oo      <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>     + +++<span class=\"token punctuation\">..</span>     <span class=\"token operator\">|</span>\n+----<span class=\"token punctuation\">[</span>SHA256<span class=\"token punctuation\">]</span>-----+</code></pre></div>\n<p><code class=\"language-text\">ssh-keygen</code> æœƒå•ä¸€äº›å•é¡Œï¼Œæœ€å¿«çš„æ–¹å¼å°±æ˜¯ç›´æ¥ç•™ç™½(ä¿æŒé è¨­)ï¼Œä¸€ç›´æŒ‰ enter å°±å¯ä»¥çœ‹åˆ°å·²ç¶“åœ¨ <code class=\"language-text\">~/.ssh</code> ç”¢ç”Ÿäº†å…©å€‹æª”æ¡ˆï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">user@66c0bf85e710:~$ <span class=\"token function\">ls</span> -l ~/.ssh\ntotal <span class=\"token number\">8</span>\n-rw------- <span class=\"token number\">1</span> user user <span class=\"token number\">2602</span> Sep <span class=\"token number\">12</span> <span class=\"token number\">22</span>:42 id_rsa\n-rw-r--r-- <span class=\"token number\">1</span> user user  <span class=\"token number\">571</span> Sep <span class=\"token number\">12</span> <span class=\"token number\">22</span>:42 id_rsa.pub\nuser@66c0bf85e710:~$</code></pre></div>\n<p><code class=\"language-text\">id_rsa</code> å°±æ˜¯ç§é‘°ï¼Œè€Œå¤šå€‹ pub çµå°¾çš„ <code class=\"language-text\">id_rsa.pub</code> å°±æ˜¯å…¬é‘°ã€‚ç§é‘°è«‹ä¸è¦å‚³çµ¦ä»»ä½•äººï¼Œå…¬é‘°å‰‡æä¾›çµ¦ GitHubã€‚å¯ä»¥ç”¨ cat å°‡å…¬é‘°é¡¯ç¤ºå‡ºä¾†ä¸¦è¤‡è£½ä»–ï¼š</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.714d829xbug0.png\" alt=\"image\"></p>\n<h2>æŠŠå…¬é‘°äº¤çµ¦ GitHub</h2>\n<p>åˆ° GitHub çš„ Settings -> SSH and GPG keys -> New SSH keyï¼š</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.5frveu05dt00.png\" alt=\"image\"></p>\n<p>æŠŠå‰›å‰›è¤‡è£½ä¸‹ä¾†çš„å…¬é‘°è²¼ä¸Šï¼ŒTitle å¯ä»¥è‡ªå·±éš¨ä¾¿è¼¸å…¥æˆ–æ‰“é€™å°é›»è…¦çš„åå­—ï¼š</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.56vkhmb55ps0.png\" alt=\"image\"></p>\n<h2>æ¸¬è©¦é€£ç·š</h2>\n<p>è¼¸å…¥ä¸‹é¢å‘½ä»¤å°±å¯ä»¥çŸ¥é“æœ‰æ²’æœ‰é€£ç·šæˆåŠŸï¼Œå¦‚æœæœ‰çœ‹åˆ°è‡ªå·±çš„ä½¿ç”¨è€…åç¨±ï¼Œå°±ä»£è¡¨å·²ç¶“å®Œæˆ ssh çš„èªè­‰ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">ssh</span> -T git@github.com</code></pre></div>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.5f99gnzo3ps0.png\" alt=\"image\"></p>\n<p>ç¬¬ä¸€æ¬¡é€£ç·šå¯èƒ½æœƒå•è¦ä¸è¦ä¿¡ä»»ï¼Œè¼¸å…¥ <code class=\"language-text\">yes</code> å³å¯ã€‚</p>\n<blockquote>\n<p>å¦‚æœè¦ºå¾—ä¸Šé¢çš„æ–¹æ³•éº»ç…©ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å‰µå»ºä¸€å€‹ç§æœ‰ repoï¼Œç„¶å¾Œè©¦è‘— clone å’Œ pushï¼Œå°±çŸ¥é“æœ‰æ²’æœ‰èªè­‰æˆåŠŸäº†ã€‚</p>\n</blockquote>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/testing-your-ssh-connection\">Testing your SSH connection</a></li>\n</ul>","rawMarkdownBody":"\nåœ¨æœ¬æ©Ÿèˆ‡ GitHub æºé€šæœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯é€é sshï¼Œæœ€å¤§çš„å¥½è™•å°±æ˜¯ä¸éœ€è¦è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ä¾†ç¢ºèªèº«åˆ†ï¼Œä¹Ÿå¯ä»¥äº«å—åˆ° ssh åŠ å¯†æ‰€æä¾›çš„å®‰å…¨æ€§ã€‚\n\n<!--more-->\n\n## ssh-keygen\n\nè¦ä½¿ç”¨ ssh éå°ç¨±åŠ å¯†ï¼Œå°±æœƒéœ€è¦å…¬é‘°èˆ‡ç§é‘°ï¼Œå‰µå»º ssh key çš„æ–¹æ³•å°±æ˜¯ `ssh-keygen`ï¼š\n\n```shell\nuser@66c0bf85e710:~$ ssh-keygen\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/user/.ssh/id_rsa):\nCreated directory '/home/user/.ssh'.\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/user/.ssh/id_rsa\nYour public key has been saved in /home/user/.ssh/id_rsa.pub\nThe key fingerprint is:\nSHA256:+UUuTN0YLUi2eh7HJoJvuy0whUuLvXIQejjPPTZ9gw4 user@66c0bf85e710\nThe key's randomart image is:\n+---[RSA 3072]----+\n|         .o...   |\n|         ..o.+.  |\n|       .  o +..  |\n|    . o..= +     |\n|   o =.+S * *    |\n|  + + *. = B     |\n|   = oE=o.o      |\n|    + Bo+oo      |\n|     + +++..     |\n+----[SHA256]-----+\n```\n\n`ssh-keygen` æœƒå•ä¸€äº›å•é¡Œï¼Œæœ€å¿«çš„æ–¹å¼å°±æ˜¯ç›´æ¥ç•™ç™½(ä¿æŒé è¨­)ï¼Œä¸€ç›´æŒ‰ enter å°±å¯ä»¥çœ‹åˆ°å·²ç¶“åœ¨ `~/.ssh` ç”¢ç”Ÿäº†å…©å€‹æª”æ¡ˆï¼š\n\n```shell\nuser@66c0bf85e710:~$ ls -l ~/.ssh\ntotal 8\n-rw------- 1 user user 2602 Sep 12 22:42 id_rsa\n-rw-r--r-- 1 user user  571 Sep 12 22:42 id_rsa.pub\nuser@66c0bf85e710:~$\n```\n\n`id_rsa` å°±æ˜¯ç§é‘°ï¼Œè€Œå¤šå€‹ pub çµå°¾çš„ `id_rsa.pub` å°±æ˜¯å…¬é‘°ã€‚ç§é‘°è«‹ä¸è¦å‚³çµ¦ä»»ä½•äººï¼Œå…¬é‘°å‰‡æä¾›çµ¦ GitHubã€‚å¯ä»¥ç”¨ cat å°‡å…¬é‘°é¡¯ç¤ºå‡ºä¾†ä¸¦è¤‡è£½ä»–ï¼š\n\n![image](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.714d829xbug0.png)\n\n## æŠŠå…¬é‘°äº¤çµ¦ GitHub\n\nåˆ° GitHub çš„ Settings -> SSH and GPG keys -> New SSH keyï¼š\n\n![image](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.5frveu05dt00.png)\n\næŠŠå‰›å‰›è¤‡è£½ä¸‹ä¾†çš„å…¬é‘°è²¼ä¸Šï¼ŒTitle å¯ä»¥è‡ªå·±éš¨ä¾¿è¼¸å…¥æˆ–æ‰“é€™å°é›»è…¦çš„åå­—ï¼š\n\n![image](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.56vkhmb55ps0.png)\n\n## æ¸¬è©¦é€£ç·š\n\nè¼¸å…¥ä¸‹é¢å‘½ä»¤å°±å¯ä»¥çŸ¥é“æœ‰æ²’æœ‰é€£ç·šæˆåŠŸï¼Œå¦‚æœæœ‰çœ‹åˆ°è‡ªå·±çš„ä½¿ç”¨è€…åç¨±ï¼Œå°±ä»£è¡¨å·²ç¶“å®Œæˆ ssh çš„èªè­‰ï¼š\n\n```shell\nssh -T git@github.com\n```\n\n![image](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210912/image.5f99gnzo3ps0.png)\n\nç¬¬ä¸€æ¬¡é€£ç·šå¯èƒ½æœƒå•è¦ä¸è¦ä¿¡ä»»ï¼Œè¼¸å…¥ `yes` å³å¯ã€‚\n\n> å¦‚æœè¦ºå¾—ä¸Šé¢çš„æ–¹æ³•éº»ç…©ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å‰µå»ºä¸€å€‹ç§æœ‰ repoï¼Œç„¶å¾Œè©¦è‘— clone å’Œ pushï¼Œå°±çŸ¥é“æœ‰æ²’æœ‰èªè­‰æˆåŠŸäº†ã€‚\n\n## Reference\n\n- [Testing your SSH connection](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh/testing-your-ssh-connection)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Git/github ssh.md","excerpt":"åœ¨æœ¬æ©Ÿèˆ‡ GitHub æºé€šæœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯é€é sshï¼Œæœ€å¤§çš„å¥½è™•å°±æ˜¯ä¸éœ€è¦è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ä¾†ç¢ºèªèº«åˆ†ï¼Œä¹Ÿå¯ä»¥äº«å—åˆ° ssh åŠ å¯†æ‰€æä¾›çš„å®‰å…¨æ€§ã€‚ ssh-keygen è¦ä½¿ç”¨ ssh éå°ç¨±åŠ å¯†ï¼Œå°±æœƒéœ€è¦å…¬é‘°èˆ‡ç§é‘°ï¼Œå‰µå»º ssh key çš„æ–¹æ³•å°±æ˜¯ ï¼š  æœƒå•ä¸€äº›å•é¡Œï¼Œæœ€å¿«çš„æ–¹å¼å°±æ˜¯ç›´æ¥ç•™ç™½(ä¿æŒé è¨­)ï¼Œä¸€ç›´æŒ‰ enter å°±å¯ä»¥çœ‹åˆ°å·²ç¶“åœ¨  ç”¢ç”Ÿäº†å…©å€‹æª”æ¡ˆï¼š  å°±æ˜¯ç§é‘°ï¼Œè€Œå¤šå€‹ pub çµå°¾çš„â€¦","frontmatter":{"title":"GitHub SSH","date":"2021-09-12T14:32:19.000Z","draft":false,"tags":["git","github","ssh"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/8fdd1b8a-21b2-4d15-9947-a6bdcc6f1000/public","description":"åœ¨æœ¬æ©Ÿèˆ‡ GitHub æºé€šæœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯é€é sshï¼Œæœ€å¤§çš„å¥½è™•å°±æ˜¯ä¸éœ€è¦è¼¸å…¥å¸³è™Ÿå¯†ç¢¼ä¾†ç¢ºèªèº«åˆ†ï¼Œä¹Ÿå¯ä»¥äº«å—åˆ° ssh åŠ å¯†æ‰€æä¾›çš„å®‰å…¨æ€§ã€‚"}}},{"node":{"id":"6768d0b8-3c0c-5392-8320-9c2443f08519","html":"<p>ç´€éŒ„ä¸€ä¸‹æˆ‘çš„ <a href=\"https://github.com/TonyPepeBear/cloud-ide-docker\">Cloud IDE Docker</a> ä½¿ç”¨æ–¹æ³•ã€‚</p>\n<!--more-->\n<h2>Pycharm Community</h2>\n<p><a href=\"https://hub.docker.com/r/tonypepe/pycharmc\">Docker Hub</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run -dp <span class=\"token number\">8887</span>:8887 tonypepe/pycharmc</code></pre></div>","rawMarkdownBody":"\nç´€éŒ„ä¸€ä¸‹æˆ‘çš„ [Cloud IDE Docker](https://github.com/TonyPepeBear/cloud-ide-docker) ä½¿ç”¨æ–¹æ³•ã€‚\n\n<!--more-->\n\n## Pycharm Community\n\n[Docker Hub](https://hub.docker.com/r/tonypepe/pycharmc)\n\n```bash\ndocker run -dp 8887:8887 tonypepe/pycharmc\n```\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Dev/Cloud Ide Docker.md","excerpt":"ç´€éŒ„ä¸€ä¸‹æˆ‘çš„ Cloud IDE Docker ä½¿ç”¨æ–¹æ³•ã€‚ Pycharm Community Docker Hub","frontmatter":{"title":"Cloud IDE Docker","date":"2021-08-30T08:13:47.000Z","draft":false,"tags":["ide","docker","jetbrains"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/87cfccae-9904-4391-0e52-2b001fffd500/public","description":null}}},{"node":{"id":"b04ee4c4-22aa-519f-a77a-6ab113d7d6a2","html":"<p>Docker æ˜¯ä¸€å€‹è™›æ“¬åŒ–æŠ€è¡“ï¼Œå¯ä»¥å°‡æˆ‘å€‘ç·¨å¯«å¥½çš„ç¨‹å¼åŒ…è£¹æˆä¸€å€‹å°çš„ã€Œå®¹å™¨ã€ï¼Œå†ç™¼ä½ˆåˆ°ä¼ºæœå™¨ä¸Šã€‚Docker è§£æ±ºäº†å›°æ“¾ç¨‹å¼ç•Œå¤šå¹´ä¾†çš„ç’°å¢ƒå•é¡Œï¼Œåªè¦ä¼ºæœå™¨å®‰è£äº† Docker å°±å¯ä»¥ç¢ºä¿ä¸€å®šå¯ä»¥åŸ·è¡Œæœå‹™ã€‚</p>\n<!--more-->\n<h2>Docker v.s. VM</h2>\n<p>å…¥é–€ Docker æœ€å¸¸è¦‹çš„å•é¡Œå°±æ˜¯ï¼ŒDocker å’Œ VM å·®åœ¨å“ªè£¡ï¼Ÿé€™å€‹å•é¡Œä¸é›£ç†è§£ï¼ŒVM ã€Œè™›æ“¬æ©Ÿã€ï¼Œé¡§åæ€ç¾©æ˜¯è™›æ“¬åŒ–ã€Œç¡¬é«”ã€ã€‚è€Œ Docker å‰‡æ˜¯åªè™›æ“¬åŒ–ä½œæ¥­ç³»çµ±ï¼Œæˆ–æ˜¯ç¨±ä½œã€Œè»Ÿé«”ã€ã€‚</p>\n<p>å¤§å®¶éƒ½æ‡‰è©²çŸ¥é“æ¯å‰µå»ºä¸€å€‹è™›æ“¬æ©Ÿï¼Œéƒ½æœƒè€—è²»æ‰æ•¸åˆ†é˜çš„æ™‚é–“ï¼Œè‹¥é‚„è¦å®‰è£ç’°å¢ƒï¼Œé‚£è€—è²»çš„æ™‚é–“å‰‡æœƒç›¸ç•¶å¯è§€ï¼Œä¹Ÿæœƒè€—è²»æ‰ç›¸ç•¶å¤§çš„ç¡¬é«”è³‡æºã€‚Docker åªè™›æ“¬åŒ–è»Ÿé«”çš„å„ªå‹¢ï¼Œå°±æ˜¯å¯ä»¥åœ¨å¹¾ç§’å…§å°±å•Ÿå‹•æœå‹™ï¼Œè€—è²»è³‡æºä¹Ÿç›¸ç•¶å°‘ï¼Œé‚„çœå»äº†å»ºç«‹ç’°å¢ƒçš„æ™‚é–“ã€‚</p>\n<h2>Docker Hub</h2>\n<blockquote>\n<p>Git æœ‰ GitHubï¼ŒDocker æœ‰ Docker Hub</p>\n</blockquote>\n<p>Docker Hub æ˜¯ Docker å®˜æ–¹ç”¨ä¾†å­˜æ”¾ Image çš„å€‰åº« (Registry)ï¼Œä½¿ç”¨è€…ä¹Ÿå¯ä»¥è‡ªæ¶ Registryï¼Œä½†æ˜¯å¦‚æœæœªæŒ‡å®š Registryï¼ŒDocker é è¨­æœƒå»æ‰¾ Docker Hub ä¸Šçš„ Imageã€‚</p>\n<h2>Image</h2>\n<p>Image é€šå¸¸å¯ä»¥æ˜¯ä¸€å€‹ç³»çµ±ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å€‹å·²ç¶“å®‰è£å¥½ç‰¹å®šåŸ·è¡Œç’°å¢ƒ (åƒæ˜¯ JAVA) çš„ç³»çµ±ã€‚ç³»çµ±éƒ¨åˆ†æœ€å¸¸è¦‹çš„æœƒæ˜¯ç”¨ alpine linuxï¼Œé€™æ˜¯ä¸€å€‹éå¸¸å°çš„é …ç›®ï¼Œåªæœ‰ä¸€å€‹ç³»çµ±ï¼Œå¯ä»¥è®“ä½ åœ¨å¹¾ç§’å…§å°±å¯ä»¥å•Ÿå‹•æœå‹™ï¼Œè¨±å¤šåŸ·è¡Œç’°å¢ƒä¹Ÿæœƒå»ºæ§‹åœ¨é€™å€‹ç³»çµ±ä¸Šã€‚ç¾åœ¨å¯ä»¥å…ˆå» Docker Hub ä¸Šçœ‹çœ‹å¹¾å€‹å‰å¹¾åçš„ Imageï¼Œå¤§æ¦‚å°±æœƒæ¯”è¼ƒæ¸…æ¥š Image çš„åŠŸç”¨ã€‚</p>\n<p>Docker Image å¯ä»¥ç”±ä¸‹åˆ—å¹¾æ–¹å¼å–å¾—ï¼š</p>\n<ul>\n<li>å¾ Docker Hub ä¸Šä¸‹è¼‰</li>\n<li>ç”± Dockerfile æ§‹å»º</li>\n<li>å¾å…¶ä»–é›»è…¦ import</li>\n</ul>\n<h2>Container</h2>\n<p>Docker ç”¨ Image å‰µå»º Containerï¼Œä¹Ÿå°±æ˜¯èªªï¼ŒContainer æ˜¯ Image çš„å¯¦ä¾‹ï¼ŒContainer åŸºæœ¬ä¸Šå°±æ˜¯ä¸€å€‹å®Œæ•´çš„ä½œæ¥­ç³»çµ±ï¼Œå¯ä»¥åŸ·è¡Œä»»ä½•çš„ç¨‹å¼ã€‚</p>\n<h2>Docker Run</h2>\n<p>æˆ‘å€‘ç°¡å–®å‰µå»ºä¸€å€‹ Ubuntu çš„ Containerï¼Œä¸¦ä¸”å•Ÿå‹•å®ƒï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run ubuntu</code></pre></div>\n<p>åŸ·è¡Œå¾Œå¯ä»¥çœ‹åˆ° Docker è‡ªå‹•å¾ Docker Hub ä¸Šä¸‹è¼‰ Ubuntu çš„ Imageï¼Œä½†æ˜¯é–‹å§‹åŸ·è¡Œå¾Œå»ç”šéº¼éƒ½æ²’ç™¼ç”Ÿå°±çµæŸäº†ã€‚é€™æ˜¯å› ç‚º Ubuntu çš„ Image é è¨­æ˜¯å•Ÿå‹•ä¸€å€‹ Shellï¼Œå¦‚æœæ²’æœ‰ Attach åˆ° Sheel ä¸Šï¼ŒContainer é¦¬ä¸Šå°±çµæŸäº†ã€‚</p>\n<p>æ‰€ä»¥å¦‚æœæˆ‘å€‘è¦ Attach åˆ° Ubuntu çš„ Shell ä¸Šï¼Œå¯ä»¥é€™æ¨£åŸ·è¡Œï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run -it ubuntu</code></pre></div>\n<p>åŸ·è¡Œæ‡‰è©²å°±æœƒçœ‹åˆ°æˆ‘å€‘åˆ° ubuntu çš„ Shell è£¡ã€‚</p>\n<h2>å•Ÿå‹•ä¸€å€‹ç¶²é æœå‹™</h2>\n<p>Nginx æœ‰å®˜æ–¹çš„ Hello Imageï¼Œå¯ä»¥æ›´æ¸…æ¥šçš„çœ‹åˆ° Container æœ‰åœ¨åŸ·è¡Œ Nginx æœå‹™ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run -p <span class=\"token number\">8080</span>:80 -d nginxdemos/hello</code></pre></div>\n<p>ä¸Šé¢å¤šäº†ä¸€å€‹ <code class=\"language-text\">-p</code> çš„åƒæ•¸ï¼Œå¾Œé¢è·Ÿä¸Š <code class=\"language-text\">8080:80</code>ï¼Œæ„æ€æ˜¯æœ¬æ©Ÿçš„ 8080 Port å°åˆ°å®¹å™¨çš„ 80 Portï¼Œé€™æ¨£å°±å¯ä»¥è®“æˆ‘å€‘åœ¨æœ¬æ©Ÿçš„ 8080 Port ä¸Šçœ‹åˆ° Nginx çš„ç¶²é äº†ã€‚</p>\n<h2>åˆ—å‡ºã€åˆªé™¤å®¹å™¨</h2>\n<p>åˆ—å‡ºæ­£åœ¨åŸ·è¡Œçš„å®¹å™¨ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">ps</span></code></pre></div>\n<p>åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…å«å·²ç¶“åœæ­¢çš„å®¹å™¨ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">ps</span> -a</code></pre></div>\n<p>åˆªé™¤å®¹å™¨ï¼Œè‹¥æ˜¯å°šæœªåœæ­¢çš„å®¹å™¨å‰‡ç„¡æ³•åˆªé™¤ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">rm</span> <span class=\"token operator\">&lt;</span>container_id<span class=\"token operator\">></span></code></pre></div>\n<p>åŠ ä¸Š <code class=\"language-text\">-f</code> åƒæ•¸ï¼Œå¯å¼·åˆ¶åˆªé™¤åŸ·è¡Œä¸­çš„å®¹å™¨ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">rm</span> -f <span class=\"token operator\">&lt;</span>container_id<span class=\"token operator\">></span></code></pre></div>\n<p>å¼·åˆ¶åˆªé™¤æ‰€æœ‰å®¹å™¨ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">rm</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">docker</span> <span class=\"token function\">ps</span> -aq<span class=\"token variable\">)</span></span></code></pre></div>\n<h2>å‰µå»ºè‡ªå·±çš„ Image</h2>\n<p>è¦æ•™ Docker æ€éº¼å‰µå»º Imageï¼Œéœ€è¦å…ˆå»ºç«‹ä¸€å€‹ <code class=\"language-text\">Dockerfile</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:latest</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt update <span class=\"token operator\">\\</span>\n    &amp;&amp; apt install vim git -y <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf /var/lib/apt/lists/*</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"/bin/bash\"</span>]</span></code></pre></div>\n<p>Build Image:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> build -t my-ubuntu <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>æ³¨æ„ä¸Šé¢çš„æŒ‡ä»¤çš„æœ€å¾Œé¢æœ‰ä¸€å€‹ <code class=\"language-text\">.</code>ï¼Œä»£è¡¨ Build é€™å€‹ç›®éŒ„ã€‚<code class=\"language-text\">-t</code> çš„åƒæ•¸å‰‡æ˜¯ Image çš„åç¨±ï¼Œæˆ–æ˜¯ç¨±ä½œ Tagã€‚</p>","rawMarkdownBody":"\nDocker æ˜¯ä¸€å€‹è™›æ“¬åŒ–æŠ€è¡“ï¼Œå¯ä»¥å°‡æˆ‘å€‘ç·¨å¯«å¥½çš„ç¨‹å¼åŒ…è£¹æˆä¸€å€‹å°çš„ã€Œå®¹å™¨ã€ï¼Œå†ç™¼ä½ˆåˆ°ä¼ºæœå™¨ä¸Šã€‚Docker è§£æ±ºäº†å›°æ“¾ç¨‹å¼ç•Œå¤šå¹´ä¾†çš„ç’°å¢ƒå•é¡Œï¼Œåªè¦ä¼ºæœå™¨å®‰è£äº† Docker å°±å¯ä»¥ç¢ºä¿ä¸€å®šå¯ä»¥åŸ·è¡Œæœå‹™ã€‚\n\n<!--more-->\n\n## Docker v.s. VM\n\nå…¥é–€ Docker æœ€å¸¸è¦‹çš„å•é¡Œå°±æ˜¯ï¼ŒDocker å’Œ VM å·®åœ¨å“ªè£¡ï¼Ÿé€™å€‹å•é¡Œä¸é›£ç†è§£ï¼ŒVM ã€Œè™›æ“¬æ©Ÿã€ï¼Œé¡§åæ€ç¾©æ˜¯è™›æ“¬åŒ–ã€Œç¡¬é«”ã€ã€‚è€Œ Docker å‰‡æ˜¯åªè™›æ“¬åŒ–ä½œæ¥­ç³»çµ±ï¼Œæˆ–æ˜¯ç¨±ä½œã€Œè»Ÿé«”ã€ã€‚\n\nå¤§å®¶éƒ½æ‡‰è©²çŸ¥é“æ¯å‰µå»ºä¸€å€‹è™›æ“¬æ©Ÿï¼Œéƒ½æœƒè€—è²»æ‰æ•¸åˆ†é˜çš„æ™‚é–“ï¼Œè‹¥é‚„è¦å®‰è£ç’°å¢ƒï¼Œé‚£è€—è²»çš„æ™‚é–“å‰‡æœƒç›¸ç•¶å¯è§€ï¼Œä¹Ÿæœƒè€—è²»æ‰ç›¸ç•¶å¤§çš„ç¡¬é«”è³‡æºã€‚Docker åªè™›æ“¬åŒ–è»Ÿé«”çš„å„ªå‹¢ï¼Œå°±æ˜¯å¯ä»¥åœ¨å¹¾ç§’å…§å°±å•Ÿå‹•æœå‹™ï¼Œè€—è²»è³‡æºä¹Ÿç›¸ç•¶å°‘ï¼Œé‚„çœå»äº†å»ºç«‹ç’°å¢ƒçš„æ™‚é–“ã€‚\n\n## Docker Hub\n\n> Git æœ‰ GitHubï¼ŒDocker æœ‰ Docker Hub\n\nDocker Hub æ˜¯ Docker å®˜æ–¹ç”¨ä¾†å­˜æ”¾ Image çš„å€‰åº« (Registry)ï¼Œä½¿ç”¨è€…ä¹Ÿå¯ä»¥è‡ªæ¶ Registryï¼Œä½†æ˜¯å¦‚æœæœªæŒ‡å®š Registryï¼ŒDocker é è¨­æœƒå»æ‰¾ Docker Hub ä¸Šçš„ Imageã€‚\n\n## Image\n\nImage é€šå¸¸å¯ä»¥æ˜¯ä¸€å€‹ç³»çµ±ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å€‹å·²ç¶“å®‰è£å¥½ç‰¹å®šåŸ·è¡Œç’°å¢ƒ (åƒæ˜¯ JAVA) çš„ç³»çµ±ã€‚ç³»çµ±éƒ¨åˆ†æœ€å¸¸è¦‹çš„æœƒæ˜¯ç”¨ alpine linuxï¼Œé€™æ˜¯ä¸€å€‹éå¸¸å°çš„é …ç›®ï¼Œåªæœ‰ä¸€å€‹ç³»çµ±ï¼Œå¯ä»¥è®“ä½ åœ¨å¹¾ç§’å…§å°±å¯ä»¥å•Ÿå‹•æœå‹™ï¼Œè¨±å¤šåŸ·è¡Œç’°å¢ƒä¹Ÿæœƒå»ºæ§‹åœ¨é€™å€‹ç³»çµ±ä¸Šã€‚ç¾åœ¨å¯ä»¥å…ˆå» Docker Hub ä¸Šçœ‹çœ‹å¹¾å€‹å‰å¹¾åçš„ Imageï¼Œå¤§æ¦‚å°±æœƒæ¯”è¼ƒæ¸…æ¥š Image çš„åŠŸç”¨ã€‚\n\nDocker Image å¯ä»¥ç”±ä¸‹åˆ—å¹¾æ–¹å¼å–å¾—ï¼š\n\n- å¾ Docker Hub ä¸Šä¸‹è¼‰\n- ç”± Dockerfile æ§‹å»º\n- å¾å…¶ä»–é›»è…¦ import\n\n## Container\n\nDocker ç”¨ Image å‰µå»º Containerï¼Œä¹Ÿå°±æ˜¯èªªï¼ŒContainer æ˜¯ Image çš„å¯¦ä¾‹ï¼ŒContainer åŸºæœ¬ä¸Šå°±æ˜¯ä¸€å€‹å®Œæ•´çš„ä½œæ¥­ç³»çµ±ï¼Œå¯ä»¥åŸ·è¡Œä»»ä½•çš„ç¨‹å¼ã€‚\n\n## Docker Run\n\næˆ‘å€‘ç°¡å–®å‰µå»ºä¸€å€‹ Ubuntu çš„ Containerï¼Œä¸¦ä¸”å•Ÿå‹•å®ƒï¼š\n\n```bash\ndocker run ubuntu\n```\n\nåŸ·è¡Œå¾Œå¯ä»¥çœ‹åˆ° Docker è‡ªå‹•å¾ Docker Hub ä¸Šä¸‹è¼‰ Ubuntu çš„ Imageï¼Œä½†æ˜¯é–‹å§‹åŸ·è¡Œå¾Œå»ç”šéº¼éƒ½æ²’ç™¼ç”Ÿå°±çµæŸäº†ã€‚é€™æ˜¯å› ç‚º Ubuntu çš„ Image é è¨­æ˜¯å•Ÿå‹•ä¸€å€‹ Shellï¼Œå¦‚æœæ²’æœ‰ Attach åˆ° Sheel ä¸Šï¼ŒContainer é¦¬ä¸Šå°±çµæŸäº†ã€‚\n\næ‰€ä»¥å¦‚æœæˆ‘å€‘è¦ Attach åˆ° Ubuntu çš„ Shell ä¸Šï¼Œå¯ä»¥é€™æ¨£åŸ·è¡Œï¼š\n\n```bash\ndocker run -it ubuntu\n```\n\nåŸ·è¡Œæ‡‰è©²å°±æœƒçœ‹åˆ°æˆ‘å€‘åˆ° ubuntu çš„ Shell è£¡ã€‚\n\n## å•Ÿå‹•ä¸€å€‹ç¶²é æœå‹™\n\nNginx æœ‰å®˜æ–¹çš„ Hello Imageï¼Œå¯ä»¥æ›´æ¸…æ¥šçš„çœ‹åˆ° Container æœ‰åœ¨åŸ·è¡Œ Nginx æœå‹™ã€‚\n\n```bash\ndocker run -p 8080:80 -d nginxdemos/hello\n```\n\nä¸Šé¢å¤šäº†ä¸€å€‹ `-p` çš„åƒæ•¸ï¼Œå¾Œé¢è·Ÿä¸Š `8080:80`ï¼Œæ„æ€æ˜¯æœ¬æ©Ÿçš„ 8080 Port å°åˆ°å®¹å™¨çš„ 80 Portï¼Œé€™æ¨£å°±å¯ä»¥è®“æˆ‘å€‘åœ¨æœ¬æ©Ÿçš„ 8080 Port ä¸Šçœ‹åˆ° Nginx çš„ç¶²é äº†ã€‚\n\n## åˆ—å‡ºã€åˆªé™¤å®¹å™¨\n\nåˆ—å‡ºæ­£åœ¨åŸ·è¡Œçš„å®¹å™¨ï¼š\n\n```bash\ndocker ps\n```\n\nåˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…å«å·²ç¶“åœæ­¢çš„å®¹å™¨ï¼š\n\n```bash\ndocker ps -a\n```\n\nåˆªé™¤å®¹å™¨ï¼Œè‹¥æ˜¯å°šæœªåœæ­¢çš„å®¹å™¨å‰‡ç„¡æ³•åˆªé™¤ï¼š\n\n```bash\ndocker rm <container_id>\n```\n\nåŠ ä¸Š `-f` åƒæ•¸ï¼Œå¯å¼·åˆ¶åˆªé™¤åŸ·è¡Œä¸­çš„å®¹å™¨ï¼š\n\n```bash\ndocker rm -f <container_id>\n```\n\nå¼·åˆ¶åˆªé™¤æ‰€æœ‰å®¹å™¨ï¼š\n\n```bash\ndocker rm $(docker ps -aq)\n```\n\n## å‰µå»ºè‡ªå·±çš„ Image\n\nè¦æ•™ Docker æ€éº¼å‰µå»º Imageï¼Œéœ€è¦å…ˆå»ºç«‹ä¸€å€‹ `Dockerfile`ï¼š\n\n```dockerfile\nFROM ubuntu:latest\n\nRUN apt update \\\n    && apt install vim git -y \\\n    && rm -rf /var/lib/apt/lists/*\n\nCMD [\"/bin/bash\"]\n```\n\nBuild Image:\n\n```bash\ndocker build -t my-ubuntu .\n```\n\næ³¨æ„ä¸Šé¢çš„æŒ‡ä»¤çš„æœ€å¾Œé¢æœ‰ä¸€å€‹ `.`ï¼Œä»£è¡¨ Build é€™å€‹ç›®éŒ„ã€‚`-t` çš„åƒæ•¸å‰‡æ˜¯ Image çš„åç¨±ï¼Œæˆ–æ˜¯ç¨±ä½œ Tagã€‚\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Docker/docker.md","excerpt":"Docker æ˜¯ä¸€å€‹è™›æ“¬åŒ–æŠ€è¡“ï¼Œå¯ä»¥å°‡æˆ‘å€‘ç·¨å¯«å¥½çš„ç¨‹å¼åŒ…è£¹æˆä¸€å€‹å°çš„ã€Œå®¹å™¨ã€ï¼Œå†ç™¼ä½ˆåˆ°ä¼ºæœå™¨ä¸Šã€‚Docker è§£æ±ºäº†å›°æ“¾ç¨‹å¼ç•Œå¤šå¹´ä¾†çš„ç’°å¢ƒå•é¡Œï¼Œåªè¦ä¼ºæœå™¨å®‰è£äº† Docker å°±å¯ä»¥ç¢ºä¿ä¸€å®šå¯ä»¥åŸ·è¡Œæœå‹™ã€‚ Docker v.s. VM å…¥é–€ Docker æœ€å¸¸è¦‹çš„å•é¡Œå°±æ˜¯ï¼ŒDocker å’Œ VM å·®åœ¨å“ªè£¡ï¼Ÿé€™å€‹å•é¡Œä¸é›£ç†è§£ï¼ŒVM ã€Œè™›æ“¬æ©Ÿã€ï¼Œé¡§åæ€ç¾©æ˜¯è™›æ“¬åŒ–ã€Œç¡¬é«”ã€ã€‚è€Œ Docker å‰‡æ˜¯åªè™›æ“¬â€¦","frontmatter":{"title":"Docker","date":"2021-08-25T18:31:57.000Z","draft":false,"tags":["docker"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/a45b7e65-d6dd-4ef5-23b4-44e2090c5b00/public","description":"Docker æ˜¯ä¸€å€‹è™›æ“¬åŒ–æŠ€è¡“ï¼Œå¯ä»¥å°‡æˆ‘å€‘ç·¨å¯«å¥½çš„ç¨‹å¼åŒ…è£¹æˆä¸€å€‹å°çš„ã€Œå®¹å™¨ã€ï¼Œå†ç™¼ä½ˆåˆ°ä¼ºæœå™¨ä¸Šã€‚Docker è§£æ±ºäº†å›°æ“¾ç¨‹å¼ç•Œå¤šå¹´ä¾†çš„ç’°å¢ƒå•é¡Œï¼Œåªè¦ä¼ºæœå™¨å®‰è£äº† Docker å°±å¯ä»¥ç¢ºä¿ä¸€å®šå¯ä»¥åŸ·è¡Œæœå‹™ã€‚"}}},{"node":{"id":"0328ae6c-1fa1-50d8-aec1-a55575fe59b5","html":"<p>Cloudflare çœŸçš„æ˜¯ä½›å¿ƒå…¬å¸ï¼Œæä¾›å…è²»çš„ DNSã€DDoS é˜²è­·ï¼Œé‚„å¯ä»¥æ‹¿ä¾†è¨—ç®¡éœæ…‹ç¶²é ï¼Œè€Œä»Šå¤©æ˜¯ä»‹ç´¹ä»–å€‘å…¬å¸çš„ Tunnelï¼Œé€™å€‹æœå‹™å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ç‰¹å®š port é–‹æ”¾åˆ°ç¶²è·¯ä¸Šï¼Œè€Œä¸”å®Œå…¨å…è²»ï¼Œåœ¨å°ç£çš„é€Ÿåº¦ä¹Ÿä¸æ…¢ï¼ŒçœŸçš„å¾ˆä½›ï¼Œå¹¾ä¹ç­‰æ–¼æ‹¿åˆ°å…è²»çš„ IPv4ã€‚</p>\n<p>æˆ‘è¦ºå¾—ç›®å‰çš„ç¼ºé»å°±æ˜¯ç¶²è·¯ä¸Šç›¸é—œçš„è³‡æ–™æ¯”è¼ƒå°‘ï¼Œé‡åˆ°å•é¡Œå¾ˆé›£æ‰¾åˆ°è³‡æ–™åƒè€ƒï¼Œå› ç‚ºä»–å…¶å¯¦ä¸»è¦æ˜¯ Cloudflare çš„ä¸€é …é›¶ä¿¡ä»»æœå‹™ï¼Œç›®æ¨™å®¢ç¾¤éƒ½æ˜¯ä¸€äº›å²å®³çš„ç¶²ç®¡ï¼Œæ‰€ä»¥å®˜æ–¹å¯«çš„æ–‡ä»¶ä¹Ÿéƒ½å¾ˆæ·±å¥§ï¼Œå¦‚æœæ˜¯æ–°æ‰‹å¯èƒ½æœƒé ­æ˜çœ¼èŠ±ã€‚</p>\n<!--more-->\n<p>é€™ä¸€é …æœå‹™å¯ä»¥å…ˆä¸ç”¨å¸³è™Ÿå°±èƒ½è©¦ç”¨ï¼Œä¸éå°±ä¸èƒ½è‡ªè¨‚ Domainï¼Œæˆ‘æœƒå…ˆä»‹ç´¹å…ç™»å…¥çš„ï¼Œå†ä»‹ç´¹è¦ç™»å…¥çš„ã€‚ç¬¬ä¸€æ­¥é‚„æ˜¯è¦åœ¨æœ¬åœ°å…ˆå®‰è£ç’°å¢ƒã€‚</p>\n<h2>å®‰è£ cloudflared</h2>\n<h3>å…¨ç³»çµ±é©ç”¨</h3>\n<p>æ³¨æ„ Cloudflare å¾Œé¢å¤šäº†ä¸€å€‹ <code class=\"language-text\">d</code>ï¼Œé€™æ˜¯ä»–é€£ä¸Š Tunnel çš„å¿…è¦ç¨‹å¼ï¼Œæ˜¯ç”¨ Go ç·¨å¯«ï¼Œå®‰è£æ–¹å¼å°±æ˜¯åˆ°<a href=\"https://github.com/cloudflare/cloudflared/releases\">å®˜æ–¹ Github</a>ä¸‹è¼‰ç¬¦åˆè‡ªå·±ç’°å¢ƒçš„åŸ·è¡Œæª”ã€‚</p>\n<h3>macOS</h3>\n<p>mac å¯ä»¥ç”¨ Homebrew å®‰è£ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">brew install cloudflare/cloudflare/cloudflared</code></pre></div>\n<h3>Windows</h3>\n<p>Windows æ°¸é æ˜¯æœ€éº»ç…©çš„ï¼Œä¸‹è¼‰å®ŒåŸ·è¡Œæª”å¾Œï¼Œéš¨ä¾¿ä¸Ÿåˆ°ä¸€å€‹è³‡æ–™å¤¾ï¼Œç„¶å¾ŒåŠ åˆ° PATH è£¡ã€‚</p>\n<h3>Update</h3>\n<p>è¦æ›´æ–°é€™å€‹åŸ·è¡Œæª”ï¼Œåªè¦ Run ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå¦å¤–ï¼ŒWindows ä¸æ”¯æ´è‡ªå‹•æ›´æ–°ï¼Œè¦æ›´æ–°å°±åªèƒ½æ‰‹å‹•ä¸‹è¼‰è¦†è“‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cloudflared update</code></pre></div>\n<h2>å…ç™»å…¥æ¸¬è©¦ Tunnel</h2>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cloudflared tunnel --url http://localhost:8080</code></pre></div>\n<p>åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤ï¼Œå°±å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ 8080 port ç”¨ http å…¬é–‹åˆ°ç¶²è·¯ä¸Šï¼Œæ‡‰è©²æœƒçœ‹åˆ°è¼¸å‡ºä¸­æœƒçµ¦ä¸€ä¸²å€‹ <code class=\"language-text\">*-*-*.trycloudflare.com</code> çš„ç¶²å€ï¼Œç¾åœ¨åªè¦è¨ªå•é‚£å€‹ç¶²å€ï¼Œå°±å¯ä»¥ç™¼ç¾æœ¬åœ°çš„ç¶²é å·²ç¶“å¯ä»¥å¾å…¨ç¶²é€£åˆ°ï¼Œä¸éœ€è¨»å†Šï¼Œä¹Ÿä¸ç”¨è¨­å®šè¤‡é›œçš„ Domainï¼Œé‚„ä¸é™æµé‡ã€‚</p>\n<h2>ç™»å…¥ Cloudflare</h2>\n<p>ç¬¬ä¸€æ­¥å°±æ˜¯å…ˆç™»å…¥ Cloudflare çš„å¸³è™Ÿï¼Œä¹Ÿè¦æœ‰ä¸€å€‹å·²ç¶“è¨—ç®¡çµ¦ Cloudflare çš„ Domainï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cloudflared tunnel login</code></pre></div>\n<p>åŸ·è¡Œé€™å€‹å‘½ä»¤å¾Œï¼Œæ‡‰è©²æœƒè·³å‡ºç€è¦½å™¨æˆæ¬Šï¼Œå¦‚æœæ²’æœ‰è·³å‡ºï¼Œå°±æ‰‹å‹•è¤‡è£½æä¾›çš„æˆæ¬Šç¶²å€ç™»å…¥ Cloudflare å¸³è™Ÿã€‚</p>\n<h2>å‰µå»ºä¸¦ä½¿ç”¨ Tunnel</h2>\n<p>ç™»å…¥å®Œæˆå¾Œå°±å¯ä»¥é–‹å§‹å‰µå»ºé€šé“ï¼Œå‰µå»ºåªæœƒåœ¨æœ¬åœ°ç”¢ç”Ÿä¸€äº›æ–‡ä»¶ï¼Œä¸¦ä¸æœƒæœ‰ä»»ä½•é€£ç·šçš„å‹•ä½œï¼Œå¯ä»¥æ”¾å¿ƒåŸ·è¡Œï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cloudflared tunnel create &lt;Name&gt;</code></pre></div>\n<p>å‰µå»ºå®Œæˆå¾Œï¼ŒCloudflare æœƒçµ¦ä¸€çµ„ UUIDï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æœ‰æ²’æœ‰å‰µå»ºæˆåŠŸï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cloudflared tunnel list</code></pre></div>\n<p>å¦‚æœè¦åˆªé™¤å°±æ˜¯ Deleteï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cloudflared tunnel delete &lt;Name or UUID&gt;</code></pre></div>\n<h2>DNS è¨­å®š</h2>\n<p>åœ¨å‰µå»º Tunnel å¾Œï¼ŒCloudflare æœƒå°‡å‰›å‰›å‰µå»ºéš§é“æ™‚ç”¢ç”Ÿçš„ UUID ç¶å®šåˆ° <code class=\"language-text\">&lt;UUID>.cfargotunnel.com</code> é€™å€‹ Domainï¼Œä¸é Cloudflare æœƒæ“‹æ‰ç”¨é€™å€‹ Domain ç›´æ¥é€£ç·šçš„æµé‡ï¼Œæ‰€ä»¥æˆ‘å€‘è¦æŠŠæˆ‘å€‘çš„ Domain æ–°å¢ä¸€å€‹ CNAME ç´€éŒ„ï¼ŒæŠŠæµé‡å¾€é€™é‚Šå°ã€‚</p>\n<p>æœ‰å…©å€‹æ–¹æ³•å¯ä»¥è¨­å®š CNAMEï¼Œä¸€å€‹æ˜¯è‡ªå·±å» Cloudflare çš„å®˜ç¶²è¨­å®šï¼š</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210813165733.png\" alt=\"img\"></p>\n<p>å¦ä¸€å€‹æ˜¯ç›´æ¥ç”¨æŒ‡ä»¤è¨­å®šï¼Œå¿«åˆæ–¹ä¾¿ï¼ŒæŠŠå¾Œé¢çš„ domain æ”¹æˆè‡ªå·±æƒ³è¦ç¶å®šçš„ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cloudflared tunnel route dns &lt;Name or UUID&gt; test.example.com</code></pre></div>\n<p>æ‰“å®Œå¾Œå¦‚æœä¸æ”¾å¿ƒï¼Œé‚„æ˜¯å¯ä»¥è‡ªå·±åˆ° Cloudflare çš„ Dns è¨­å®šçœ‹ä¸€ä¸‹æœ‰æ²’æœ‰è¨­å®šå®Œæˆï¼Œæ‡‰è©²æœƒçœ‹åˆ°è·Ÿä¸Šåœ–ä¸€æ¨£ç”¢ç”Ÿä¸€å€‹ CNAME Recordã€‚</p>\n<h2>Tunnel Config</h2>\n<p>ä¸‹é¢æ˜¯æœ€ç°¡å–®çš„ Config ç¯„ä¾‹ï¼Œé€™æ˜¯ä¸€å€‹ <code class=\"language-text\">yml</code> æª”æ¡ˆï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">tunnel</span><span class=\"token punctuation\">:</span> &lt;Name<span class=\"token punctuation\">></span>\n\n<span class=\"token key atrule\">ingress</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">hostname</span><span class=\"token punctuation\">:</span> test.example.com\n    <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span><span class=\"token number\">8080</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> http_status<span class=\"token punctuation\">:</span><span class=\"token number\">404</span></code></pre></div>\n<p>ä¸Šé¢æœƒæŠŠ 8080 çš„ HTTP æµé‡å°åˆ° <code class=\"language-text\">domain.example.com</code>ï¼Œä½¿ç”¨å‰›å‰›å‰µå»ºçš„ Tunnelã€‚</p>\n<p>æœ€å¾Œä¸€è¡Œä¸€å®šè¦æœ‰ä¸€å€‹å¯ä»¥æ¥å—æ‰€æœ‰æµé‡çš„ Serviceï¼Œä¸ç„¶æœå‹™æœƒä¸èƒ½å•Ÿå‹•ï¼Œé€™è£¡å…¨éƒ¨å¾€ 404 å°ã€‚</p>\n<h2>Run Tunnel</h2>\n<p>æœ€å¾Œä¸€æ­¥ï¼ŒåŠ ä¸Š config çš„åƒæ•¸ï¼ŒæŠŠå‰›å‰›çš„ yml æª”å–‚çµ¦ Cloudflareï¼Œå°±å¯ä»¥å•Ÿå‹•é€šé“äº†ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cloudflared tunnel --config test.yml run</code></pre></div>\n<h2>å¾Œè¨˜</h2>\n<p>é€™ç¯‡åªä»‹ç´¹äº†å¦‚ä½•å‰µå»ºä¸€å€‹ Http çš„ Tunnelï¼Œå¦‚æœè¦é–‹å…¶ä»–çš„ TCP Portï¼Œé‚„éœ€è¦å…¶ä»–çš„è¨­å®šï¼Œè€Œä¸”åœ¨ Client ç«¯ä¹Ÿæœƒéœ€è¦å®‰è£ Cloudflaredï¼Œæ‰€ä»¥æˆ‘ç•™åˆ°ä¸‹ä¸€ç¯‡åœ¨ä»‹ç´¹ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://developers.cloudflare.com/cloudflare-one/\">Cloudflare for Teams documentation</a></li>\n</ul>","rawMarkdownBody":"\nCloudflare çœŸçš„æ˜¯ä½›å¿ƒå…¬å¸ï¼Œæä¾›å…è²»çš„ DNSã€DDoS é˜²è­·ï¼Œé‚„å¯ä»¥æ‹¿ä¾†è¨—ç®¡éœæ…‹ç¶²é ï¼Œè€Œä»Šå¤©æ˜¯ä»‹ç´¹ä»–å€‘å…¬å¸çš„ Tunnelï¼Œé€™å€‹æœå‹™å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ç‰¹å®š port é–‹æ”¾åˆ°ç¶²è·¯ä¸Šï¼Œè€Œä¸”å®Œå…¨å…è²»ï¼Œåœ¨å°ç£çš„é€Ÿåº¦ä¹Ÿä¸æ…¢ï¼ŒçœŸçš„å¾ˆä½›ï¼Œå¹¾ä¹ç­‰æ–¼æ‹¿åˆ°å…è²»çš„ IPv4ã€‚\n\næˆ‘è¦ºå¾—ç›®å‰çš„ç¼ºé»å°±æ˜¯ç¶²è·¯ä¸Šç›¸é—œçš„è³‡æ–™æ¯”è¼ƒå°‘ï¼Œé‡åˆ°å•é¡Œå¾ˆé›£æ‰¾åˆ°è³‡æ–™åƒè€ƒï¼Œå› ç‚ºä»–å…¶å¯¦ä¸»è¦æ˜¯ Cloudflare çš„ä¸€é …é›¶ä¿¡ä»»æœå‹™ï¼Œç›®æ¨™å®¢ç¾¤éƒ½æ˜¯ä¸€äº›å²å®³çš„ç¶²ç®¡ï¼Œæ‰€ä»¥å®˜æ–¹å¯«çš„æ–‡ä»¶ä¹Ÿéƒ½å¾ˆæ·±å¥§ï¼Œå¦‚æœæ˜¯æ–°æ‰‹å¯èƒ½æœƒé ­æ˜çœ¼èŠ±ã€‚\n\n<!--more-->\n\né€™ä¸€é …æœå‹™å¯ä»¥å…ˆä¸ç”¨å¸³è™Ÿå°±èƒ½è©¦ç”¨ï¼Œä¸éå°±ä¸èƒ½è‡ªè¨‚ Domainï¼Œæˆ‘æœƒå…ˆä»‹ç´¹å…ç™»å…¥çš„ï¼Œå†ä»‹ç´¹è¦ç™»å…¥çš„ã€‚ç¬¬ä¸€æ­¥é‚„æ˜¯è¦åœ¨æœ¬åœ°å…ˆå®‰è£ç’°å¢ƒã€‚\n\n## å®‰è£ cloudflared\n\n### å…¨ç³»çµ±é©ç”¨\n\næ³¨æ„ Cloudflare å¾Œé¢å¤šäº†ä¸€å€‹ `d`ï¼Œé€™æ˜¯ä»–é€£ä¸Š Tunnel çš„å¿…è¦ç¨‹å¼ï¼Œæ˜¯ç”¨ Go ç·¨å¯«ï¼Œå®‰è£æ–¹å¼å°±æ˜¯åˆ°[å®˜æ–¹ Github](https://github.com/cloudflare/cloudflared/releases)ä¸‹è¼‰ç¬¦åˆè‡ªå·±ç’°å¢ƒçš„åŸ·è¡Œæª”ã€‚\n\n### macOS\n\nmac å¯ä»¥ç”¨ Homebrew å®‰è£ï¼š\n\n```sh\nbrew install cloudflare/cloudflare/cloudflared\n```\n\n### Windows\n\nWindows æ°¸é æ˜¯æœ€éº»ç…©çš„ï¼Œä¸‹è¼‰å®ŒåŸ·è¡Œæª”å¾Œï¼Œéš¨ä¾¿ä¸Ÿåˆ°ä¸€å€‹è³‡æ–™å¤¾ï¼Œç„¶å¾ŒåŠ åˆ° PATH è£¡ã€‚\n\n### Update\n\nè¦æ›´æ–°é€™å€‹åŸ·è¡Œæª”ï¼Œåªè¦ Run ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå¦å¤–ï¼ŒWindows ä¸æ”¯æ´è‡ªå‹•æ›´æ–°ï¼Œè¦æ›´æ–°å°±åªèƒ½æ‰‹å‹•ä¸‹è¼‰è¦†è“‹ï¼š\n\n```sh\ncloudflared update\n```\n\n## å…ç™»å…¥æ¸¬è©¦ Tunnel\n\n```sh\ncloudflared tunnel --url http://localhost:8080\n```\n\nåŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤ï¼Œå°±å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ 8080 port ç”¨ http å…¬é–‹åˆ°ç¶²è·¯ä¸Šï¼Œæ‡‰è©²æœƒçœ‹åˆ°è¼¸å‡ºä¸­æœƒçµ¦ä¸€ä¸²å€‹ `*-*-*.trycloudflare.com` çš„ç¶²å€ï¼Œç¾åœ¨åªè¦è¨ªå•é‚£å€‹ç¶²å€ï¼Œå°±å¯ä»¥ç™¼ç¾æœ¬åœ°çš„ç¶²é å·²ç¶“å¯ä»¥å¾å…¨ç¶²é€£åˆ°ï¼Œä¸éœ€è¨»å†Šï¼Œä¹Ÿä¸ç”¨è¨­å®šè¤‡é›œçš„ Domainï¼Œé‚„ä¸é™æµé‡ã€‚\n\n## ç™»å…¥ Cloudflare\n\nç¬¬ä¸€æ­¥å°±æ˜¯å…ˆç™»å…¥ Cloudflare çš„å¸³è™Ÿï¼Œä¹Ÿè¦æœ‰ä¸€å€‹å·²ç¶“è¨—ç®¡çµ¦ Cloudflare çš„ Domainï¼š\n\n```sh\ncloudflared tunnel login\n```\n\nåŸ·è¡Œé€™å€‹å‘½ä»¤å¾Œï¼Œæ‡‰è©²æœƒè·³å‡ºç€è¦½å™¨æˆæ¬Šï¼Œå¦‚æœæ²’æœ‰è·³å‡ºï¼Œå°±æ‰‹å‹•è¤‡è£½æä¾›çš„æˆæ¬Šç¶²å€ç™»å…¥ Cloudflare å¸³è™Ÿã€‚\n\n## å‰µå»ºä¸¦ä½¿ç”¨ Tunnel\n\nç™»å…¥å®Œæˆå¾Œå°±å¯ä»¥é–‹å§‹å‰µå»ºé€šé“ï¼Œå‰µå»ºåªæœƒåœ¨æœ¬åœ°ç”¢ç”Ÿä¸€äº›æ–‡ä»¶ï¼Œä¸¦ä¸æœƒæœ‰ä»»ä½•é€£ç·šçš„å‹•ä½œï¼Œå¯ä»¥æ”¾å¿ƒåŸ·è¡Œï¼š\n\n```sh\ncloudflared tunnel create <Name>\n```\n\nå‰µå»ºå®Œæˆå¾Œï¼ŒCloudflare æœƒçµ¦ä¸€çµ„ UUIDï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æœ‰æ²’æœ‰å‰µå»ºæˆåŠŸï¼š\n\n```sh\ncloudflared tunnel list\n```\n\nå¦‚æœè¦åˆªé™¤å°±æ˜¯ Deleteï¼š\n\n```sh\ncloudflared tunnel delete <Name or UUID>\n```\n\n## DNS è¨­å®š\n\nåœ¨å‰µå»º Tunnel å¾Œï¼ŒCloudflare æœƒå°‡å‰›å‰›å‰µå»ºéš§é“æ™‚ç”¢ç”Ÿçš„ UUID ç¶å®šåˆ° `<UUID>.cfargotunnel.com` é€™å€‹ Domainï¼Œä¸é Cloudflare æœƒæ“‹æ‰ç”¨é€™å€‹ Domain ç›´æ¥é€£ç·šçš„æµé‡ï¼Œæ‰€ä»¥æˆ‘å€‘è¦æŠŠæˆ‘å€‘çš„ Domain æ–°å¢ä¸€å€‹ CNAME ç´€éŒ„ï¼ŒæŠŠæµé‡å¾€é€™é‚Šå°ã€‚\n\næœ‰å…©å€‹æ–¹æ³•å¯ä»¥è¨­å®š CNAMEï¼Œä¸€å€‹æ˜¯è‡ªå·±å» Cloudflare çš„å®˜ç¶²è¨­å®šï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210813165733.png)\n\nå¦ä¸€å€‹æ˜¯ç›´æ¥ç”¨æŒ‡ä»¤è¨­å®šï¼Œå¿«åˆæ–¹ä¾¿ï¼ŒæŠŠå¾Œé¢çš„ domain æ”¹æˆè‡ªå·±æƒ³è¦ç¶å®šçš„ï¼š\n\n```sh\ncloudflared tunnel route dns <Name or UUID> test.example.com\n```\n\næ‰“å®Œå¾Œå¦‚æœä¸æ”¾å¿ƒï¼Œé‚„æ˜¯å¯ä»¥è‡ªå·±åˆ° Cloudflare çš„ Dns è¨­å®šçœ‹ä¸€ä¸‹æœ‰æ²’æœ‰è¨­å®šå®Œæˆï¼Œæ‡‰è©²æœƒçœ‹åˆ°è·Ÿä¸Šåœ–ä¸€æ¨£ç”¢ç”Ÿä¸€å€‹ CNAME Recordã€‚\n\n## Tunnel Config\n\nä¸‹é¢æ˜¯æœ€ç°¡å–®çš„ Config ç¯„ä¾‹ï¼Œé€™æ˜¯ä¸€å€‹ `yml` æª”æ¡ˆï¼š\n\n```yml\ntunnel: <Name>\n\ningress:\n  - hostname: test.example.com\n    service: http://localhost:8080\n  - service: http_status:404\n```\n\nä¸Šé¢æœƒæŠŠ 8080 çš„ HTTP æµé‡å°åˆ° `domain.example.com`ï¼Œä½¿ç”¨å‰›å‰›å‰µå»ºçš„ Tunnelã€‚\n\næœ€å¾Œä¸€è¡Œä¸€å®šè¦æœ‰ä¸€å€‹å¯ä»¥æ¥å—æ‰€æœ‰æµé‡çš„ Serviceï¼Œä¸ç„¶æœå‹™æœƒä¸èƒ½å•Ÿå‹•ï¼Œé€™è£¡å…¨éƒ¨å¾€ 404 å°ã€‚\n\n## Run Tunnel\n\næœ€å¾Œä¸€æ­¥ï¼ŒåŠ ä¸Š config çš„åƒæ•¸ï¼ŒæŠŠå‰›å‰›çš„ yml æª”å–‚çµ¦ Cloudflareï¼Œå°±å¯ä»¥å•Ÿå‹•é€šé“äº†ï¼š\n\n```sh\ncloudflared tunnel --config test.yml run\n```\n\n## å¾Œè¨˜\n\né€™ç¯‡åªä»‹ç´¹äº†å¦‚ä½•å‰µå»ºä¸€å€‹ Http çš„ Tunnelï¼Œå¦‚æœè¦é–‹å…¶ä»–çš„ TCP Portï¼Œé‚„éœ€è¦å…¶ä»–çš„è¨­å®šï¼Œè€Œä¸”åœ¨ Client ç«¯ä¹Ÿæœƒéœ€è¦å®‰è£ Cloudflaredï¼Œæ‰€ä»¥æˆ‘ç•™åˆ°ä¸‹ä¸€ç¯‡åœ¨ä»‹ç´¹ã€‚\n\n## Reference\n\n- [Cloudflare for Teams documentation](https://developers.cloudflare.com/cloudflare-one/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Web/Cloudflare Tunnel.md","excerpt":"Cloudflare çœŸçš„æ˜¯ä½›å¿ƒå…¬å¸ï¼Œæä¾›å…è²»çš„ DNSã€DDoS é˜²è­·ï¼Œé‚„å¯ä»¥æ‹¿ä¾†è¨—ç®¡éœæ…‹ç¶²é ï¼Œè€Œä»Šå¤©æ˜¯ä»‹ç´¹ä»–å€‘å…¬å¸çš„ Tunnelï¼Œé€™å€‹æœå‹™å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ç‰¹å®š port é–‹æ”¾åˆ°ç¶²è·¯ä¸Šï¼Œè€Œä¸”å®Œå…¨å…è²»ï¼Œåœ¨å°ç£çš„é€Ÿåº¦ä¹Ÿä¸æ…¢ï¼ŒçœŸçš„å¾ˆä½›ï¼Œå¹¾ä¹ç­‰æ–¼æ‹¿åˆ°å…è²»çš„ IPv4ã€‚ æˆ‘è¦ºå¾—ç›®å‰çš„ç¼ºé»å°±æ˜¯ç¶²è·¯ä¸Šç›¸é—œçš„è³‡æ–™æ¯”è¼ƒå°‘ï¼Œé‡åˆ°å•é¡Œå¾ˆé›£æ‰¾åˆ°è³‡æ–™åƒè€ƒï¼Œå› ç‚ºä»–å…¶å¯¦ä¸»è¦æ˜¯ Cloudflare çš„ä¸€é …é›¶ä¿¡ä»»æœå‹™ï¼Œç›®æ¨™â€¦","frontmatter":{"title":"Cloudflare Tunnel","date":"2021-08-13T07:17:39.000Z","draft":false,"tags":["cloudflare","tunnel","teams","cloudflare-tunnel"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/00e85cf1-4c03-45ea-004c-f61e6216d400/public","description":"Cloudflare çœŸçš„æ˜¯ä½›å¿ƒå…¬å¸ï¼Œæä¾›å…è²»çš„ DNSã€DDoS é˜²è­·ï¼Œé‚„å¯ä»¥æ‹¿ä¾†è¨—ç®¡éœæ…‹ç¶²é ï¼Œè€Œä»Šå¤©æ˜¯ä»‹ç´¹ä»–å€‘å…¬å¸çš„ Tunnelï¼Œé€™å€‹æœå‹™å¯ä»¥å°‡æœ¬åœ°é›»è…¦çš„ç‰¹å®š port é–‹æ”¾åˆ°ç¶²è·¯ä¸Šï¼Œè€Œä¸”å®Œå…¨å…è²»ï¼Œåœ¨å°ç£çš„é€Ÿåº¦ä¹Ÿä¸æ…¢ï¼ŒçœŸçš„å¾ˆä½›ï¼Œå¹¾ä¹ç­‰æ–¼æ‹¿åˆ°å…è²»çš„ IPv4ã€‚"}}},{"node":{"id":"acc7e2df-e6e5-5c7a-aa49-4f23527be703","html":"<p>ç°¡å–®è¨˜éŒ„æˆ‘æ‰€èªçŸ¥çš„ A320 çš„ä¸€äº›ç¨‹åºã€‚</p>\n<!--more-->\n<blockquote>\n<p>æ³¨æ„é€™äº›éƒ½ä¸æ˜¯æ¨™æº–ç¨‹åºï¼Œåªæ˜¯æˆ‘è‡ªå·±äº‚ç†è§£çš„ï¼Œä¹Ÿçœå»è »å¤šæ­¥é©Ÿï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯èƒ½èµ·è®“é£›æ©Ÿå‹•èµ·ä¾†ï¼Œæ¨™æº–ç¨‹åºè‚¯å®šæ˜¯æ›´è¤‡é›œçš„ã€‚</p>\n</blockquote>\n<h2>å•Ÿå‹•é£›æ©Ÿå‰æª¢æŸ¥</h2>\n<p><del>æ¨¡æ“¬å™¨ä¸­è·³éé‚„æ˜¯å¯ä»¥é£›</del></p>\n<ol>\n<li>Engine Master 1 and 2 Switch -> OFF\n<ul>\n<li>ä¸»å¼•æ“ 1, 2 éƒ½é—œé–‰</li>\n</ul>\n</li>\n<li>Engine Mode Selector -> NORM\n<ul>\n<li>å¼•æ“æ¨¡å¼åœ¨ Normal ä½ç½®</li>\n</ul>\n</li>\n<li>Weather Radar -> OFF\n<ul>\n<li>é—œé–‰æ°£è±¡é›·é”</li>\n</ul>\n</li>\n<li>Landing Gear -> Down\n<ul>\n<li>æ©Ÿè¼ªæ”¾ä¸‹</li>\n</ul>\n</li>\n<li>Wipers -> Both OFF\n<ul>\n<li>å…©å€‹é›¨åˆ·éƒ½é—œé–‰</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/7e29f7e1-bf0b-44d4-7589-29286ed81b00/large\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/ca5109ba-4baf-40e3-850e-ee4002882c00/large\" alt=\"img\"></p>\n<h2>å•Ÿå‹•é£›æ©Ÿ</h2>\n<ol>\n<li>Batt 1 and 2 -> ON</li>\n<li>EXT Power -> ON\n<ul>\n<li>å•Ÿå‹•å¤–éƒ¨é›»æº</li>\n<li>é€™æ™‚æ‡‰è©²å¯ä»¥çœ‹åˆ°æ‰€æœ‰å„€è¡¨äº®èµ·</li>\n</ul>\n</li>\n<li>APU Fire Test\n<ul>\n<li>APU æ»…ç«æ¸¬è©¦</li>\n</ul>\n</li>\n<li>APU Master and wait 3 sec -> ON\n<ul>\n<li>æ‰“é–‹ APU ä¸»é–‹é—œï¼Œä¸¦ç­‰å¾… 3 ç§’</li>\n</ul>\n</li>\n<li>APU START -> ON\n<ul>\n<li>ç™¼å‹• APU</li>\n</ul>\n</li>\n<li>Wait for APU START -> Green \"AVAIL\"\n<ul>\n<li>ç­‰ APU ç™¼å‹•å®Œæˆ</li>\n</ul>\n</li>\n<li>APU BLEED -> ON\n<ul>\n<li>é–‹å•Ÿ APU ä¾›çµ¦æ°£å£“</li>\n</ul>\n</li>\n<li>EXT Power -> OFF\n<ul>\n<li>ç§»é™¤å¤–éƒ¨é›»æº</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/bcc428a6-c065-4bc3-0d19-ad204b860700/large\" alt=\"img\"></p>\n<h2>Overhead Panel ä¸Šæ–¹å„€è¡¨</h2>\n<p>åŸºæœ¬ä¸Šï¼Œç”±å·¦è‡³å³ï¼Œç”±ä¸‹è€Œä¸Šçš„æª¢æŸ¥</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/4aa17d2f-419c-40e6-09f8-e31ca2833a00/large\" alt=\"img\"></p>\n<h3>å·¦é‚Šé‚£æ’</h3>\n<ol>\n<li>CREW SUPPLY -> ON\n<ul>\n<li>æ‰“é–‹çµ„å“¡æ°§æ°£ä¾›çµ¦</li>\n</ul>\n</li>\n<li>ADIRS 1, 2, 3 -> NAV\n<ul>\n<li>é–‹å•Ÿä¸‰å€‹æ…£æ€§å°èˆªï¼Œéœ€ç­‰å¾… 6-7 åˆ†é˜æ ¡æº–</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/b25f2e34-5ff9-4534-4fc2-927961a5ce00/large\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/16fb299e-1847-4767-8093-aa0d058cd400/large\" alt=\"img\"></p>\n<h3>ä¸­é–“é‚£æ’</h3>\n<ol>\n<li>NAV &#x26; LOGO Light -> ON</li>\n<li>OVHD INTEG LT -> AS REQ.</li>\n<li>DOME LT -> AS REQ.</li>\n<li>ANN LT TEST</li>\n<li>EMER EXIT LT -> ARM</li>\n<li>SEAT BELTS -> ON</li>\n<li>NO SMOKING -> ON</li>\n<li>ALL PUMP -> ON</li>\n<li>ENG 1 FIRE TEST</li>\n<li>ENG 2 FIRE TEST</li>\n</ol>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/e5f05a70-bc36-4bc3-fff2-61f413e6b900/large\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/613ca5d3-3519-4c5d-cb82-4f9371e1d500/large\" alt=\"img\"></p>\n<h3>å³é‚Šé‚£æ’</h3>\n<p>åŸºæœ¬ä¸Šä¸ç”¨å‹•</p>\n<h2>MCDU é£›è¡Œé›»è…¦</h2>\n<p>åœ¨ç­‰å¾…å°èˆªæ ¡æº–æ™‚ï¼Œä¾†è¨­å®šé£›è¡Œé›»è…¦ã€‚è¨­å®šé£›è¡Œé›»è…¦æœ‰ä¸€å€‹å£è¨£ï¼š</p>\n<blockquote>\n<p>D > I > F > S > R > I > P > P</p>\n</blockquote>\n<ul>\n<li>DATA</li>\n<li>INIT A</li>\n<li>F-PLN</li>\n<li>SEC PLAN</li>\n<li>RAD NAV</li>\n<li>INIT B</li>\n<li>PREF</li>\n<li>PROG</li>\n</ul>\n<blockquote>\n<p>é£›è¡Œé›»è…¦è¨­å®šè »è¤‡é›œçš„ï¼Œæœ¬æ–‡å°±å…ˆè·³éè©³ç´°æ­¥é©Ÿï¼Œå°ˆæ³¨åœ¨å†·æ“åˆ°èµ·é£›ã€‚</p>\n</blockquote>\n<h2>å¾Œæ¨ and å•Ÿå‹•å¼•æ“å‰æª¢æŸ¥</h2>\n<p>è¨˜å¾—ç­‰ IRS æ ¡æº–å®Œå¾Œå†å¾Œæ¨ã€‚</p>\n<ol>\n<li>ç”³è«‹å¾Œæ¨</li>\n<li>BECON Light -> ON\n<ul>\n<li>å•Ÿå‹• BECAON ç‡ˆ</li>\n</ul>\n</li>\n<li>Trust Levers -> IDLE\n<ul>\n<li>ç¢ºå®šæ¨åŠ›æ¡¿åœ¨ IDLE</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f3d16c92-7e28-4b76-c106-458211015c00/public\" alt=\"img\"></p>\n<p>åœ¨ MSFS çš„ FlyByWire ä¸­å¯ä»¥ç”¨æ—é‚Šçš„ FlyPad ç”³è«‹å¾Œæ¨ã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/71f815a8-11e0-4d0b-38a5-2de486a4e000/public\" alt=\"img\"></p>\n<h2>å•Ÿå‹•å¼•æ“</h2>\n<ol>\n<li>ENG MODE selector -> IGN/START\n<ul>\n<li>æŠŠ ENG MODE selector è½‰åˆ°å³é‚Šçš„å•Ÿå‹•å¼•æ“æ¨¡å¼</li>\n</ul>\n</li>\n<li>ENGINE 2 START -> ON\n<ul>\n<li>å•Ÿå‹•å³é‚Šçš„ 2 è™Ÿå¼•æ“</li>\n<li>æˆ‘ä¹Ÿä¸çŸ¥é“ç‚ºç”šéº¼éƒ½æ˜¯å…ˆå•Ÿå‹• 2 è™Ÿå¼•æ“</li>\n<li>ç­‰å¾…ç™¼å‹•å®Œæˆå¾Œå†ç™¼å‹• 1 è™Ÿå¼•æ“</li>\n<li>ç™¼å‹•æ™‚æ‡‰ç›£æ§å¼•æ“æ•¸æ“šï¼Œ19% N1, 68% N2, 520Â°C EGT, 290 kg/h FFï¼Œç­‰å¾… 2 è™Ÿå¼•æ“ AVAIL å­—æ¨£å‡ºç¾</li>\n</ul>\n</li>\n<li>ENGINE 1 START -> ON\n<ul>\n<li>å•Ÿå‹•å·¦é‚Šçš„ 1 è™Ÿå¼•æ“ï¼Œé‡è¤‡ç¬¬ 2 æ­¥ç›´åˆ° 1 è™Ÿå¼•æ“ AVAIL å­—æ¨£å‡ºç¾</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/1e82de0e-18d0-402e-b279-780fe5f6b800/public\" alt=\"img\"></p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d164d67d-9afb-4bd6-2eb9-835d7fe24300/public\" alt=\"img\"></p>\n<h2>å•Ÿå‹•å¼•æ“å¾Œ</h2>\n<ol>\n<li>ENG MODE selectgor -> NORM\n<ul>\n<li>å¼•æ“æ¨¡å¼è½‰å›ä¸­é–“ NORM</li>\n</ul>\n</li>\n<li>APU Bleed -> OFF\n<ul>\n<li>é—œé–‰ APU ä¾›æ°£</li>\n</ul>\n</li>\n<li>APU MASTER -> OFF\n<ul>\n<li>é—œé–‰ APU</li>\n</ul>\n</li>\n<li>FLAPS lever -> SET TAKEOFF POSITION\n<ul>\n<li>æ”¾å‡ºè¥Ÿç¿¼åˆ°èµ·é£›éœ€è¦çš„ä½ç½®</li>\n</ul>\n</li>\n</ol>\n<h2>æ»‘è¡Œ Taxi</h2>\n<ol>\n<li>NOSE Light -> Taxi\n<ul>\n<li>é–‹å•Ÿæ»‘è¡Œç‡ˆ</li>\n</ul>\n</li>\n<li>RWY TURN OFF -> ON\n<ul>\n<li>é–‹å•Ÿè„«é›¢è·‘é“ç‡ˆ (è½‰å½ç‡ˆ)</li>\n</ul>\n</li>\n<li>PARK BRK -> OFF\n<ul>\n<li>é—œé–‰æ‰‹ç…è»Š</li>\n</ul>\n</li>\n<li>AUTO BRK MAX -> ON\n<ul>\n<li>é–‹å•Ÿæœ€å¤§è‡ªå‹•ç…è»Š</li>\n</ul>\n</li>\n</ol>\n<h2>èµ·é£›</h2>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://www.youtube.com/channel/UCDKKDx4mNVI7vONL1vqTx7g\">æ•™å®˜æˆ‘æƒ³é£›</a></li>\n<li><a href=\"https://www.youtube.com/channel/UCOHc8xzWD25Nn-snDBJUMGQ\">æ©Ÿå¸«é˜¿æ¥·</a></li>\n<li><a href=\"https://github.com/flybywiresim/manuals/blob/master/pdf/A32NX%20Documentation/FBW%20A32NX%20Checklist.pdf\">FBW A32NX Checklist.pdf</a></li>\n<li><a href=\"https://github.com/flybywiresim/manuals/blob/master/pdf/A32NX%20Documentation/FBW%20A32NX%20SOP.pdf\">FBW A32NX SOP.pdf</a></li>\n</ul>","rawMarkdownBody":"\nç°¡å–®è¨˜éŒ„æˆ‘æ‰€èªçŸ¥çš„ A320 çš„ä¸€äº›ç¨‹åºã€‚\n\n<!--more-->\n\n> æ³¨æ„é€™äº›éƒ½ä¸æ˜¯æ¨™æº–ç¨‹åºï¼Œåªæ˜¯æˆ‘è‡ªå·±äº‚ç†è§£çš„ï¼Œä¹Ÿçœå»è »å¤šæ­¥é©Ÿï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯èƒ½èµ·è®“é£›æ©Ÿå‹•èµ·ä¾†ï¼Œæ¨™æº–ç¨‹åºè‚¯å®šæ˜¯æ›´è¤‡é›œçš„ã€‚\n\n## å•Ÿå‹•é£›æ©Ÿå‰æª¢æŸ¥\n\n~~æ¨¡æ“¬å™¨ä¸­è·³éé‚„æ˜¯å¯ä»¥é£›~~\n\n1. Engine Master 1 and 2 Switch -> OFF\n   - ä¸»å¼•æ“ 1, 2 éƒ½é—œé–‰\n2. Engine Mode Selector -> NORM\n   - å¼•æ“æ¨¡å¼åœ¨ Normal ä½ç½®\n3. Weather Radar -> OFF\n   - é—œé–‰æ°£è±¡é›·é”\n4. Landing Gear -> Down\n   - æ©Ÿè¼ªæ”¾ä¸‹\n5. Wipers -> Both OFF\n   - å…©å€‹é›¨åˆ·éƒ½é—œé–‰\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/7e29f7e1-bf0b-44d4-7589-29286ed81b00/large)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/ca5109ba-4baf-40e3-850e-ee4002882c00/large)\n\n## å•Ÿå‹•é£›æ©Ÿ\n\n1. Batt 1 and 2 -> ON\n2. EXT Power -> ON\n   - å•Ÿå‹•å¤–éƒ¨é›»æº\n   - é€™æ™‚æ‡‰è©²å¯ä»¥çœ‹åˆ°æ‰€æœ‰å„€è¡¨äº®èµ·\n3. APU Fire Test\n   - APU æ»…ç«æ¸¬è©¦\n4. APU Master and wait 3 sec -> ON\n   - æ‰“é–‹ APU ä¸»é–‹é—œï¼Œä¸¦ç­‰å¾… 3 ç§’\n5. APU START -> ON\n   - ç™¼å‹• APU\n6. Wait for APU START -> Green \"AVAIL\"\n   - ç­‰ APU ç™¼å‹•å®Œæˆ\n7. APU BLEED -> ON\n   - é–‹å•Ÿ APU ä¾›çµ¦æ°£å£“\n8. EXT Power -> OFF\n   - ç§»é™¤å¤–éƒ¨é›»æº\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/bcc428a6-c065-4bc3-0d19-ad204b860700/large)\n\n## Overhead Panel ä¸Šæ–¹å„€è¡¨\n\nåŸºæœ¬ä¸Šï¼Œç”±å·¦è‡³å³ï¼Œç”±ä¸‹è€Œä¸Šçš„æª¢æŸ¥\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/4aa17d2f-419c-40e6-09f8-e31ca2833a00/large)\n\n### å·¦é‚Šé‚£æ’\n\n1. CREW SUPPLY -> ON\n   - æ‰“é–‹çµ„å“¡æ°§æ°£ä¾›çµ¦\n2. ADIRS 1, 2, 3 -> NAV\n   - é–‹å•Ÿä¸‰å€‹æ…£æ€§å°èˆªï¼Œéœ€ç­‰å¾… 6-7 åˆ†é˜æ ¡æº–\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/b25f2e34-5ff9-4534-4fc2-927961a5ce00/large)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/16fb299e-1847-4767-8093-aa0d058cd400/large)\n\n### ä¸­é–“é‚£æ’\n\n1. NAV & LOGO Light -> ON\n2. OVHD INTEG LT -> AS REQ.\n3. DOME LT -> AS REQ.\n4. ANN LT TEST\n5. EMER EXIT LT -> ARM\n6. SEAT BELTS -> ON\n7. NO SMOKING -> ON\n8. ALL PUMP -> ON\n9. ENG 1 FIRE TEST\n10. ENG 2 FIRE TEST\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/e5f05a70-bc36-4bc3-fff2-61f413e6b900/large)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/613ca5d3-3519-4c5d-cb82-4f9371e1d500/large)\n\n### å³é‚Šé‚£æ’\n\nåŸºæœ¬ä¸Šä¸ç”¨å‹•\n\n## MCDU é£›è¡Œé›»è…¦\n\nåœ¨ç­‰å¾…å°èˆªæ ¡æº–æ™‚ï¼Œä¾†è¨­å®šé£›è¡Œé›»è…¦ã€‚è¨­å®šé£›è¡Œé›»è…¦æœ‰ä¸€å€‹å£è¨£ï¼š\n\n> D > I > F > S > R > I > P > P\n\n- DATA\n- INIT A\n- F-PLN\n- SEC PLAN\n- RAD NAV\n- INIT B\n- PREF\n- PROG\n\n> é£›è¡Œé›»è…¦è¨­å®šè »è¤‡é›œçš„ï¼Œæœ¬æ–‡å°±å…ˆè·³éè©³ç´°æ­¥é©Ÿï¼Œå°ˆæ³¨åœ¨å†·æ“åˆ°èµ·é£›ã€‚\n\n## å¾Œæ¨ and å•Ÿå‹•å¼•æ“å‰æª¢æŸ¥\n\nè¨˜å¾—ç­‰ IRS æ ¡æº–å®Œå¾Œå†å¾Œæ¨ã€‚\n\n1. ç”³è«‹å¾Œæ¨\n2. BECON Light -> ON\n   - å•Ÿå‹• BECAON ç‡ˆ\n3. Trust Levers -> IDLE\n   - ç¢ºå®šæ¨åŠ›æ¡¿åœ¨ IDLE\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f3d16c92-7e28-4b76-c106-458211015c00/public)\n\nåœ¨ MSFS çš„ FlyByWire ä¸­å¯ä»¥ç”¨æ—é‚Šçš„ FlyPad ç”³è«‹å¾Œæ¨ã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/71f815a8-11e0-4d0b-38a5-2de486a4e000/public)\n\n## å•Ÿå‹•å¼•æ“\n\n1. ENG MODE selector -> IGN/START\n   - æŠŠ ENG MODE selector è½‰åˆ°å³é‚Šçš„å•Ÿå‹•å¼•æ“æ¨¡å¼\n2. ENGINE 2 START -> ON\n   - å•Ÿå‹•å³é‚Šçš„ 2 è™Ÿå¼•æ“\n   - æˆ‘ä¹Ÿä¸çŸ¥é“ç‚ºç”šéº¼éƒ½æ˜¯å…ˆå•Ÿå‹• 2 è™Ÿå¼•æ“\n   - ç­‰å¾…ç™¼å‹•å®Œæˆå¾Œå†ç™¼å‹• 1 è™Ÿå¼•æ“\n   - ç™¼å‹•æ™‚æ‡‰ç›£æ§å¼•æ“æ•¸æ“šï¼Œ19% N1, 68% N2, 520Â°C EGT, 290 kg/h FFï¼Œç­‰å¾… 2 è™Ÿå¼•æ“ AVAIL å­—æ¨£å‡ºç¾\n3. ENGINE 1 START -> ON\n   - å•Ÿå‹•å·¦é‚Šçš„ 1 è™Ÿå¼•æ“ï¼Œé‡è¤‡ç¬¬ 2 æ­¥ç›´åˆ° 1 è™Ÿå¼•æ“ AVAIL å­—æ¨£å‡ºç¾\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/1e82de0e-18d0-402e-b279-780fe5f6b800/public)\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d164d67d-9afb-4bd6-2eb9-835d7fe24300/public)\n\n## å•Ÿå‹•å¼•æ“å¾Œ\n\n1. ENG MODE selectgor -> NORM\n   - å¼•æ“æ¨¡å¼è½‰å›ä¸­é–“ NORM\n2. APU Bleed -> OFF\n   - é—œé–‰ APU ä¾›æ°£\n3. APU MASTER -> OFF\n   - é—œé–‰ APU\n4. FLAPS lever -> SET TAKEOFF POSITION\n   - æ”¾å‡ºè¥Ÿç¿¼åˆ°èµ·é£›éœ€è¦çš„ä½ç½®\n\n## æ»‘è¡Œ Taxi\n\n1. NOSE Light -> Taxi\n   - é–‹å•Ÿæ»‘è¡Œç‡ˆ\n2. RWY TURN OFF -> ON\n   - é–‹å•Ÿè„«é›¢è·‘é“ç‡ˆ (è½‰å½ç‡ˆ)\n3. PARK BRK -> OFF\n   - é—œé–‰æ‰‹ç…è»Š\n4. AUTO BRK MAX -> ON\n   - é–‹å•Ÿæœ€å¤§è‡ªå‹•ç…è»Š\n\n## èµ·é£›\n\n## Reference\n\n- [æ•™å®˜æˆ‘æƒ³é£›](https://www.youtube.com/channel/UCDKKDx4mNVI7vONL1vqTx7g)\n- [æ©Ÿå¸«é˜¿æ¥·](https://www.youtube.com/channel/UCOHc8xzWD25Nn-snDBJUMGQ)\n- [FBW A32NX Checklist.pdf](https://github.com/flybywiresim/manuals/blob/master/pdf/A32NX%20Documentation/FBW%20A32NX%20Checklist.pdf)\n- [FBW A32NX SOP.pdf](https://github.com/flybywiresim/manuals/blob/master/pdf/A32NX%20Documentation/FBW%20A32NX%20SOP.pdf)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Flight/A320 Note.md","excerpt":"ç°¡å–®è¨˜éŒ„æˆ‘æ‰€èªçŸ¥çš„ A320 çš„ä¸€äº›ç¨‹åºã€‚ æ³¨æ„é€™äº›éƒ½ä¸æ˜¯æ¨™æº–ç¨‹åºï¼Œåªæ˜¯æˆ‘è‡ªå·±äº‚ç†è§£çš„ï¼Œä¹Ÿçœå»è »å¤šæ­¥é©Ÿï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯èƒ½èµ·è®“é£›æ©Ÿå‹•èµ·ä¾†ï¼Œæ¨™æº–ç¨‹åºè‚¯å®šæ˜¯æ›´è¤‡é›œçš„ã€‚ å•Ÿå‹•é£›æ©Ÿå‰æª¢æŸ¥ æ¨¡æ“¬å™¨ä¸­è·³éé‚„æ˜¯å¯ä»¥é£› Engine Master 1 and 2 Switch -> OFF ä¸»å¼•æ“ 1, 2 éƒ½é—œé–‰ Engine Mode Selector -> NORM å¼•æ“æ¨¡å¼åœ¨ Normal ä½ç½® Weatheâ€¦","frontmatter":{"title":"A320neo å†·è‰™åˆ°é£›è¡Œ","date":"2021-07-21T14:08:20.000Z","draft":false,"tags":["a320neo","airbus","msfs"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/06a43a08-dc77-48eb-9f4a-f47a29566900/public","description":"ç°¡å–®è¨˜éŒ„æˆ‘æ‰€èªçŸ¥çš„ A320 çš„ä¸€äº›ç¨‹åºã€‚"}}},{"node":{"id":"e1f2136a-0c65-5dce-bf47-743229e64ad2","html":"<p>æ‰“ä¸è´åˆ¥äººï¼Œè‡³å°‘é•·å¾—æ¯”ä»–å¸¥ã€‚æœ€è¿‘çµ‚æ–¼æŠŠæˆ‘çš„ Terminal å¼„æˆè‡ªå·±å–œæ­¡çš„æ¨£å­ï¼Œæ‰€ä»¥åšä¸€ä¸‹ç°¡å–®çš„ç´€éŒ„ï¼Œå¸Œæœ›å¤§å®¶éƒ½å¯ä»¥æŠŠæ±è¥¿è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨£å­ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210716235146.png\" alt=\"img\"></p>\n<!--more-->\n<p>æˆ‘å€‘ä»Šå¤©ä¸»è¦æœƒç”¨åˆ°ä¸‹é¢çš„å¹¾æ¨£æŠ€è¡“ï¼š</p>\n<ol>\n<li><a href=\"https://zsh.sourceforge.io/\">zsh</a></li>\n<li><a href=\"https://github.com/romkatv/powerlevel10k\">powerlevel10K</a></li>\n<li><a href=\"https://zimfw.sh/#install\">zim</a></li>\n<li><a href=\"https://www.nerdfonts.com/\">Nerd Fonts</a></li>\n</ol>\n<p>çœ‹åˆ°é€™å¹¾é …æŠ€è¡“å…¶å¯¦å¯ä»¥è‡ªå·±å…ˆå»ç ”ç©¶ä¸€ä¸‹ï¼Œçœ‹çœ‹é€™äº›æŠ€è¡“æ˜¯ä¸æ˜¯è‡ªå·±éœ€è¦çš„ï¼Œä»¥å…äº‚è£ä¸€å †æ±è¥¿ï¼Œæçš„è‡ªå·± Terminal äº‚ä¸ƒå…«ç³Ÿç„¡æ³•å¾©åŸã€‚å¦å¤–ï¼ŒWindows æ‡‰è©²æ˜¯ç„¡æ³•å®‰è£çš„ï¼Œè‡³å°‘æˆ‘è‡ªå·±æ˜¯æ²’è¾¦æ³•ï¼Œä¸é WSL å€’æ˜¯å¯ä»¥ç©æˆé€™æ¨£ï¼Œç•¢ç«Ÿå°±æ˜¯ Linux éº»ã€‚</p>\n<p>å¾ˆå¤šäººæœƒæ¨è–¦åœ¨ mac ä¸Šå®‰è£ iTermï¼Œæˆ‘è‡ªå·±æ˜¯æ²’è£ï¼Œæˆ‘è¦ºå¾— mac å…§å»ºçš„ Terminal è¶³å¤ å¥½ç”¨ï¼Œæ²’å¿…è¦å®‰è£å…¶ä»– Terminalã€‚</p>\n<h2>Font</h2>\n<p>å¥½çœ‹çš„ç¬¬ä¸€æ­¥å°±æ˜¯æœ‰å¥½çœ‹çš„å­—é«”ï¼Œ<a href=\"https://www.nerdfonts.com/\">Nerd Fonts</a> é€™å€‹å°ˆæ¡ˆæŠŠä¸€äº›é–‹ç™¼è€…å¸¸ç”¨çš„å­—é«”ï¼ŒåŠ ä¸Šä¸€äº›åœ¨ Terminal ä¸­æœƒç”¨åˆ°çš„ä¸€äº› icon å’Œ symbolï¼Œå¸¸è¦‹çš„ <code class=\"language-text\">Hack</code>ã€<code class=\"language-text\">Jetbrains Mono</code> éƒ½æœ‰åœ¨é€™å€‹å°ˆæ¡ˆè£¡ã€‚åˆ° Nerd Fonts çš„å®˜ç¶²å¯ä»¥ä¸‹è¼‰åˆ°é€™äº›å­—é«”ï¼Œæ³¨æ„ä¸è¦åˆ°å­—é«”å€‘åŸæœ¬çš„ç®¡ç¶²ä¸‹è¼‰ï¼Œè¦åˆ° Nerd Fonts ä¸‹è¼‰åŒ…å«ç‰¹æ®Šç¬¦è™Ÿçš„å­—é«”ã€‚</p>\n<p><img src=\"https://www.nerdfonts.com/assets/img/sankey-glyphs-combined-diagram.png\" alt=\"img\"></p>\n<p>ä¸‹è¼‰å®‰è£å¥½å­—é«”å¾Œï¼Œè¨˜å¾—åˆ°è‡ªå·±çš„ Terminal ä¸­è®Šæ›´å­—é«”ï¼Œé¸æ“‡æœ‰åŒ…å« Nerd çš„å­—é«”ï¼Œä»¥å…ç­‰ç­‰å­—é«”éƒ½ç„¡æ³•é¡¯ç¤ºï¼Œé€™éƒ¨åˆ†æ•™å­¸æˆ‘æ‡¶å¾—å¯«ï¼Œæ‰€ä»¥é™„ä¸€å¼µåœ–ï¼š</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717112205.png\" alt=\"img\"></p>\n<h2>zsh</h2>\n<p>zsh å¯ä»¥èªªæ˜¯ bash çš„é€²éšç‰ˆï¼Œæä¾›å®¢è£½åŒ–è‡ªå·±åœ¨ Terminal ä¸­æƒ³è¦çš„ä¸»é¡Œå’ŒåŠŸèƒ½ã€‚è¦å®‰è£ zsh é€šå¸¸å„å€‹ç³»çµ±éƒ½ä¸ä¸€æ¨£ï¼Œè‡ªå·±ä¸Šç¶²æ ¹æ“šç³»çµ±å®‰è£å³å¯ã€‚å®‰è£å®Œæˆå¾Œä¹Ÿè¦å°‡é è¨­ shell æ”¹æˆ zshã€‚</p>\n<p>ubuntu:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">zsh</span>\nchsh -s /bin/zsh <span class=\"token variable\">$USRR</span></code></pre></div>\n<h2>powerlevel10k</h2>\n<p>powerlevel10k æ˜¯ä¸€å€‹ zsh ä¸»é¡Œï¼Œæä¾›å¯é«˜å®¢è£½åŒ–çš„ä¸»é¡Œå’Œå®¢è£½åŒ–åš®å°ï¼Œå¯ä»¥ç°¡å–®åœ°å°±æŠŠ Terminal è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨¡æ¨£ï¼Œä¹Ÿæ˜¯æœ¬æ–‡æœ€é‡è¦çš„éƒ¨åˆ†ã€‚powerlevel10k æä¾›è¨±å¤šå®‰è£æ–¹æ³•ï¼Œå¯ä»¥é€é oh-my-zshï¼Œä¹Ÿå¯ä»¥ç”¨è…³æœ¬å®‰è£ï¼Œæˆ‘æ˜¯èªç‚ºç”¨è…³æœ¬å®‰è£å°±å¥½ï¼Œå¯ä»¥ä¸ç”¨ç”¨åˆ° oh-my-zshï¼Œå› æˆ‘å€‘ä¹‹å¾Œæœƒæåˆ° zim å°±æä¾›è¨±å¤šå¯ä»¥æ›¿ä»£ oh-my-zsh çš„åŠŸèƒ½ã€‚</p>\n<p>ç”¨è…³æœ¬å®‰è£ powerlevel10kï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone --depth<span class=\"token operator\">=</span><span class=\"token number\">1</span> https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'source ~/powerlevel10k/powerlevel10k.zsh-theme'</span> <span class=\"token operator\">>></span>~/.zshrc</code></pre></div>\n<p>å®‰è£æ–¹å¼å¯èƒ½æœƒå› ç‰ˆæœ¬è®Šå‹•è€Œä¸ä¸€æ¨£ï¼Œå»ºè­°é‚„æ˜¯åˆ°å®˜æ–¹ Github ä¸Šçœ‹ä¸€ä¸‹å®‰è£æ–¹å¼ã€‚</p>\n<p>å®‰è£å®Œæˆå¾Œç¬¬ä¸€æ¬¡é€²åˆ° Terminal æœƒé‡åˆ°ä¸€å€‹å®‰è£åš®å°ï¼Œå¯ä»¥æ ¹æ“šè‡ªå·±å–œå¥½è¨­å®šä¸»é¡Œæ¨£å¼ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717214526.gif\" alt=\"img\"></p>\n<p>å®Œæˆåˆ°é€™è£¡ï¼ŒTerminal æ‡‰è©²å·²ç¶“è®Šå¾—ç¾ç¾çš„ï¼Œå¦‚æœé‡åˆ°äº‚ç¢¼ï¼Œå¯èƒ½æ˜¯å­—å‹æ²’æœ‰èª¿æ•´å¥½ã€‚</p>\n<p>powerlevel10k æœƒæä¾›ä¸€å€‹ <code class=\"language-text\">p10k</code> çš„å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ–¼é‡æ–°å•Ÿå‹•åš®å°ï¼š</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717174430.png\" alt=\"img\"></p>\n<h2>Zim</h2>\n<p>å…¨å Zsh IMproved FrameWorkï¼Œä¸»è¦æ˜¯æä¾›ä¸€äº›æ–¹ä¾¿çš„ zsh pluginï¼Œåƒæ˜¯è‡ªå‹•è£œå…¨ã€èªæ³•é«˜äº®ç­‰ï¼Œå¦‚æœæ˜¯å¸Œæœ›å¥½çœ‹ï¼Œä¸ç”¨å¥½ç”¨ï¼ŒZim å°±å¯ä»¥ä¸ç”¨å®‰è£ã€‚</p>\n<p>å®‰è£ Zim ä¹Ÿå¾ˆç°¡å–®ï¼Œåªè¦ Run ä¸‹é¢çš„è…³æœ¬å°±å¯ä»¥ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh <span class=\"token operator\">|</span> <span class=\"token function\">zsh</span></code></pre></div>\n<p>åˆ°é€™å°±ç®—æ˜¯å…¨éƒ¨å®Œæˆï¼Œå¦‚æœæœ‰ç™¼ç¾æ›´å¤šå¥½ç”¨çš„ Terminal å·¥å…·ï¼Œè¨˜å¾—åˆ†äº«çµ¦æˆ‘ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://zsh.sourceforge.io/\">zsh</a></li>\n<li><a href=\"https://github.com/romkatv/powerlevel10k\">powerlevel10K</a></li>\n<li><a href=\"https://zimfw.sh/#install\">zim</a></li>\n<li><a href=\"https://www.nerdfonts.com/\">Nerd Fonts</a></li>\n</ul>","rawMarkdownBody":"\næ‰“ä¸è´åˆ¥äººï¼Œè‡³å°‘é•·å¾—æ¯”ä»–å¸¥ã€‚æœ€è¿‘çµ‚æ–¼æŠŠæˆ‘çš„ Terminal å¼„æˆè‡ªå·±å–œæ­¡çš„æ¨£å­ï¼Œæ‰€ä»¥åšä¸€ä¸‹ç°¡å–®çš„ç´€éŒ„ï¼Œå¸Œæœ›å¤§å®¶éƒ½å¯ä»¥æŠŠæ±è¥¿è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨£å­ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210716235146.png)\n\n<!--more-->\n\næˆ‘å€‘ä»Šå¤©ä¸»è¦æœƒç”¨åˆ°ä¸‹é¢çš„å¹¾æ¨£æŠ€è¡“ï¼š\n\n1. [zsh](https://zsh.sourceforge.io/)\n2. [powerlevel10K](https://github.com/romkatv/powerlevel10k)\n3. [zim](https://zimfw.sh/#install)\n4. [Nerd Fonts](https://www.nerdfonts.com/)\n\nçœ‹åˆ°é€™å¹¾é …æŠ€è¡“å…¶å¯¦å¯ä»¥è‡ªå·±å…ˆå»ç ”ç©¶ä¸€ä¸‹ï¼Œçœ‹çœ‹é€™äº›æŠ€è¡“æ˜¯ä¸æ˜¯è‡ªå·±éœ€è¦çš„ï¼Œä»¥å…äº‚è£ä¸€å †æ±è¥¿ï¼Œæçš„è‡ªå·± Terminal äº‚ä¸ƒå…«ç³Ÿç„¡æ³•å¾©åŸã€‚å¦å¤–ï¼ŒWindows æ‡‰è©²æ˜¯ç„¡æ³•å®‰è£çš„ï¼Œè‡³å°‘æˆ‘è‡ªå·±æ˜¯æ²’è¾¦æ³•ï¼Œä¸é WSL å€’æ˜¯å¯ä»¥ç©æˆé€™æ¨£ï¼Œç•¢ç«Ÿå°±æ˜¯ Linux éº»ã€‚\n\nå¾ˆå¤šäººæœƒæ¨è–¦åœ¨ mac ä¸Šå®‰è£ iTermï¼Œæˆ‘è‡ªå·±æ˜¯æ²’è£ï¼Œæˆ‘è¦ºå¾— mac å…§å»ºçš„ Terminal è¶³å¤ å¥½ç”¨ï¼Œæ²’å¿…è¦å®‰è£å…¶ä»– Terminalã€‚\n\n## Font\n\nå¥½çœ‹çš„ç¬¬ä¸€æ­¥å°±æ˜¯æœ‰å¥½çœ‹çš„å­—é«”ï¼Œ[Nerd Fonts](https://www.nerdfonts.com/) é€™å€‹å°ˆæ¡ˆæŠŠä¸€äº›é–‹ç™¼è€…å¸¸ç”¨çš„å­—é«”ï¼ŒåŠ ä¸Šä¸€äº›åœ¨ Terminal ä¸­æœƒç”¨åˆ°çš„ä¸€äº› icon å’Œ symbolï¼Œå¸¸è¦‹çš„ `Hack`ã€`Jetbrains Mono` éƒ½æœ‰åœ¨é€™å€‹å°ˆæ¡ˆè£¡ã€‚åˆ° Nerd Fonts çš„å®˜ç¶²å¯ä»¥ä¸‹è¼‰åˆ°é€™äº›å­—é«”ï¼Œæ³¨æ„ä¸è¦åˆ°å­—é«”å€‘åŸæœ¬çš„ç®¡ç¶²ä¸‹è¼‰ï¼Œè¦åˆ° Nerd Fonts ä¸‹è¼‰åŒ…å«ç‰¹æ®Šç¬¦è™Ÿçš„å­—é«”ã€‚\n\n![img](https://www.nerdfonts.com/assets/img/sankey-glyphs-combined-diagram.png)\n\nä¸‹è¼‰å®‰è£å¥½å­—é«”å¾Œï¼Œè¨˜å¾—åˆ°è‡ªå·±çš„ Terminal ä¸­è®Šæ›´å­—é«”ï¼Œé¸æ“‡æœ‰åŒ…å« Nerd çš„å­—é«”ï¼Œä»¥å…ç­‰ç­‰å­—é«”éƒ½ç„¡æ³•é¡¯ç¤ºï¼Œé€™éƒ¨åˆ†æ•™å­¸æˆ‘æ‡¶å¾—å¯«ï¼Œæ‰€ä»¥é™„ä¸€å¼µåœ–ï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717112205.png)\n\n## zsh\n\nzsh å¯ä»¥èªªæ˜¯ bash çš„é€²éšç‰ˆï¼Œæä¾›å®¢è£½åŒ–è‡ªå·±åœ¨ Terminal ä¸­æƒ³è¦çš„ä¸»é¡Œå’ŒåŠŸèƒ½ã€‚è¦å®‰è£ zsh é€šå¸¸å„å€‹ç³»çµ±éƒ½ä¸ä¸€æ¨£ï¼Œè‡ªå·±ä¸Šç¶²æ ¹æ“šç³»çµ±å®‰è£å³å¯ã€‚å®‰è£å®Œæˆå¾Œä¹Ÿè¦å°‡é è¨­ shell æ”¹æˆ zshã€‚\n\nubuntu:\n\n```bash\nsudo apt install zsh\nchsh -s /bin/zsh $USRR\n```\n\n## powerlevel10k\n\npowerlevel10k æ˜¯ä¸€å€‹ zsh ä¸»é¡Œï¼Œæä¾›å¯é«˜å®¢è£½åŒ–çš„ä¸»é¡Œå’Œå®¢è£½åŒ–åš®å°ï¼Œå¯ä»¥ç°¡å–®åœ°å°±æŠŠ Terminal è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨¡æ¨£ï¼Œä¹Ÿæ˜¯æœ¬æ–‡æœ€é‡è¦çš„éƒ¨åˆ†ã€‚powerlevel10k æä¾›è¨±å¤šå®‰è£æ–¹æ³•ï¼Œå¯ä»¥é€é oh-my-zshï¼Œä¹Ÿå¯ä»¥ç”¨è…³æœ¬å®‰è£ï¼Œæˆ‘æ˜¯èªç‚ºç”¨è…³æœ¬å®‰è£å°±å¥½ï¼Œå¯ä»¥ä¸ç”¨ç”¨åˆ° oh-my-zshï¼Œå› æˆ‘å€‘ä¹‹å¾Œæœƒæåˆ° zim å°±æä¾›è¨±å¤šå¯ä»¥æ›¿ä»£ oh-my-zsh çš„åŠŸèƒ½ã€‚\n\nç”¨è…³æœ¬å®‰è£ powerlevel10kï¼š\n\n```bash\ngit clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k\necho 'source ~/powerlevel10k/powerlevel10k.zsh-theme' >>~/.zshrc\n```\n\nå®‰è£æ–¹å¼å¯èƒ½æœƒå› ç‰ˆæœ¬è®Šå‹•è€Œä¸ä¸€æ¨£ï¼Œå»ºè­°é‚„æ˜¯åˆ°å®˜æ–¹ Github ä¸Šçœ‹ä¸€ä¸‹å®‰è£æ–¹å¼ã€‚\n\nå®‰è£å®Œæˆå¾Œç¬¬ä¸€æ¬¡é€²åˆ° Terminal æœƒé‡åˆ°ä¸€å€‹å®‰è£åš®å°ï¼Œå¯ä»¥æ ¹æ“šè‡ªå·±å–œå¥½è¨­å®šä¸»é¡Œæ¨£å¼ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717214526.gif)\n\nå®Œæˆåˆ°é€™è£¡ï¼ŒTerminal æ‡‰è©²å·²ç¶“è®Šå¾—ç¾ç¾çš„ï¼Œå¦‚æœé‡åˆ°äº‚ç¢¼ï¼Œå¯èƒ½æ˜¯å­—å‹æ²’æœ‰èª¿æ•´å¥½ã€‚\n\npowerlevel10k æœƒæä¾›ä¸€å€‹ `p10k` çš„å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ–¼é‡æ–°å•Ÿå‹•åš®å°ï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717174430.png)\n\n## Zim\n\nå…¨å Zsh IMproved FrameWorkï¼Œä¸»è¦æ˜¯æä¾›ä¸€äº›æ–¹ä¾¿çš„ zsh pluginï¼Œåƒæ˜¯è‡ªå‹•è£œå…¨ã€èªæ³•é«˜äº®ç­‰ï¼Œå¦‚æœæ˜¯å¸Œæœ›å¥½çœ‹ï¼Œä¸ç”¨å¥½ç”¨ï¼ŒZim å°±å¯ä»¥ä¸ç”¨å®‰è£ã€‚\n\nå®‰è£ Zim ä¹Ÿå¾ˆç°¡å–®ï¼Œåªè¦ Run ä¸‹é¢çš„è…³æœ¬å°±å¯ä»¥ï¼š\n\n```bash\ncurl -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh | zsh\n```\n\nåˆ°é€™å°±ç®—æ˜¯å…¨éƒ¨å®Œæˆï¼Œå¦‚æœæœ‰ç™¼ç¾æ›´å¤šå¥½ç”¨çš„ Terminal å·¥å…·ï¼Œè¨˜å¾—åˆ†äº«çµ¦æˆ‘ã€‚\n\n## Reference\n\n- [zsh](https://zsh.sourceforge.io/)\n- [powerlevel10K](https://github.com/romkatv/powerlevel10k)\n- [zim](https://zimfw.sh/#install)\n- [Nerd Fonts](https://www.nerdfonts.com/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Linux/Beautiful Terminal.md","excerpt":"æ‰“ä¸è´åˆ¥äººï¼Œè‡³å°‘é•·å¾—æ¯”ä»–å¸¥ã€‚æœ€è¿‘çµ‚æ–¼æŠŠæˆ‘çš„ Terminal å¼„æˆè‡ªå·±å–œæ­¡çš„æ¨£å­ï¼Œæ‰€ä»¥åšä¸€ä¸‹ç°¡å–®çš„ç´€éŒ„ï¼Œå¸Œæœ›å¤§å®¶éƒ½å¯ä»¥æŠŠæ±è¥¿è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨£å­ã€‚ img æˆ‘å€‘ä»Šå¤©ä¸»è¦æœƒç”¨åˆ°ä¸‹é¢çš„å¹¾æ¨£æŠ€è¡“ï¼š zsh powerlevel10K zim Nerd Fonts çœ‹åˆ°é€™å¹¾é …æŠ€è¡“å…¶å¯¦å¯ä»¥è‡ªå·±å…ˆå»ç ”ç©¶ä¸€ä¸‹ï¼Œçœ‹çœ‹é€™äº›æŠ€è¡“æ˜¯ä¸æ˜¯è‡ªå·±éœ€è¦çš„ï¼Œä»¥å…äº‚è£ä¸€å †æ±è¥¿ï¼Œæçš„è‡ªå·± Terminal äº‚ä¸ƒå…«ç³Ÿç„¡æ³•å¾©åŸã€‚å¦å¤–ï¼ŒWâ€¦","frontmatter":{"title":"Beautiful Terminal","date":"2021-07-16T15:43:07.000Z","draft":false,"tags":["terminl","zsh","zim","powerlevel","powerlevel10k","nerd-font","ubuntu","mac"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/939d8b79-aeab-465b-8bc7-fcf3cc4def00/public","description":"æ‰“ä¸è´åˆ¥äººï¼Œè‡³å°‘é•·å¾—æ¯”ä»–å¸¥ã€‚æœ€è¿‘çµ‚æ–¼æŠŠæˆ‘çš„ Terminal å¼„æˆè‡ªå·±å–œæ­¡çš„æ¨£å­ï¼Œæ‰€ä»¥åšä¸€ä¸‹ç°¡å–®çš„ç´€éŒ„ï¼Œå¸Œæœ›å¤§å®¶éƒ½å¯ä»¥æŠŠæ±è¥¿è®Šæˆè‡ªå·±å–œæ­¡çš„æ¨£å­ã€‚"}}},{"node":{"id":"01f03396-06dd-573b-95a5-793a7fd2bc95","html":"<p>Markdown å¯ä»¥æƒ³åƒæˆ Html çš„ç°¡åŒ–ç‰ˆæœ¬ï¼Œå»£æ³›ç”¨æ–¼ç·¨å¯«æ–‡ç« æˆ–æ˜¯æŠ€è¡“æ–‡ä»¶ï¼Œå› ç‚ºå…¶ç‰¹æ€§åŸºæœ¬ä¸Šç”± Html ç°¡åŒ–è€Œä¾†ï¼Œæ‰€ä»¥æ–¹ä¾¿çš„ç”±å¯«å¥½çš„ Markdown ç”¢ç”Ÿ Html ç¶²é ï¼Œåƒæ˜¯é€™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ç”± Markdown ç·¨å¯«ã€‚</p>\n<!--more-->\n<p>æˆ‘å€‘ä¾†çœ‹çœ‹ <a href=\"https://github.com/apple/swift\">Swift</a> çš„å®˜ç¶²ï¼Œå¯ä»¥ç™¼ç¾ <code class=\"language-text\">[README.md](http://readme.md)</code> é€™å€‹æª”æ¡ˆå°±æ˜¯ç”± Markdown ç·¨å¯«ï¼ŒGithub ä¹Ÿæœƒè‡ªå‹•å°‡é€™å€‹æª”æ¡ˆæ¸²æŸ“åœ¨ç¶²é ä¸‹æ–¹ã€‚åˆ°é€™è£¡å¯ä»¥ç™¼ç¾ï¼Œåœ¨ Github ä¸Šçš„æ‰€æœ‰é–‹æºå°ˆæ¡ˆçš„æ–‡ä»¶ï¼Œå¹¾ä¹éƒ½æ˜¯ç”± Markdown ç·¨å¯«ã€‚</p>\n<h2>å“²å­¸</h2>\n<p>å¼•è¿°è‡ª <a href=\"https://markdown.tw\">https://markdown.tw</a></p>\n<blockquote>\n<p>Markdown çš„ç›®æ¨™æ˜¯å¯¦ç¾ã€Œæ˜“è®€æ˜“å¯«ã€ã€‚<br>\nä¸éæœ€éœ€è¦å¼·èª¿çš„ä¾¿æ˜¯å®ƒçš„å¯è®€æ€§ã€‚ä¸€ä»½ä½¿ç”¨ Markdown æ ¼å¼æ’°å¯«çš„æ–‡ä»¶æ‡‰è©²å¯ä»¥ç›´æ¥ä»¥ç´”æ–‡å­—ç™¼ä½ˆï¼Œä¸¦ä¸”çœ‹èµ·ä¾†ä¸æœƒåƒæ˜¯ç”±è¨±å¤šæ¨™ç±¤æˆ–æ˜¯æ ¼å¼æŒ‡ä»¤æ‰€æ§‹æˆã€‚Markdown èªæ³•å—åˆ°ä¸€äº›æ—¢æœ‰ text-to-HTML æ ¼å¼çš„å½±éŸ¿ï¼ŒåŒ…æ‹¬ Setextã€atxã€Textileã€reStructuredTextã€Grutatext å’Œ EtTextï¼Œç„¶è€Œæœ€å¤§éˆæ„Ÿä¾†æºå…¶å¯¦æ˜¯ç´”æ–‡å­—çš„é›»å­éƒµä»¶æ ¼å¼ã€‚<br>\nå› æ­¤ Markdown çš„èªæ³•å…¨ç”±æ¨™é»ç¬¦è™Ÿæ‰€çµ„æˆï¼Œä¸¦ç¶“éåš´è¬¹æ…é¸ï¼Œæ˜¯ç‚ºäº†è®“å®ƒå€‘çœ‹èµ·ä¾†å°±åƒæ‰€è¦è¡¨é”çš„æ„æ€ã€‚åƒæ˜¯åœ¨æ–‡å­—å…©æ—åŠ ä¸Šæ˜Ÿè™Ÿï¼Œçœ‹èµ·ä¾†å°±åƒ<em>å¼·èª¿</em>ã€‚Markdown çš„æ¸…å–®çœ‹èµ·ä¾†ï¼Œå—¯ï¼Œå°±æ˜¯æ¸…å–®ã€‚å‡å¦‚ä½ æœ‰ä½¿ç”¨éé›»å­éƒµä»¶ï¼Œå€å¡Šå¼•è¨€çœ‹èµ·ä¾†å°±çœŸçš„åƒæ˜¯å¼•ç”¨ä¸€æ®µæ–‡å­—ã€‚</p>\n</blockquote>\n<h2>Tools</h2>\n<p>Q: é‚£è¦ç”¨ä»€éº¼ä¾†å¯«å‘¢ï¼Ÿ</p>\n<p>å› ç‚º Markdown åŸºæœ¬ä¸Šä¹Ÿæ˜¯ç´”æ–‡å­—æª”æ¡ˆï¼Œæ‰€ä»¥åªè¦æ˜¯æ–‡å­—ç·¨è¼¯å™¨éƒ½å¯ä»¥ç·¨è¼¯ï¼Œä½ è¦ç”¨ txt ä¾†å¯«ä¹Ÿæ˜¯å€‹ä¸éŒ¯çš„æ–¹æ³• â¤ï¸ã€‚</p>\n<h3>VSCode</h3>\n<p>ç›®å‰æœ€æ¨è–¦çš„å°±æ˜¯å·¥ç¨‹å¸«çš„å¥½å¤¥ä¼´ <code class=\"language-text\">VSCode</code> ï¼ŒVSCode åœ¨å¯« Markdown æ™‚ï¼Œæœ‰æä¾›å³æ™‚æ¸²æŸ“ï¼Œå¯ä»¥å¿«é€Ÿçš„çœ‹åˆ°çµæœï¼Œè€Œä¸” VSCode æ‡‰è©²åœ¨å„ä½å·¥ç¨‹å¸«çš„é›»è…¦è£¡éƒ½æ‡‰è©²æœ‰å®‰è£æ‰å°ã€‚</p>\n<h3>HackMD</h3>\n<p>HackMD æ˜¯ä¸€å€‹åœ¨ç¶²é ä¸­çš„ Markdown ç·¨è¼¯å™¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ç¶²é ä¸­ç·¨è¼¯å’Œçœ‹åˆ°ç·¨å¯«çš„çµæœï¼ŒHackMD æœ€å²å®³çš„åŠŸèƒ½æ˜¯å¯ä»¥å°‡ Markdown è½‰æ›æˆç°¡å ±ï¼Œç”¨ Markdown å–ä»£ PowerPointï¼Ÿé€™å¤ å¸¥å§ï¼</p>\n<h3>MarkText</h3>\n<p>é€™æ˜¯ä¸€å€‹åœ¨ <a href=\"https://github.com/marktext/marktext\">Github</a> ä¸Šçš„é–‹æºå°ˆæ¡ˆï¼Œå¯ä»¥æ‰€å¯«æ‰€å¾—ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œä½†æˆ‘é‚„æ˜¯æ¯”è¼ƒæ¨è–¦æ–°æ‰‹ä½¿ç”¨ä¸Šé¢å…©é …å·¥å…·ï¼Œå› ç‚ºé€™æ±è¥¿çœŸçš„å¤ªæ–¹ä¾¿äº†ï¼Œæœ‰é»æ²’æœ‰åœ¨å¯« Markdown çš„æ„Ÿè¦ºã€‚</p>\n<h3>Microsoft Word</h3>\n<p>æ¨è–¦æŒ‡æ•¸ï¼šâ­â­â­â­â­</p>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=X34ZmkeZDos\">[YouTube] Why Microsoft Word is the best IDE for programming</a></li>\n</ul>\n<h2>Markdown èªæ³•</h2>\n<!-- markdownlint-disable MD025 -->\n<h1>å¤§æ¨™é¡Œ</h1>\n<!-- markdownlint-enable MD025 -->\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">#</span> å¤§æ¨™é¡Œ</span></code></pre></div>\n<hr>\n<h2>æ¬¡æ¨™é¡Œ</h2>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">##</span> æ¬¡æ¨™é¡Œ</span></code></pre></div>\n<hr>\n<h3>æ¬¡æ¬¡æ¨™é¡Œ</h3>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> æ¬¡æ¬¡æ¨™é¡Œ</span></code></pre></div>\n<hr>\n<h2>å…§æ–‡</h2>\n<p>å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n\nå…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡</code></pre></div>\n<hr>\n<h2>æ–œé«” ç²—é«”</h2>\n<p>å…§æ–‡å…§æ–‡å…§æ–‡<em>æ–œé«”</em>å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡<br>\nå…§æ–‡å…§æ–‡å…§æ–‡<strong>ç²—é«”</strong>å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\">å…§æ–‡å…§æ–‡å…§æ–‡<span class=\"token italic\"><span class=\"token punctuation\">*</span><span class=\"token content\">æ–œé«”</span><span class=\"token punctuation\">*</span></span>å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡  \nå…§æ–‡å…§æ–‡å…§æ–‡<span class=\"token bold\"><span class=\"token punctuation\">**</span><span class=\"token content\">ç²—é«”</span><span class=\"token punctuation\">**</span></span>å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡</code></pre></div>\n<hr>\n<h2>æœ‰åºæ¸…å–®</h2>\n<ol>\n<li>æœ‰åºæ¸…å–® 1</li>\n<li>æœ‰åºæ¸…å–® 2</li>\n<li>æœ‰åºæ¸…å–® 3</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ol</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token list punctuation\">1.</span> æœ‰åºæ¸…å–® 1\n<span class=\"token list punctuation\">2.</span> æœ‰åºæ¸…å–® 2\n<span class=\"token list punctuation\">3.</span> æœ‰åºæ¸…å–® 3</code></pre></div>\n<hr>\n<h2>ç„¡åºæ¸…å–®</h2>\n<ul>\n<li>ç„¡åºæ¸…å–® 1</li>\n<li>ç„¡åºæ¸…å–® 2</li>\n<li>ç„¡åºæ¸…å–® 3</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token list punctuation\">-</span> ç„¡åºæ¸…å–® 1\n<span class=\"token list punctuation\">-</span> ç„¡åºæ¸…å–® 2\n<span class=\"token list punctuation\">-</span> ç„¡åºæ¸…å–® 3\n\n<span class=\"token list punctuation\">*</span> ç„¡åºæ¸…å–® 1\n<span class=\"token list punctuation\">*</span> ç„¡åºæ¸…å–® 2\n<span class=\"token list punctuation\">*</span> ç„¡åºæ¸…å–® 3\n\n<span class=\"token list punctuation\">-</span> ç„¡åºæ¸…å–® 1\n<span class=\"token list punctuation\">-</span> ç„¡åºæ¸…å–® 2\n<span class=\"token list punctuation\">-</span> ç„¡åºæ¸…å–® 3</code></pre></div>\n<hr>\n<h2>ç¨‹å¼ç¢¼å€å¡Š</h2>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi ç¨‹å¼ç¢¼å€å¡Š\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717220425.png\" alt=\"img\"></p>\n<hr>\n<h2>æ¨™è¨˜ç¨‹å¼ç¢¼</h2>\n<p>inline <code class=\"language-text\">code</code></p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\">inline <span class=\"token code-snippet code keyword\">`code`</span></code></pre></div>\n<hr>\n<h2>è¶…é€£çµ</h2>\n<p><a href=\"https://google.com\">Google é¦–é </a></p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token url\">[<span class=\"token content\">Google é¦–é </span>](<span class=\"token url\">https://google.com</span>)</span></code></pre></div>\n<hr>\n<h2>åœ–ç‰‡é€£çµ</h2>\n<p><img src=\"https://www.google.com.tw/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png\" alt=\"img\"></p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\">![](https://www.google.com.tw/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png)</code></pre></div>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://markdown.tw/\">Markdown æ–‡ä»¶</a></li>\n</ul>","rawMarkdownBody":"\nMarkdown å¯ä»¥æƒ³åƒæˆ Html çš„ç°¡åŒ–ç‰ˆæœ¬ï¼Œå»£æ³›ç”¨æ–¼ç·¨å¯«æ–‡ç« æˆ–æ˜¯æŠ€è¡“æ–‡ä»¶ï¼Œå› ç‚ºå…¶ç‰¹æ€§åŸºæœ¬ä¸Šç”± Html ç°¡åŒ–è€Œä¾†ï¼Œæ‰€ä»¥æ–¹ä¾¿çš„ç”±å¯«å¥½çš„ Markdown ç”¢ç”Ÿ Html ç¶²é ï¼Œåƒæ˜¯é€™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ç”± Markdown ç·¨å¯«ã€‚\n\n<!--more-->\n\næˆ‘å€‘ä¾†çœ‹çœ‹ [Swift](https://github.com/apple/swift) çš„å®˜ç¶²ï¼Œå¯ä»¥ç™¼ç¾ `[README.md](http://readme.md)` é€™å€‹æª”æ¡ˆå°±æ˜¯ç”± Markdown ç·¨å¯«ï¼ŒGithub ä¹Ÿæœƒè‡ªå‹•å°‡é€™å€‹æª”æ¡ˆæ¸²æŸ“åœ¨ç¶²é ä¸‹æ–¹ã€‚åˆ°é€™è£¡å¯ä»¥ç™¼ç¾ï¼Œåœ¨ Github ä¸Šçš„æ‰€æœ‰é–‹æºå°ˆæ¡ˆçš„æ–‡ä»¶ï¼Œå¹¾ä¹éƒ½æ˜¯ç”± Markdown ç·¨å¯«ã€‚\n\n## å“²å­¸\n\nå¼•è¿°è‡ª [https://markdown.tw](https://markdown.tw)\n\n> Markdown çš„ç›®æ¨™æ˜¯å¯¦ç¾ã€Œæ˜“è®€æ˜“å¯«ã€ã€‚  \n> ä¸éæœ€éœ€è¦å¼·èª¿çš„ä¾¿æ˜¯å®ƒçš„å¯è®€æ€§ã€‚ä¸€ä»½ä½¿ç”¨ Markdown æ ¼å¼æ’°å¯«çš„æ–‡ä»¶æ‡‰è©²å¯ä»¥ç›´æ¥ä»¥ç´”æ–‡å­—ç™¼ä½ˆï¼Œä¸¦ä¸”çœ‹èµ·ä¾†ä¸æœƒåƒæ˜¯ç”±è¨±å¤šæ¨™ç±¤æˆ–æ˜¯æ ¼å¼æŒ‡ä»¤æ‰€æ§‹æˆã€‚Markdown èªæ³•å—åˆ°ä¸€äº›æ—¢æœ‰ text-to-HTML æ ¼å¼çš„å½±éŸ¿ï¼ŒåŒ…æ‹¬ Setextã€atxã€Textileã€reStructuredTextã€Grutatext å’Œ EtTextï¼Œç„¶è€Œæœ€å¤§éˆæ„Ÿä¾†æºå…¶å¯¦æ˜¯ç´”æ–‡å­—çš„é›»å­éƒµä»¶æ ¼å¼ã€‚  \n> å› æ­¤ Markdown çš„èªæ³•å…¨ç”±æ¨™é»ç¬¦è™Ÿæ‰€çµ„æˆï¼Œä¸¦ç¶“éåš´è¬¹æ…é¸ï¼Œæ˜¯ç‚ºäº†è®“å®ƒå€‘çœ‹èµ·ä¾†å°±åƒæ‰€è¦è¡¨é”çš„æ„æ€ã€‚åƒæ˜¯åœ¨æ–‡å­—å…©æ—åŠ ä¸Šæ˜Ÿè™Ÿï¼Œçœ‹èµ·ä¾†å°±åƒ*å¼·èª¿*ã€‚Markdown çš„æ¸…å–®çœ‹èµ·ä¾†ï¼Œå—¯ï¼Œå°±æ˜¯æ¸…å–®ã€‚å‡å¦‚ä½ æœ‰ä½¿ç”¨éé›»å­éƒµä»¶ï¼Œå€å¡Šå¼•è¨€çœ‹èµ·ä¾†å°±çœŸçš„åƒæ˜¯å¼•ç”¨ä¸€æ®µæ–‡å­—ã€‚\n\n## Tools\n\nQ: é‚£è¦ç”¨ä»€éº¼ä¾†å¯«å‘¢ï¼Ÿ\n\nå› ç‚º Markdown åŸºæœ¬ä¸Šä¹Ÿæ˜¯ç´”æ–‡å­—æª”æ¡ˆï¼Œæ‰€ä»¥åªè¦æ˜¯æ–‡å­—ç·¨è¼¯å™¨éƒ½å¯ä»¥ç·¨è¼¯ï¼Œä½ è¦ç”¨ txt ä¾†å¯«ä¹Ÿæ˜¯å€‹ä¸éŒ¯çš„æ–¹æ³• â¤ï¸ã€‚\n\n### VSCode\n\nç›®å‰æœ€æ¨è–¦çš„å°±æ˜¯å·¥ç¨‹å¸«çš„å¥½å¤¥ä¼´ `VSCode` ï¼ŒVSCode åœ¨å¯« Markdown æ™‚ï¼Œæœ‰æä¾›å³æ™‚æ¸²æŸ“ï¼Œå¯ä»¥å¿«é€Ÿçš„çœ‹åˆ°çµæœï¼Œè€Œä¸” VSCode æ‡‰è©²åœ¨å„ä½å·¥ç¨‹å¸«çš„é›»è…¦è£¡éƒ½æ‡‰è©²æœ‰å®‰è£æ‰å°ã€‚\n\n### HackMD\n\nHackMD æ˜¯ä¸€å€‹åœ¨ç¶²é ä¸­çš„ Markdown ç·¨è¼¯å™¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ç¶²é ä¸­ç·¨è¼¯å’Œçœ‹åˆ°ç·¨å¯«çš„çµæœï¼ŒHackMD æœ€å²å®³çš„åŠŸèƒ½æ˜¯å¯ä»¥å°‡ Markdown è½‰æ›æˆç°¡å ±ï¼Œç”¨ Markdown å–ä»£ PowerPointï¼Ÿé€™å¤ å¸¥å§ï¼\n\n### MarkText\n\né€™æ˜¯ä¸€å€‹åœ¨ [Github](https://github.com/marktext/marktext) ä¸Šçš„é–‹æºå°ˆæ¡ˆï¼Œå¯ä»¥æ‰€å¯«æ‰€å¾—ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œä½†æˆ‘é‚„æ˜¯æ¯”è¼ƒæ¨è–¦æ–°æ‰‹ä½¿ç”¨ä¸Šé¢å…©é …å·¥å…·ï¼Œå› ç‚ºé€™æ±è¥¿çœŸçš„å¤ªæ–¹ä¾¿äº†ï¼Œæœ‰é»æ²’æœ‰åœ¨å¯« Markdown çš„æ„Ÿè¦ºã€‚\n\n### Microsoft Word\n\næ¨è–¦æŒ‡æ•¸ï¼šâ­â­â­â­â­\n\n- [[YouTube] Why Microsoft Word is the best IDE for programming](https://www.youtube.com/watch?v=X34ZmkeZDos)\n\n## Markdown èªæ³•\n\n<!-- markdownlint-disable MD025 -->\n\n# å¤§æ¨™é¡Œ\n\n<!-- markdownlint-enable MD025 -->\n\n```md\n<h1>\n\n# å¤§æ¨™é¡Œ\n```\n\n---\n\n## æ¬¡æ¨™é¡Œ\n\n```md\n<h2>\n\n## æ¬¡æ¨™é¡Œ\n```\n\n---\n\n### æ¬¡æ¬¡æ¨™é¡Œ\n\n```md\n<h3>\n\n### æ¬¡æ¬¡æ¨™é¡Œ\n```\n\n---\n\n## å…§æ–‡\n\nå…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡\n\n```md\n<p>\n\nå…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡\n```\n\n---\n\n## æ–œé«” ç²—é«”\n\nå…§æ–‡å…§æ–‡å…§æ–‡*æ–œé«”*å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡  \nå…§æ–‡å…§æ–‡å…§æ–‡**ç²—é«”**å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡\n\n```md\nå…§æ–‡å…§æ–‡å…§æ–‡*æ–œé«”*å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡  \nå…§æ–‡å…§æ–‡å…§æ–‡**ç²—é«”**å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡å…§æ–‡\n```\n\n---\n\n## æœ‰åºæ¸…å–®\n\n1. æœ‰åºæ¸…å–® 1\n2. æœ‰åºæ¸…å–® 2\n3. æœ‰åºæ¸…å–® 3\n\n```md\n<ol>\n\n1. æœ‰åºæ¸…å–® 1\n2. æœ‰åºæ¸…å–® 2\n3. æœ‰åºæ¸…å–® 3\n```\n\n---\n\n## ç„¡åºæ¸…å–®\n\n- ç„¡åºæ¸…å–® 1\n- ç„¡åºæ¸…å–® 2\n- ç„¡åºæ¸…å–® 3\n\n```md\n<ul>\n\n- ç„¡åºæ¸…å–® 1\n- ç„¡åºæ¸…å–® 2\n- ç„¡åºæ¸…å–® 3\n\n* ç„¡åºæ¸…å–® 1\n* ç„¡åºæ¸…å–® 2\n* ç„¡åºæ¸…å–® 3\n\n- ç„¡åºæ¸…å–® 1\n- ç„¡åºæ¸…å–® 2\n- ç„¡åºæ¸…å–® 3\n```\n\n---\n\n## ç¨‹å¼ç¢¼å€å¡Š\n\n```c\nprintf(\"Hi ç¨‹å¼ç¢¼å€å¡Š\");\n```\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210717220425.png)\n\n---\n\n## æ¨™è¨˜ç¨‹å¼ç¢¼\n\ninline `code`\n\n```md\ninline `code`\n```\n\n---\n\n## è¶…é€£çµ\n\n[Google é¦–é ](https://google.com)\n\n```md\n[Google é¦–é ](https://google.com)\n```\n\n---\n\n## åœ–ç‰‡é€£çµ\n\n![img](https://www.google.com.tw/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png)\n\n```md\n![](https://www.google.com.tw/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png)\n```\n\n## Reference\n\n- [Markdown æ–‡ä»¶](https://markdown.tw/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Web/markdown.md","excerpt":"Markdown å¯ä»¥æƒ³åƒæˆ Html çš„ç°¡åŒ–ç‰ˆæœ¬ï¼Œå»£æ³›ç”¨æ–¼ç·¨å¯«æ–‡ç« æˆ–æ˜¯æŠ€è¡“æ–‡ä»¶ï¼Œå› ç‚ºå…¶ç‰¹æ€§åŸºæœ¬ä¸Šç”± Html ç°¡åŒ–è€Œä¾†ï¼Œæ‰€ä»¥æ–¹ä¾¿çš„ç”±å¯«å¥½çš„ Markdown ç”¢ç”Ÿ Html ç¶²é ï¼Œåƒæ˜¯é€™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ç”± Markdown ç·¨å¯«ã€‚ æˆ‘å€‘ä¾†çœ‹çœ‹ Swift çš„å®˜ç¶²ï¼Œå¯ä»¥ç™¼ç¾  é€™å€‹æª”æ¡ˆå°±æ˜¯ç”± Markdown ç·¨å¯«ï¼ŒGithub ä¹Ÿæœƒè‡ªå‹•å°‡é€™å€‹æª”æ¡ˆæ¸²æŸ“åœ¨ç¶²é ä¸‹æ–¹ã€‚åˆ°é€™è£¡å¯ä»¥ç™¼ç¾ï¼Œåœ¨ Github ä¸Šçš„â€¦","frontmatter":{"title":"Markdown","date":"2021-07-05T09:05:38.000Z","draft":false,"tags":["markdown"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/0ecfde1e-521f-4e7c-ab46-30357d4e5e00/public","description":"Markdown å¯ä»¥æƒ³åƒæˆ Html çš„ç°¡åŒ–ç‰ˆæœ¬ï¼Œå»£æ³›ç”¨æ–¼ç·¨å¯«æ–‡ç« æˆ–æ˜¯æŠ€è¡“æ–‡ä»¶ï¼Œå› ç‚ºå…¶ç‰¹æ€§åŸºæœ¬ä¸Šç”± Html ç°¡åŒ–è€Œä¾†ï¼Œæ‰€ä»¥æ–¹ä¾¿çš„ç”±å¯«å¥½çš„ Markdown ç”¢ç”Ÿ Html ç¶²é ï¼Œåƒæ˜¯é€™ç¯‡æ–‡ç« ä¹Ÿæ˜¯ç”± Markdown ç·¨å¯«ã€‚"}}},{"node":{"id":"12cf7dd4-2218-52e9-b731-11bbf415cd30","html":"<p>frp å…¨åæ˜¯ fast reverse proxyï¼Œå¯ä»¥å°‡åœ¨ NAT å¾Œæ–¹çš„æœå‹™å¿«é€Ÿçš„ç™¼å¸ƒåˆ°å…¬ç¶² ip ä¸Šï¼Œå¯ä»¥æ”¯æ´ TCP å’Œ UDP å”è­°ï¼Œæˆ‘è¦ºå¾—å”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ‰€æœ‰æµé‡éƒ½æœƒç¶“é Server ç«¯ï¼Œæ‰€ä»¥å¦‚æœ Server ç«¯çš„æµé‡æœ‰é™åˆ¶å°±éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚</p>\n<!--more-->\n<p>frp æœƒéœ€è¦ä¸€å° Serverï¼ŒServer éœ€è¦å…¬ç¶² ipï¼Œå¦‚æœæ²’æœ‰å…¬ç¶² ipï¼Œå¯ä»¥ä½¿ç”¨ aws æˆ– gcp è²·ä¸€å€‹ç°¡å–®çš„ VPSã€‚</p>\n<h2>å®‰è£</h2>\n<p>ç¶²è·¯ä¸Šæœ‰è¨±å¤šä¸€éµå®‰è£çš„åˆ°è…³æœ¬ï¼Œä½†æˆ‘å€‘ä¸ä½¿ç”¨é‚£äº›ï¼Œæœ‰èˆˆè¶£çš„è‡ªå·±ä¸Šç¶²æœå°‹ã€‚</p>\n<p>åˆ°å®˜æ–¹ <a href=\"https://github.com/fatedier/frp/releases\">Release</a> ä¸‹è¼‰æœ€æ–°ç‰ˆï¼Œæ ¹æ“šç³»çµ±é¸æ“‡ï¼Œè§£å£“å¾Œæœƒçœ‹åˆ° <code class=\"language-text\">frps</code> ã€<code class=\"language-text\">frpc</code> å„æœ‰ä¸‰å€‹æª”æ¡ˆï¼Œè·Ÿ <code class=\"language-text\">frps</code> æœ‰é—œçš„å°±æ˜¯ Server ç«¯ç”¨çš„ï¼Œ<code class=\"language-text\">frpc</code> çš„å°±æ˜¯ Client ç«¯ç”¨çš„ã€‚å¦‚æœæ˜¯ Server ç«¯ï¼Œå°±å¯ä»¥å°‡ <code class=\"language-text\">frpc</code> çš„æª”æ¡ˆéƒ½åˆªé™¤ã€‚</p>\n<h2>Server ç«¯è¨­å®š</h2>\n<p>åœ¨ Server ä¸Šæ‰“é–‹è¨­å®šæ–‡ä»¶ <code class=\"language-text\">frps.ini</code> å¯ä»¥çœ‹åˆ°é è¨­å°±æœ‰å¦‚ä¸‹çš„å…§å®¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">common</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">bind_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">7000</span></code></pre></div>\n<p><code class=\"language-text\">common</code> å…§ç¶å®šäº† 7000 portï¼Œé€™å€‹ port æ˜¯è®“ client ç«¯é€£æ¥ç”¨çš„ï¼ŒåŸºæœ¬ç¾åœ¨ä¸ç”¨æ”¹è¨­å®šå°±å¯ä»¥ç›´æ¥ç”¨ã€‚åŸ·è¡Œ <code class=\"language-text\">frps</code> è¦ç”¨ <code class=\"language-text\">-c</code> åƒæ•¸çµ¦å®šè¨­å®šæª”æ¡ˆï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">./frps -c ./frps.ini</code></pre></div>\n<p>å¦‚æœæ²’çœ‹åˆ°å•é¡Œï¼ŒåŸºæœ¬ä¸Š Server ç«¯å°±è¨­å®šå¥½äº†ï¼Œå…¶ä»–åŠŸèƒ½æ™šé»å†ä»‹ç´¹ï¼Œæˆ‘å€‘å…ˆè¨­å®šå¥½ Clientã€‚</p>\n<h2>Client ç«¯è¨­å®š</h2>\n<p>Client å°±æ˜¯è¦ç™¼å¸ƒæœå‹™ä¼ºæœå™¨ï¼Œæ‰€ä»¥é›–ç„¶å«åš Client ä½†æœ¬èº«æ‡‰è©²ä¹Ÿæ˜¯ä¸€å°æä¾›æœå‹™çš„ Serverã€‚Client å°±å¯ä»¥åˆªé™¤æœ‰é—œ <code class=\"language-text\">frps</code> ç›¸é—œçš„æª”æ¡ˆã€‚</p>\n<p>ä¸€æ¨£å…ˆæ‰“é–‹è¨­å®šæª” <code class=\"language-text\">frpc.ini</code>ï¼Œä¹Ÿæœƒæœ‰å¦‚ä¸‹é è¨­å…§å®¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">common</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">server_addr</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">127.0.0.1</span>\n<span class=\"token key attr-name\">server_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">7000</span>\n\n<span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">ssh</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">type</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">tcp</span>\n<span class=\"token key attr-name\">local_ip</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">127.0.0.1</span>\n<span class=\"token key attr-name\">local_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">22</span>\n<span class=\"token key attr-name\">remote_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">6000</span></code></pre></div>\n<p>Client ç«¯çš„è¨­å®šæª”å°±ä¸èƒ½ç›´æ¥ç”¨ï¼Œéœ€è¦ä¿®æ”¹ Server ip æ‰è¡Œï¼Œæ›´æ”¹ <code class=\"language-text\">server_addr</code> ç‚ºå‰›å‰› Server ç«¯çš„ ip åœ°å€æˆ–æ˜¯ Domain éƒ½å¯ä»¥ã€‚</p>\n<p>ä¸‹æ–¹æ–¹çš„ ssh å€å¡Šè¨­ä¸€å€‹å°‡ Client ç«¯çš„ ssh 22 port å…¬é–‹åˆ° Server ç«¯çš„ 6000 port çš„ç¯„æœ¬ï¼Œå¦‚æœæœ‰å…¶ä»–çš„ port è¦é–‹æ”¾ï¼Œç”¨ç›¸åŒçš„æ€ç¶­æ›´æ”¹å³å¯ã€‚åƒæ˜¯å¦‚éè¦åŠ  Minecraft 25565 port ä¹Ÿåˆ° Server ç«¯çš„ 25565 portï¼Œå°±å¯ä»¥æ–°å¢ä¸€å€‹å€å¡Šï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">common</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">server_addr</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">example.com</span>\n<span class=\"token key attr-name\">server_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">7000</span>\n\n<span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">ssh</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">type</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">tcp</span>\n<span class=\"token key attr-name\">local_ip</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">127.0.0.1</span>\n<span class=\"token key attr-name\">local_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">22</span>\n<span class=\"token key attr-name\">remote_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">6000</span>\n\n<span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">minecraft</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">type</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">tcp</span>\n<span class=\"token key attr-name\">local_ip</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">127.0.0.1</span>\n<span class=\"token key attr-name\">local_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">25565</span>\n<span class=\"token key attr-name\">remote_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">25565</span></code></pre></div>\n<p>åˆ°ç›®å‰ç‚ºæ­¢æ‡‰è©²å°±å¯ä»¥ç”¨ Server ç«¯çš„ ip é€£æ¥åˆ° Client ç«¯äº†ï¼Œå¦‚æœé€£ä¸ä¸Šï¼Œå¯èƒ½è¦æª¢æŸ¥ä¸€ä¸‹ Server ç«¯é˜²ç«ç‰†çš„è¨­å®šï¼Œé€™é‚Šå°±ä¸è´…è¿°ã€‚</p>\n<h2>Token èªè­‰</h2>\n<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰ç™¼ç¾ï¼ŒåŸºæœ¬ä¸Šåªè¦çŸ¥é“ä½  Server ip æˆ– domain çš„äººéƒ½å¯ä»¥æ–°å¢è‡ªå·±çš„ portï¼Œè¦é¿å…é€™æ¨£çš„ç‹€æ³ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ tokenã€‚ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç°¡å–®ï¼Œåªè¦åœ¨ Server å’Œ Client ç«¯çš„ <code class=\"language-text\">[common]</code> éƒ½åŠ ä¸Šç›¸åŒçš„ token åƒæ•¸ï¼Œå°±å¯ä»¥é€²è¡Œç°¡å–®çš„èªè­‰ã€‚</p>\n<p>Server ç«¯ç¯„ä¾‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">common</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">bind_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">7000</span>\n<span class=\"token key attr-name\">token</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">7Jc2ZCvVzHu</span></code></pre></div>\n<p>Client ç«¯ç¯„ä¾‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">common</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">server_addr</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">example.com</span>\n<span class=\"token key attr-name\">server_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">7000</span>\n<span class=\"token key attr-name\">token</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">7Jc2ZCvVzHu</span>\n\n<span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">ssh</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">type</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">tcp</span>\n<span class=\"token key attr-name\">local_ip</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">127.0.0.1</span>\n<span class=\"token key attr-name\">local_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">22</span>\n<span class=\"token key attr-name\">remote_port</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">6000</span></code></pre></div>\n<h2>Refrence</h2>\n<p><a href=\"https://github.com/fatedier/frp\">GitHub</a></p>\n<p><a href=\"https://gofrp.org/docs/\">ä¸­æ–‡æ–‡æª”</a></p>","rawMarkdownBody":"\nfrp å…¨åæ˜¯ fast reverse proxyï¼Œå¯ä»¥å°‡åœ¨ NAT å¾Œæ–¹çš„æœå‹™å¿«é€Ÿçš„ç™¼å¸ƒåˆ°å…¬ç¶² ip ä¸Šï¼Œå¯ä»¥æ”¯æ´ TCP å’Œ UDP å”è­°ï¼Œæˆ‘è¦ºå¾—å”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ‰€æœ‰æµé‡éƒ½æœƒç¶“é Server ç«¯ï¼Œæ‰€ä»¥å¦‚æœ Server ç«¯çš„æµé‡æœ‰é™åˆ¶å°±éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚\n\n<!--more-->\n\nfrp æœƒéœ€è¦ä¸€å° Serverï¼ŒServer éœ€è¦å…¬ç¶² ipï¼Œå¦‚æœæ²’æœ‰å…¬ç¶² ipï¼Œå¯ä»¥ä½¿ç”¨ aws æˆ– gcp è²·ä¸€å€‹ç°¡å–®çš„ VPSã€‚\n\n## å®‰è£\n\nç¶²è·¯ä¸Šæœ‰è¨±å¤šä¸€éµå®‰è£çš„åˆ°è…³æœ¬ï¼Œä½†æˆ‘å€‘ä¸ä½¿ç”¨é‚£äº›ï¼Œæœ‰èˆˆè¶£çš„è‡ªå·±ä¸Šç¶²æœå°‹ã€‚\n\nåˆ°å®˜æ–¹ [Release](https://github.com/fatedier/frp/releases) ä¸‹è¼‰æœ€æ–°ç‰ˆï¼Œæ ¹æ“šç³»çµ±é¸æ“‡ï¼Œè§£å£“å¾Œæœƒçœ‹åˆ° `frps` ã€`frpc` å„æœ‰ä¸‰å€‹æª”æ¡ˆï¼Œè·Ÿ `frps` æœ‰é—œçš„å°±æ˜¯ Server ç«¯ç”¨çš„ï¼Œ`frpc` çš„å°±æ˜¯ Client ç«¯ç”¨çš„ã€‚å¦‚æœæ˜¯ Server ç«¯ï¼Œå°±å¯ä»¥å°‡ `frpc` çš„æª”æ¡ˆéƒ½åˆªé™¤ã€‚\n\n## Server ç«¯è¨­å®š\n\nåœ¨ Server ä¸Šæ‰“é–‹è¨­å®šæ–‡ä»¶ `frps.ini` å¯ä»¥çœ‹åˆ°é è¨­å°±æœ‰å¦‚ä¸‹çš„å…§å®¹ï¼š\n\n```ini\n[common]\nbind_port = 7000\n```\n\n`common` å…§ç¶å®šäº† 7000 portï¼Œé€™å€‹ port æ˜¯è®“ client ç«¯é€£æ¥ç”¨çš„ï¼ŒåŸºæœ¬ç¾åœ¨ä¸ç”¨æ”¹è¨­å®šå°±å¯ä»¥ç›´æ¥ç”¨ã€‚åŸ·è¡Œ `frps` è¦ç”¨ `-c` åƒæ•¸çµ¦å®šè¨­å®šæª”æ¡ˆï¼š\n\n```shell\n./frps -c ./frps.ini\n```\n\nå¦‚æœæ²’çœ‹åˆ°å•é¡Œï¼ŒåŸºæœ¬ä¸Š Server ç«¯å°±è¨­å®šå¥½äº†ï¼Œå…¶ä»–åŠŸèƒ½æ™šé»å†ä»‹ç´¹ï¼Œæˆ‘å€‘å…ˆè¨­å®šå¥½ Clientã€‚\n\n## Client ç«¯è¨­å®š\n\nClient å°±æ˜¯è¦ç™¼å¸ƒæœå‹™ä¼ºæœå™¨ï¼Œæ‰€ä»¥é›–ç„¶å«åš Client ä½†æœ¬èº«æ‡‰è©²ä¹Ÿæ˜¯ä¸€å°æä¾›æœå‹™çš„ Serverã€‚Client å°±å¯ä»¥åˆªé™¤æœ‰é—œ `frps` ç›¸é—œçš„æª”æ¡ˆã€‚\n\nä¸€æ¨£å…ˆæ‰“é–‹è¨­å®šæª” `frpc.ini`ï¼Œä¹Ÿæœƒæœ‰å¦‚ä¸‹é è¨­å…§å®¹ï¼š\n\n```ini\n[common]\nserver_addr = 127.0.0.1\nserver_port = 7000\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n```\n\nClient ç«¯çš„è¨­å®šæª”å°±ä¸èƒ½ç›´æ¥ç”¨ï¼Œéœ€è¦ä¿®æ”¹ Server ip æ‰è¡Œï¼Œæ›´æ”¹ `server_addr` ç‚ºå‰›å‰› Server ç«¯çš„ ip åœ°å€æˆ–æ˜¯ Domain éƒ½å¯ä»¥ã€‚\n\nä¸‹æ–¹æ–¹çš„ ssh å€å¡Šè¨­ä¸€å€‹å°‡ Client ç«¯çš„ ssh 22 port å…¬é–‹åˆ° Server ç«¯çš„ 6000 port çš„ç¯„æœ¬ï¼Œå¦‚æœæœ‰å…¶ä»–çš„ port è¦é–‹æ”¾ï¼Œç”¨ç›¸åŒçš„æ€ç¶­æ›´æ”¹å³å¯ã€‚åƒæ˜¯å¦‚éè¦åŠ  Minecraft 25565 port ä¹Ÿåˆ° Server ç«¯çš„ 25565 portï¼Œå°±å¯ä»¥æ–°å¢ä¸€å€‹å€å¡Šï¼š\n\n```ini\n[common]\nserver_addr = example.com\nserver_port = 7000\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n\n[minecraft]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 25565\nremote_port = 25565\n```\n\nåˆ°ç›®å‰ç‚ºæ­¢æ‡‰è©²å°±å¯ä»¥ç”¨ Server ç«¯çš„ ip é€£æ¥åˆ° Client ç«¯äº†ï¼Œå¦‚æœé€£ä¸ä¸Šï¼Œå¯èƒ½è¦æª¢æŸ¥ä¸€ä¸‹ Server ç«¯é˜²ç«ç‰†çš„è¨­å®šï¼Œé€™é‚Šå°±ä¸è´…è¿°ã€‚\n\n## Token èªè­‰\n\nä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰ç™¼ç¾ï¼ŒåŸºæœ¬ä¸Šåªè¦çŸ¥é“ä½  Server ip æˆ– domain çš„äººéƒ½å¯ä»¥æ–°å¢è‡ªå·±çš„ portï¼Œè¦é¿å…é€™æ¨£çš„ç‹€æ³ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ tokenã€‚ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç°¡å–®ï¼Œåªè¦åœ¨ Server å’Œ Client ç«¯çš„ `[common]` éƒ½åŠ ä¸Šç›¸åŒçš„ token åƒæ•¸ï¼Œå°±å¯ä»¥é€²è¡Œç°¡å–®çš„èªè­‰ã€‚\n\nServer ç«¯ç¯„ä¾‹ï¼š\n\n```ini\n[common]\nbind_port = 7000\ntoken = 7Jc2ZCvVzHu\n```\n\nClient ç«¯ç¯„ä¾‹ï¼š\n\n```ini\n[common]\nserver_addr = example.com\nserver_port = 7000\ntoken = 7Jc2ZCvVzHu\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n```\n\n## Refrence\n\n[GitHub](https://github.com/fatedier/frp)\n\n[ä¸­æ–‡æ–‡æª”](https://gofrp.org/docs/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Linux/frp.md","excerpt":"frp å…¨åæ˜¯ fast reverse proxyï¼Œå¯ä»¥å°‡åœ¨ NAT å¾Œæ–¹çš„æœå‹™å¿«é€Ÿçš„ç™¼å¸ƒåˆ°å…¬ç¶² ip ä¸Šï¼Œå¯ä»¥æ”¯æ´ TCP å’Œ UDP å”è­°ï¼Œæˆ‘è¦ºå¾—å”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ‰€æœ‰æµé‡éƒ½æœƒç¶“é Server ç«¯ï¼Œæ‰€ä»¥å¦‚æœ Server ç«¯çš„æµé‡æœ‰é™åˆ¶å°±éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚ frp æœƒéœ€è¦ä¸€å° Serverï¼ŒServer éœ€è¦å…¬ç¶² ipï¼Œå¦‚æœæ²’æœ‰å…¬ç¶² ipï¼Œå¯ä»¥ä½¿ç”¨ aws æˆ– gcp è²·ä¸€å€‹ç°¡å–®çš„ VPSã€‚ å®‰â€¦","frontmatter":{"title":"Frp","date":"2021-06-20T13:48:33.000Z","draft":false,"tags":["frp","linux"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/34046c81-cb6e-40a5-7b3a-8623c613f400/public","description":"frp å…¨åæ˜¯ fast reverse proxyï¼Œå¯ä»¥å°‡åœ¨ NAT å¾Œæ–¹çš„æœå‹™å¿«é€Ÿçš„ç™¼å¸ƒåˆ°å…¬ç¶² ip ä¸Šï¼Œå¯ä»¥æ”¯æ´ TCP å’Œ UDP å”è­°ï¼Œæˆ‘è¦ºå¾—å”¯ä¸€çš„ç¼ºé»å°±æ˜¯æ‰€æœ‰æµé‡éƒ½æœƒç¶“é Server ç«¯ï¼Œæ‰€ä»¥å¦‚æœ Server ç«¯çš„æµé‡æœ‰é™åˆ¶å°±éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚"}}},{"node":{"id":"0c0b9771-fcc3-543e-a234-33d6b9792da1","html":"<p>æˆ‘èªç‚ºç”¨ Markdown ç”¨ä¾†å¯«æŠ€è¡“æ–‡ç« é‚„æ˜¯æœ€é †æ‰‹çš„ï¼Œä½†æ˜¯ Medium çš„ç·¨è¼¯å™¨å»ä¸æ”¯æ´ Markdownã€‚å‰å¹¾å¤©ç”¨ import çš„æ–¹å¼ä¹Ÿå¤±æ•—ï¼Œå¦å°‹ä»–è™•å¾Œç™¼ç¾ Medium æ”¯æ´ç”¨ API ç™¼å¸ƒæ–‡ç« ï¼Œæ›´é‚„æ”¯æ´ç”¨ Markdown å’Œ Html ç™¼å¸ƒã€‚é›–ç„¶ä¸æ‡‚å®˜æ–¹ç‚ºä½•ä¸ç›´æ¥è®“ç”¨æˆ¶ç”¨ Markdown ç™¼å¸ƒï¼Œè€Œæ˜¯è¦ç”¨ APIï¼Œä½†æ˜¯ç«Ÿç„¶æ‰¾åˆ°äº†ä¸€çµ²å¸Œæœ›ï¼Œå°±ä¾†è©¦è©¦çœ‹ç”¨ API çš„æ–¹å¼ç™¼å¸ƒæ–‡ç« ã€‚</p>\n<!--more-->\n<p>æœ¬ç¯‡ä½¿ç”¨ Kotlin å’Œ OKHttpï¼Œä¾†å˜—è©¦æ’°å¯«ä¸€å€‹æ‡‰ç”¨ç¨‹å¼ï¼Œä¾†å”åŠ©ç™¼å¸ƒ Markdwon è‡³ Mediumï¼Œå°ˆæ¡ˆåŸå§‹ç¢¼åœ¨ <a href=\"https://github.com/TonyPepeBear/MediumMarkdownUploader\">Github</a> ä¸Šã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/2021/02/10-21-47-48-%E6%88%AA%E5%9C%96%202021-02-10%20%E4%B8%8B%E5%8D%889.47.40.png\" alt=\"æˆªåœ– 2021-02-10 ä¸‹åˆ9.47.40.png\"></p>\n<h2>ç”³è«‹ token</h2>\n<p>Medium API çš„ <a href=\"https://github.com/Medium/medium-api-docs\">å®˜æ–¹æ–‡ä»¶</a> åœ¨é€™ï¼Œå¯ä»¥ç”¨ <code class=\"language-text\">HTTP POST</code> çš„æ–¹å¼ä¾†ç™¼å¸ƒæ–‡ç« ã€‚è¦ä½¿ç”¨ API ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¦æœ‰ <code class=\"language-text\">token</code>ï¼Œè¦ç”³è«‹ <code class=\"language-text\">token</code> ä¸ç”¨éŒ¢ï¼Œå®˜æ–¹ç›®å‰å¥½åƒä¹Ÿæ²’æœ‰ä½¿ç”¨é™åˆ¶ï¼Œåˆ° <a href=\"https://medium.com/me/settings\">ç”¨æˆ¶è¨­å®š</a> çš„é é¢ï¼Œæ‰¾åˆ° <code class=\"language-text\">Integration tokens</code> çš„åœ°æ–¹ï¼Œç”³è«‹ä¸€å€‹ tokenï¼Œèªªæ˜éš¨ä¾¿è¼¸å…¥å°±å¥½ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/2021/02/10-01-42-07-%E6%88%AA%E5%9C%96%202021-02-10%20%E4%B8%8A%E5%8D%881.42.04.png\" alt=\"img\"></p>\n<h2>UserID</h2>\n<p>æ ¹æ“šå®˜æ–¹æ–‡æª”ï¼Œæƒ³è¦ç™¼å¸ƒæ–‡ç« ï¼Œéœ€è¦ UserIDï¼Œæˆ‘æ‰¾äº†å¥½ä¹…æ‰ç™¼ç¾ UserID ä¸æ˜¯ Name ä¹Ÿä¸æ˜¯ UserNameï¼Œä¹Ÿæ˜¯è¦å…ˆç”¨ API çš„æ–¹å¼å–å¾—ã€‚</p>\n<p>ç”¨ Http GET çš„æ–¹å¼å¯ä»¥å–å¾— token ä¸»äººè³‡æ–™ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">GET https://api.medium.com/v1/me</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token request-line\"><span class=\"token method property\">GET</span> <span class=\"token request-target url\">/v1/me</span> <span class=\"token http-version property\">HTTP/1.1</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">api.medium.com</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Authorization</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">Bearer 181d415f34379af07b2c11d144dfbe35d</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Type</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept-Charset</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">utf-8</span></span></code></pre></div>\n<p><code class=\"language-text\">token</code> æ˜¯æ”¾åœ¨ Post çš„ headerï¼Œçš„ <code class=\"language-text\">Authorization:Bearer</code> å¾Œæ–¹ï¼Œä¸‹æ–¹æ˜¯ç”¨ Kotlin å’Œ OKHttp å¯¦ä½œçš„æ–¹æ³•ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> request <span class=\"token operator\">=</span> Request<span class=\"token punctuation\">.</span><span class=\"token function\">Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"https://api.medium.com/v1/me\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">addHeader</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Authorization\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">token</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">val</span> response <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ç¯„ä¾‹çš„ Response å¦‚ä¸‹ï¼Œå¯ä»¥æ‹¿åˆ°ç”¨ UserIDã€UserName ç­‰è³‡æ–™ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5303d74c64f66366f00cb9b2a94f3251bf5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"username\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"majelbstoat\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Jamie Talbot\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://medium.com/@majelbstoat\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"imageUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://images.medium.com/0*fkfQiTzT7TlUGGyI.png\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>æ ¹æ“šä¸Šæ–¹çš„ Jsonï¼Œå¯ä»¥ç”¢ç”Ÿ <code class=\"language-text\">Kotlin Data Class</code> ä¾†æ”¾å–å›çš„è³‡æ–™ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">MediumApiMe</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> `<span class=\"token keyword\">data</span>`<span class=\"token operator\">:</span> MediumMeData\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">MediumMeData</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> id<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> imageUrl<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> url<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> username<span class=\"token operator\">:</span> String\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>å–å›çš„ Response ç”¨ <code class=\"language-text\">gson</code> è½‰æ› json åˆ° Data Classï¼Œæœ€å¾Œå¯«æˆä¸€å€‹å®Œæ•´çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">getUserData</span><span class=\"token punctuation\">(</span>token<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MediumApiMe <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> request <span class=\"token operator\">=</span> Request<span class=\"token punctuation\">.</span><span class=\"token function\">Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"https://api.medium.com/v1/me\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">addHeader</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Authorization\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">token</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">val</span> response <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>code <span class=\"token operator\">!=</span> <span class=\"token number\">200</span> <span class=\"token operator\">||</span> response<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token function\">RuntimeException</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string-literal singleline\"><span class=\"token string\">\"Can not get User info. Maybe token is wrong.\"</span></span> <span class=\"token operator\">+</span>\n            <span class=\"token punctuation\">{</span>response<span class=\"token punctuation\">.</span>body<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">byteStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">reader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">readLines</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">val</span> text <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>body<span class=\"token operator\">!!</span><span class=\"token punctuation\">.</span><span class=\"token function\">byteStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">reader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">readText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> gson<span class=\"token punctuation\">.</span><span class=\"token function\">fromJson</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> MediumApiMe<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¸Šæ–¹çš„ç¨‹å¼ç¢¼æœ‰åˆ¤æ–· Response Code æ˜¯å¦ç‚º 200ï¼Œè‹¥ä¸æ˜¯ 200 ä»£è¡¨å–å¾—è³‡æ–™æ²’æœ‰æˆåŠŸï¼Œå°±æ‹‹å‡º Exceptionã€‚</p>\n<h2>Post æ–‡ç« </h2>\n<p>å–å¾— UserID å¾Œå°±å¯ä»¥ç”¨ Http Post çš„æ–¹å¼å‘ Medium ç™¼å¸ƒæ–‡ç« ã€‚ä¸‹æ–¹çš„ authorId å°±æ˜¯å‰›å‰›ç”¨ Http Get çš„æ–¹å¼å–å¾—çš„ UserIDã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">POST https://api.medium.com/v1/users/{{authorId}}/posts</code></pre></div>\n<p>ä¸‹é¢æ˜¯ Post çš„ç¯„ä¾‹ï¼Œ<code class=\"language-text\">token</code> ä¸€æ¨£æ˜¯æ”¾åœ¨ <code class=\"language-text\">header</code> è£¡ã€‚å®˜æ–¹çš„ç¯„ä¾‹æ˜¯ç”¨ html ä¾†ç™¼å¸ƒæ–‡ç« ï¼Œæˆ‘å€‘åªè¦å°‡ <code class=\"language-text\">contentFormat</code> æ”¹æˆ markdown å°±å¯ä»¥é”æˆç›®çš„ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token request-line\"><span class=\"token method property\">POST</span> <span class=\"token request-target url\">/v1/users/5303d74c64f66366f00cb9b2a94f3251bf5/posts</span> <span class=\"token http-version property\">HTTP/1.1</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Host</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">api.medium.com</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Authorization</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">Bearer 181d415f34379af07b2c11d144dfbe35d</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Type</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Accept-Charset</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">utf-8</span></span>\n<span class=\"token application-json\">\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Liverpool FC\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"contentFormat\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"html\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;h1>Liverpool FC&lt;/h1>&lt;p>Youâ€™ll never walk alone.&lt;/p>\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"canonicalUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://jamietalbot.com/posts/liverpool-fc\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"football\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sport\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Liverpool\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"publishStatus\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"public\"</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>æ ¹æ“šä¸Šé¢ Post çš„ Json ç¯„ä¾‹ï¼Œæˆ‘å€‘å¯ä»¥ç”¢ç”Ÿå‡ºå¦‚ä¸‹çš„ Kotlin Data Classï¼Œæˆ‘é †ä¾¿å¯«äº†ä¸€å€‹å¿«é€Ÿè½‰æˆ Json çš„æ–¹æ³•ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">MediumApiPost</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> title<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> content<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> contentFormat<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> tags<span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> publishStatus<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"draft\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//é è¨­æ˜¯è‰ç¨¿</span>\n    <span class=\"token keyword\">val</span> canonicalUrl<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> gson<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ç”¢ç”Ÿå‡º Data Class å°±å¯ä»¥å˜—è©¦ Post çœ‹çœ‹ï¼Œæ˜¯å¦æœƒç™¼å¸ƒæ–‡ç« ï¼Œç›´æ¥åˆ©ç”¨å‰›å‰›å¯«å¥½çš„ <code class=\"language-text\">getUserData</code> æ‹¿åˆ° UserIDï¼Œä¹‹å¾Œåœ¨ Postï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> userID <span class=\"token operator\">=</span> <span class=\"token function\">getUserData</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id\n<span class=\"token keyword\">val</span> medimuApiPost <span class=\"token operator\">=</span>\n    <span class=\"token function\">MdieumApiPost</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Title\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"# Title\\nHi\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"markdown\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">val</span> request <span class=\"token operator\">=</span> Request<span class=\"token punctuation\">.</span><span class=\"token function\">Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"https://api.medium.com/v1/users/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">userID</span></span><span class=\"token string\">/posts\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>mediumApiPost<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toRequestBody</span><span class=\"token punctuation\">(</span>contentType <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"application/json\"</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">toMediaType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">addHeader</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Authorization\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">token</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">val</span> response <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>å¦‚æœç™¼å¸ƒæˆåŠŸï¼Œå¯ä»¥æ‹¿åˆ° Response Code 201ï¼Œå…¶ä»–çš„éƒ½ä»£è¡¨ç™¼å¸ƒå¤±æ•—ã€‚</p>\n<p>å¯«æˆå®Œæ•´çš„ç™¼å¸ƒæ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">newPost</span><span class=\"token punctuation\">(</span>token<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> mediumApiPost<span class=\"token operator\">:</span> MediumApiPost<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> userID <span class=\"token operator\">=</span> <span class=\"token function\">getUserData</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id\n\n    <span class=\"token keyword\">val</span> request <span class=\"token operator\">=</span> Request<span class=\"token punctuation\">.</span><span class=\"token function\">Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"https://api.medium.com/v1/users/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">userID</span></span><span class=\"token string\">/posts\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>mediumApiPost<span class=\"token punctuation\">.</span><span class=\"token function\">toJson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toRequestBody</span><span class=\"token punctuation\">(</span>contentType <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"application/json\"</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">toMediaType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">addHeader</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Authorization\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Bearer </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">token</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">val</span> response <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">newCall</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>code <span class=\"token operator\">!=</span> <span class=\"token number\">201</span> <span class=\"token operator\">||</span> response<span class=\"token punctuation\">.</span>body <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token function\">RuntimeException</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Something Wrong. </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">response<span class=\"token punctuation\">.</span>body<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">byteStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">reader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">readText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">val</span> text <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>body<span class=\"token operator\">!!</span><span class=\"token punctuation\">.</span><span class=\"token function\">byteStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">readText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">var</span> json <span class=\"token operator\">=</span> gson<span class=\"token punctuation\">.</span><span class=\"token function\">fromJson</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> MediumNewPostResponse<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> json<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>url\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¸Šé¢çš„æ–¹æ³•æœƒç›´æ¥å›å‚³ç™¼å¸ƒæˆåŠŸçš„ URLï¼Œå¤±æ•—å‰‡æœƒç›´æ¥æ‹‹å‡º Exceptionã€‚</p>\n<h2>GUI</h2>\n<p>å¯«å¥½æ–¹æ³•å¾Œï¼Œæœ€å¾Œå†ç”¨ <code class=\"language-text\">TornadoFX</code> å¯« GUIï¼Œé€™é‚Šå°±ä¸è¬›è¿° GUI çš„éƒ¨åˆ†ï¼Œæœ‰èˆˆè¶£å¯ä»¥è‡ªå·±åˆ° GitHub ä¸Šçœ‹å°ˆæ¡ˆçš„åŸå§‹ç¢¼ã€‚</p>\n<h2>ç¨‹å¼ç¢¼å€å¡Š</h2>\n<p>å› ç‚º Medium ç›®å‰ä¸¦ä¸æ”¯æ´ç¨‹å¼ç¢¼é«˜äº®ï¼Œå‚³ä¸Šå»çš„ç¨‹å¼ç¢¼å€å¡Šéƒ½æœƒè®Šæˆé»‘åº•çš„ï¼Œç›®å‰æˆ‘æœ‰æƒ³åˆ°çš„è§£æ³•æ˜¯åœ¨ Post ä¸Šå»ä¹‹å‰ï¼Œå°±å…ˆå°‡ç¨‹å¼ç¢¼å€å¡Šéƒ½æ›æˆ GitHub Gistï¼Œä½†é€™å°±éœ€è¦æ›´è¤‡é›œçš„æ–¹å¼è§£æ±ºå•é¡Œäº†ï¼Œæœ‰èˆˆè¶£çš„äººå¯ä»¥è‡ªå·±è©¦è©¦çœ‹ã€‚</p>\n<h2>Reference</h2>\n<p><a href=\"https://github.com/Medium/medium-api-docs\">Mediumâ€™s API Documentation</a></p>","rawMarkdownBody":"\næˆ‘èªç‚ºç”¨ Markdown ç”¨ä¾†å¯«æŠ€è¡“æ–‡ç« é‚„æ˜¯æœ€é †æ‰‹çš„ï¼Œä½†æ˜¯ Medium çš„ç·¨è¼¯å™¨å»ä¸æ”¯æ´ Markdownã€‚å‰å¹¾å¤©ç”¨ import çš„æ–¹å¼ä¹Ÿå¤±æ•—ï¼Œå¦å°‹ä»–è™•å¾Œç™¼ç¾ Medium æ”¯æ´ç”¨ API ç™¼å¸ƒæ–‡ç« ï¼Œæ›´é‚„æ”¯æ´ç”¨ Markdown å’Œ Html ç™¼å¸ƒã€‚é›–ç„¶ä¸æ‡‚å®˜æ–¹ç‚ºä½•ä¸ç›´æ¥è®“ç”¨æˆ¶ç”¨ Markdown ç™¼å¸ƒï¼Œè€Œæ˜¯è¦ç”¨ APIï¼Œä½†æ˜¯ç«Ÿç„¶æ‰¾åˆ°äº†ä¸€çµ²å¸Œæœ›ï¼Œå°±ä¾†è©¦è©¦çœ‹ç”¨ API çš„æ–¹å¼ç™¼å¸ƒæ–‡ç« ã€‚\n\n<!--more-->\n\næœ¬ç¯‡ä½¿ç”¨ Kotlin å’Œ OKHttpï¼Œä¾†å˜—è©¦æ’°å¯«ä¸€å€‹æ‡‰ç”¨ç¨‹å¼ï¼Œä¾†å”åŠ©ç™¼å¸ƒ Markdwon è‡³ Mediumï¼Œå°ˆæ¡ˆåŸå§‹ç¢¼åœ¨ [Github](https://github.com/TonyPepeBear/MediumMarkdownUploader) ä¸Šã€‚\n\n![æˆªåœ– 2021-02-10 ä¸‹åˆ9.47.40.png](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/2021/02/10-21-47-48-%E6%88%AA%E5%9C%96%202021-02-10%20%E4%B8%8B%E5%8D%889.47.40.png)\n\n## ç”³è«‹ token\n\nMedium API çš„ [å®˜æ–¹æ–‡ä»¶](https://github.com/Medium/medium-api-docs) åœ¨é€™ï¼Œå¯ä»¥ç”¨ `HTTP POST` çš„æ–¹å¼ä¾†ç™¼å¸ƒæ–‡ç« ã€‚è¦ä½¿ç”¨ API ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¦æœ‰ `token`ï¼Œè¦ç”³è«‹ `token` ä¸ç”¨éŒ¢ï¼Œå®˜æ–¹ç›®å‰å¥½åƒä¹Ÿæ²’æœ‰ä½¿ç”¨é™åˆ¶ï¼Œåˆ° [ç”¨æˆ¶è¨­å®š](https://medium.com/me/settings) çš„é é¢ï¼Œæ‰¾åˆ° `Integration tokens` çš„åœ°æ–¹ï¼Œç”³è«‹ä¸€å€‹ tokenï¼Œèªªæ˜éš¨ä¾¿è¼¸å…¥å°±å¥½ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/2021/02/10-01-42-07-%E6%88%AA%E5%9C%96%202021-02-10%20%E4%B8%8A%E5%8D%881.42.04.png)\n\n## UserID\n\næ ¹æ“šå®˜æ–¹æ–‡æª”ï¼Œæƒ³è¦ç™¼å¸ƒæ–‡ç« ï¼Œéœ€è¦ UserIDï¼Œæˆ‘æ‰¾äº†å¥½ä¹…æ‰ç™¼ç¾ UserID ä¸æ˜¯ Name ä¹Ÿä¸æ˜¯ UserNameï¼Œä¹Ÿæ˜¯è¦å…ˆç”¨ API çš„æ–¹å¼å–å¾—ã€‚\n\nç”¨ Http GET çš„æ–¹å¼å¯ä»¥å–å¾— token ä¸»äººè³‡æ–™ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š\n\n```http\nGET https://api.medium.com/v1/me\n```\n\n```http\nGET /v1/me HTTP/1.1\nHost: api.medium.com\nAuthorization: Bearer 181d415f34379af07b2c11d144dfbe35d\nContent-Type: application/json\nAccept: application/json\nAccept-Charset: utf-8\n```\n\n`token` æ˜¯æ”¾åœ¨ Post çš„ headerï¼Œçš„ `Authorization:Bearer` å¾Œæ–¹ï¼Œä¸‹æ–¹æ˜¯ç”¨ Kotlin å’Œ OKHttp å¯¦ä½œçš„æ–¹æ³•ï¼š\n\n```kotlin\nval request = Request.Builder()\n    .url(\"https://api.medium.com/v1/me\")\n    .get()\n    .addHeader(\"Authorization\", \"Bearer $token\")\n    .build()\nval response = client.newCall(request).execute()\n```\n\nç¯„ä¾‹çš„ Response å¦‚ä¸‹ï¼Œå¯ä»¥æ‹¿åˆ°ç”¨ UserIDã€UserName ç­‰è³‡æ–™ï¼š\n\n```json\n{\n  \"data\": {\n    \"id\": \"5303d74c64f66366f00cb9b2a94f3251bf5\",\n    \"username\": \"majelbstoat\",\n    \"name\": \"Jamie Talbot\",\n    \"url\": \"https://medium.com/@majelbstoat\",\n    \"imageUrl\": \"https://images.medium.com/0*fkfQiTzT7TlUGGyI.png\"\n  }\n}\n```\n\næ ¹æ“šä¸Šæ–¹çš„ Jsonï¼Œå¯ä»¥ç”¢ç”Ÿ `Kotlin Data Class` ä¾†æ”¾å–å›çš„è³‡æ–™ï¼š\n\n```kotlin\ndata class MediumApiMe(\n    val `data`: MediumMeData\n)\n\ndata class MediumMeData(\n    val id: String,\n    val imageUrl: String,\n    val name: String,\n    val url: String,\n    val username: String\n)\n```\n\nå–å›çš„ Response ç”¨ `gson` è½‰æ› json åˆ° Data Classï¼Œæœ€å¾Œå¯«æˆä¸€å€‹å®Œæ•´çš„æ–¹æ³•å¦‚ä¸‹ï¼š\n\n```kotlin\nfun getUserData(token: String): MediumApiMe {\n    val request = Request.Builder()\n        .url(\"https://api.medium.com/v1/me\")\n        .get()\n        .addHeader(\"Authorization\", \"Bearer $token\")\n        .build()\n    val response = client.newCall(request).execute()\n    if (response.code != 200 || response.body == null)\n        throw RuntimeException(\n            \"Can not get User info. Maybe token is wrong.\" +\n            {response.body?.byteStream()?.reader()?.readLines()}\n        )\n\n    val text = response.body!!.byteStream()\n        .reader()\n        .readText()\n    return gson.fromJson(text, MediumApiMe::class.java)\n}\n```\n\nä¸Šæ–¹çš„ç¨‹å¼ç¢¼æœ‰åˆ¤æ–· Response Code æ˜¯å¦ç‚º 200ï¼Œè‹¥ä¸æ˜¯ 200 ä»£è¡¨å–å¾—è³‡æ–™æ²’æœ‰æˆåŠŸï¼Œå°±æ‹‹å‡º Exceptionã€‚\n\n## Post æ–‡ç« \n\nå–å¾— UserID å¾Œå°±å¯ä»¥ç”¨ Http Post çš„æ–¹å¼å‘ Medium ç™¼å¸ƒæ–‡ç« ã€‚ä¸‹æ–¹çš„ authorId å°±æ˜¯å‰›å‰›ç”¨ Http Get çš„æ–¹å¼å–å¾—çš„ UserIDã€‚\n\n```http\nPOST https://api.medium.com/v1/users/{{authorId}}/posts\n```\n\nä¸‹é¢æ˜¯ Post çš„ç¯„ä¾‹ï¼Œ`token` ä¸€æ¨£æ˜¯æ”¾åœ¨ `header` è£¡ã€‚å®˜æ–¹çš„ç¯„ä¾‹æ˜¯ç”¨ html ä¾†ç™¼å¸ƒæ–‡ç« ï¼Œæˆ‘å€‘åªè¦å°‡ `contentFormat` æ”¹æˆ markdown å°±å¯ä»¥é”æˆç›®çš„ã€‚\n\n```http\nPOST /v1/users/5303d74c64f66366f00cb9b2a94f3251bf5/posts HTTP/1.1\nHost: api.medium.com\nAuthorization: Bearer 181d415f34379af07b2c11d144dfbe35d\nContent-Type: application/json\nAccept: application/json\nAccept-Charset: utf-8\n\n{\n  \"title\": \"Liverpool FC\",\n  \"contentFormat\": \"html\",\n  \"content\": \"<h1>Liverpool FC</h1><p>Youâ€™ll never walk alone.</p>\",\n  \"canonicalUrl\": \"http://jamietalbot.com/posts/liverpool-fc\",\n  \"tags\": [\"football\", \"sport\", \"Liverpool\"],\n  \"publishStatus\": \"public\"\n}\n```\n\næ ¹æ“šä¸Šé¢ Post çš„ Json ç¯„ä¾‹ï¼Œæˆ‘å€‘å¯ä»¥ç”¢ç”Ÿå‡ºå¦‚ä¸‹çš„ Kotlin Data Classï¼Œæˆ‘é †ä¾¿å¯«äº†ä¸€å€‹å¿«é€Ÿè½‰æˆ Json çš„æ–¹æ³•ï¼š\n\n```kotlin\ndata class MediumApiPost(\n    val title: String,\n    val content: String,\n    val contentFormat: String,\n    val tags: List<String> = listOf(),\n    val publishStatus: String = \"draft\", //é è¨­æ˜¯è‰ç¨¿\n    val canonicalUrl: String = \"\",\n) {\n    fun toJson(): String {\n        return gson.toJson(this)\n    }\n}\n```\n\nç”¢ç”Ÿå‡º Data Class å°±å¯ä»¥å˜—è©¦ Post çœ‹çœ‹ï¼Œæ˜¯å¦æœƒç™¼å¸ƒæ–‡ç« ï¼Œç›´æ¥åˆ©ç”¨å‰›å‰›å¯«å¥½çš„ `getUserData` æ‹¿åˆ° UserIDï¼Œä¹‹å¾Œåœ¨ Postï¼š\n\n```kotlin\nval userID = getUserData(token).data.id\nval medimuApiPost =\n    MdieumApiPost(\"Title\", \"# Title\\nHi\", \"markdown\")\nval request = Request.Builder()\n    .url(\"https://api.medium.com/v1/users/$userID/posts\")\n    .post(mediumApiPost.toJson().toRequestBody(contentType = \"application/json\".toMediaType()))\n    .addHeader(\"Authorization\", \"Bearer $token\")\n    .build()\nval response = client.newCall(request).execute()\n```\n\nå¦‚æœç™¼å¸ƒæˆåŠŸï¼Œå¯ä»¥æ‹¿åˆ° Response Code 201ï¼Œå…¶ä»–çš„éƒ½ä»£è¡¨ç™¼å¸ƒå¤±æ•—ã€‚\n\nå¯«æˆå®Œæ•´çš„ç™¼å¸ƒæ–¹æ³•å¦‚ä¸‹ï¼š\n\n```kotlin\nfun newPost(token: String, mediumApiPost: MediumApiPost): String {\n    val userID = getUserData(token).data.id\n\n    val request = Request.Builder()\n        .url(\"https://api.medium.com/v1/users/$userID/posts\")\n        .post(mediumApiPost.toJson().toRequestBody(contentType = \"application/json\".toMediaType()))\n        .addHeader(\"Authorization\", \"Bearer $token\")\n        .build()\n    val response = client.newCall(request).execute()\n\n    if (response.code != 201 || response.body == null)\n        throw RuntimeException(\"Something Wrong. ${response.body?.byteStream()?.reader()?.readText()}\")\n\n    val text = response.body!!.byteStream().reader().readText()\n    println(text)\n\n    var json = gson.fromJson(text, MediumNewPostResponse::class.java)\n\n    return json.data.url\n}\n```\n\nä¸Šé¢çš„æ–¹æ³•æœƒç›´æ¥å›å‚³ç™¼å¸ƒæˆåŠŸçš„ URLï¼Œå¤±æ•—å‰‡æœƒç›´æ¥æ‹‹å‡º Exceptionã€‚\n\n## GUI\n\nå¯«å¥½æ–¹æ³•å¾Œï¼Œæœ€å¾Œå†ç”¨ `TornadoFX` å¯« GUIï¼Œé€™é‚Šå°±ä¸è¬›è¿° GUI çš„éƒ¨åˆ†ï¼Œæœ‰èˆˆè¶£å¯ä»¥è‡ªå·±åˆ° GitHub ä¸Šçœ‹å°ˆæ¡ˆçš„åŸå§‹ç¢¼ã€‚\n\n## ç¨‹å¼ç¢¼å€å¡Š\n\nå› ç‚º Medium ç›®å‰ä¸¦ä¸æ”¯æ´ç¨‹å¼ç¢¼é«˜äº®ï¼Œå‚³ä¸Šå»çš„ç¨‹å¼ç¢¼å€å¡Šéƒ½æœƒè®Šæˆé»‘åº•çš„ï¼Œç›®å‰æˆ‘æœ‰æƒ³åˆ°çš„è§£æ³•æ˜¯åœ¨ Post ä¸Šå»ä¹‹å‰ï¼Œå°±å…ˆå°‡ç¨‹å¼ç¢¼å€å¡Šéƒ½æ›æˆ GitHub Gistï¼Œä½†é€™å°±éœ€è¦æ›´è¤‡é›œçš„æ–¹å¼è§£æ±ºå•é¡Œäº†ï¼Œæœ‰èˆˆè¶£çš„äººå¯ä»¥è‡ªå·±è©¦è©¦çœ‹ã€‚\n\n## Reference\n\n[Mediumâ€™s API Documentation](https://github.com/Medium/medium-api-docs)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Kotlin/medium-api.md","excerpt":"æˆ‘èªç‚ºç”¨ Markdown ç”¨ä¾†å¯«æŠ€è¡“æ–‡ç« é‚„æ˜¯æœ€é †æ‰‹çš„ï¼Œä½†æ˜¯ Medium çš„ç·¨è¼¯å™¨å»ä¸æ”¯æ´ Markdownã€‚å‰å¹¾å¤©ç”¨ import çš„æ–¹å¼ä¹Ÿå¤±æ•—ï¼Œå¦å°‹ä»–è™•å¾Œç™¼ç¾ Medium æ”¯æ´ç”¨ API ç™¼å¸ƒæ–‡ç« ï¼Œæ›´é‚„æ”¯æ´ç”¨ Markdown å’Œ Html ç™¼å¸ƒã€‚é›–ç„¶ä¸æ‡‚å®˜æ–¹ç‚ºä½•ä¸ç›´æ¥è®“ç”¨æˆ¶ç”¨ Markdown ç™¼å¸ƒï¼Œè€Œæ˜¯è¦ç”¨ APIï¼Œä½†æ˜¯ç«Ÿç„¶æ‰¾åˆ°äº†ä¸€çµ²å¸Œæœ›ï¼Œå°±ä¾†è©¦è©¦çœ‹ç”¨ API çš„æ–¹å¼ç™¼å¸ƒæ–‡ç« ã€‚ æœ¬ç¯‡â€¦","frontmatter":{"title":"ç™¼å¸ƒ Markdown è‡³ Medium","date":"2021-06-15T18:35:56.000Z","draft":false,"tags":["medium","markdown","kotlin","tornadofx"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/98587dc3-5d4e-446a-7d98-b0b1ad36d500/public","description":"æˆ‘èªç‚ºç”¨ Markdown ç”¨ä¾†å¯«æŠ€è¡“æ–‡ç« é‚„æ˜¯æœ€é †æ‰‹çš„ï¼Œä½†æ˜¯ Medium çš„ç·¨è¼¯å™¨å»ä¸æ”¯æ´ Markdownã€‚å‰å¹¾å¤©ç”¨ import çš„æ–¹å¼ä¹Ÿå¤±æ•—ï¼Œå¦å°‹ä»–è™•å¾Œç™¼ç¾ Medium æ”¯æ´ç”¨ API ç™¼å¸ƒæ–‡ç« ï¼Œæ›´é‚„æ”¯æ´ç”¨ Markdown å’Œ Html ç™¼å¸ƒã€‚é›–ç„¶ä¸æ‡‚å®˜æ–¹ç‚ºä½•ä¸ç›´æ¥è®“ç”¨æˆ¶ç”¨ Markdown ç™¼å¸ƒï¼Œè€Œæ˜¯è¦ç”¨ APIï¼Œä½†æ˜¯ç«Ÿç„¶æ‰¾åˆ°äº†ä¸€çµ²å¸Œæœ›ï¼Œå°±ä¾†è©¦è©¦çœ‹ç”¨ API çš„æ–¹å¼ç™¼å¸ƒæ–‡ç« ã€‚"}}},{"node":{"id":"dc1d7172-8fd3-59ca-b4a9-f5085ecbd89e","html":"<p>å…¶å¯¦åœ¨ VSCode å¯« C æ ¹æœ¬ä¸æ˜¯ä¸€ä»¶é›£äº‹ï¼ŒVSCode æœ¬ä¾†å°±æ˜¯ä¸€å€‹å„ªç§€çš„æ–‡å­—ç·¨è¼¯å™¨ï¼Œæ‰€ä»¥è¦è¦å¯« C å®Œå…¨ä¸æ˜¯å•é¡Œï¼Œä½†å•é¡Œæ˜¯å‡ºåœ¨åŸ·è¡Œæˆ– Debug å¯«å¥½çš„ Code å¯¦åœ¨æ˜¯å¾ˆéº»ç…©ï¼Œè¦å…ˆç¶“éä¸å°‘è¨­å®šã€‚è€Œä¸”åœ¨å®˜æ–¹çš„æ–‡ä»¶ä¸­ï¼Œå…¶å¯¦æ˜¯æ•™ä½ æ€éº¼å»ºç½®å°ˆæ¡ˆï¼ŒåŸ·è¡Œ Debugï¼Œå¦‚æœåªæ˜¯å¯«ä¸€é»ç°¡å–®çš„å°ç¨‹å¼æ ¹æœ¬ç”¨ä¸åˆ°é‚£éº¼è¤‡é›œçš„è¨­å®šï¼Œæ‰€ä»¥æœ¬æ–‡æ˜¯æˆ‘ç›®å‰ç™¼ç¾æ¯”è¼ƒå®¹æ˜“åœ¨ VSCode ä¸­åŸ·è¡Œ C å’Œ C++ çš„æ–¹æ³•ã€‚</p>\n<!--more-->\n<h2>gcc g++</h2>\n<p>åœ¨äº†è§£å¦‚ä½•è¨­å®š vscode å‰ï¼Œæˆ‘å€‘å…ˆä¾†äº†è§£ä¸€ä¸‹åŸºæœ¬çš„ gccã€g++ æŒ‡ä»¤ï¼Œé€™æ˜¯ä¸€å€‹ç”¨ä¾†ç·¨è­¯ C ç¨‹å¼ç¢¼æœ€å¿«çš„æ–¹æ³•ï¼Œgcc å°±æ˜¯ C çš„ç·¨è­¯å™¨ï¼Œg++ å‰‡æ˜¯ C++ çš„ã€‚é€™è£¡ä¸æœƒè§£èªªå¦‚ä½•å®‰è£ï¼Œåœ¨ Windows ä¸‹å¯ä»¥ä½¿ç”¨ MinGW (å¦‚æœè¦åœ¨ Windows å®‰è£ MinGWï¼Œç”¨ Chocolatey å®‰è£æ˜¯æœ€å¿«çš„æ–¹å¼)ï¼ŒmacOS å‰‡æ˜¯åªè¦åœ¨ Terminal ä¸‹ gcc æŒ‡ä»¤ï¼Œå°±æœƒè‡ªå‹•å•ä½ è¦ä¸è¦å®‰è£ã€‚</p>\n<p>ä¸‹é¢çš„ç¯„ä¾‹æœƒç·¨è­¯ <code class=\"language-text\">main.cpp</code> çš„ C++ æª”æ¡ˆï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">g++ main.cpp</code></pre></div>\n<p>åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å¾Œï¼Œæœƒç”¢ç”Ÿåç‚º <code class=\"language-text\">a.out</code> çš„æª”æ¡ˆï¼Œå› ç‚ºæˆ‘å€‘æ²’æœ‰æŒ‡å®šè¼¸å‡ºæª”åï¼Œæ‰€ä»¥é è¨­å°±æ˜¯ <code class=\"language-text\">a.out</code>ï¼Œåœ¨ Windows ä¸Šå‰‡ç‚º <code class=\"language-text\">a.exe</code> çš„åŸ·è¡Œæª”ã€‚å¦‚æœè¦åŸ·è¡Œç”¢ç”Ÿçš„åŸ·è¡Œæª”æ¡ˆï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./a.out\n./a.exe <span class=\"token comment\"># On Windows</span></code></pre></div>\n<p>è¦æŒ‡å®šè¼¸å‡ºæª”åä¹Ÿå¾ˆç°¡å–®ï¼ŒåŠ å€‹ <code class=\"language-text\">-o</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">g++ -o main.out main.cpp</code></pre></div>\n<p>é€™æ¨£å°±å¯ä»¥å°‡ <code class=\"language-text\">main.cpp</code> ç·¨è­¯æˆ <code class=\"language-text\">main.out</code> çš„åŸ·è¡Œæª”ã€‚</p>\n<p>ä¸Šé¢é€™äº›ä¸æœƒä¹Ÿæ²’é—œä¿‚ï¼Œä½†æˆ‘é‚„æ˜¯å»ºè­°äº†è§£ä¸€ä¸‹ï¼Œå› ç‚ºç­‰ä¸€ä¸‹è¦å®‰è£çš„æ¨¡çµ„ï¼Œåªæ˜¯å¹«ä½ å®Œæˆé€™äº›æ­¥é©Ÿï¼Œå¦‚æœå®Œå…¨ä¸äº†è§£æŒ‡ä»¤çš„åŠŸèƒ½ï¼Œç™¼ç”Ÿå•é¡Œå¯èƒ½è‡ªå·±æœƒæ²’è¾¦æ³•è§£æ±ºã€‚</p>\n<h2>è¨­å®š VSCode</h2>\n<p>ç¬¬ä¸€æ­¥å°±æ˜¯å…ˆåœ¨ VSCode ä¸­å®‰è£ <strong>C/C++</strong>ï¼Œå’Œ <strong>Code Runner</strong>ï¼Œå…©å€‹å»¶ä¼¸æ¨¡çµ„ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608014749.png\" alt=\"img\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608021309.png\" alt=\"img\"></p>\n<p>å®‰è£å®Œæˆå¾Œï¼Œæ‡‰è©²å°±æœƒçœ‹åˆ°å³ä¸Šè§’å‡ºç¾äº†ä¸€å€‹åŸ·è¡Œçš„æŒ‰éˆ•ï¼Œå¯ä»¥æŒ‰æŒ‰çœ‹ç¨‹å¼æœƒä¸æœƒåŸ·è¡Œã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608021808.png\" alt=\"img\"></p>\n<p>å¦‚æœæ‰¾ä¸åˆ°æŒ‰éˆ•ï¼Œæˆ–æ˜¯æƒ³è¦åœä¸‹ç¨‹å¼ï¼Œä¹Ÿå¯ä»¥ç”¨æŒ‰ä¸‹ <code class=\"language-text\">f1</code> çš„æ–¹å¼å«å‡º VSCode çš„æŒ‡ä»¤è¼¸å…¥çª—ï¼Œè¼¸å…¥ <code class=\"language-text\">Run Code</code> æˆ–æ˜¯ <code class=\"language-text\">Stop Code Run</code>ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608022037.png\" alt=\"img\"></p>\n<h2>Run In Terminal</h2>\n<p>ç¾åœ¨å¯èƒ½æœƒç™¼å…ˆä¸€å€‹å•é¡Œï¼Œé€™ç¨®åŸ·è¡Œæ¨¡å¼æ˜¯æ²’æœ‰è¾¦æ³•æ¥æ”¶éµç›¤è¼¸å…¥çš„ï¼Œå¦‚æœæƒ³è¦æ¥æ”¶éµç›¤è¼¸å…¥ï¼Œæˆ‘å€‘è¦æŠŠåŸ·è¡Œæ¨¡å¼æ”¹æˆåœ¨ Terminal ä¸­ã€‚æ‰€ä»¥æˆ‘å€‘è¦é–‹å•Ÿ VSCode çš„ <code class=\"language-text\">settings.json</code> è¨­å®šæª”ï¼Œä¾†æ›´æ”¹è¨­å®šï¼Œä¸€æ¨£æ˜¯ç”¨ <code class=\"language-text\">f1</code> å«å‡ºå‘½ä»¤è¼¸å…¥å€ï¼Œä¸¦å°‹æ‰¾ <code class=\"language-text\">open settings json</code>ï¼š</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608024052.png\" alt=\"img\"></p>\n<p>æ‰“é–‹å¾Œåœ¨è£¡é¢æ–°å¢ä¸€è¡Œï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"code-runner.runInTerminal\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></code></pre></div>\n<p>å¦‚æœå‰æ–¹æœ‰å…¶ä»–è¨­å®šå€¼ï¼Œè¨˜å¾—åœ¨å‰é¢çš„è¨­å®šå€¼çš„æœ€å¾Œé¢åŠ å€‹é€—è™Ÿ <code class=\"language-text\">,</code>ï¼š</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608024259.png\" alt=\"img\"></p>\n<p>ç¾åœ¨å°±å¯ä»¥æ–¹ä¾¿çš„åœ¨ VSCode ä¸­å¯« Cï¼Œå’Œæ–¹ä¾¿çš„åŸ·è¡Œä»–å€‘ã€‚</p>","rawMarkdownBody":"\nå…¶å¯¦åœ¨ VSCode å¯« C æ ¹æœ¬ä¸æ˜¯ä¸€ä»¶é›£äº‹ï¼ŒVSCode æœ¬ä¾†å°±æ˜¯ä¸€å€‹å„ªç§€çš„æ–‡å­—ç·¨è¼¯å™¨ï¼Œæ‰€ä»¥è¦è¦å¯« C å®Œå…¨ä¸æ˜¯å•é¡Œï¼Œä½†å•é¡Œæ˜¯å‡ºåœ¨åŸ·è¡Œæˆ– Debug å¯«å¥½çš„ Code å¯¦åœ¨æ˜¯å¾ˆéº»ç…©ï¼Œè¦å…ˆç¶“éä¸å°‘è¨­å®šã€‚è€Œä¸”åœ¨å®˜æ–¹çš„æ–‡ä»¶ä¸­ï¼Œå…¶å¯¦æ˜¯æ•™ä½ æ€éº¼å»ºç½®å°ˆæ¡ˆï¼ŒåŸ·è¡Œ Debugï¼Œå¦‚æœåªæ˜¯å¯«ä¸€é»ç°¡å–®çš„å°ç¨‹å¼æ ¹æœ¬ç”¨ä¸åˆ°é‚£éº¼è¤‡é›œçš„è¨­å®šï¼Œæ‰€ä»¥æœ¬æ–‡æ˜¯æˆ‘ç›®å‰ç™¼ç¾æ¯”è¼ƒå®¹æ˜“åœ¨ VSCode ä¸­åŸ·è¡Œ C å’Œ C++ çš„æ–¹æ³•ã€‚\n\n<!--more-->\n\n## gcc g++\n\nåœ¨äº†è§£å¦‚ä½•è¨­å®š vscode å‰ï¼Œæˆ‘å€‘å…ˆä¾†äº†è§£ä¸€ä¸‹åŸºæœ¬çš„ gccã€g++ æŒ‡ä»¤ï¼Œé€™æ˜¯ä¸€å€‹ç”¨ä¾†ç·¨è­¯ C ç¨‹å¼ç¢¼æœ€å¿«çš„æ–¹æ³•ï¼Œgcc å°±æ˜¯ C çš„ç·¨è­¯å™¨ï¼Œg++ å‰‡æ˜¯ C++ çš„ã€‚é€™è£¡ä¸æœƒè§£èªªå¦‚ä½•å®‰è£ï¼Œåœ¨ Windows ä¸‹å¯ä»¥ä½¿ç”¨ MinGW (å¦‚æœè¦åœ¨ Windows å®‰è£ MinGWï¼Œç”¨ Chocolatey å®‰è£æ˜¯æœ€å¿«çš„æ–¹å¼)ï¼ŒmacOS å‰‡æ˜¯åªè¦åœ¨ Terminal ä¸‹ gcc æŒ‡ä»¤ï¼Œå°±æœƒè‡ªå‹•å•ä½ è¦ä¸è¦å®‰è£ã€‚\n\nä¸‹é¢çš„ç¯„ä¾‹æœƒç·¨è­¯ `main.cpp` çš„ C++ æª”æ¡ˆï¼š\n\n```bash\ng++ main.cpp\n```\n\nåŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å¾Œï¼Œæœƒç”¢ç”Ÿåç‚º `a.out` çš„æª”æ¡ˆï¼Œå› ç‚ºæˆ‘å€‘æ²’æœ‰æŒ‡å®šè¼¸å‡ºæª”åï¼Œæ‰€ä»¥é è¨­å°±æ˜¯ `a.out`ï¼Œåœ¨ Windows ä¸Šå‰‡ç‚º `a.exe` çš„åŸ·è¡Œæª”ã€‚å¦‚æœè¦åŸ·è¡Œç”¢ç”Ÿçš„åŸ·è¡Œæª”æ¡ˆï¼š\n\n```bash\n./a.out\n./a.exe # On Windows\n```\n\nè¦æŒ‡å®šè¼¸å‡ºæª”åä¹Ÿå¾ˆç°¡å–®ï¼ŒåŠ å€‹ `-o`ï¼š\n\n```bash\ng++ -o main.out main.cpp\n```\n\né€™æ¨£å°±å¯ä»¥å°‡ `main.cpp` ç·¨è­¯æˆ `main.out` çš„åŸ·è¡Œæª”ã€‚\n\nä¸Šé¢é€™äº›ä¸æœƒä¹Ÿæ²’é—œä¿‚ï¼Œä½†æˆ‘é‚„æ˜¯å»ºè­°äº†è§£ä¸€ä¸‹ï¼Œå› ç‚ºç­‰ä¸€ä¸‹è¦å®‰è£çš„æ¨¡çµ„ï¼Œåªæ˜¯å¹«ä½ å®Œæˆé€™äº›æ­¥é©Ÿï¼Œå¦‚æœå®Œå…¨ä¸äº†è§£æŒ‡ä»¤çš„åŠŸèƒ½ï¼Œç™¼ç”Ÿå•é¡Œå¯èƒ½è‡ªå·±æœƒæ²’è¾¦æ³•è§£æ±ºã€‚\n\n## è¨­å®š VSCode\n\nç¬¬ä¸€æ­¥å°±æ˜¯å…ˆåœ¨ VSCode ä¸­å®‰è£ **C/C++**ï¼Œå’Œ **Code Runner**ï¼Œå…©å€‹å»¶ä¼¸æ¨¡çµ„ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608014749.png)\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608021309.png)\n\nå®‰è£å®Œæˆå¾Œï¼Œæ‡‰è©²å°±æœƒçœ‹åˆ°å³ä¸Šè§’å‡ºç¾äº†ä¸€å€‹åŸ·è¡Œçš„æŒ‰éˆ•ï¼Œå¯ä»¥æŒ‰æŒ‰çœ‹ç¨‹å¼æœƒä¸æœƒåŸ·è¡Œã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608021808.png)\n\nå¦‚æœæ‰¾ä¸åˆ°æŒ‰éˆ•ï¼Œæˆ–æ˜¯æƒ³è¦åœä¸‹ç¨‹å¼ï¼Œä¹Ÿå¯ä»¥ç”¨æŒ‰ä¸‹ `f1` çš„æ–¹å¼å«å‡º VSCode çš„æŒ‡ä»¤è¼¸å…¥çª—ï¼Œè¼¸å…¥ `Run Code` æˆ–æ˜¯ `Stop Code Run`ã€‚\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608022037.png)\n\n## Run In Terminal\n\nç¾åœ¨å¯èƒ½æœƒç™¼å…ˆä¸€å€‹å•é¡Œï¼Œé€™ç¨®åŸ·è¡Œæ¨¡å¼æ˜¯æ²’æœ‰è¾¦æ³•æ¥æ”¶éµç›¤è¼¸å…¥çš„ï¼Œå¦‚æœæƒ³è¦æ¥æ”¶éµç›¤è¼¸å…¥ï¼Œæˆ‘å€‘è¦æŠŠåŸ·è¡Œæ¨¡å¼æ”¹æˆåœ¨ Terminal ä¸­ã€‚æ‰€ä»¥æˆ‘å€‘è¦é–‹å•Ÿ VSCode çš„ `settings.json` è¨­å®šæª”ï¼Œä¾†æ›´æ”¹è¨­å®šï¼Œä¸€æ¨£æ˜¯ç”¨ `f1` å«å‡ºå‘½ä»¤è¼¸å…¥å€ï¼Œä¸¦å°‹æ‰¾ `open settings json`ï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608024052.png)\n\næ‰“é–‹å¾Œåœ¨è£¡é¢æ–°å¢ä¸€è¡Œï¼š\n\n```json\n\"code-runner.runInTerminal\": true\n```\n\nå¦‚æœå‰æ–¹æœ‰å…¶ä»–è¨­å®šå€¼ï¼Œè¨˜å¾—åœ¨å‰é¢çš„è¨­å®šå€¼çš„æœ€å¾Œé¢åŠ å€‹é€—è™Ÿ `,`ï¼š\n\n![img](https://cdn.jsdelivr.net/gh/TonyPepeBear/ImageBed@main/20210608024259.png)\n\nç¾åœ¨å°±å¯ä»¥æ–¹ä¾¿çš„åœ¨ VSCode ä¸­å¯« Cï¼Œå’Œæ–¹ä¾¿çš„åŸ·è¡Œä»–å€‘ã€‚\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/VSCode/vscode-clang.md","excerpt":"å…¶å¯¦åœ¨ VSCode å¯« C æ ¹æœ¬ä¸æ˜¯ä¸€ä»¶é›£äº‹ï¼ŒVSCode æœ¬ä¾†å°±æ˜¯ä¸€å€‹å„ªç§€çš„æ–‡å­—ç·¨è¼¯å™¨ï¼Œæ‰€ä»¥è¦è¦å¯« C å®Œå…¨ä¸æ˜¯å•é¡Œï¼Œä½†å•é¡Œæ˜¯å‡ºåœ¨åŸ·è¡Œæˆ– Debug å¯«å¥½çš„ Code å¯¦åœ¨æ˜¯å¾ˆéº»ç…©ï¼Œè¦å…ˆç¶“éä¸å°‘è¨­å®šã€‚è€Œä¸”åœ¨å®˜æ–¹çš„æ–‡ä»¶ä¸­ï¼Œå…¶å¯¦æ˜¯æ•™ä½ æ€éº¼å»ºç½®å°ˆæ¡ˆï¼ŒåŸ·è¡Œ Debugï¼Œå¦‚æœåªæ˜¯å¯«ä¸€é»ç°¡å–®çš„å°ç¨‹å¼æ ¹æœ¬ç”¨ä¸åˆ°é‚£éº¼è¤‡é›œçš„è¨­å®šï¼Œæ‰€ä»¥æœ¬æ–‡æ˜¯æˆ‘ç›®å‰ç™¼ç¾æ¯”è¼ƒå®¹æ˜“åœ¨ VSCode ä¸­åŸ·è¡Œ C å’Œ C++ çš„æ–¹æ³•ã€‚ â€¦","frontmatter":{"title":"ç”¨ VSCode å¯« C/C++","date":"2021-06-07T16:55:19.000Z","draft":false,"tags":["vscode","code","c","c++"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/48d8b9f1-209f-44ab-0f7b-92b5f082a500/public","description":"å…¶å¯¦åœ¨ VSCode å¯« C æ ¹æœ¬ä¸æ˜¯ä¸€ä»¶é›£äº‹ï¼ŒVSCode æœ¬ä¾†å°±æ˜¯ä¸€å€‹å„ªç§€çš„æ–‡å­—ç·¨è¼¯å™¨ï¼Œæ‰€ä»¥è¦è¦å¯« C å®Œå…¨ä¸æ˜¯å•é¡Œï¼Œä½†å•é¡Œæ˜¯å‡ºåœ¨åŸ·è¡Œæˆ– Debug å¯«å¥½çš„ Code å¯¦åœ¨æ˜¯å¾ˆéº»ç…©ã€‚"}}},{"node":{"id":"870e064c-4e10-52cf-8ee4-7e88a63fa689","html":"<p>Github Actions æ˜¯ Github å®˜æ–¹æä¾›çš„ CI/CD æœå‹™ï¼Œç·¨å¯«ç°¡å–®çš„è…³æœ¬ï¼Œå°±å¯ä»¥åœ¨æ¯æ¬¡ Pushã€ PR æ™‚ï¼Œè‡ªå‹•çš„æª¢æŸ¥ç¨‹å¼ç¢¼å¯ä¸å¯ä»¥é€šé Testï¼Œæˆ–æ˜¯ç›´æ¥ç”¢ç”Ÿ Release ä¾†äº¤ä»˜å°ˆæ¡ˆæˆå“ã€‚å¦å¤–ä¸€å€‹é‡é»æ˜¯ï¼Œé€™å€‹æœå‹™å®Œå…¨å…è²»ï¼Œè€Œåœ¨ç§æœ‰ Repoï¼Œå‰‡æ˜¯æœ‰é™åˆ¶å®¹å™¨çš„åŸ·è¡Œæ™‚é–“ã€‚æœ¬æ–‡ä½¿ç”¨ Github Actions ä¾†è‡ªå‹•å°‡ Hugo å°ˆæ¡ˆè‡ªå‹•ç”¢ç”Ÿéœæ…‹ç¶²é ï¼Œä¸¦ä¸”å°‡ç¶²é ç™¼å¸ƒåˆ° <code class=\"language-text\">gh-pages</code> çš„ git åˆ†æ”¯ã€‚</p>\n<!--more-->\n<p>Github Actions ä¹Ÿæ˜¯å®¹å™¨åŒ–æŠ€è¡“çš„ä¸€ç’°ï¼Œä¹Ÿæ˜¯é¡ä¼¼ Docker å®¹å™¨çš„ä¸€ç¨®ï¼Œå¦‚æœå° Docker é‚„ä¸ç†Ÿæ‚‰ï¼Œæ‡‰è©²æœƒå°æœ¬æ–‡æœ‰é»åƒåŠ›ï¼Œä½†ä¹Ÿå¯ä»¥å°å®Œå…¨ä¸äº†è§£ Docker çš„äººï¼Œå¤šä¸€é»å°å®¹å™¨åŒ–æŠ€è¡“çš„èªè­˜ã€‚</p>\n<h2>ç·¨å¯« Workflows æª”æ¡ˆ</h2>\n<p>Workflows å·¥ä½œæµæª”æ¡ˆï¼Œå°±æ˜¯åœ¨ CI/CD ä¸­æœ€é‡è¦çš„æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆå¯«ä¸‹é€™å€‹å°ˆæ¡ˆçš„å·¥ä½œæµç¨‹ï¼Œåƒæ˜¯å¦‚ä½• Testã€äº¤ä»˜æˆå“ï¼Œéƒ½æ˜¯å¯«åœ¨é€™çš„æª”æ¡ˆè£¡ï¼ŒGithub æœƒè‡ªå‹•è®€å–æ‰€æœ‰å·¥ä½œç•™æª”æ¡ˆå’Œè‡ªå‹•åŸ·è¡Œï¼Œæ‰€ä»¥åªè¦å¯«å¥½ä¸€æ¬¡ï¼ŒåŸºæœ¬ä¸Šå°±ä¸€å‹æ°¸é€¸ï¼Œæ¯æ¬¡åªéœ€è¦ Pushï¼ŒGihtub å°±æœƒæŒ‰ç…§è…³æœ¬å®ŒæˆæŒ‡å®šçš„å·¥ä½œã€‚</p>\n<p>Github Actions çš„ Worksflows æª”æ¡ˆéƒ½æ˜¯æ”¾åœ¨å°ˆæ¡ˆè·Ÿç›®éŒ„çš„ <code class=\"language-text\">/.github/workflows</code> é€™å€‹è³‡æ–™å¤¾ä¸­ï¼ŒGithub æœƒè®€å–é€™å€‹è³‡æ–™å¤¾ä¸­çš„ <code class=\"language-text\">*.yml</code> æª”æ¡ˆï¼Œä¸¦ä¸”è‡ªå‹•åŸ·è¡Œä»–å€‘ã€‚æˆ‘å€‘ç¾åœ¨åœ¨é€™å€‹ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹å«åš <code class=\"language-text\">hugo-public.yml</code> çš„æª”æ¡ˆï¼Œæª”åå¯ä»¥è‡ªè¨‚æ²’é—œä¿‚ï¼ŒGithub ä¸æœƒé—œå¿ƒæª”åé•·æ€æ¨£ï¼Œå¦‚æœæœ‰å¤šå€‹æª”æ¡ˆä¹Ÿæ¯å€‹éƒ½æœƒåˆ†åˆ¥åŸ·è¡Œã€‚</p>\n<p>æˆ‘å€‘åœ¨ç¾åœ¨ <code class=\"language-text\">/.github/workflows/hugo-public.yml</code> çš„æª”æ¡ˆä¸­æ–°å¢å¦‚ä¸‹çš„è…³æœ¬ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> github pages\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> master <span class=\"token comment\"># Set a branch to deploy</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span><span class=\"token number\">20.04</span>\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">submodules</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># Fetch Hugo themes (true OR recursive)</span>\n          <span class=\"token key atrule\">fetch-depth</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token comment\"># Fetch all history for .GitInfo and .Lastmod</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Hugo\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>hugo@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">hugo-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"latest\"</span>\n          <span class=\"token key atrule\">extended</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> hugo <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>minify\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages@v3\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> github.ref == 'refs/heads/master'\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">publish_dir</span><span class=\"token punctuation\">:</span> ./public</code></pre></div>\n<p>ä¸‹é¢æˆ‘å€‘åˆ†æ®µä¾†è§£é‡‹ä¸Šé¢è…³æœ¬æ¯è¡Œçš„æ„æ€ã€‚</p>\n<h2>Name</h2>\n<p>åŸºæœ¬ä¸Šå°±æ˜¯é€™å€‹è…³æœ¬çš„åç¨±ï¼Œå¯ä»¥éš¨æ„è‡ªè¨‚ä¸æœƒå½±éŸ¿çµæœã€‚</p>\n<h2>On</h2>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> master <span class=\"token comment\"># Set a branch to deploy</span>\n  pull_request<span class=\"token punctuation\">:</span></code></pre></div>\n<p><code class=\"language-text\">on</code> å€æ®µå®šç¾©äº†é€™å€‹è…³æœ¬ä»€éº¼æ™‚å€™æœƒè¢«åŸ·è¡Œï¼Œæˆ‘å€‘ç¾åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œå®šç¾©äº†é€™å€‹è…³æœ¬æœƒåœ¨ <code class=\"language-text\">master</code> é€™å€‹åˆ†æ”¯è¢« push çš„æ™‚å€™è‡ªå‹•åŸ·è¡Œã€‚Github ç¾åœ¨é è¨­çš„åˆ†æ”¯åç¨±æ˜¯ <code class=\"language-text\">main</code>ï¼Œå¦‚æœæ˜¯ <code class=\"language-text\">main</code> çš„äººåƒè¬è¦è¨˜å¾—æ”¹ï¼Œä»¥å…é€™å€‹è…³æœ¬æ°¸é ä¸æœƒåŸ·è¡Œã€‚</p>\n<h2>Jobs</h2>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ä»¥ä¸‹çœç•¥</span></code></pre></div>\n<p>jobs æ˜¯æ•´å€‹æª”æ¡ˆä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¯ä»¥åˆ†æˆè¨±å¤šä¸åŒçš„ Jobï¼Œç›®å‰æˆ‘å€‘åªæœ‰ä¸€å€‹å«åš <code class=\"language-text\">deploy</code> çš„ Jobï¼Œé€™å€‹åç¨±ä¹Ÿæ˜¯å¯ä»¥è‡ªè¨‚çš„ï¼Œé€™è£¡åªæ˜¯å–å« <code class=\"language-text\">deploy</code> çœ‹ä¸é †çœ¼å¯ä»¥è‡ªå·±æ›ã€‚å¦‚æœé‚„éœ€è¦æœ‰å…¶ä»–å·¥ä½œï¼Œå¯ä»¥è‡ªå·±è¦–æƒ…æ³å¢åŠ ã€‚</p>\n<h3>Job</h3>\n<p>çµ‚æ–¼ä¾†åˆ°æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œdeploy ä»»å‹™ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå°±å®šç¾©äº†é€™å€‹ä»»å‹™è¦ Run åœ¨å“ªå€‹å®¹å™¨å…§ï¼Œæˆ–æ˜¯ç¨±ä½œå“ªå€‹ç³»çµ±å…§ã€‚é€™é‚Šæ˜¯ç”¨ <code class=\"language-text\">ubuntu</code> çš„ 20.04ï¼Œå»ºè­°ä¸è¦äº‚æ”¹ï¼Œå› ç‚ºå…¶ä»–çš„ Linux ä¸ä¸€å®šå¯ä»¥å®Œä»»å‹™ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span><span class=\"token number\">20.04</span>\n  <span class=\"token comment\">## ä»¥ä¸‹çœç•¥</span></code></pre></div>\n<h3>Steps</h3>\n<p>æ¥ä¸‹ä¾†å°±æ˜¯åˆ†æ­¥é©ŸåŸ·è¡Œå‘½ä»¤ï¼Œ<code class=\"language-text\">uses</code> æ˜¯åˆ©ç”¨ Github ä¸Šåˆ¥äººå·²ç¶“å¯«å¥½çš„ Actions è…³æœ¬ä¾†åŸ·è¡Œå‘½ä»¤ï¼Œåƒæ˜¯ç¬¬ä¸€å€‹ <code class=\"language-text\">uses: actions/checkout@v2</code> å°±æ˜¯æç”¨ Github ä¸Šåˆ¥äººå·²ç¶“å¯«å¥½çš„ <code class=\"language-text\">git checkout</code> å‘½ä»¤ä¾†æŠŠå°ˆæ¡ˆ checkout åˆ°å®¹å™¨ä¸­ã€‚</p>\n<p>ç¬¬äºŒå€‹éƒ¨åˆ†ä¹Ÿæ˜¯ä½¿ç”¨åˆ¥äººå·²ç¶“å¯«å¥½çš„è…³æœ¬ï¼Œå¿«é€Ÿçš„å®‰è£ Hugo åˆ°å®¹å™¨å…§ï¼Œç”¨åˆ¥äººå¯«å¥½çš„æ±è¥¿ä¾†å®Œæˆå·¥ä½œï¼Œé¿å…ä¸å¿…è¦çš„é‡è¤‡é€ è¼ªå­ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">submodules</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>  <span class=\"token comment\"># Fetch Hugo themes (true OR recursive)</span>\n        <span class=\"token key atrule\">fetch-depth</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>    <span class=\"token comment\"># Fetch all history for .GitInfo and .Lastmod</span>\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup Hugo\n    <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>hugo@v2\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">hugo-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'latest'</span>\n        <span class=\"token key atrule\">extended</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n    <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> hugo <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>minify\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy\n    <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peaceiris/actions<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages@v3\n    <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> github.ref == 'refs/heads/master'\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">publish_dir</span><span class=\"token punctuation\">:</span> ./public</code></pre></div>\n<p>çœ‹åˆ°é€™è£¡ä¹Ÿå¯ä»¥ç™¼ç¾ä»»å‹™ä¹Ÿæ˜¯åˆ†å¾ˆå¤šæ­¥é©Ÿï¼Œç¬¬ä¸‰éƒ¨åˆ†çš„ Build å°±æ˜¯åƒæ˜¯æˆ‘å€‘åœ¨æœ¬æ©Ÿç›®éŒ„çš„ç”¢ç”Ÿæ–¹æ³•ä¸€æ¨£ï¼Œç›´æ¥è¼¸å…¥ <code class=\"language-text\">hugo</code> å‘½ä»¤ç”¢ç”Ÿéœæ…‹ç¶²é ã€‚</p>\n<p>ç¬¬å››éƒ¨åˆ†çš„ Deploy å°±æœƒæ¯”è¼ƒè¤‡é›œï¼Œé€™é‚Šä¹Ÿæ˜¯åˆ©ç”¨åˆ¥äººå¯«å¥½ç”¨ä¾†ç™¼å¸ƒ Github Pages çš„ä»»å‹™ï¼Œä»–æœƒéœ€è¦ä¸€å€‹ Github Tokenï¼Œé€™å€‹ Token æ˜¯è¦ç”¨ä¾†å° Repository æœ‰ Push çš„æ¬Šé™ï¼Œé›–ç„¶å¯ä»¥ç›´æ¥å¯«åœ¨è…³æœ¬è£¡ï¼Œä½†æ˜¯å°±æ‰€æœ‰äººéƒ½çœ‹å¾—åˆ°ä½ çš„ Tokenï¼Œé‚£å°±æœƒç”¢ç”Ÿè³‡å®‰å•é¡Œã€‚æ‰€ä»¥ Github æä¾› Secrets çš„æ¨¡å¼ï¼Œå¯ä»¥æŠŠä¸æ–¹ä¾¿ç›´æ¥å¯«åœ¨å°ˆæ¡ˆè£¡çš„æ©Ÿæ•è³‡æ–™ï¼Œæ”¾åœ¨ Github ä¸Šã€‚</p>\n<p>æ‰€ä»¥æˆ‘å€‘ç¾åœ¨æœƒæœ‰å…©ä»¶äº‹è¦åšï¼š</p>\n<ol>\n<li>ç”¢ç”Ÿ Token</li>\n<li>æŠŠ Token æ”¾åˆ°å°ˆæ¡ˆçš„ Secrets ä¸­</li>\n</ol>\n<p>æˆ‘å€‘å…ˆä¾†ç”¢ç”Ÿ Tokenï¼Œå…ˆåˆ°å€‹äººçš„è¨­å®šé é¢æ‰¾åˆ° Developer settingsï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9cec1b4f-5bf6-4e41-9177-3cbe9ccfd400/large\" alt=\"img\"></p>\n<p>å†åˆ° Token çš„é é¢ç”¢ç”Ÿæ–°çš„ Tokenï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/dfa652f6-b8b1-4df2-5b7f-ccdda2e8df00/large\" alt=\"img\"></p>\n<p>åç¨±å¯ä»¥è‡ªå·±éš¨æ„è¨‚ï¼ŒRepo çš„æ¬Šé™å°±å…¨éƒ¨æ‰“é–‹ï¼Œé™¤äº† Repo ä»¥å¤–çš„æ¬Šé™å‰‡éƒ½ä¸éœ€è¦ã€‚éƒ½ç¢ºå®šå¾Œç›´æ¥æ‹‰åˆ°æœ€ä¸‹é¢ç”¢ç”Ÿ Tokenï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/94de0480-f57a-4bef-b1e1-9ce3f75d2c00/large\" alt=\"img\"></p>\n<p>æœƒå¾—åˆ°ä¸€çµ„æ–°çš„ Tokenï¼Œè«‹æ³¨æ„ä¸è¦åƒæˆ‘ä¸€æ¨£ Show å‡ºä¾†çµ¦åˆ¥äººçœ‹ï¼Œè«‹å¦¥å–„ä¿å­˜ï¼Œè€Œä¸” Github ä¹Ÿåªæœƒé¡¯ç¤ºé€™ä¸€æ¬¡ï¼Œä»¥å¾Œæƒ³è¦çœ‹éƒ½çœ‹ä¸åˆ°ï¼Œåªèƒ½ç”¢ç”Ÿæ–°çš„ Tokenã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/13bcbfe0-5bbc-4292-5679-cd5d1dba9f00/large\" alt=\"img\"></p>\n<p>è¤‡è£½ä¸‹ Token å¾Œï¼Œæˆ‘å€‘åˆ°å°ˆæ¡ˆå±¤ç´šçš„è¨­å®šï¼Œæ³¨æ„æ˜¯<strong>å°ˆæ¡ˆ</strong>çš„è¨­å®šï¼Œä¸æ˜¯å€‹äººè¨­å®šï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d5b06f39-8b64-4f76-3f68-84d30fbc9a00/large\" alt=\"img\"></p>\n<p>æ‰¾åˆ° Secrets ä¸¦æ–°å¢ Secretsï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/409789e1-87f4-4469-fcf4-032a27e05700/large\" alt=\"img\"></p>\n<p>åå­—å–å¥½å¾Œï¼Œå¡«å…¥å‰›å‰›æ‹¿åˆ°çš„ Tokenï¼Œæ³¨æ„åç¨±è¦å’Œå‰›å‰›åœ¨è…³æœ¬ä¸­å¯«çš„ä¸€æ¨£ï¼š</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/8e7912d5-53fc-491a-a638-bee48f87be00/large\" alt=\"img\"></p>\n<p>éƒ½å¡«å®Œå¾Œå°±å¤§åŠŸå‘Šæˆï¼ŒåŸºæœ¬ä¸Šåªè¦ Push åˆ° Github ä¸Šï¼Œæ‡‰è©²å°±æœƒè‡ªå‹•è§¸ç™¼ä¸Šé¢å¯«çš„å·¥ä½œï¼Œä»¥å¾Œåªè¦æ–‡ç« æœ‰æ–°çš„è®Šå‹•ï¼ŒPush ä¸Šä¾†å°±æœƒè‡ªå‹•æ›´æ–°ç¶²é ç¶²é åˆ°å°ˆæ¡ˆçš„ <code class=\"language-text\">gh-pages</code> åˆ†ä¹‹ä¸Šã€‚æƒ³è¦é€²ä¸€æ­¥çœ‹åˆ° Pages çš„è¨­å®šï¼Œå¯ä»¥åˆ°å°ˆæ¡ˆä¸‹çš„ Pages çš„è¨­å®šä¸‹çœ‹çœ‹ï¼Œä¹Ÿå¯ä»¥åœ¨é€™è£¡è‡ªè¨‚ Domianã€‚</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/e1c327a2-2e73-45ff-7305-a8440010d600/large\" alt=\"img\"></p>","rawMarkdownBody":"\nGithub Actions æ˜¯ Github å®˜æ–¹æä¾›çš„ CI/CD æœå‹™ï¼Œç·¨å¯«ç°¡å–®çš„è…³æœ¬ï¼Œå°±å¯ä»¥åœ¨æ¯æ¬¡ Pushã€ PR æ™‚ï¼Œè‡ªå‹•çš„æª¢æŸ¥ç¨‹å¼ç¢¼å¯ä¸å¯ä»¥é€šé Testï¼Œæˆ–æ˜¯ç›´æ¥ç”¢ç”Ÿ Release ä¾†äº¤ä»˜å°ˆæ¡ˆæˆå“ã€‚å¦å¤–ä¸€å€‹é‡é»æ˜¯ï¼Œé€™å€‹æœå‹™å®Œå…¨å…è²»ï¼Œè€Œåœ¨ç§æœ‰ Repoï¼Œå‰‡æ˜¯æœ‰é™åˆ¶å®¹å™¨çš„åŸ·è¡Œæ™‚é–“ã€‚æœ¬æ–‡ä½¿ç”¨ Github Actions ä¾†è‡ªå‹•å°‡ Hugo å°ˆæ¡ˆè‡ªå‹•ç”¢ç”Ÿéœæ…‹ç¶²é ï¼Œä¸¦ä¸”å°‡ç¶²é ç™¼å¸ƒåˆ° `gh-pages` çš„ git åˆ†æ”¯ã€‚\n\n<!--more-->\n\nGithub Actions ä¹Ÿæ˜¯å®¹å™¨åŒ–æŠ€è¡“çš„ä¸€ç’°ï¼Œä¹Ÿæ˜¯é¡ä¼¼ Docker å®¹å™¨çš„ä¸€ç¨®ï¼Œå¦‚æœå° Docker é‚„ä¸ç†Ÿæ‚‰ï¼Œæ‡‰è©²æœƒå°æœ¬æ–‡æœ‰é»åƒåŠ›ï¼Œä½†ä¹Ÿå¯ä»¥å°å®Œå…¨ä¸äº†è§£ Docker çš„äººï¼Œå¤šä¸€é»å°å®¹å™¨åŒ–æŠ€è¡“çš„èªè­˜ã€‚\n\n## ç·¨å¯« Workflows æª”æ¡ˆ\n\nWorkflows å·¥ä½œæµæª”æ¡ˆï¼Œå°±æ˜¯åœ¨ CI/CD ä¸­æœ€é‡è¦çš„æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆå¯«ä¸‹é€™å€‹å°ˆæ¡ˆçš„å·¥ä½œæµç¨‹ï¼Œåƒæ˜¯å¦‚ä½• Testã€äº¤ä»˜æˆå“ï¼Œéƒ½æ˜¯å¯«åœ¨é€™çš„æª”æ¡ˆè£¡ï¼ŒGithub æœƒè‡ªå‹•è®€å–æ‰€æœ‰å·¥ä½œç•™æª”æ¡ˆå’Œè‡ªå‹•åŸ·è¡Œï¼Œæ‰€ä»¥åªè¦å¯«å¥½ä¸€æ¬¡ï¼ŒåŸºæœ¬ä¸Šå°±ä¸€å‹æ°¸é€¸ï¼Œæ¯æ¬¡åªéœ€è¦ Pushï¼ŒGihtub å°±æœƒæŒ‰ç…§è…³æœ¬å®ŒæˆæŒ‡å®šçš„å·¥ä½œã€‚\n\nGithub Actions çš„ Worksflows æª”æ¡ˆéƒ½æ˜¯æ”¾åœ¨å°ˆæ¡ˆè·Ÿç›®éŒ„çš„ `/.github/workflows` é€™å€‹è³‡æ–™å¤¾ä¸­ï¼ŒGithub æœƒè®€å–é€™å€‹è³‡æ–™å¤¾ä¸­çš„ `*.yml` æª”æ¡ˆï¼Œä¸¦ä¸”è‡ªå‹•åŸ·è¡Œä»–å€‘ã€‚æˆ‘å€‘ç¾åœ¨åœ¨é€™å€‹ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹å«åš `hugo-public.yml` çš„æª”æ¡ˆï¼Œæª”åå¯ä»¥è‡ªè¨‚æ²’é—œä¿‚ï¼ŒGithub ä¸æœƒé—œå¿ƒæª”åé•·æ€æ¨£ï¼Œå¦‚æœæœ‰å¤šå€‹æª”æ¡ˆä¹Ÿæ¯å€‹éƒ½æœƒåˆ†åˆ¥åŸ·è¡Œã€‚\n\næˆ‘å€‘åœ¨ç¾åœ¨ `/.github/workflows/hugo-public.yml` çš„æª”æ¡ˆä¸­æ–°å¢å¦‚ä¸‹çš„è…³æœ¬ï¼š\n\n```yml\nname: github pages\n\non:\n  push:\n    branches:\n      - master # Set a branch to deploy\n  pull_request:\n\njobs:\n  deploy:\n    runs-on: ubuntu-20.04\n    steps:\n      - uses: actions/checkout@v2\n        with:\n          submodules: true # Fetch Hugo themes (true OR recursive)\n          fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod\n\n      - name: Setup Hugo\n        uses: peaceiris/actions-hugo@v2\n        with:\n          hugo-version: \"latest\"\n          extended: true\n\n      - name: Build\n        run: hugo --minify\n\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        if: github.ref == 'refs/heads/master'\n        with:\n          github_token: ${{ secrets.ACCESS_TOKEN }}\n          publish_dir: ./public\n```\n\nä¸‹é¢æˆ‘å€‘åˆ†æ®µä¾†è§£é‡‹ä¸Šé¢è…³æœ¬æ¯è¡Œçš„æ„æ€ã€‚\n\n## Name\n\nåŸºæœ¬ä¸Šå°±æ˜¯é€™å€‹è…³æœ¬çš„åç¨±ï¼Œå¯ä»¥éš¨æ„è‡ªè¨‚ä¸æœƒå½±éŸ¿çµæœã€‚\n\n## On\n\n```yml\non:\n  push:\n    branches:\n      - master # Set a branch to deploy\n  pull_request:\n```\n\n`on` å€æ®µå®šç¾©äº†é€™å€‹è…³æœ¬ä»€éº¼æ™‚å€™æœƒè¢«åŸ·è¡Œï¼Œæˆ‘å€‘ç¾åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œå®šç¾©äº†é€™å€‹è…³æœ¬æœƒåœ¨ `master` é€™å€‹åˆ†æ”¯è¢« push çš„æ™‚å€™è‡ªå‹•åŸ·è¡Œã€‚Github ç¾åœ¨é è¨­çš„åˆ†æ”¯åç¨±æ˜¯ `main`ï¼Œå¦‚æœæ˜¯ `main` çš„äººåƒè¬è¦è¨˜å¾—æ”¹ï¼Œä»¥å…é€™å€‹è…³æœ¬æ°¸é ä¸æœƒåŸ·è¡Œã€‚\n\n## Jobs\n\n```yml\njobs:\n  deploy:\n    # ä»¥ä¸‹çœç•¥\n```\n\njobs æ˜¯æ•´å€‹æª”æ¡ˆä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¯ä»¥åˆ†æˆè¨±å¤šä¸åŒçš„ Jobï¼Œç›®å‰æˆ‘å€‘åªæœ‰ä¸€å€‹å«åš `deploy` çš„ Jobï¼Œé€™å€‹åç¨±ä¹Ÿæ˜¯å¯ä»¥è‡ªè¨‚çš„ï¼Œé€™è£¡åªæ˜¯å–å« `deploy` çœ‹ä¸é †çœ¼å¯ä»¥è‡ªå·±æ›ã€‚å¦‚æœé‚„éœ€è¦æœ‰å…¶ä»–å·¥ä½œï¼Œå¯ä»¥è‡ªå·±è¦–æƒ…æ³å¢åŠ ã€‚\n\n### Job\n\nçµ‚æ–¼ä¾†åˆ°æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œdeploy ä»»å‹™ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå°±å®šç¾©äº†é€™å€‹ä»»å‹™è¦ Run åœ¨å“ªå€‹å®¹å™¨å…§ï¼Œæˆ–æ˜¯ç¨±ä½œå“ªå€‹ç³»çµ±å…§ã€‚é€™é‚Šæ˜¯ç”¨ `ubuntu` çš„ 20.04ï¼Œå»ºè­°ä¸è¦äº‚æ”¹ï¼Œå› ç‚ºå…¶ä»–çš„ Linux ä¸ä¸€å®šå¯ä»¥å®Œä»»å‹™ã€‚\n\n```yml\ndeploy:\n  runs-on: ubuntu-20.04\n  ## ä»¥ä¸‹çœç•¥\n```\n\n### Steps\n\næ¥ä¸‹ä¾†å°±æ˜¯åˆ†æ­¥é©ŸåŸ·è¡Œå‘½ä»¤ï¼Œ`uses` æ˜¯åˆ©ç”¨ Github ä¸Šåˆ¥äººå·²ç¶“å¯«å¥½çš„ Actions è…³æœ¬ä¾†åŸ·è¡Œå‘½ä»¤ï¼Œåƒæ˜¯ç¬¬ä¸€å€‹ `uses: actions/checkout@v2` å°±æ˜¯æç”¨ Github ä¸Šåˆ¥äººå·²ç¶“å¯«å¥½çš„ `git checkout` å‘½ä»¤ä¾†æŠŠå°ˆæ¡ˆ checkout åˆ°å®¹å™¨ä¸­ã€‚\n\nç¬¬äºŒå€‹éƒ¨åˆ†ä¹Ÿæ˜¯ä½¿ç”¨åˆ¥äººå·²ç¶“å¯«å¥½çš„è…³æœ¬ï¼Œå¿«é€Ÿçš„å®‰è£ Hugo åˆ°å®¹å™¨å…§ï¼Œç”¨åˆ¥äººå¯«å¥½çš„æ±è¥¿ä¾†å®Œæˆå·¥ä½œï¼Œé¿å…ä¸å¿…è¦çš„é‡è¤‡é€ è¼ªå­ã€‚\n\n```yml\nsteps:\n    - uses: actions/checkout@v2\n    with:\n        submodules: true  # Fetch Hugo themes (true OR recursive)\n        fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod\n\n    - name: Setup Hugo\n    uses: peaceiris/actions-hugo@v2\n    with:\n        hugo-version: 'latest'\n        extended: true\n\n    - name: Build\n    run: hugo --minify\n\n    - name: Deploy\n    uses: peaceiris/actions-gh-pages@v3\n    if: github.ref == 'refs/heads/master'\n    with:\n        github_token: ${{ secrets.ACCESS_TOKEN }}\n        publish_dir: ./public\n```\n\nçœ‹åˆ°é€™è£¡ä¹Ÿå¯ä»¥ç™¼ç¾ä»»å‹™ä¹Ÿæ˜¯åˆ†å¾ˆå¤šæ­¥é©Ÿï¼Œç¬¬ä¸‰éƒ¨åˆ†çš„ Build å°±æ˜¯åƒæ˜¯æˆ‘å€‘åœ¨æœ¬æ©Ÿç›®éŒ„çš„ç”¢ç”Ÿæ–¹æ³•ä¸€æ¨£ï¼Œç›´æ¥è¼¸å…¥ `hugo` å‘½ä»¤ç”¢ç”Ÿéœæ…‹ç¶²é ã€‚\n\nç¬¬å››éƒ¨åˆ†çš„ Deploy å°±æœƒæ¯”è¼ƒè¤‡é›œï¼Œé€™é‚Šä¹Ÿæ˜¯åˆ©ç”¨åˆ¥äººå¯«å¥½ç”¨ä¾†ç™¼å¸ƒ Github Pages çš„ä»»å‹™ï¼Œä»–æœƒéœ€è¦ä¸€å€‹ Github Tokenï¼Œé€™å€‹ Token æ˜¯è¦ç”¨ä¾†å° Repository æœ‰ Push çš„æ¬Šé™ï¼Œé›–ç„¶å¯ä»¥ç›´æ¥å¯«åœ¨è…³æœ¬è£¡ï¼Œä½†æ˜¯å°±æ‰€æœ‰äººéƒ½çœ‹å¾—åˆ°ä½ çš„ Tokenï¼Œé‚£å°±æœƒç”¢ç”Ÿè³‡å®‰å•é¡Œã€‚æ‰€ä»¥ Github æä¾› Secrets çš„æ¨¡å¼ï¼Œå¯ä»¥æŠŠä¸æ–¹ä¾¿ç›´æ¥å¯«åœ¨å°ˆæ¡ˆè£¡çš„æ©Ÿæ•è³‡æ–™ï¼Œæ”¾åœ¨ Github ä¸Šã€‚\n\næ‰€ä»¥æˆ‘å€‘ç¾åœ¨æœƒæœ‰å…©ä»¶äº‹è¦åšï¼š\n\n1. ç”¢ç”Ÿ Token\n2. æŠŠ Token æ”¾åˆ°å°ˆæ¡ˆçš„ Secrets ä¸­\n\næˆ‘å€‘å…ˆä¾†ç”¢ç”Ÿ Tokenï¼Œå…ˆåˆ°å€‹äººçš„è¨­å®šé é¢æ‰¾åˆ° Developer settingsï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/9cec1b4f-5bf6-4e41-9177-3cbe9ccfd400/large)\n\nå†åˆ° Token çš„é é¢ç”¢ç”Ÿæ–°çš„ Tokenï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/dfa652f6-b8b1-4df2-5b7f-ccdda2e8df00/large)\n\nåç¨±å¯ä»¥è‡ªå·±éš¨æ„è¨‚ï¼ŒRepo çš„æ¬Šé™å°±å…¨éƒ¨æ‰“é–‹ï¼Œé™¤äº† Repo ä»¥å¤–çš„æ¬Šé™å‰‡éƒ½ä¸éœ€è¦ã€‚éƒ½ç¢ºå®šå¾Œç›´æ¥æ‹‰åˆ°æœ€ä¸‹é¢ç”¢ç”Ÿ Tokenï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/94de0480-f57a-4bef-b1e1-9ce3f75d2c00/large)\n\næœƒå¾—åˆ°ä¸€çµ„æ–°çš„ Tokenï¼Œè«‹æ³¨æ„ä¸è¦åƒæˆ‘ä¸€æ¨£ Show å‡ºä¾†çµ¦åˆ¥äººçœ‹ï¼Œè«‹å¦¥å–„ä¿å­˜ï¼Œè€Œä¸” Github ä¹Ÿåªæœƒé¡¯ç¤ºé€™ä¸€æ¬¡ï¼Œä»¥å¾Œæƒ³è¦çœ‹éƒ½çœ‹ä¸åˆ°ï¼Œåªèƒ½ç”¢ç”Ÿæ–°çš„ Tokenã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/13bcbfe0-5bbc-4292-5679-cd5d1dba9f00/large)\n\nè¤‡è£½ä¸‹ Token å¾Œï¼Œæˆ‘å€‘åˆ°å°ˆæ¡ˆå±¤ç´šçš„è¨­å®šï¼Œæ³¨æ„æ˜¯**å°ˆæ¡ˆ**çš„è¨­å®šï¼Œä¸æ˜¯å€‹äººè¨­å®šï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/d5b06f39-8b64-4f76-3f68-84d30fbc9a00/large)\n\næ‰¾åˆ° Secrets ä¸¦æ–°å¢ Secretsï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/409789e1-87f4-4469-fcf4-032a27e05700/large)\n\nåå­—å–å¥½å¾Œï¼Œå¡«å…¥å‰›å‰›æ‹¿åˆ°çš„ Tokenï¼Œæ³¨æ„åç¨±è¦å’Œå‰›å‰›åœ¨è…³æœ¬ä¸­å¯«çš„ä¸€æ¨£ï¼š\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/8e7912d5-53fc-491a-a638-bee48f87be00/large)\n\néƒ½å¡«å®Œå¾Œå°±å¤§åŠŸå‘Šæˆï¼ŒåŸºæœ¬ä¸Šåªè¦ Push åˆ° Github ä¸Šï¼Œæ‡‰è©²å°±æœƒè‡ªå‹•è§¸ç™¼ä¸Šé¢å¯«çš„å·¥ä½œï¼Œä»¥å¾Œåªè¦æ–‡ç« æœ‰æ–°çš„è®Šå‹•ï¼ŒPush ä¸Šä¾†å°±æœƒè‡ªå‹•æ›´æ–°ç¶²é ç¶²é åˆ°å°ˆæ¡ˆçš„ `gh-pages` åˆ†ä¹‹ä¸Šã€‚æƒ³è¦é€²ä¸€æ­¥çœ‹åˆ° Pages çš„è¨­å®šï¼Œå¯ä»¥åˆ°å°ˆæ¡ˆä¸‹çš„ Pages çš„è¨­å®šä¸‹çœ‹çœ‹ï¼Œä¹Ÿå¯ä»¥åœ¨é€™è£¡è‡ªè¨‚ Domianã€‚\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/e1c327a2-2e73-45ff-7305-a8440010d600/large)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Hugo/hugo-github-actions.md","excerpt":"Github Actions æ˜¯ Github å®˜æ–¹æä¾›çš„ CI/CD æœå‹™ï¼Œç·¨å¯«ç°¡å–®çš„è…³æœ¬ï¼Œå°±å¯ä»¥åœ¨æ¯æ¬¡ Pushã€ PR æ™‚ï¼Œè‡ªå‹•çš„æª¢æŸ¥ç¨‹å¼ç¢¼å¯ä¸å¯ä»¥é€šé Testï¼Œæˆ–æ˜¯ç›´æ¥ç”¢ç”Ÿ Release ä¾†äº¤ä»˜å°ˆæ¡ˆæˆå“ã€‚å¦å¤–ä¸€å€‹é‡é»æ˜¯ï¼Œé€™å€‹æœå‹™å®Œå…¨å…è²»ï¼Œè€Œåœ¨ç§æœ‰ Repoï¼Œå‰‡æ˜¯æœ‰é™åˆ¶å®¹å™¨çš„åŸ·è¡Œæ™‚é–“ã€‚æœ¬æ–‡ä½¿ç”¨ Github Actions ä¾†è‡ªå‹•å°‡ Hugo å°ˆæ¡ˆè‡ªå‹•ç”¢ç”Ÿéœæ…‹ç¶²é ï¼Œä¸¦ä¸”å°‡ç¶²é ç™¼å¸ƒåˆ°  â€¦","frontmatter":{"title":"ç”¨ Github Actions ä¾†ç™¼å¸ƒ Hugo éœæ…‹ç¶²é ","date":"2021-06-07T14:00:53.000Z","draft":false,"tags":["hugo","github","github-actions","web"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/3820056d-8496-4b29-efa0-716d71a45100/public","description":"Github Actions æ˜¯ Github å®˜æ–¹æä¾›çš„ CI/CD æœå‹™ï¼Œç·¨å¯«ç°¡å–®çš„è…³æœ¬ï¼Œå°±å¯ä»¥åœ¨æ¯æ¬¡ Pushã€ PR æ™‚ï¼Œè‡ªå‹•çš„æª¢æŸ¥ç¨‹å¼ç¢¼å¯ä¸å¯ä»¥é€šé Testï¼Œæˆ–æ˜¯ç›´æ¥ç”¢ç”Ÿ Release ä¾†äº¤ä»˜å°ˆæ¡ˆæˆå“ã€‚å¦å¤–ä¸€å€‹é‡é»æ˜¯ï¼Œé€™å€‹æœå‹™å®Œå…¨å…è²»ï¼Œè€Œåœ¨ç§æœ‰ Repoï¼Œå‰‡æ˜¯æœ‰é™åˆ¶å®¹å™¨çš„åŸ·è¡Œæ™‚é–“ã€‚æœ¬æ–‡ä½¿ç”¨ Github Actions ä¾†è‡ªå‹•å°‡ Hugo å°ˆæ¡ˆè‡ªå‹•ç”¢ç”Ÿéœæ…‹ç¶²é ï¼Œä¸¦ä¸”å°‡ç¶²é ç™¼å¸ƒåˆ° gh-pages çš„ git åˆ†æ”¯ã€‚"}}},{"node":{"id":"766ef66b-681e-5784-9c0d-39c5a162ea4d","html":"<p>Hugo æ˜¯éœæ…‹ç¶²é çš„ç”¢ç”Ÿå™¨ï¼Œé¡ä¼¼ Hexo å’Œ Jekyllï¼ŒHugo ç”± go èªè¨€ç·¨å¯«ï¼Œæ•ˆç‡æ¥µé«˜ï¼Œæˆ‘åŸæœ¬æ˜¯ç”¨ Hexo åœ¨ç”¢ç”Ÿæ–‡ç« ï¼Œå¾Œä¾†ç™¼ç¾ Hugo é€™å€‹å¥½æ±è¥¿ï¼Œä¹Ÿè§€æœ›äº†ä¸€é™£å­<del>å…¶å¯¦æ˜¯æ‡¶</del>ï¼Œå°±æ±ºå®šæ›éä¾†äº†ï¼Œç›®å‰ä¹Ÿç”¨å¾—éå¸¸é †æ‰‹ã€‚</p>\n<!--more-->\n<h2>å®‰è£ Hugo</h2>\n<p>é€™æ˜¯ Hugo çš„<a href=\"https://gohugo.io/\">å®˜ç¶²</a>ï¼Œé€²å»å¾Œå¯ä»¥çœ‹åˆ°ä¸€äº›ç°¡å–®çš„ä»‹ç´¹å’Œå®‰è£æ–¹æ³•ã€‚</p>\n<p>æˆ‘è »æ¨è–¦åœ¨ vscode çš„ <code class=\"language-text\">code in container</code> çš„æ–¹å¼ç”¨ Hugoï¼Œå› ç‚ºæˆ‘è‡ªå·±ä¹Ÿæ˜¯é€™æ¨£ç”¨ï¼Œé€™æ¨£å°±ä¸ç”¨æ“”å¿ƒæœƒå¼„é«’ç’°å¢ƒï¼Œä½†å°±è®“æœ‰èˆˆè¶£çš„äººè‡ªå·±ç ”ç©¶å§ï¼Œé€™è£¡æˆ‘ä»‹ç´¹ä¸€èˆ¬é›»è…¦çš„å®‰è£æ–¹å¼ã€‚</p>\n<h3>Windows</h3>\n<p>Windows æˆ‘å»ºè­°æ˜¯ç”¨ Chocolatey ä¾†å®‰è£æ˜¯æœ€æ–¹ä¾¿çš„ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ps1\"><pre class=\"language-ps1\"><code class=\"language-ps1\">choco install hugo</code></pre></div>\n<p>ä½†æ˜¯å¦‚æœä¸æƒ³è¦ç”¨ Chocolatey å®‰è£ï¼Œå¯ä»¥å»å®˜æ–¹çš„ <a href=\"https://github.com/gohugoio/hugo/releases\">Github Release</a> ä¸‹è¼‰æœ€æ–°çš„ Windows ç‰ˆæœ¬ï¼Œä¸‹è¼‰å®Œå¾Œè¨˜å¾—åŠ å…¥ PATHã€‚</p>\n<h3>Mac</h3>\n<p>macOS å®‰è£æœ€ç°¡å–®ï¼Œç”¨ Homebrew å°±å¯ä»¥å¿«é€Ÿçš„å®‰è£ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> hugo</code></pre></div>\n<h3>Linux</h3>\n<p>Linux æˆ‘ä¸€å¾‹å»ºè­°å¾å®˜æ–¹çš„ <a href=\"https://github.com/gohugoio/hugo/releases\">Github Release</a> ä¸‹è¼‰æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¸¦è‡ªå·±åŠ åˆ° PATHã€‚</p>\n<p>é›–ç„¶ apt ç­‰ç‰ˆæœ¬ç®¡ç†å™¨å¥½åƒæœ‰æä¾›ï¼Œä½†å®˜æ–¹çš„æ–‡ä»¶ä¸Šéƒ½èªªç‰ˆæœ¬å¹¾ä¹éƒ½ä¸æ˜¯æœ€æ–°ç‰ˆï¼Œæ‰€ä»¥ä¹Ÿä¸å»ºè­°ã€‚ç”¨ä¸‹è¼‰çš„æ–¹å¼é‚„æ˜¯æœ€æ–¹ä¾¿çš„ï¼Œæˆ–æ˜¯ç”¨ Docker ä¹Ÿæ˜¯å¥½è¾¦æ³•ã€‚</p>\n<h2>é–‹å§‹ä½¿ç”¨ Hugo</h2>\n<p>å…ˆå‰µå»ºä¸€å€‹æ–°çš„ Hugo å°ˆæ¡ˆï¼Œä¸‹é¢çš„ <code class=\"language-text\">MyBlog</code> å¯ä»¥æ›æˆè‡ªå·±æƒ³è¦çš„å°ˆæ¡ˆåç¨±ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hugo new site MyBlog</code></pre></div>\n<h3>æ–°å¢ä¸»é¡Œ</h3>\n<p>å‰µå»ºå¥½å°ˆæ¡ˆå¾Œï¼Œå°±å¯ä»¥ä¾†æ–°å¢ä¸»é¡Œï¼Œç›®å‰åœ¨ Hugo ä¸Šæä¾›éå¸¸å¤šçš„ä¸»é¡Œï¼Œæˆ‘å€‘å¯ä»¥åˆ°å®˜æ–¹çš„é€™å€‹<a href=\"https://themes.gohugo.io/\">ç¶²ç«™</a>æ‰¾æ‰¾çœ‹ï¼Œä½†ç›®å‰äº›ä¸è¦å¢åŠ é›£åº¦ï¼Œç”¨æœ€å®˜æˆ¿æä¾›çš„ç°¡å–®çš„ ananke ä¸»é¡Œå°±å¥½ï¼Œåæ­£ä¸»é¡Œæ˜¯éš¨æ™‚éƒ½å¯ä»¥æ›çš„ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> MyBlog\n<span class=\"token function\">git</span> init\n<span class=\"token function\">git</span> submodule <span class=\"token function\">add</span> https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke\n<span class=\"token builtin class-name\">echo</span> theme <span class=\"token operator\">=</span> <span class=\"token punctuation\">\\</span>\"ananke<span class=\"token punctuation\">\\</span>\" <span class=\"token operator\">>></span> config.toml</code></pre></div>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹æ˜¯å»ºè­°ä½¿ç”¨ <code class=\"language-text\">git submodule</code> çš„æ–¹å¼æ–°å¢ä¸»é¡Œï¼Œé€™æ¨£ä¹‹å¾Œåœ¨æ›´æ–°ä¸»é¡Œçš„æ™‚å€™ä¹Ÿæ¯”è¼ƒæ–¹ä¾¿ã€‚</p>\n<p>æœ€å¾Œä¸€è¡Œçš„ <code class=\"language-text\">echo</code> æŒ‡ä»¤æœƒåœ¨å°ˆæ¡ˆåº•ä¸‹ç”¢ç”Ÿä¸€å€‹ <code class=\"language-text\">config.toml</code> çš„æª”æ¡ˆï¼ŒåŸºæœ¬ä¸Šä¹‹å¾Œæ‰€æœ‰æœ‰é—œ Hugo ç¶²ç«™çš„è¨­å®šï¼Œéƒ½å¯ä»¥åœ¨é€™è£¡è®Šæ›´ã€‚é€™ä¸€è¡ŒæŒ‡ä»¤æ‡‰è©²æœƒå¹«ä½ åœ¨æª”æ¡ˆä¸­ç”¢ç”Ÿå¦‚ä¸‹çš„å…§å®¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token key property\">theme</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"ananke\"</span></code></pre></div>\n<h3>æ–°å¢æ–‡ç« </h3>\n<p>åœ¨ Hugo ä¸­æ–°å¢æ–‡ç« çš„æŒ‡ä»¤å°±æ˜¯å¦‚ä¸‹ï¼Œå¯ä»¥è‡ªå·±ä¿®æ”¹æª”åã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hugo new posts/my-first-post.md</code></pre></div>\n<p>ç”¢ç”Ÿå®Œæˆå¾Œå¯ä»¥çœ‹åˆ° Hugo å¹«ä½ ç”¢ç”Ÿäº†ä¸€äº› Front Matterã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token front-matter-block\"><span class=\"token punctuation\">---</span>\n<span class=\"token front-matter yaml language-yaml\">title: \"My First Post\"\ndate: 2019-03-26T08:47:11+01:00\ndraft: true</span>\n<span class=\"token punctuation\">---</span></span></code></pre></div>\n<p>ä¸Šé¢çš„ <code class=\"language-text\">draft</code> çš„æŒ‡ä»¤æ˜¯è‰ç¨¿çš„æ„æ€ï¼Œå¦‚æœæ²’æœ‰åœ¨ä¸Šç·šå‰æ”¹æˆ <code class=\"language-text\">false</code>ï¼Œæ˜¯ä¸æœƒåœ¨æ­£å¼ç¶²ç«™ä¸­æ¸²æŸ“çš„ã€‚</p>\n<p>ç¾åœ¨å¯ä»¥è‡ªå·±ç”¢ç”Ÿçš„ Markdown æª”æ¡ˆä¸­åŠ ä¸€äº›å…§å®¹ï¼Œç­‰ç­‰å°±å¯ä»¥çœ‹çœ‹æ•ˆæœæ€éº¼æ¨£ã€‚</p>\n<h2>åŸ·è¡Œ Hugo Server</h2>\n<p>è¦å•Ÿå‹• Hugo Server ä¹Ÿéå¸¸ç°¡å–®ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hugo server -D</code></pre></div>\n<p>ä¸Šé¢çš„ <code class=\"language-text\">-D</code> åƒæ•¸çš„æ„æ€æ˜¯æŠŠ <code class=\"language-text\">draft</code> çš„è‰ç¨¿æ–‡ä»¶ä¹Ÿæ¸²æŸ“ï¼Œå¦‚æœæƒ³è¦çœ‹çœ‹ä¸Šç·šçš„ç¶²é æœƒé•·æ€æ¨£ï¼Œå¯ä»¥ä¸è¦åŠ ä¸Šé€™å€‹åƒæ•¸ã€‚</p>\n<h2>ç”¢ç”Ÿéœæ…‹ç¶²é </h2>\n<p>é€™å€‹æœ€ç°¡å–®äº†ï¼Œé€£çŒ´å­éƒ½æœƒï¼Œ<code class=\"language-text\">-D</code> çš„åƒæ•¸ä¸€æ¨£æ˜¯æ¸²æŸ“è‰ç¨¿æ–‡ä»¶ï¼Œå¯è¦–éœ€æ±‚åŠ ä¸Šã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hugo</code></pre></div>\n<p>åˆ°é€™è£¡å°±ä»‹ç´¹å®Œæˆæ‰€æœ‰ Hugo åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•äº†ï¼Œä¹‹å¾Œæˆ‘æœƒä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Github Actio\bnï¼Œè®“æˆ‘å€‘æ¯æ¬¡åªéœ€è¦ Push å°ˆæ¡ˆï¼ŒGithub å°±æœƒå¹«æˆ‘å€‘é‡æ–°å»ºç½®ä¸¦éƒ¨ç½²ç¶²ç«™ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://gohugo.io/getting-started/quick-start/\">Hugo Quick Start</a></li>\n</ul>","rawMarkdownBody":"\nHugo æ˜¯éœæ…‹ç¶²é çš„ç”¢ç”Ÿå™¨ï¼Œé¡ä¼¼ Hexo å’Œ Jekyllï¼ŒHugo ç”± go èªè¨€ç·¨å¯«ï¼Œæ•ˆç‡æ¥µé«˜ï¼Œæˆ‘åŸæœ¬æ˜¯ç”¨ Hexo åœ¨ç”¢ç”Ÿæ–‡ç« ï¼Œå¾Œä¾†ç™¼ç¾ Hugo é€™å€‹å¥½æ±è¥¿ï¼Œä¹Ÿè§€æœ›äº†ä¸€é™£å­~~å…¶å¯¦æ˜¯æ‡¶~~ï¼Œå°±æ±ºå®šæ›éä¾†äº†ï¼Œç›®å‰ä¹Ÿç”¨å¾—éå¸¸é †æ‰‹ã€‚\n\n<!--more-->\n\n## å®‰è£ Hugo\n\né€™æ˜¯ Hugo çš„[å®˜ç¶²](https://gohugo.io/)ï¼Œé€²å»å¾Œå¯ä»¥çœ‹åˆ°ä¸€äº›ç°¡å–®çš„ä»‹ç´¹å’Œå®‰è£æ–¹æ³•ã€‚\n\næˆ‘è »æ¨è–¦åœ¨ vscode çš„ `code in container` çš„æ–¹å¼ç”¨ Hugoï¼Œå› ç‚ºæˆ‘è‡ªå·±ä¹Ÿæ˜¯é€™æ¨£ç”¨ï¼Œé€™æ¨£å°±ä¸ç”¨æ“”å¿ƒæœƒå¼„é«’ç’°å¢ƒï¼Œä½†å°±è®“æœ‰èˆˆè¶£çš„äººè‡ªå·±ç ”ç©¶å§ï¼Œé€™è£¡æˆ‘ä»‹ç´¹ä¸€èˆ¬é›»è…¦çš„å®‰è£æ–¹å¼ã€‚\n\n### Windows\n\nWindows æˆ‘å»ºè­°æ˜¯ç”¨ Chocolatey ä¾†å®‰è£æ˜¯æœ€æ–¹ä¾¿çš„ï¼š\n\n```ps1\nchoco install hugo\n```\n\nä½†æ˜¯å¦‚æœä¸æƒ³è¦ç”¨ Chocolatey å®‰è£ï¼Œå¯ä»¥å»å®˜æ–¹çš„ [Github Release](https://github.com/gohugoio/hugo/releases) ä¸‹è¼‰æœ€æ–°çš„ Windows ç‰ˆæœ¬ï¼Œä¸‹è¼‰å®Œå¾Œè¨˜å¾—åŠ å…¥ PATHã€‚\n\n### Mac\n\nmacOS å®‰è£æœ€ç°¡å–®ï¼Œç”¨ Homebrew å°±å¯ä»¥å¿«é€Ÿçš„å®‰è£ã€‚\n\n```bash\nbrew install hugo\n```\n\n### Linux\n\nLinux æˆ‘ä¸€å¾‹å»ºè­°å¾å®˜æ–¹çš„ [Github Release](https://github.com/gohugoio/hugo/releases) ä¸‹è¼‰æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¸¦è‡ªå·±åŠ åˆ° PATHã€‚\n\né›–ç„¶ apt ç­‰ç‰ˆæœ¬ç®¡ç†å™¨å¥½åƒæœ‰æä¾›ï¼Œä½†å®˜æ–¹çš„æ–‡ä»¶ä¸Šéƒ½èªªç‰ˆæœ¬å¹¾ä¹éƒ½ä¸æ˜¯æœ€æ–°ç‰ˆï¼Œæ‰€ä»¥ä¹Ÿä¸å»ºè­°ã€‚ç”¨ä¸‹è¼‰çš„æ–¹å¼é‚„æ˜¯æœ€æ–¹ä¾¿çš„ï¼Œæˆ–æ˜¯ç”¨ Docker ä¹Ÿæ˜¯å¥½è¾¦æ³•ã€‚\n\n## é–‹å§‹ä½¿ç”¨ Hugo\n\nå…ˆå‰µå»ºä¸€å€‹æ–°çš„ Hugo å°ˆæ¡ˆï¼Œä¸‹é¢çš„ `MyBlog` å¯ä»¥æ›æˆè‡ªå·±æƒ³è¦çš„å°ˆæ¡ˆåç¨±ï¼š\n\n```bash\nhugo new site MyBlog\n```\n\n### æ–°å¢ä¸»é¡Œ\n\nå‰µå»ºå¥½å°ˆæ¡ˆå¾Œï¼Œå°±å¯ä»¥ä¾†æ–°å¢ä¸»é¡Œï¼Œç›®å‰åœ¨ Hugo ä¸Šæä¾›éå¸¸å¤šçš„ä¸»é¡Œï¼Œæˆ‘å€‘å¯ä»¥åˆ°å®˜æ–¹çš„é€™å€‹[ç¶²ç«™](https://themes.gohugo.io/)æ‰¾æ‰¾çœ‹ï¼Œä½†ç›®å‰äº›ä¸è¦å¢åŠ é›£åº¦ï¼Œç”¨æœ€å®˜æˆ¿æä¾›çš„ç°¡å–®çš„ ananke ä¸»é¡Œå°±å¥½ï¼Œåæ­£ä¸»é¡Œæ˜¯éš¨æ™‚éƒ½å¯ä»¥æ›çš„ã€‚\n\n```bash\ncd MyBlog\ngit init\ngit submodule add https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke\necho theme = \\\"ananke\\\" >> config.toml\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹æ˜¯å»ºè­°ä½¿ç”¨ `git submodule` çš„æ–¹å¼æ–°å¢ä¸»é¡Œï¼Œé€™æ¨£ä¹‹å¾Œåœ¨æ›´æ–°ä¸»é¡Œçš„æ™‚å€™ä¹Ÿæ¯”è¼ƒæ–¹ä¾¿ã€‚\n\næœ€å¾Œä¸€è¡Œçš„ `echo` æŒ‡ä»¤æœƒåœ¨å°ˆæ¡ˆåº•ä¸‹ç”¢ç”Ÿä¸€å€‹ `config.toml` çš„æª”æ¡ˆï¼ŒåŸºæœ¬ä¸Šä¹‹å¾Œæ‰€æœ‰æœ‰é—œ Hugo ç¶²ç«™çš„è¨­å®šï¼Œéƒ½å¯ä»¥åœ¨é€™è£¡è®Šæ›´ã€‚é€™ä¸€è¡ŒæŒ‡ä»¤æ‡‰è©²æœƒå¹«ä½ åœ¨æª”æ¡ˆä¸­ç”¢ç”Ÿå¦‚ä¸‹çš„å…§å®¹ï¼š\n\n```toml\ntheme = \"ananke\"\n```\n\n### æ–°å¢æ–‡ç« \n\nåœ¨ Hugo ä¸­æ–°å¢æ–‡ç« çš„æŒ‡ä»¤å°±æ˜¯å¦‚ä¸‹ï¼Œå¯ä»¥è‡ªå·±ä¿®æ”¹æª”åã€‚\n\n```bash\nhugo new posts/my-first-post.md\n```\n\nç”¢ç”Ÿå®Œæˆå¾Œå¯ä»¥çœ‹åˆ° Hugo å¹«ä½ ç”¢ç”Ÿäº†ä¸€äº› Front Matterã€‚\n\n```md\n---\ntitle: \"My First Post\"\ndate: 2019-03-26T08:47:11+01:00\ndraft: true\n---\n```\n\nä¸Šé¢çš„ `draft` çš„æŒ‡ä»¤æ˜¯è‰ç¨¿çš„æ„æ€ï¼Œå¦‚æœæ²’æœ‰åœ¨ä¸Šç·šå‰æ”¹æˆ `false`ï¼Œæ˜¯ä¸æœƒåœ¨æ­£å¼ç¶²ç«™ä¸­æ¸²æŸ“çš„ã€‚\n\nç¾åœ¨å¯ä»¥è‡ªå·±ç”¢ç”Ÿçš„ Markdown æª”æ¡ˆä¸­åŠ ä¸€äº›å…§å®¹ï¼Œç­‰ç­‰å°±å¯ä»¥çœ‹çœ‹æ•ˆæœæ€éº¼æ¨£ã€‚\n\n## åŸ·è¡Œ Hugo Server\n\nè¦å•Ÿå‹• Hugo Server ä¹Ÿéå¸¸ç°¡å–®ï¼š\n\n```bash\nhugo server -D\n```\n\nä¸Šé¢çš„ `-D` åƒæ•¸çš„æ„æ€æ˜¯æŠŠ `draft` çš„è‰ç¨¿æ–‡ä»¶ä¹Ÿæ¸²æŸ“ï¼Œå¦‚æœæƒ³è¦çœ‹çœ‹ä¸Šç·šçš„ç¶²é æœƒé•·æ€æ¨£ï¼Œå¯ä»¥ä¸è¦åŠ ä¸Šé€™å€‹åƒæ•¸ã€‚\n\n## ç”¢ç”Ÿéœæ…‹ç¶²é \n\né€™å€‹æœ€ç°¡å–®äº†ï¼Œé€£çŒ´å­éƒ½æœƒï¼Œ`-D` çš„åƒæ•¸ä¸€æ¨£æ˜¯æ¸²æŸ“è‰ç¨¿æ–‡ä»¶ï¼Œå¯è¦–éœ€æ±‚åŠ ä¸Šã€‚\n\n```bash\nhugo\n```\n\nåˆ°é€™è£¡å°±ä»‹ç´¹å®Œæˆæ‰€æœ‰ Hugo åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•äº†ï¼Œä¹‹å¾Œæˆ‘æœƒä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Github Actio\bnï¼Œè®“æˆ‘å€‘æ¯æ¬¡åªéœ€è¦ Push å°ˆæ¡ˆï¼ŒGithub å°±æœƒå¹«æˆ‘å€‘é‡æ–°å»ºç½®ä¸¦éƒ¨ç½²ç¶²ç«™ã€‚\n\n## Reference\n\n- [Hugo Quick Start](https://gohugo.io/getting-started/quick-start/)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Hugo/hugo.md","excerpt":"Hugo æ˜¯éœæ…‹ç¶²é çš„ç”¢ç”Ÿå™¨ï¼Œé¡ä¼¼ Hexo å’Œ Jekyllï¼ŒHugo ç”± go èªè¨€ç·¨å¯«ï¼Œæ•ˆç‡æ¥µé«˜ï¼Œæˆ‘åŸæœ¬æ˜¯ç”¨ Hexo åœ¨ç”¢ç”Ÿæ–‡ç« ï¼Œå¾Œä¾†ç™¼ç¾ Hugo é€™å€‹å¥½æ±è¥¿ï¼Œä¹Ÿè§€æœ›äº†ä¸€é™£å­å…¶å¯¦æ˜¯æ‡¶ï¼Œå°±æ±ºå®šæ›éä¾†äº†ï¼Œç›®å‰ä¹Ÿç”¨å¾—éå¸¸é †æ‰‹ã€‚ å®‰è£ Hugo é€™æ˜¯ Hugo çš„å®˜ç¶²ï¼Œé€²å»å¾Œå¯ä»¥çœ‹åˆ°ä¸€äº›ç°¡å–®çš„ä»‹ç´¹å’Œå®‰è£æ–¹æ³•ã€‚ æˆ‘è »æ¨è–¦åœ¨ vscode çš„  çš„æ–¹å¼ç”¨ Hugoï¼Œå› ç‚ºæˆ‘è‡ªå·±ä¹Ÿæ˜¯é€™æ¨£ç”¨ï¼Œé€™æ¨£å°±ä¸ç”¨â€¦","frontmatter":{"title":"ç”¨ Hugo ä¾†å¯«æ–‡ç« å§","date":"2021-06-06T18:10:46.000Z","draft":false,"tags":["hugo","blog","mac","linux","windows"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f50473d3-1acc-431a-402d-3c79f4170b00/public","description":"Hugo æ˜¯éœæ…‹ç¶²é çš„ç”¢ç”Ÿå™¨ï¼Œé¡ä¼¼ Hexo å’Œ Jekyllï¼ŒHugo ç”± go èªè¨€ç·¨å¯«ï¼Œæ•ˆç‡æ¥µé«˜ã€‚"}}},{"node":{"id":"ee3543ff-035e-5645-80a8-1eb87f4dfa6f","html":"<p>æˆ‘ç›®å‰çš„å·¥ä½œç’°å¢ƒéƒ½æ˜¯ç”¨ Ubuntu <del>(è¢« Windows æ°£åˆ°)</del>ï¼Œå‰å¹¾å¤©æˆ‘é‡æ–°å®‰è£ Ubuntu çš„æ™‚å€™ï¼Œä¸€ç›´å®‰è£å¤±æ•—ï¼Œé‡æ–°å®‰è£å››ã€äº”æ¬¡å¾Œéƒ½æ²’æœ‰ç•«é¢ï¼Œæœ€å¾Œæ‰ç™¼ç¾æ˜¯é¡¯å¡é©…å‹•å•é¡Œã€‚</p>\n<blockquote>\n<p>è½èªª Ubuntu é–‹æ©Ÿæ²’æœ‰ç•«é¢æˆ–æ˜¯åªæœ‰ Logoï¼Œåæ¬¡æœ‰ä¹æ¬¡éƒ½æ˜¯é¡¯å¡é©…å‹•çš„å•é¡Œ</p>\n</blockquote>\n<!--more-->\n<h2>è§£æ±ºå•é¡Œ</h2>\n<p>åœ¨é–‹æ©Ÿå¼•å°æ™‚æœƒçœ‹åˆ°é€™å€‹ç•«é¢ï¼Œç«‹é¦¬æŒ‰ä¸‹éµç›¤ä¸Šçš„ <code class=\"language-text\">c</code> éµã€‚</p>\n<p><img src=\"https://i.stack.imgur.com/8RYuZ.png\" alt=\"img\"></p>\n<p>æŒ‰ä¸‹ c å¾Œï¼Œæœƒä»¥ä¸‹ç•«é¢ï¼Œæ‰¾åˆ° <code class=\"language-text\">quite splash</code>ã€‚</p>\n<p><img src=\"https://i.stack.imgur.com/0Cfhc.png\" alt=\"img\"></p>\n<p>æŠŠ <code class=\"language-text\">quite splash</code> æ”¹æˆ <code class=\"language-text\">nomodeset</code>ï¼Œä¸è¦æ‡·ç–‘ï¼ŒæŠŠå…©å€‹å­—åˆªæ‰ï¼Œæ”¹æˆä¸€å€‹å­—ï¼Œæ”¹éŒ¯ä¹Ÿæ²’é—œä¿‚ï¼Œä¸‹æ¬¡é‡é–‹å°±æœƒå¾©åŸã€‚</p>\n<p>æ”¹å®Œå¾Œï¼ŒæŒ‰ä¸‹ <code class=\"language-text\">f10</code> æ‡‰è©²å°±å¯ä»¥é †åˆ©é€²å…¥ç³»çµ±ï¼Œåªæ˜¯æ˜¯åœ¨æ²’æœ‰é¡¯å¡é©…å‹•çš„ç‹€æ…‹ï¼Œç•«é¢å¯èƒ½éå¸¸ä¸æµæš¢ï¼Œæ‰€ä»¥æˆ‘å€‘ç¾åœ¨ä¾†å®‰è£é¡¯å¡é©…å‹•ã€‚</p>\n<h2>é¡¯å¡é©…å‹•</h2>\n<p>é–‹å•Ÿ Terminalï¼Œè¼¸å…¥ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå¯ä»¥è‡ªå‹•æª¢æŸ¥é¡¯å¡çš„é©…å‹•</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ubuntu-drivers devices</code></pre></div>\n<p>æ‡‰è©²å¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸€é …å¾Œé¢æœ‰ recommendedï¼ŒåŸºæœ¬ä¸Šå®‰è£é‚£å€‹ç‰ˆæœ¬å°±æ²’æœ‰å•é¡Œã€‚ä¸‹é¢æˆ‘å€‘ç›´æ¥ç”¨è‡ªå‹•å®‰è£çš„æ–¹å¼å®‰è£æ¨è–¦çš„é©…å‹•ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ubuntu-drivers autoinstall</code></pre></div>\n<p>å¦‚æœä½ æ‡¶çš„é—œå¿ƒ <code class=\"language-text\">autoinstall</code> æœƒå¹«ä½ å®‰è£å“ªå€‹ç‰ˆæœ¬ï¼ŒåŸºæœ¬ä¸Šç›´æ¥åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å°±å¯ä»¥è§£æ±ºå•é¡Œäº†ã€‚</p>\n<p>å®‰è£å®Œæˆå¾Œé‡é–‹æ©Ÿï¼Œå¦‚æœæ²’æœ‰é‡åˆ°å…¶ä»–å•é¡Œï¼Œé€™æ¨£æ‡‰è©²å°±å¯ä»¥é †åˆ©é€²å…¥ç³»çµ±äº†ã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://askubuntu.com/questions/162075/my-computer-boots-to-a-black-screen-what-options-do-i-have-to-fix-it\">My computer boots to a black screen, what options do I have to fix it?</a></li>\n</ul>","rawMarkdownBody":"\næˆ‘ç›®å‰çš„å·¥ä½œç’°å¢ƒéƒ½æ˜¯ç”¨ Ubuntu ~~(è¢« Windows æ°£åˆ°)~~ï¼Œå‰å¹¾å¤©æˆ‘é‡æ–°å®‰è£ Ubuntu çš„æ™‚å€™ï¼Œä¸€ç›´å®‰è£å¤±æ•—ï¼Œé‡æ–°å®‰è£å››ã€äº”æ¬¡å¾Œéƒ½æ²’æœ‰ç•«é¢ï¼Œæœ€å¾Œæ‰ç™¼ç¾æ˜¯é¡¯å¡é©…å‹•å•é¡Œã€‚\n\n> è½èªª Ubuntu é–‹æ©Ÿæ²’æœ‰ç•«é¢æˆ–æ˜¯åªæœ‰ Logoï¼Œåæ¬¡æœ‰ä¹æ¬¡éƒ½æ˜¯é¡¯å¡é©…å‹•çš„å•é¡Œ\n\n<!--more-->\n\n## è§£æ±ºå•é¡Œ\n\nåœ¨é–‹æ©Ÿå¼•å°æ™‚æœƒçœ‹åˆ°é€™å€‹ç•«é¢ï¼Œç«‹é¦¬æŒ‰ä¸‹éµç›¤ä¸Šçš„ `c` éµã€‚\n\n![img](https://i.stack.imgur.com/8RYuZ.png)\n\næŒ‰ä¸‹ c å¾Œï¼Œæœƒä»¥ä¸‹ç•«é¢ï¼Œæ‰¾åˆ° `quite splash`ã€‚\n\n![img](https://i.stack.imgur.com/0Cfhc.png)\n\næŠŠ `quite splash` æ”¹æˆ `nomodeset`ï¼Œä¸è¦æ‡·ç–‘ï¼ŒæŠŠå…©å€‹å­—åˆªæ‰ï¼Œæ”¹æˆä¸€å€‹å­—ï¼Œæ”¹éŒ¯ä¹Ÿæ²’é—œä¿‚ï¼Œä¸‹æ¬¡é‡é–‹å°±æœƒå¾©åŸã€‚\n\næ”¹å®Œå¾Œï¼ŒæŒ‰ä¸‹ `f10` æ‡‰è©²å°±å¯ä»¥é †åˆ©é€²å…¥ç³»çµ±ï¼Œåªæ˜¯æ˜¯åœ¨æ²’æœ‰é¡¯å¡é©…å‹•çš„ç‹€æ…‹ï¼Œç•«é¢å¯èƒ½éå¸¸ä¸æµæš¢ï¼Œæ‰€ä»¥æˆ‘å€‘ç¾åœ¨ä¾†å®‰è£é¡¯å¡é©…å‹•ã€‚\n\n## é¡¯å¡é©…å‹•\n\né–‹å•Ÿ Terminalï¼Œè¼¸å…¥ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå¯ä»¥è‡ªå‹•æª¢æŸ¥é¡¯å¡çš„é©…å‹•\n\n```bash\nsudo ubuntu-drivers devices\n```\n\næ‡‰è©²å¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸€é …å¾Œé¢æœ‰ recommendedï¼ŒåŸºæœ¬ä¸Šå®‰è£é‚£å€‹ç‰ˆæœ¬å°±æ²’æœ‰å•é¡Œã€‚ä¸‹é¢æˆ‘å€‘ç›´æ¥ç”¨è‡ªå‹•å®‰è£çš„æ–¹å¼å®‰è£æ¨è–¦çš„é©…å‹•ã€‚\n\n```bash\nsudo ubuntu-drivers autoinstall\n```\n\nå¦‚æœä½ æ‡¶çš„é—œå¿ƒ `autoinstall` æœƒå¹«ä½ å®‰è£å“ªå€‹ç‰ˆæœ¬ï¼ŒåŸºæœ¬ä¸Šç›´æ¥åŸ·è¡Œä¸Šé¢çš„æŒ‡ä»¤å°±å¯ä»¥è§£æ±ºå•é¡Œäº†ã€‚\n\nå®‰è£å®Œæˆå¾Œé‡é–‹æ©Ÿï¼Œå¦‚æœæ²’æœ‰é‡åˆ°å…¶ä»–å•é¡Œï¼Œé€™æ¨£æ‡‰è©²å°±å¯ä»¥é †åˆ©é€²å…¥ç³»çµ±äº†ã€‚\n\n## Reference\n\n- [My computer boots to a black screen, what options do I have to fix it?](https://askubuntu.com/questions/162075/my-computer-boots-to-a-black-screen-what-options-do-i-have-to-fix-it)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Linux/ubuntu-black-screen.md","excerpt":"æˆ‘ç›®å‰çš„å·¥ä½œç’°å¢ƒéƒ½æ˜¯ç”¨ Ubuntu (è¢« Windows æ°£åˆ°)ï¼Œå‰å¹¾å¤©æˆ‘é‡æ–°å®‰è£ Ubuntu çš„æ™‚å€™ï¼Œä¸€ç›´å®‰è£å¤±æ•—ï¼Œé‡æ–°å®‰è£å››ã€äº”æ¬¡å¾Œéƒ½æ²’æœ‰ç•«é¢ï¼Œæœ€å¾Œæ‰ç™¼ç¾æ˜¯é¡¯å¡é©…å‹•å•é¡Œã€‚ è½èªª Ubuntu é–‹æ©Ÿæ²’æœ‰ç•«é¢æˆ–æ˜¯åªæœ‰ Logoï¼Œåæ¬¡æœ‰ä¹æ¬¡éƒ½æ˜¯é¡¯å¡é©…å‹•çš„å•é¡Œ è§£æ±ºå•é¡Œ åœ¨é–‹æ©Ÿå¼•å°æ™‚æœƒçœ‹åˆ°é€™å€‹ç•«é¢ï¼Œç«‹é¦¬æŒ‰ä¸‹éµç›¤ä¸Šçš„  éµã€‚ img æŒ‰ä¸‹ c å¾Œï¼Œæœƒä»¥ä¸‹ç•«é¢ï¼Œæ‰¾åˆ° ã€‚ img æŠŠ  æ”¹æˆ ï¼Œä¸è¦æ‡·â€¦","frontmatter":{"title":"Ubuntu é–‹æ©Ÿé»‘å±","date":"2021-06-05T17:17:17.000Z","draft":false,"tags":["ubuntu"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/87c17ef3-d429-42ba-30ab-32ac2864c500/public","description":"è½èªª Ubuntu é–‹æ©Ÿæ²’æœ‰ç•«é¢æˆ–æ˜¯åªæœ‰ Logoï¼Œåæ¬¡æœ‰ä¹æ¬¡éƒ½æ˜¯é¡¯å¡é©…å‹•çš„å•é¡Œã€‚"}}},{"node":{"id":"ef50281c-b92b-5cc4-9c42-2f5e4b971e4d","html":"<p>å­¸é Docker çš„äººéƒ½æ‡‰è©²æœ‰ç”¨é Docker Playground ä¾†å­¸ç¿’æˆ–æ˜¯æ¸¬è©¦éè»Ÿé«”ï¼Œä¸æƒ³åœ¨æœ¬æ©Ÿè·‘ Docker å¯ä»¥å…ˆç”¨ Docker Playground è©¦è©¦çœ‹è»Ÿé«”å¯ä¸å¯ä»¥è·‘ã€‚</p>\n<!--more-->\n<p>å®˜æ–¹å·²ç¶“æœ‰æ¶è¨­ <a href=\"https://labs.play-with-docker.com/\">Docker Playground</a>ï¼Œå¯ä»¥è®“å¤§å®¶æ–¹ä¾¿ä½¿ç”¨ï¼Œä½†æˆ‘ä½¿ç”¨çš„æ™‚å¾Œå¸¸ç™¼ç¾ä»–æœƒ Lagï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ Docker Server çš„å•é¡Œï¼Œé‚„æ˜¯è‡ºç£ç¶²è·¯çš„å•é¡Œã€‚å‰›å¥½æœ€è¿‘æƒ³è¦æ•™ç¤¾åœ˜ Dockerï¼Œé€™æ¨£æˆ‘æ¶å¥½ä¸€å€‹ï¼Œå¤§å®¶å°±ä¸éœ€è¦æº–å‚™ç’°å¢ƒï¼Œç›´æ¥å°±å¯ä»¥é–‹å§‹å­¸äº†ã€‚</p>\n<p>æœ¬å°ˆæ¡ˆçš„ <a href=\"https://github.com/play-with-docker/play-with-docker\">GitHub</a></p>\n<h2>æº–å‚™ç’°å¢ƒ</h2>\n<ul>\n<li>\n<p>Docker <code class=\"language-text\">18.06.0+</code></p>\n</li>\n<li>\n<p>Go æœ€æ–°ç‰ˆ</p>\n</li>\n</ul>\n<p>ä»¥ä¸Šçš„å®‰è£å…©å€‹åœ¨é€™é‚Šéƒ½ä¸è´…è¿°ï¼Œè«‹è‡ªè¡Œåƒé–±å®˜æ–¹æ–‡æª”ã€‚</p>\n<h2>é–‹å§‹éƒ¨ç½²</h2>\n<h3>ç¬¬ä¸€æ­¥ï¼šä¸‹è¼‰å°ˆæ¡ˆ</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone https://github.com/play-with-docker/play-with-docker\n<span class=\"token builtin class-name\">cd</span> play-with-docker</code></pre></div>\n<h3>ç¬¬äºŒæ­¥ï¼šç¢ºèªé©…å‹•</h3>\n<p>å…¶å¯¦æˆ‘ä¸æ˜¯å¾ˆç¢ºå®šé€™ä¸€æ­¥é©Ÿæ˜¯è¦å¹¹å˜›ï¼Œä½†æ˜¯å®˜æ–¹æ–‡æª”æœ‰å¯«åˆ°ï¼Œä½†æ˜¯æˆ‘åœ¨ Mac ä¸Šç„¡æ³•åŸ·è¡Œæ­¤å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥é †åˆ©éƒ¨ç½²ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> modprobe xt_ipvs</code></pre></div>\n<h3>ç¬¬ä¸‰æ­¥ï¼šDocker swarm</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> swarm init</code></pre></div>\n<h3>ç¬¬å››æ­¥ï¼šä¸‹è¼‰ image</h3>\n<p>é€™å€‹ Image æ˜¯ä¹‹å¾Œåœ¨ PWD ä¸­å‰µå»ºå®¹å™¨æ™‚è¦ç”¨åˆ°çš„ Imageã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> pull franela/dind</code></pre></div>\n<h3>ç¬¬äº”æ­¥ï¼šgo mod</h3>\n<p>é€™æ­¥ä¹Ÿæ˜¯éå¿…è¦çš„ï¼Œæˆ‘ä¹Ÿä¸æ‡‚ Golang æ‰€ä»¥ä¹Ÿä¸ç¢ºå®šæ˜¯è¦å¹¹å˜›ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">go mod vendor</code></pre></div>\n<h3>æœ€å¾Œï¼šå•Ÿå‹•</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker-compose</span> up</code></pre></div>\n<p>è‹¥æ²’æœ‰å…¶ä»–å•é¡Œï¼Œç†è«–ä¸Šç¾åœ¨é€£æ¥åˆ° <code class=\"language-text\">http://localhost:80</code> å°±å¯ä»¥çœ‹åˆ° PWD æ­£åœ¨åŸ·è¡Œï¼Œä¹Ÿå¯ä»¥é–‹å§‹å‰µå»ºå®¹å™¨ä½¿ç”¨ã€‚</p>\n<h2>localhost or 404</h2>\n<p>ä¸Šä¸€æ®µçš„æœ€å¾Œå¯«åˆ°å¯ä»¥é€£æ¥åˆ° localhostï¼Œä½†å¦‚æœä½ è©¦è‘—ç”¨ localhost ä»¥å¤–çš„æ–¹å¼é€£æ¥ï¼Œå°±æœƒå‡ºç¾å•é¡Œï¼Œä¸ç®¡æ˜¯ <code class=\"language-text\">127.0.0.1</code> æˆ–æ˜¯ç”¨ç¶²å€ <code class=\"language-text\">pwd.example.com</code> ä¹‹é¡çš„éƒ½æ²’æœ‰è¾¦æ³•é€£æ¥åˆ° PWDï¼Œæœƒä¸æ–·åœ°å‡ºç¾ 404ï¼Œå°±æ˜¯åªæœ‰ localhost å¯ä»¥ã€‚å®˜æ–¹çš„æ–‡ä»¶å°±å¯«åˆ°é€™è£¡ï¼Œä¹Ÿæ²’å¯«è§£æ³•ï¼Œä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±ç™¼ç¾çš„è§£æ±ºæ–¹æ³•ã€‚</p>\n<p>åŸºæœ¬ä¸Šé€™å€‹å•é¡Œæ˜¯ DNS è§£æç™¼ç”Ÿçš„å•é¡Œï¼ŒPWD ä¸€æ¬¡åªèƒ½è§£æä¸€ç¨®ç¶²å€ï¼Œé è¨­æ˜¯ <code class=\"language-text\">localhost</code>ï¼Œæˆ‘å€‘å¯ä»¥å»ä»–çš„è¨­å®šæª”ä¸­è®Šæ›´ä»–ã€‚</p>\n<p>è¨­å®šæª”æ¡ˆåœ¨ <code class=\"language-text\">play-with-docker/config/config.go</code> ä¹‹ä¸­ï¼Œå…¶ä¸­æœƒæœ‰ä¸€è¡Œé•·ä¸‹é¢çš„æ¨£å­ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\">flag<span class=\"token punctuation\">.</span><span class=\"token function\">StringVar</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>PlaygroundDomain<span class=\"token punctuation\">,</span> <span class=\"token string\">\"playground-domain\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Domain to use for the playground\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>å¯ä»¥çœ‹åˆ° PWD é€™è£¡å¯ä»¥è¨­å®šè¦è§£æçš„ç¶²å€å°±æ˜¯ <code class=\"language-text\">localhost</code>ï¼Œæ‰€ä»¥åªè¦å°‡æ­¤è®Šæ›´ç‚º <code class=\"language-text\">pwd.example.com</code>ï¼Œå°±å¯ä»¥ç”¨é€™å€‹ç¶²å€é€£ä¸Š PWDã€‚</p>\n<h3>é€£ä¸Šå®¹å™¨å…§çš„ Port</h3>\n<p>å°±ç®—åšå®Œä¸Šé¢çš„è¨­å®šï¼Œä¹Ÿé †åˆ©äº†å•Ÿå‹• Docker å®¹å™¨ï¼Œä½†æœ€å¾Œæ‰ç™¼ç¾æƒ³è¦é€£ä¸Šç‰¹å®šçš„ Port é‚„æ˜¯æœƒå¤±æ•—ï¼Œå› ç‚ºä»–æ˜¯ç”¨å­ç¶²åŸŸçš„æ–¹å¼å»é€£ç·š <code class=\"language-text\">http://ip&lt;hyphen-ip>-&lt;session_jd>-&lt;port>.direct.pwd.example.com</code>ï¼Œæ‰€ä»¥åˆæœƒé‡åˆ°ç„¡æ³•è§£æ DNS çš„æƒ…æ³ï¼Œæˆ‘çš„è§£æ³•æ˜¯åœ¨ DNS çš„è¨­å®šä¸­æŠŠ <code class=\"language-text\">pwd.example.com</code> å’Œ <code class=\"language-text\">*.pwd.example.com</code> éƒ½åŠ å…¥ A Recordï¼Œæ‰é †åˆ©é€£ä¸Šã€‚</p>\n<h2>Nginx Proxy Pass</h2>\n<p>é€™éƒ¨åˆ†æˆ‘ç ”ç©¶äº†è »ä¹…ï¼Œå¦‚æœè¦æŠŠ Server éš±è—åœ¨ Nginx å¾Œé¢ï¼Œè¦è¨­å®šçš„æ±è¥¿æ¯”è¼ƒè¤‡é›œï¼Œå› ç‚º PWD æœ‰ä½¿ç”¨åˆ° WebSocketï¼Œä½†æ˜¯é€™éƒ¨åˆ†æˆ‘æ²’æœ‰éå¤šçš„å¿ƒå¾—ï¼Œæ‰€ä»¥ç›´æ¥æŠŠæˆ‘çš„ <code class=\"language-text\">conf</code> æ”¾åœ¨ä¸‹é¢ï¼Œå®¹æˆ‘ä¸åšè§£é‡‹äº†ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token directive\"><span class=\"token keyword\">map</span> <span class=\"token variable\">$http_upgrade</span> <span class=\"token variable\">$connection_upgrade</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">default</span> upgrade</span><span class=\"token punctuation\">;</span>\n    ''      <span class=\"token directive\"><span class=\"token keyword\">close</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token directive\"><span class=\"token keyword\">server</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token directive\"><span class=\"token keyword\">listen</span>       <span class=\"token number\">80</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">server_name</span>  pwd.example.com *.pwd.example.com</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token directive\"><span class=\"token keyword\">location</span> /</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_pass</span> http://192.168.1.1:80</span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> Upgrade <span class=\"token variable\">$http_upgrade</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> Connection <span class=\"token variable\">$connection_upgrade</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_set_header</span> Host <span class=\"token variable\">$host</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token directive\"><span class=\"token keyword\">proxy_cache_bypass</span> <span class=\"token variable\">$http_upgrade</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token directive\"><span class=\"token keyword\">error_page</span>   <span class=\"token number\">500</span> <span class=\"token number\">502</span> <span class=\"token number\">503</span> <span class=\"token number\">504</span>  /50x.html</span><span class=\"token punctuation\">;</span>\n    <span class=\"token directive\"><span class=\"token keyword\">location</span> = /50x.html</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token directive\"><span class=\"token keyword\">root</span>   /usr/share/nginx/html</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä¸Šé¢æ˜¯å‡è¨­ PWD Server è·‘åœ¨ <code class=\"language-text\">192.168.1.1:80</code> ä¸Šã€‚</p>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://github.com/play-with-docker/play-with-docker\">Play With Docker</a></li>\n</ul>","rawMarkdownBody":"\nå­¸é Docker çš„äººéƒ½æ‡‰è©²æœ‰ç”¨é Docker Playground ä¾†å­¸ç¿’æˆ–æ˜¯æ¸¬è©¦éè»Ÿé«”ï¼Œä¸æƒ³åœ¨æœ¬æ©Ÿè·‘ Docker å¯ä»¥å…ˆç”¨ Docker Playground è©¦è©¦çœ‹è»Ÿé«”å¯ä¸å¯ä»¥è·‘ã€‚\n\n<!--more-->\n\nå®˜æ–¹å·²ç¶“æœ‰æ¶è¨­ [Docker Playground](https://labs.play-with-docker.com/)ï¼Œå¯ä»¥è®“å¤§å®¶æ–¹ä¾¿ä½¿ç”¨ï¼Œä½†æˆ‘ä½¿ç”¨çš„æ™‚å¾Œå¸¸ç™¼ç¾ä»–æœƒ Lagï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ Docker Server çš„å•é¡Œï¼Œé‚„æ˜¯è‡ºç£ç¶²è·¯çš„å•é¡Œã€‚å‰›å¥½æœ€è¿‘æƒ³è¦æ•™ç¤¾åœ˜ Dockerï¼Œé€™æ¨£æˆ‘æ¶å¥½ä¸€å€‹ï¼Œå¤§å®¶å°±ä¸éœ€è¦æº–å‚™ç’°å¢ƒï¼Œç›´æ¥å°±å¯ä»¥é–‹å§‹å­¸äº†ã€‚\n\næœ¬å°ˆæ¡ˆçš„ [GitHub](https://github.com/play-with-docker/play-with-docker)\n\n## æº–å‚™ç’°å¢ƒ\n\n- Docker `18.06.0+`\n\n- Go æœ€æ–°ç‰ˆ\n\nä»¥ä¸Šçš„å®‰è£å…©å€‹åœ¨é€™é‚Šéƒ½ä¸è´…è¿°ï¼Œè«‹è‡ªè¡Œåƒé–±å®˜æ–¹æ–‡æª”ã€‚\n\n## é–‹å§‹éƒ¨ç½²\n\n### ç¬¬ä¸€æ­¥ï¼šä¸‹è¼‰å°ˆæ¡ˆ\n\n```bash\ngit clone https://github.com/play-with-docker/play-with-docker\ncd play-with-docker\n```\n\n### ç¬¬äºŒæ­¥ï¼šç¢ºèªé©…å‹•\n\nå…¶å¯¦æˆ‘ä¸æ˜¯å¾ˆç¢ºå®šé€™ä¸€æ­¥é©Ÿæ˜¯è¦å¹¹å˜›ï¼Œä½†æ˜¯å®˜æ–¹æ–‡æª”æœ‰å¯«åˆ°ï¼Œä½†æ˜¯æˆ‘åœ¨ Mac ä¸Šç„¡æ³•åŸ·è¡Œæ­¤å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥é †åˆ©éƒ¨ç½²ã€‚\n\n```bash\nsudo modprobe xt_ipvs\n```\n\n### ç¬¬ä¸‰æ­¥ï¼šDocker swarm\n\n```bash\ndocker swarm init\n```\n\n### ç¬¬å››æ­¥ï¼šä¸‹è¼‰ image\n\né€™å€‹ Image æ˜¯ä¹‹å¾Œåœ¨ PWD ä¸­å‰µå»ºå®¹å™¨æ™‚è¦ç”¨åˆ°çš„ Imageã€‚\n\n```bash\ndocker pull franela/dind\n```\n\n### ç¬¬äº”æ­¥ï¼šgo mod\n\né€™æ­¥ä¹Ÿæ˜¯éå¿…è¦çš„ï¼Œæˆ‘ä¹Ÿä¸æ‡‚ Golang æ‰€ä»¥ä¹Ÿä¸ç¢ºå®šæ˜¯è¦å¹¹å˜›ã€‚\n\n```bash\ngo mod vendor\n```\n\n### æœ€å¾Œï¼šå•Ÿå‹•\n\n```bash\ndocker-compose up\n```\n\nè‹¥æ²’æœ‰å…¶ä»–å•é¡Œï¼Œç†è«–ä¸Šç¾åœ¨é€£æ¥åˆ° `http://localhost:80` å°±å¯ä»¥çœ‹åˆ° PWD æ­£åœ¨åŸ·è¡Œï¼Œä¹Ÿå¯ä»¥é–‹å§‹å‰µå»ºå®¹å™¨ä½¿ç”¨ã€‚\n\n## localhost or 404\n\nä¸Šä¸€æ®µçš„æœ€å¾Œå¯«åˆ°å¯ä»¥é€£æ¥åˆ° localhostï¼Œä½†å¦‚æœä½ è©¦è‘—ç”¨ localhost ä»¥å¤–çš„æ–¹å¼é€£æ¥ï¼Œå°±æœƒå‡ºç¾å•é¡Œï¼Œä¸ç®¡æ˜¯ `127.0.0.1` æˆ–æ˜¯ç”¨ç¶²å€ `pwd.example.com` ä¹‹é¡çš„éƒ½æ²’æœ‰è¾¦æ³•é€£æ¥åˆ° PWDï¼Œæœƒä¸æ–·åœ°å‡ºç¾ 404ï¼Œå°±æ˜¯åªæœ‰ localhost å¯ä»¥ã€‚å®˜æ–¹çš„æ–‡ä»¶å°±å¯«åˆ°é€™è£¡ï¼Œä¹Ÿæ²’å¯«è§£æ³•ï¼Œä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±ç™¼ç¾çš„è§£æ±ºæ–¹æ³•ã€‚\n\nåŸºæœ¬ä¸Šé€™å€‹å•é¡Œæ˜¯ DNS è§£æç™¼ç”Ÿçš„å•é¡Œï¼ŒPWD ä¸€æ¬¡åªèƒ½è§£æä¸€ç¨®ç¶²å€ï¼Œé è¨­æ˜¯ `localhost`ï¼Œæˆ‘å€‘å¯ä»¥å»ä»–çš„è¨­å®šæª”ä¸­è®Šæ›´ä»–ã€‚\n\nè¨­å®šæª”æ¡ˆåœ¨ `play-with-docker/config/config.go` ä¹‹ä¸­ï¼Œå…¶ä¸­æœƒæœ‰ä¸€è¡Œé•·ä¸‹é¢çš„æ¨£å­ï¼š\n\n```go\nflag.StringVar(&PlaygroundDomain, \"playground-domain\", \"localhost\", \"Domain to use for the playground\")\n```\n\nå¯ä»¥çœ‹åˆ° PWD é€™è£¡å¯ä»¥è¨­å®šè¦è§£æçš„ç¶²å€å°±æ˜¯ `localhost`ï¼Œæ‰€ä»¥åªè¦å°‡æ­¤è®Šæ›´ç‚º `pwd.example.com`ï¼Œå°±å¯ä»¥ç”¨é€™å€‹ç¶²å€é€£ä¸Š PWDã€‚\n\n### é€£ä¸Šå®¹å™¨å…§çš„ Port\n\nå°±ç®—åšå®Œä¸Šé¢çš„è¨­å®šï¼Œä¹Ÿé †åˆ©äº†å•Ÿå‹• Docker å®¹å™¨ï¼Œä½†æœ€å¾Œæ‰ç™¼ç¾æƒ³è¦é€£ä¸Šç‰¹å®šçš„ Port é‚„æ˜¯æœƒå¤±æ•—ï¼Œå› ç‚ºä»–æ˜¯ç”¨å­ç¶²åŸŸçš„æ–¹å¼å»é€£ç·š `http://ip<hyphen-ip>-<session_jd>-<port>.direct.pwd.example.com`ï¼Œæ‰€ä»¥åˆæœƒé‡åˆ°ç„¡æ³•è§£æ DNS çš„æƒ…æ³ï¼Œæˆ‘çš„è§£æ³•æ˜¯åœ¨ DNS çš„è¨­å®šä¸­æŠŠ `pwd.example.com` å’Œ `*.pwd.example.com` éƒ½åŠ å…¥ A Recordï¼Œæ‰é †åˆ©é€£ä¸Šã€‚\n\n## Nginx Proxy Pass\n\né€™éƒ¨åˆ†æˆ‘ç ”ç©¶äº†è »ä¹…ï¼Œå¦‚æœè¦æŠŠ Server éš±è—åœ¨ Nginx å¾Œé¢ï¼Œè¦è¨­å®šçš„æ±è¥¿æ¯”è¼ƒè¤‡é›œï¼Œå› ç‚º PWD æœ‰ä½¿ç”¨åˆ° WebSocketï¼Œä½†æ˜¯é€™éƒ¨åˆ†æˆ‘æ²’æœ‰éå¤šçš„å¿ƒå¾—ï¼Œæ‰€ä»¥ç›´æ¥æŠŠæˆ‘çš„ `conf` æ”¾åœ¨ä¸‹é¢ï¼Œå®¹æˆ‘ä¸åšè§£é‡‹äº†ï¼š\n\n```nginx\nmap $http_upgrade $connection_upgrade {\n    default upgrade;\n    ''      close;\n}\n\nserver {\n    listen       80;\n    server_name  pwd.example.com *.pwd.example.com;\n\n    location / {\n        proxy_pass http://192.168.1.1:80;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\n```\n\nä¸Šé¢æ˜¯å‡è¨­ PWD Server è·‘åœ¨ `192.168.1.1:80` ä¸Šã€‚\n\n## Reference\n\n- [Play With Docker](https://github.com/play-with-docker/play-with-docker)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Docker/pwd-hosting.md","excerpt":"å­¸é Docker çš„äººéƒ½æ‡‰è©²æœ‰ç”¨é Docker Playground ä¾†å­¸ç¿’æˆ–æ˜¯æ¸¬è©¦éè»Ÿé«”ï¼Œä¸æƒ³åœ¨æœ¬æ©Ÿè·‘ Docker å¯ä»¥å…ˆç”¨ Docker Playground è©¦è©¦çœ‹è»Ÿé«”å¯ä¸å¯ä»¥è·‘ã€‚ å®˜æ–¹å·²ç¶“æœ‰æ¶è¨­ Docker Playgroundï¼Œå¯ä»¥è®“å¤§å®¶æ–¹ä¾¿ä½¿ç”¨ï¼Œä½†æˆ‘ä½¿ç”¨çš„æ™‚å¾Œå¸¸ç™¼ç¾ä»–æœƒ Lagï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ Docker Server çš„å•é¡Œï¼Œé‚„æ˜¯è‡ºç£ç¶²è·¯çš„å•é¡Œã€‚å‰›å¥½æœ€è¿‘æƒ³è¦æ•™ç¤¾åœ˜ Dockeâ€¦","frontmatter":{"title":"è‡ªæ¶ Play With Docker","date":"2021-06-05T16:08:29.000Z","draft":false,"tags":["docker","play-with-docker","nginx"],"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/f6db1841-15c5-40fc-7174-8a5e73647700/public","description":"å­¸é Docker çš„äººéƒ½æ‡‰è©²æœ‰ç”¨é Docker Playground ä¾†å­¸ç¿’æˆ–æ˜¯æ¸¬è©¦éè»Ÿé«”ï¼Œä¸æƒ³åœ¨æœ¬æ©Ÿè·‘ Docker å¯ä»¥å…ˆç”¨ Docker Playground è©¦è©¦çœ‹è»Ÿé«”å¯ä¸å¯ä»¥è·‘ã€‚"}}},{"node":{"id":"3017bf12-85be-53c2-8f3c-5b82fb78ad3c","html":"<p>This is my first <code class=\"language-text\">post</code> in hugo.</p>\n<p><a href=\"google.com\">google</a></p>\n<!--more-->\n<h2>Kotlin</h2>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> String<span class=\"token punctuation\">.</span><span class=\"token function\">hi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\"><span class=\"token keyword\">this</span></span></span><span class=\"token string\"> HI\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token function\">Test</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"13 13\"</span></span>\n    <span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"--------------------------------------------------------------------------------------------------\"</span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>meilisearch</p>\n<h3>å¼•ç”¨</h3>\n<blockquote>\n<p>å¼•å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨ç”¨å¼•ç”¨å¼•ç”¨</p>\n</blockquote>\n<h3>Test list</h3>\n<p>ol</p>\n<ol>\n<li>one</li>\n<li>two</li>\n<li>three</li>\n<li><a href=\"google.com\">google</a></li>\n</ol>\n<p>ul</p>\n<ul>\n<li>one</li>\n<li>two</li>\n<li>three</li>\n</ul>\n<p>ul ul</p>\n<ul>\n<li>one\n<ul>\n<li>one</li>\n</ul>\n</li>\n<li>two\n<ul>\n<li>two</li>\n<li>three</li>\n</ul>\n</li>\n<li>three\n<ul>\n<li>four\n-five</li>\n</ul>\n</li>\n</ul>\n<p>preview</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be2106f3-0557-4e94-803a-9dda63550300/preview\" alt=\"img\"></p>\n<p>public</p>\n<p><img src=\"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be2106f3-0557-4e94-803a-9dda63550300/public\" alt=\"img\"></p>","rawMarkdownBody":"\nThis is my first `post` in hugo.\n\n[google](google.com)\n\n<!--more-->\n\n## Kotlin\n\n```kotlin\nfun String.hi() = \"$this HI\"\n\nclass Test(var i: Int) {\n    var p = \"13 13\"\n    var p = \"--------------------------------------------------------------------------------------------------\"\n}\n```\n\nmeilisearch\n\n### å¼•ç”¨\n\n> å¼•å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨ç”¨å¼•ç”¨å¼•ç”¨\n\n### Test list\n\nol\n\n1. one\n2. two\n3. three\n4. [google](google.com)\n\nul\n\n- one\n- two\n- three\n\nul ul\n\n- one\n  - one\n- two\n  - two\n  - three\n- three\n  - four\n    -five\n\npreview\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be2106f3-0557-4e94-803a-9dda63550300/preview)\n\npublic\n\n![img](https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/be2106f3-0557-4e94-803a-9dda63550300/public)\n","fileAbsolutePath":"/home/runner/work/Blog/Blog/src/posts/Others/hello-world.md","excerpt":"This is my first  in hugo. google Kotlin meilisearch å¼•ç”¨ å¼•å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨å¼•ç”¨ç”¨å¼•ç”¨å¼•ç”¨ Test list ol one two three google ul one two three ul ul one one two two three three four\n-five preview imâ€¦","frontmatter":{"title":"Hello World","date":"2021-06-05T11:15:18.000Z","draft":false,"tags":null,"image":"https://imagedelivery.net/cdkaXPuFls5qlrh3GM4hfA/c5285615-fab6-46e7-b548-1528e0be0d00/large","description":"Hello World. This is a test post."}}}]}},"pageContext":{}},"staticQueryHashes":[]}